/* This file was generated by the Hex-Rays decompiler version 8.3.0.230608.
   Copyright (c) 2007-2021 Hex-Rays <info@hex-rays.com>

   Detected compiler: Visual C++
*/

#include <windows.h>
#include <math.h>
#include <defs.h>

#include <stdarg.h>


//-------------------------------------------------------------------------
// Function declarations

#define __thiscall __cdecl // Test compile in C mode

int sub_401000();
_DWORD *sub_40100A();
void __cdecl sub_401020(); // idb
_DWORD *__thiscall sub_40102A(_DWORD *this, struct CWnd *a2);
void *__thiscall sub_4010C2(void *this, char a2);
void __thiscall sub_4010DE(int this);
void __thiscall sub_401143(int this, struct CDataExchange *a2);
int (**sub_401195())();
int __thiscall sub_40119B(HWND *this);
UINT_PTR __thiscall sub_40120A(HWND *this);
int __thiscall sub_401267(HWND *this);
int __thiscall sub_40142D(_DWORD *this, int a2);
int __thiscall sub_40143A(HWND *this);
UINT_PTR __thiscall sub_401446(HWND *this);
UINT_PTR __thiscall sub_4014A3(HWND *this);
void __thiscall sub_401503(int this);
CButton *__thiscall sub_401773(CButton *this, char a2);
CComboBox *__thiscall sub_40178F(CComboBox *this, char a2);
// int __thiscall CComboBox::GetCurSel(CComboBox *__hidden this); idb
CEdit *__thiscall sub_4017BE(CEdit *this, char a2);
void sub_4017DF();
void sub_4017F4();
void sub_401809();
void sub_40181E();
void sub_401833();
WCHAR *__thiscall sub_401848(void *this);
void sub_40186D();
void sub_401882();
void sub_401897();
void sub_4018AC();
void sub_4018C1();
void sub_4018D6();
void sub_4018EB();
void sub_401900();
void sub_401915();
void sub_40192A();
int sub_40193A();
WCHAR *sub_401944();
void __cdecl sub_40195A(); // idb
void sub_401974();
WCHAR *__thiscall sub_401989(void *this);
WCHAR *__thiscall sub_4019AE(void *this);
WCHAR *__thiscall sub_4019D3(void *this);
_DWORD *sub_4019F8();
int sub_401A1D();
CString *sub_401A27();
void __cdecl sub_401A43(); // idb
int sub_401A4D();
CString *sub_401A57();
void __cdecl sub_401A73(); // idb
int sub_401A7D();
CString *sub_401A87();
void __cdecl sub_401AA3(); // idb
int __thiscall sub_401AAD(int this, struct CWnd *a2);
_DWORD *__thiscall sub_401D2E(_DWORD *this, char a2);
void __thiscall sub_401D4A(_DWORD *this);
void __thiscall sub_401DBB(int this, struct CDataExchange *a2);
int (**sub_401DD3())();
int __thiscall sub_401DD9(int *this);
HANDLE __stdcall sub_401E60(unsigned __int16 a1, int a2);
int __thiscall sub_401EE5(CWnd *this, unsigned int a2, int a3); // idb
void __thiscall sub_40213D(int this, int a2);
LRESULT __thiscall sub_4028AD(_DWORD *this, HWND hWnd);
int __thiscall sub_40290B(_DWORD *this, char a2);
HWND __thiscall sub_402952(HWND *this, int nIDDlgItem);
LRESULT __thiscall sub_402962(HWND *this, int nIDDlgItem, WPARAM wParam);
int __thiscall sub_402980(HWND *this);
LPWSTR __stdcall sub_402A43(double a1, LPWSTR a2);
void __thiscall sub_402AB3(HWND *this, int a2);
void __thiscall sub_402BAB(HWND *this, int a2);
CString *__stdcall sub_402E58(CString *a1, int a2);
BOOL __thiscall sub_402EC9(int this, int a2, int a3);
BOOL __thiscall sub_403077(int this);
void __thiscall sub_403142(int this);
void __thiscall sub_4035E3(int this);
UINT_PTR __thiscall sub_403633(HWND *this, int a2);
int __thiscall sub_403673(_WORD *this, int a2);
int __stdcall sub_4036DE(int a1);
int __thiscall sub_40383C(_DWORD *this, int a2);
void __thiscall sub_403853(int this, int a2);
int __thiscall sub_403980(HWND *this);
void sub_403A95();
int __thiscall sub_403BBA(int *this, LPCWSTR lpString2, int a3);
int __thiscall sub_403C02(int *this, LPCWSTR lpString1);
BOOL __thiscall sub_403C3D(CWnd *this);
int sub_403EDB();
WCHAR *__thiscall sub_403F67(WCHAR *this, int a2, char a3);
void __thiscall sub_403FAF(_WORD *this, int a2, LPCWSTR lpString2);
int __thiscall sub_403FDD(WCHAR *this, HWND hWnd);
void __thiscall sub_40401F(WCHAR *this, char a2, LPCWSTR lpString2);
void __thiscall sub_40407F(LPCWSTR lpKeyName);
int __thiscall sub_4040AA(int this, struct CWnd *a2);
void *__thiscall sub_40410D(void *this, char a2);
void __thiscall sub_404129(int this, struct CDataExchange *a2);
int (**sub_40413E())();
void __thiscall sub_404144(int this, LPCWSTR lpString);
int __thiscall sub_404244(_DWORD *this, char a2, char a3, int a4);
int __thiscall sub_4042AB(int this);
// struct CFont *__thiscall CWnd::GetFont(CWnd *__hidden this); idb
CStatic *__thiscall sub_4043F5(CStatic *this, char a2);
_DWORD *__thiscall sub_404411(_DWORD *this, struct CWnd *a2);
int __thiscall sub_40446C(CWnd *this, int a2, unsigned __int16 *a3, unsigned int a4, struct tagRECT *a5, struct CWnd *a6, unsigned int a7, int a8);
void *__thiscall sub_404491(void *this, char a2);
void __thiscall sub_4044AD(int this);
CWnd *__thiscall sub_4044F1(CWnd *this, char a2);
void __thiscall CWnd::~CWnd(CWnd *__hidden this); // idb
void __thiscall sub_404512(int this, struct CDataExchange *a2);
int (**sub_404527())();
int __thiscall sub_40452D(_DWORD *this);
void __stdcall sub_404742(BYTE Data);
int __thiscall sub_40486E(CDialog *this, unsigned int a2, unsigned int a3, int a4);
int __thiscall sub_4048AE(int this);
void __thiscall sub_4048FF(_DWORD *this);
int __thiscall sub_404A8F(void *this, CString *a2);
void __thiscall sub_404ADB(_DWORD *this, int a2, void *ppvData, ULONG cElements, char a5);
int __thiscall sub_404C39(_DWORD *this, char a2, const char *ppvData);
int sub_404CAA();
int (**sub_404CB0())();
int __cdecl sub_404CB6(CString *a1, int a2, int a3, int *a4);
int __cdecl sub_404D3D(_DWORD *a1, const wchar_t *a2, int a3);
int __cdecl sub_404D9D(int a1, CString *a2); // idb
CString *sub_404E84(CString *a1, ...);
int __cdecl sub_404EFD(LPCWSTR lpFileName, int a2, int a3); // idb
void __thiscall sub_404F82(int this, int a2, const unsigned __int16 **Block);
BOOL __cdecl sub_40564F(int a1, char a2, int a3);
int __stdcall sub_405738(LPCWSTR lpText, CString *a2); // idb
void sub_405899();
HINSTANCE __cdecl sub_405AD7(HWND hwnd, LPCWSTR lpOperation, LPCWSTR lpFile, LPCWSTR lpParameters, LPCWSTR lpDirectory, INT nShowCmd);
BOOL __stdcall EnumFunc(HWND hWnd, LPARAM a2); // idb
BOOL sub_405B38();
int sub_405B46();
int __thiscall sub_406043(_DWORD *this, LPCWSTR lpString, wchar_t *SubStr);
int __thiscall sub_4061B5(int *this, LPCWSTR lpString1);
int __thiscall sub_4061EE(int this, char a2, char a3);
int __thiscall sub_40627F(_DWORD *this, const wchar_t **a2);
void __thiscall sub_4062C2(int this);
CString *__thiscall sub_406316(_DWORD *this, int a2, struct CString *a3, struct CString *a4);
CString *__thiscall sub_406347(CString *this, struct CString *a2);
LSTATUS __thiscall sub_406376(HKEY *this, HKEY hKey, LPCWSTR lpSubKey, REGSAM samDesired);
CString *__cdecl sub_4063B4(CString *a1, int a2);
WCHAR *__thiscall sub_406428(void *this);
WCHAR *__thiscall sub_40644D(void *this);
WCHAR *__thiscall sub_406472(void *this);
WCHAR *__thiscall sub_406497(void *this);
int __thiscall sub_4064B7(int this, struct CWnd *a2);
_DWORD *__thiscall sub_4065A7(_DWORD *this, char a2);
void __thiscall sub_4065C8(_DWORD *this);
void __thiscall sub_406669(int this, struct CDataExchange *a2);
int (**sub_4066E2())();
int __thiscall sub_4066E8(HWND *this);
int __thiscall sub_4066F4(HWND *this);
int __thiscall sub_40692A(HWND *this);
int __thiscall sub_406A07(HWND *this);
int __thiscall sub_406B45(void *this);
void __thiscall sub_406BCF(int this);
int __thiscall sub_406FA8(_DWORD *this, int a2);
void __thiscall sub_406FD3(int this);
_DWORD *__thiscall sub_407034(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int __thiscall sub_4070CB(int this, int a2, _DWORD *a3);
_DWORD *__thiscall sub_407169(_DWORD *this, _DWORD *a2, _DWORD *a3);
void __stdcall sub_407400(void **a1);
int __thiscall sub_407436(_DWORD *this);
_DWORD *__thiscall sub_4074C1(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5);
_DWORD *__thiscall sub_407612(_DWORD *this, int a2);
int __thiscall sub_407656(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_40769C(void *this);
_DWORD *__thiscall sub_4076D8(void *this);
_DWORD *__cdecl sub_40770E(_DWORD *a1, _DWORD *a2);
CProgressCtrl *__thiscall sub_407725(CProgressCtrl *this, char a2);
int sub_407741();
_DWORD *__thiscall sub_407788(_DWORD *this);
_DWORD *__thiscall sub_4077A6(_DWORD *this, char a2);
void __thiscall sub_4077C2(_DWORD *this);
int __stdcall sub_4077C9(int a1);
int __thiscall sub_4077CF(int this);
int __stdcall sub_4078FB(_DWORD *a1, int a2, int a3, OLECHAR *psz);
_DWORD *__stdcall sub_407953(_DWORD *a1, int a2, int a3);
int __stdcall sub_407A38(_DWORD *a1, int a2, OLECHAR *psz);
BSTR **__thiscall sub_407B38(BSTR **this, OLECHAR *psz);
BSTR **__thiscall sub_407B9F(BSTR **this, OLECHAR *psz);
BSTR *__thiscall sub_407BEF(BSTR *this, OLECHAR *psz);
int __thiscall sub_407C23(volatile LONG *this);
void __thiscall sub_407C50(int this);
void __cdecl sub_407C70(); // idb
int sub_407C7E();
int (**sub_407C84())();
CWinApp *__thiscall sub_407C9E(CWinApp *this, char a2);
void __thiscall CWinApp::~CWinApp(CWinApp *__hidden this); // idb
int sub_407CBF();
_DWORD *sub_407CC9();
void __cdecl sub_407CDF(); // idb
BOOL __stdcall sub_407CE9(HWND hWnd, HWND *a2);
void __cdecl sub_407D2C(int a1);
void __cdecl sub_407E7E(int a1);
CString *__cdecl sub_407F67(CString *a1, char a2, unsigned __int16 a3);
int __thiscall sub_408021(CWinApp *this);
int sub_408285();
int sub_4082EB();
_DWORD *sub_4082F5();
void __cdecl sub_40830B(); // idb
int sub_408315();
_DWORD *sub_40831F();
void __cdecl sub_408335(); // idb
int sub_40833F();
void *sub_408349();
void __cdecl sub_40835F(); // idb
WCHAR *__thiscall sub_40836E(void *this);
WCHAR *__thiscall sub_408393(void *this);
WCHAR *__thiscall sub_4083B8(void *this);
WCHAR *__thiscall sub_4083DD(void *this);
WCHAR *__thiscall sub_408402(void *this);
WCHAR *__thiscall sub_408427(void *this);
WCHAR *__thiscall sub_40844C(void *this);
WCHAR *__thiscall sub_408471(void *this);
WCHAR *__thiscall sub_408496(void *this);
WCHAR *__thiscall sub_4084BB(void *this);
WCHAR *__thiscall sub_4084E0(void *this);
WCHAR *__thiscall sub_408505(void *this);
WCHAR *__thiscall sub_40852A(void *this);
WCHAR *__thiscall sub_40854F(void *this);
void sub_408574();
_DWORD *__thiscall sub_408584(_DWORD *this, struct CWnd *a2);
_DWORD *__thiscall sub_40865C(_DWORD *this, char a2);
void __thiscall CDialog::~CDialog(CDialog *__hidden this); // idb
void __thiscall sub_40867D(_DWORD *this);
void __thiscall sub_40873C(_DWORD *this);
void __thiscall sub_40881C(int this);
void __thiscall sub_408886(_DWORD *this);
UINT __cdecl sub_40892C(UINT uiParam);
void __thiscall sub_408941(int this, struct CDataExchange *a2);
BOOL sub_408972();
int (**sub_40898A())();
void __cdecl sub_408990(unsigned int Frequency, unsigned int Duration);
// void __cdecl _beep(unsigned int Frequency, unsigned int Duration);
HWND __cdecl sub_4089F5(LPARAM lParam);
int __thiscall sub_408A14(int this);
int __thiscall sub_408DB1(HWND *this);
HWND __thiscall sub_408F30(HWND *this, int nIDDlgItem);
int __thiscall sub_408F40(CWnd *this); // idb
void __thiscall sub_408F61(CDialog *this);
void __thiscall sub_408F6F(HWND *this);
BOOL __cdecl sub_408FAC(HMENU hMenu);
HMENU sub_4090DA();
HMENU __thiscall sub_40919D(void *this);
void __thiscall sub_4096DE(int this);
HANDLE __cdecl sub_4099B3(unsigned __int16 a1);
void __thiscall sub_4099CE(HWND *this);
void __cdecl sub_409A77(char a1);
char __thiscall sub_409AF2(UINT *this, int a2);
int __thiscall sub_409BE3(int this, LPCWSTR lpFile, LPCWSTR a3);
LRESULT __thiscall sub_40A21B(void *this, WPARAM a2);
LRESULT __thiscall sub_40A22C(int this);
int __thiscall sub_40A40B(int this);
int __thiscall sub_40A521(HWND *this, int a2);
void __thiscall sub_40A67A(HWND *this);
int __thiscall sub_40A6C5(int *this, int a2);
int sub_40A750();
DWORD __stdcall sub_40A76C(HMENU hMenu);
int __thiscall sub_40A8A3(HWND *this, unsigned int a2, unsigned int a3, int a4);
void __thiscall sub_40AA13(HWND *this, int a2);
int __thiscall sub_40AAA6(HWND *this);
int sub_40AC29();
int __thiscall sub_40B019(void *this, HWND hWnd);
void __thiscall sub_40B219(CWnd *this);
void sub_40B57D();
void sub_40B752(int a1, ...);
int __thiscall sub_40B75B(CWnd *this);
void __thiscall sub_40B7EC(int this);
_DWORD *__thiscall sub_40B84D(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
_DWORD *__thiscall sub_40B8E4(_DWORD *this, _DWORD *a2, _DWORD *a3);
void __stdcall sub_40BB7B(void **a1);
_DWORD *__thiscall sub_40BBB1(_DWORD *this, int a2);
int __thiscall sub_40BBF5(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_40BC3B(void *this);
CDialog *__thiscall sub_40BC71(CDialog *this, struct CWnd *a2);
CDialog *__thiscall sub_40BC8E(CDialog *this, char a2);
int (**sub_40BCAD())();
int __thiscall sub_40BCB3(HWND *this);
void __thiscall sub_40BD95(int this, int a2);
int __thiscall sub_40BDF7(char *this, char *a2, const char *a3, unsigned int ThrdAddr);
int __thiscall sub_40BF31(char *ArgList, int a2, int a3);
int __thiscall sub_40C097(int this);
int __thiscall sub_40C1B2(int this);
void __thiscall sub_40C1DF(int this, HANDLE hEvent, SOCKET s, void *a4, int a5);
int __stdcall sub_40C2A6(HANDLE hEvent, HANDLE a2, SOCKET s); // idb
unsigned int __stdcall sub_40C2E0(signed int s);
unsigned int __stdcall StartAddress(double **a1);
unsigned int __stdcall sub_40CAEF(char *a1);
void __thiscall sub_40CBD1(int this);
unsigned int __thiscall sub_40CBF4(_BYTE **this, _BYTE *a2);
_DWORD *__thiscall sub_40CC05(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4);
_DWORD *__stdcall sub_40CC43(_DWORD *a1, _DWORD *a2);
_DWORD *__thiscall sub_40CC67(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4);
_DWORD *__stdcall sub_40CC9F(_DWORD *a1, _DWORD *a2);
unsigned int __thiscall sub_40CCC3(int this, _BYTE *a2, unsigned int a3, _BYTE *a4);
void *__cdecl sub_40CF12(_BYTE *a1, _BYTE *a2);
int __thiscall sub_40CF5F(int this, char a2, int a3, int a4, int a5, char a6, int a7, int a8, int a9, int a10, int a11);
int __thiscall sub_40D045(int this, char *a2, const char *a3, const char *a4, int a5);
int __thiscall sub_40D1D4(int this);
_DWORD *__thiscall sub_40D263(_DWORD *this, char a2);
void __thiscall sub_40D289(_DWORD *this);
int __cdecl sub_40D2D4(int a1);
int __cdecl sub_40D2DE(int a1);
char *__cdecl sub_40D2E8(_DWORD *a1);
int __cdecl sub_40D2F1(int a1);
char *__cdecl sub_40D2FB(_DWORD *a1);
LPSTR __cdecl sub_40D30F(LPCWCH lpWideCharStr, LPSTR lpMultiByteStr, int cbMultiByte);
void __thiscall sub_40D32E(_DWORD *this, int);
int __thiscall sub_40D603(_DWORD *this);
int __thiscall sub_40D7E7(_DWORD *this);
int __thiscall sub_40D7EC(_DWORD *this, CString *a2, int a3);
unsigned int __thiscall sub_40D838(_DWORD *this, int a2);
int __thiscall sub_40D8DE(void *this, int *a2);
void __thiscall sub_40D94B(int this);
int __thiscall sub_40D9AC(void *this, int *a2);
void __thiscall sub_40D9D5(int this);
void __thiscall sub_40DA36(int this);
_DWORD *__thiscall sub_40DA3E(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
_DWORD *__thiscall sub_40DAB5(int this);
int *__thiscall sub_40DAC9(_DWORD *this, int *a2, _DWORD *a3);
_DWORD *__thiscall sub_40DB03(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
int *__thiscall sub_40DB9A(_DWORD *this, int *a2, _DWORD *a3);
int __thiscall sub_40DBD4(int this, int a2, _DWORD *a3);
_DWORD *__thiscall sub_40DC72(_DWORD *this, _DWORD *a2, _DWORD *a3);
void __stdcall sub_40DF12(void **a1);
int __thiscall sub_40DF50(_DWORD *this);
int __thiscall sub_40DFDB(int this, int a2, _DWORD *a3);
_DWORD *__thiscall sub_40E079(_DWORD *this, _DWORD *a2, _DWORD *a3);
void __stdcall sub_40E310(void **a1);
int __thiscall sub_40E346(_DWORD *this);
_DWORD *__thiscall sub_40E3D1(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5);
_DWORD *__thiscall sub_40E522(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_40E54F(_DWORD *this, int a2);
int __thiscall sub_40E593(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_40E5D9(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5);
_DWORD *__thiscall sub_40E72A(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_40E757(_DWORD *this, int a2);
int __thiscall sub_40E79B(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_40E7E1(void *this);
_DWORD *__thiscall sub_40E81D(void *this);
_DWORD *__thiscall sub_40E853(void *this);
_DWORD *__thiscall sub_40E88F(void *this);
CString *__cdecl sub_40E8C5(_DWORD *a1, _DWORD *a2);
int __thiscall sub_40E8FD(int this, struct CWnd *a2);
_DWORD *__thiscall sub_40EA21(_DWORD *this, char a2);
void __thiscall sub_40EA3D(int this, struct CDataExchange *a2);
int (**sub_40EAB6())();
int __thiscall sub_40EABC(_DWORD *this, int a2);
int __thiscall sub_40EACE(HWND *this);
UINT_PTR __thiscall sub_40EC74(HWND *this);
int __thiscall sub_40ED70(int this);
int __thiscall sub_40ED7C(int this);
CString *__cdecl sub_40F127(CString *a1, LPCWSTR lpValue, int a3, int a4);
CString *__cdecl sub_40F2BC(CString *a1, double a2, int a3, int a4);
int __thiscall sub_40F324(void *this);
void __thiscall sub_40F381(int this);
int __thiscall sub_40F8A0(void *this, int *a2);
int __thiscall sub_40F8DA(int this, int a2, _DWORD *a3);
int __thiscall sub_40F978(_DWORD *this);
_DWORD *__thiscall sub_40FA03(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5);
_DWORD *__thiscall sub_40FB54(void *this);
void __cdecl sub_40FB90(_DWORD *a1, _DWORD *a2);
WCHAR *__thiscall sub_40FBAA(void *this);
WCHAR *__thiscall sub_40FBCF(void *this);
WCHAR *__thiscall sub_40FBF4(void *this);
WCHAR *__thiscall sub_40FC19(void *this);
WCHAR *__thiscall sub_40FC3E(void *this);
BOOL __cdecl sub_40FC5E(int a1);
void sub_40FCAA();
int sub_40FDF9();
BOOL __cdecl sub_40FE15(UINT uiParam);
int sub_40FE26();
CString *sub_40FE30();
// void __cdecl unknown_libname_7(); idb
int sub_40FE67();
CString *sub_40FE71();
// void __cdecl unknown_libname_8(); idb
int sub_40FEA8();
CString *sub_40FEB2();
// void __cdecl unknown_libname_9(); idb
int sub_40FEE9();
CString *sub_40FEF3();
// void __cdecl unknown_libname_10(); idb
int sub_40FF2A();
CString *sub_40FF34();
void __cdecl sub_40FF50(); // idb
CDialog *__thiscall sub_40FF6B(CDialog *this, struct CWnd *a2);
int (**sub_40FF88())();
int __thiscall nullsub_1(_DWORD); // weak
int __thiscall sub_40FF8F(int this);
void __thiscall loc_410056(void *); // idb
_DWORD *__thiscall sub_410066(_DWORD *this, char a2);
void __thiscall CString::~CString(CString *__hidden this); // idb
void __thiscall sub_410087(_DWORD *this);
int (__stdcall *__thiscall sub_4100A0(char *this, int a2))(_DWORD, _DWORD, _DWORD);
// int __usercall sub_4100D2@<eax>(char *a1@<ecx>, int a2@<edi>);
int __thiscall sub_4102C5(int this, int a2, int a3);
int __thiscall sub_41036E(_DWORD *this);
void *__thiscall sub_4103EF(void *this);
char sub_4103FD();
bool __stdcall sub_410405(BOOL fForce);
bool __stdcall sub_410418(BOOL fForce);
BOOL __thiscall sub_41042B(UINT *this, int a2);
BOOL __thiscall sub_41044D(UINT *this, int a2);
BOOL __thiscall sub_410473(UINT *this, int a2);
char __stdcall sub_410499(char a1);
bool sub_4105AE();
LRESULT sub_4105CF();
LRESULT sub_4105E7();
int sub_4105FF();
HINSTANCE sub_410623();
HINSTANCE sub_410652();
HINSTANCE sub_410681();
int __thiscall sub_41069D(int this, struct CWnd *a2);
void *__thiscall sub_41070C(void *this, char a2);
void __thiscall sub_410728(int this);
void __thiscall sub_410784(int this, struct CDataExchange *a2);
int (**sub_410799())();
void __thiscall sub_41079F(HWND *this);
void __thiscall sub_4107C9(HWND *this);
int __thiscall sub_4107EC(int this, LPCWSTR lpString);
int __thiscall sub_4108A4(int this, int a2, int a3);
int __thiscall sub_4109F0(int this);
void __thiscall sub_410B02(_DWORD *this);
int sub_410C29();
int sub_410C33();
void __cdecl sub_410C4C(); // idb
void sub_410C56(int a1, ...);
WCHAR *__thiscall sub_410CC9(void *this);
WCHAR *__thiscall sub_410CEE(void *this);
WCHAR *__thiscall sub_410D13(void *this);
WCHAR *__thiscall sub_410D38(void *this);
WCHAR *__thiscall sub_410D5D(void *this);
WCHAR *__thiscall sub_410D82(void *this);
WCHAR *__thiscall sub_410DA7(void *this);
_DWORD *__thiscall sub_410DC7(_DWORD *this, struct CWnd *a2);
_DWORD *__thiscall sub_410EDA(_DWORD *this, char a2);
void __thiscall sub_410EF6(int this, struct CDataExchange *a2);
int (**sub_410F5A())();
void __thiscall sub_410F60(HWND *this);
int sub_411106();
CDialog *sub_411110();
void __cdecl sub_411129(); // idb
int __thiscall sub_411133(HWND *this);
void __thiscall sub_41139E(HWND *this);
void __thiscall sub_411606(HWND *this);
int __thiscall sub_4116D4(HWND *this);
int __thiscall sub_411867(_DWORD *this, int a2);
LRESULT __thiscall sub_411874(HWND *this);
LRESULT __thiscall sub_4118AE(HWND *this, int a2);
HMENU __cdecl sub_411A30(int a1, int a2, UINT_PTR a3);
void __thiscall sub_411B9C(HWND *this, HWND hWnd);
int sub_411FA6();
void *sub_411FB0();
void __cdecl sub_411FC6(); // idb
WCHAR *__thiscall sub_411FD5(void *this);
WCHAR *__thiscall sub_411FFA(void *this);
_DWORD *__thiscall sub_41201A(_DWORD *this, struct CWnd *a2);
void *__thiscall sub_4120B3(void *this, char a2);
void __thiscall sub_4120CF(int this, struct CDataExchange *a2);
int (**sub_412121())();
void __thiscall sub_412127(HWND *this);
void __cdecl sub_4121BC(HWND hWnd);
void __cdecl sub_412397(HWND hWnd);
void __thiscall sub_4123A2(int this);
LRESULT __cdecl sub_41240E(HWND hDlg, __int16 a2, __int16 a3, __int16 a4);
__int64 __cdecl sub_4124FA(__int64 a1);
int __thiscall sub_41250D(int this);
LPWSTR __cdecl sub_41265A(double a1, LPWSTR a2);
void __thiscall sub_4126BC(int this, HWND hDlg);
int __cdecl sub_4128F4(HWND hDlg, int nIDDlgItem, int a3, int a4); // idb
BOOL __cdecl sub_41297E(HWND hDlg, int nIDDlgItem, int a3, LPFILETIME lpFileTime);
__int64 __cdecl sub_412A2F(__int64 *a1, __int64 *a2);
__int64 __stdcall sub_412A75(HWND hDlg);
LRESULT __cdecl sub_412B35(HWND hDlg, int a2, int a3, int a4);
HMENU __stdcall sub_412BD2(int a1, int a2, UINT_PTR a3);
int __thiscall sub_412D40(HWND *this, HWND hWnd);
int __thiscall sub_412E2E(_DWORD *this, int a2);
LRESULT __thiscall sub_412E3B(HWND *this);
CWnd *sub_412E89();
int sub_412EC7();
char **sub_412ECD();
void __thiscall sub_412ED3(CWnd *this, int a2, int a3, int a4, int a5, int a6);
CWnd *__thiscall sub_412EFF(CWnd *this);
void __thiscall sub_412F20(CWnd *this, int a2, int a3, int a4, int a5, int a6);
int sub_412F4F();
int __thiscall sub_412FF8(_DWORD *this);
void __fastcall sub_412FFF(int a1);
int __thiscall sub_413147(WCHAR *lpText);
void __thiscall sub_4131B9(int this, int a2);
void __thiscall sub_413408(int this);
void sub_41358C();
_DWORD *__thiscall sub_4135F5(_DWORD *this, char a2);
void __thiscall sub_413611(_DWORD *this);
BOOL __stdcall sub_413618(struct _SYSTEM_POWER_STATUS *a1);
HMODULE __cdecl sub_413664(HWND a1);
CWnd *__thiscall sub_413697(CWnd *this);
CTabCtrl *__thiscall sub_4136A9(CTabCtrl *this, char a2);
void __thiscall sub_4136C5(CTabCtrl *this);
int sub_4136D0();
int (**sub_4136D6())();
void __thiscall sub_4136DC(HWND *this, HWND a2);
int __stdcall sub_41377D(int a1, int a2, int a3, int a4);
LRESULT __thiscall sub_41379E(HWND *this, WPARAM wParam, int a3);
LRESULT __thiscall sub_4137EE(HWND *this, WPARAM wParam, int a3);
LRESULT __thiscall sub_413828(HWND *this, WPARAM wParam, LPARAM lParam);
int sub_413850();
CString *sub_41385A();
void __cdecl sub_413876(); // idb
int sub_413880();
CString *sub_41388A();
void __cdecl sub_4138A0(); // idb
int sub_4138AA();
CString *sub_4138B4();
void __cdecl sub_4138D0(); // idb
int sub_4138DA();
CString *sub_4138E4();
void __cdecl sub_4138FA(); // idb
CString *__cdecl sub_413904(CString *a1);
void __cdecl loc_4139A4(); // idb
CString *__cdecl sub_4139AE(CString *a1);
void __cdecl loc_413A80(); // idb
int __cdecl sub_413A8A(LPCWSTR lpFileName); // idb
CString *__cdecl sub_413AE6(CString *a1);
int sub_413B5D();
BOOL __cdecl sub_414077(LPCWSTR lpAppName, LPCWSTR lpKeyName, LPCWSTR lpString, LPCWSTR lpFileName);
BOOL __cdecl sub_414098(LPCWSTR lpAppName, LPCWSTR lpKeyName, int a3, LPCWSTR lpFileName);
DWORD __cdecl sub_4140EC(LPCWSTR lpAppName, LPCWSTR lpKeyName, int a3, WCHAR *lpDefault, LPCWSTR lpFileName, DWORD nSize);
int __cdecl sub_414113(LPCWSTR lpAppName, LPCWSTR lpKeyName, int a3, int a4, int a5); // idb
BOOL __cdecl sub_4141BE(LPCWSTR lpKeyName, int a2);
int __cdecl sub_4141D6(LPCWSTR lpKeyName, int a2); // idb
DWORD __cdecl sub_4141F0(LPCWSTR lpKeyName, WCHAR *lpDefault);
BOOL __cdecl sub_414211(LPCWSTR lpKeyName, LPCWSTR lpString);
void sub_414229();
int __cdecl sub_414379(LPCWSTR lpText); // idb
CString *sub_4143D0(CString *a1, ...);
CString *sub_414463(CString *a1, ...);
CString *__cdecl sub_4144DC(CString *a1);
void __cdecl loc_4145AE(); // idb
CString *__cdecl sub_4145B8(CString *a1);
CHAR *__cdecl sub_41473E(CString *a1);
int sub_41476A();
CString *sub_414774();
// void __cdecl unknown_libname_11(); idb
int sub_4147A5();
wchar_t *__cdecl sub_414B21(LPCWSTR lpString, void *a2);
int __cdecl sub_414BAC(int a1);
int sub_414BB8();
CString *sub_414BC2();
void __cdecl sub_414BD8(); // idb
unsigned __int16 *__cdecl sub_414BE2(int a1);
void sub_414C59();
int __cdecl sub_414FEB(wchar_t *FileName, CString *a2); // idb
void __cdecl sub_415116(unsigned __int16 *a1);
void sub_4152EF();
_DWORD *__thiscall sub_41539A(_DWORD *this);
int __thiscall sub_4153AD(_DWORD); // weak
char __cdecl sub_4153B2(int *a1);
char __cdecl sub_415439(int a1, int a2);
HWND __thiscall sub_4154A4(unsigned __int16 *this);
_DWORD *__thiscall sub_41558D(_DWORD *this);
_DWORD *__thiscall sub_4155A2(_DWORD *this, char a2);
void __thiscall sub_4155BE(_DWORD *this);
int __cdecl sub_4155C5(LPCWSTR lpFileName); // idb
int __cdecl sub_4155FD(WCHAR *lpString);
BOOL __thiscall sub_41571D(_DWORD *this, int a2, WCHAR *lpString2);
int __thiscall sub_415749(_DWORD *this);
int __thiscall sub_415786(_DWORD *this, int a2);
LPCWSTR __stdcall sub_4157B7(WCHAR *lpString);
BOOL __cdecl sub_415800(LPCWSTR lpString2, const WCHAR *a2, const WCHAR *a3, int a4);
BOOL __stdcall sub_4158A5(int a1, WCHAR *lpString2);
int sub_415B38();
LRESULT __cdecl sub_415B3E(HWND hWnd, int a2, LPARAM wParam, int a4, int a5);
HWND __cdecl sub_415BCD(DWORD dwExStyle, DWORD dwStyle, HWND hWndParent, int nIDDlgItem);
_DWORD *__cdecl sub_415D27(_DWORD *a1, HWND hWnd, WPARAM wParam);
void __cdecl sub_415D63(HWND hWnd);
HRESULT __cdecl sub_415DEA(HWND a1, const WCHAR *a2, const WCHAR *a3);
int sub_415E25();
_DWORD *__thiscall sub_415E57(_DWORD *this);
_DWORD *__thiscall sub_415E6E(_DWORD *this, char a2);
void __thiscall sub_415E8A(_DWORD *this);
int __thiscall sub_415EB3(_DWORD *this);
int __thiscall sub_415EB7(_DWORD *this);
void *__thiscall sub_415EBB(int this, unsigned int a2);
void *__thiscall sub_415F05(int this, unsigned int a2);
int __thiscall sub_415F4F(_DWORD *this, int a2, unsigned int a3);
void *__thiscall sub_415F96(void **this, void *Src, size_t Size);
int __thiscall sub_415FBC(_DWORD *this, int a2, unsigned int a3);
void __thiscall sub_416080(_DWORD *this, LPCSTR lpString);
int __thiscall sub_4160A1(_DWORD *this, int a2, int a3);
void __thiscall sub_4161BE(_DWORD *this, LPCSTR lpString);
int __thiscall sub_4161DF(void *this, int a2, char *a3);
int __thiscall sub_416216(void *this, int a2, _BYTE *a3);
char __stdcall sub_416263(_BYTE *a1, _BYTE *a2);
char __stdcall sub_4162AE(_BYTE *a1, _BYTE *a2);
BOOL __stdcall sub_4162F7(unsigned __int8 a1);
char sub_416311();
_DWORD *__thiscall sub_416361(_DWORD *this, char a2);
void __thiscall sub_41637D(_DWORD *this);
HICON __stdcall sub_416384(unsigned __int16 a1, int a2);
_DWORD *__thiscall sub_4163E6(_DWORD *this);
_DWORD *__thiscall sub_4164E9(_DWORD *this, char a2);
HFONT __thiscall sub_416505(int this);
void __thiscall sub_41656B(_DWORD *this);
int __stdcall sub_416576(int a1, int a2, int a3, LPARAM a4, int a5); // idb
int __stdcall sub_416591(HGDIOBJ *a1, int a2, int a3, HMENU hMenu, _DWORD *item);
int __thiscall sub_41661E(HGDIOBJ *this, _DWORD *a2);
BOOL __thiscall sub_41674C(_DWORD *this, int cInitial);
int __thiscall sub_41677C(int this, HICON hicon, int a3);
HGDIOBJ __thiscall sub_4167CB(_DWORD *this, int a2);
COLORREF __stdcall sub_416B24(HDC hdc, RECT *lprect, COLORREF color);
_DWORD __stdcall nullsub_2(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD); // weak
COLORREF __cdecl sub_416B5D(HDC hdc, int x, int a3, COLORREF color, int a5);
int __thiscall sub_416BB2(_DWORD *this, HDC hdc, _DWORD *a3, int a4, int a5, int a6, int a7);
char __cdecl sub_416C17(HDC hdc, int a2, int a3, int a4, int a5, unsigned __int8 a6, unsigned __int8 a7, unsigned __int8 a8, COLORREF color, unsigned __int8 a10, unsigned __int8 a11);
HGDIOBJ __thiscall sub_416D0E(int this, HDC hdc, LPRECT lprc, LPCWSTR lpString, COLORREF color);
int __thiscall sub_416E0C(_DWORD *this, int a2, HMENU hMenu, int a4, _DWORD *item);
int __thiscall sub_416F7A(_DWORD *this, HDC hDC, RECT rc, int a4);
HBRUSH __thiscall sub_416FB2(_DWORD *this, int nIndex);
void __cdecl loc_417019(); // idb
DWORD __thiscall sub_417023(_DWORD *this, int nIndex);
DWORD __thiscall sub_41707E(_DWORD *this, int nIndex);
_DWORD *__thiscall sub_4170E3(_DWORD *this);
CGdiObject *__thiscall sub_4170F0(CGdiObject *this, char a2);
int __thiscall sub_41710C(CGdiObject *this);
void __thiscall sub_41715C(_DWORD *this);
CGdiObject *__thiscall sub_417163(CGdiObject *this, char a2);
int __thiscall sub_41717F(CGdiObject *this);
_DWORD *__thiscall sub_4171E5(_DWORD *this, char a2);
BOOL __thiscall sub_417201(_DWORD *this);
void *__thiscall sub_417238(_DWORD *this);
int __thiscall sub_41726D(_DWORD *this, int a2);
BOOL __thiscall sub_41727A(int *this, DWORD dwMessage, int a3, int a4, HICON hIcon, LPCWSTR lpString2);
BOOL __stdcall sub_41729B(int a1, DWORD dwMessage, int a3, int a4, HICON hIcon, LPCWSTR lpString2);
LPRECT __cdecl sub_417328(LPRECT lpRect);
BOOL sub_41742E();
BOOL __thiscall sub_417452(HWND *this);
BOOL __stdcall sub_417460(HWND hWnd, int a2);
BOOL __thiscall sub_4174AE(int this);
BOOL __thiscall sub_4174CA(int this);
int __thiscall sub_417549(int lpParameter, int a2, int a3, LPCWSTR lpString2, int a5, int a6);
void __stdcall __noreturn sub_4175B9(LPVOID lpThreadParameter);
HICON __cdecl sub_4175DC(HICON hIcon);
_DWORD *__thiscall sub_41779B(_DWORD *this);
_DWORD *__thiscall sub_4177DF(_DWORD *this, char a2);
void __thiscall sub_4177FB(_DWORD *this);
LONG __thiscall sub_417802(int this, HWND hWndParent);
int __stdcall sub_417944(int a1, int a2, int a3, LPARAM a4, int a5); // idb
int __stdcall sub_417973(int a1, int a2, int a3, WPARAM wParam, LPARAM lParam); // idb
int __stdcall sub_417A1B(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam); // idb
int __stdcall sub_417A59(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam); // idb
int __thiscall sub_417A96(int this, UINT item);
int __thiscall sub_417B9B(_DWORD *this, HWND hWnd, int a3, LPARAM wParam, int a5, int a6);
int __thiscall sub_417C29(int this, int a2, LPARAM a3, int a4, _DWORD *a5);
LRESULT __thiscall sub_417DA2(HWND *this, WPARAM wParam, LPARAM lParam);
LRESULT __thiscall sub_417DBB(HWND *this, LPARAM lParam);
LRESULT __thiscall sub_417DD2(HWND *this, int a2, unsigned __int16 a3);
LRESULT __thiscall sub_417DF3(HWND *this, WPARAM wParam, LPARAM lParam);
int __thiscall sub_417E0C(int this, _DWORD *a2);
_DWORD *__stdcall sub_418011(_DWORD *a1);
HMENU __thiscall sub_41802B(int this, int a2, struct tagPOINT Point);
BOOL __thiscall sub_41806A(int this, HMENU hMenu, int x, int y);
HMENU __thiscall sub_4180D7(int this);
LRESULT __stdcall fn(int code, WPARAM wParam, _DWORD *lParam);
int __thiscall sub_41823E(int *this, int a2, int a3);
BOOL __thiscall sub_418262(int this, int a2, LPARAM wParam);
HWND __thiscall sub_418309(HWND *this);
_DWORD *__thiscall sub_41834A(_DWORD *this);
_DWORD *__thiscall sub_41845C(_DWORD *this, char a2);
int __thiscall sub_418478(_DWORD *this);
int __thiscall sub_4184EA(char *this, __int16 a2);
void __stdcall sub_41856C(HDC hdc, LPCWSTR lpchText, HGDIOBJ *a3, LPRECT lprc);
int __thiscall sub_418655(int this, HWND hWnd, char a3);
int __stdcall sub_418AF9(HDC hdc, LPCWSTR lpString, struct tagRECT rc, int a4, UINT format, COLORREF a6, COLORREF color); // idb
int __stdcall sub_418B6B(int a1);
HBITMAP __stdcall sub_418B70(HANDLE h, float a2);
CGdiObject *__thiscall sub_418E0B(CGdiObject *this, char a2);
int __thiscall sub_418E27(CGdiObject *this);
CGdiObject *__thiscall sub_418E5A(CGdiObject *this, char a2);
int __thiscall sub_418E76(CGdiObject *this);
int __thiscall sub_418EA9(CGdiObject *this, unsigned __int16 a2);
BOOL __cdecl sub_418ECD(HMODULE hModule, LPCWSTR lpValueName, HKEY phkResult);
BOOL __cdecl sub_418F51(LPCWSTR lpValueName, LPCWSTR lpString, HKEY phkResult);
BOOL __cdecl sub_418FAF(LPCWSTR lpValueName, HKEY phkResult);
LPWSTR __cdecl sub_418FFB(HMODULE hModule, LPWSTR lpFilename, DWORD nSize);
int __cdecl sub_419012(LPCWSTR lpValueName, int a2); // idb
int __thiscall sub_419137(void *this);
int __fastcall sub_419141(int a1);
// void __cdecl unknown_libname_12(); idb
LRESULT __thiscall sub_419185(_DWORD *this, HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
void __thiscall sub_4191BD(_DWORD *this);
BOOL __thiscall sub_4191C4(HWND *this, HWND hWndInsertAfter, int X, int Y, int a5, int a6, UINT uFlags);
int __thiscall sub_4191EE(int this, char *a2, _BYTE *a3);
void __thiscall sub_419211(int this);
_DWORD *__thiscall sub_419272(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4);
_DWORD *__thiscall sub_419309(_DWORD *this, _DWORD *a2, _DWORD *a3);
void __stdcall sub_4195A0(void **a1);
int __thiscall sub_4195D6(_DWORD *this);
_DWORD *__thiscall sub_419661(_DWORD *this, int a2);
int __thiscall sub_4196A5(_DWORD *this, _DWORD *a2);
_DWORD *__thiscall sub_4196EB(void *this);
_DWORD *__thiscall sub_419721(_DWORD *this);
_DWORD *__thiscall sub_419779(_DWORD *this, char a2);
void __thiscall sub_419795(_DWORD *this);
void __thiscall __noreturn sub_41979C(_DWORD, _DWORD); // weak
__int16 __thiscall sub_4197A4(int this);
__int16 __thiscall sub_41980D(_WORD *this);
int __thiscall sub_41988F(unsigned __int16 *this, signed __int16 a2);
__int16 __thiscall sub_41996C(_WORD *this, unsigned __int16 a2);
int __thiscall sub_4199A9(_WORD *this, unsigned __int16 a2);
int __thiscall sub_4199E6(int *this);
__int16 __thiscall sub_419A0C(int this);
__int16 __thiscall sub_419B4C(int this);
size_t __thiscall sub_419C7B(int this);
__int16 __thiscall sub_419E12(int this, int a2, int a3);
// void __thiscall CDialog::OnCancel(CDialog *__hidden this); idb
// void __thiscall CDialog::OnOK(CDialog *__hidden this); idb
// int __thiscall CWnd::WindowProc(CWnd *__hidden this, unsigned int, unsigned int, int); idb
// int __thiscall CWnd::OnCommand(CWnd *__hidden this, unsigned int, int); idb
// void __thiscall CComboBox::~CComboBox(CComboBox *__hidden this); idb
// void __thiscall CButton::~CButton(CButton *__hidden this); idb
// void __thiscall CEdit::~CEdit(CEdit *__hidden this); idb
// void __thiscall CDialog::~CDialog(CDialog *__hidden this); idb
// CWnd *__thiscall CWnd::CWnd(CWnd *__hidden this); idb
// CDialog *__thiscall CDialog::CDialog(CDialog *__hidden this, unsigned int, struct CWnd *); idb
// void __cdecl operator delete(void *); idb
// void __stdcall DDX_Control(struct CDataExchange *, int, struct CWnd *); idb
// int __thiscall CDialog::OnInitDialog(CDialog *__hidden this); idb
// void __thiscall CString::~CString(CString *__hidden this); idb
// int __thiscall CString::Replace(CString *__hidden this, const unsigned __int16 *, const unsigned __int16 *); idb
// void __thiscall CWnd::SetWindowTextW(CWnd *__hidden this, const unsigned __int16 *); idb
// int __thiscall CString::operator=(_DWORD, _DWORD); weak
// void CString::Format(CString *__hidden this, const unsigned __int16 *, ...); idb
// CString *__thiscall CString::CString(CString *__hidden this); idb
// CString *__thiscall CString::CString(CString *__hidden this, const struct CString *); idb
// CString *__thiscall CString::CString(CString *__hidden this, const unsigned __int16 *); idb
// int __thiscall CString::operator=(_DWORD, _DWORD); weak
// int __stdcall operator+(_DWORD, _DWORD, _DWORD); weak
// CString *__thiscall CString::CString(CString *__hidden this, const char *); idb
// int __thiscall CWnd::Default(CWnd *__hidden this); idb
// struct AFX_MODULE_STATE *__stdcall AfxGetModuleState(); idb
// unsigned __int16 *__thiscall CString::GetBuffer(CString *__hidden this, int); idb
// void __thiscall CStatic::~CStatic(CStatic *__hidden this); idb
// void __thiscall CString::ReleaseBuffer(CString *__hidden this, int); idb
// int __stdcall operator+(_DWORD, _DWORD, _DWORD); weak
// struct CWnd *__thiscall CWnd::GetDlgItem(CWnd *__hidden this, int); idb
// void __thiscall CDialog::EndDialog(CDialog *__hidden this, int); idb
// struct CGdiObject *__stdcall CGdiObject::FromHandle(void *); idb
// int __thiscall CWnd::CreateControl(CWnd *__hidden this, const struct _GUID *, const unsigned __int16 *, unsigned int, const struct tagRECT *, struct CWnd *, unsigned int, struct CFile *, int, unsigned __int16 *); idb
// void __thiscall CWnd::~CWnd(CWnd *__hidden this); idb
// int __thiscall COleVariant::operator=(_DWORD, _DWORD); weak
// int __stdcall operator+(_DWORD, _DWORD, _DWORD); weak
// void __stdcall AfxVariantInit(struct tagVARIANT *); idb
// int __thiscall CWnd::SetWindowPos(CWnd *__hidden this, const struct CWnd *, int, int, int, int, unsigned int); idb
// void __thiscall CRect::DeflateRect(CRect *__hidden this, int, int, int, int); idb
// int __thiscall CString::operator+=(_DWORD, _DWORD); weak
// unsigned __int16 *__thiscall CString::AllocSysString(CString *__hidden this); idb
// int __thiscall CString::Find(CString *__hidden this, unsigned __int16, int); idb
// int __thiscall CString::operator=(_DWORD, _DWORD); weak
// int __thiscall CString::Mid(_DWORD, _DWORD, _DWORD); weak
// int __thiscall CString::Left(_DWORD, _DWORD, _DWORD); weak
// int __thiscall CString::Find(CString *__hidden this, unsigned __int16); idb
// int __thiscall CString::ReverseFind(CString *__hidden this, unsigned __int16); idb
// int __thiscall CString::Find(CString *__hidden this, const unsigned __int16 *); idb
// void __thiscall CString::MakeLower(CString *__hidden this); idb
// void __thiscall CProgressCtrl::~CProgressCtrl(CProgressCtrl *__hidden this); idb
// void *__cdecl operator new(unsigned int); idb
// CWinApp *__thiscall CWinApp::CWinApp(CWinApp *__hidden this, const unsigned __int16 *); idb
// void __thiscall CString::TrimLeft(CString *__hidden this); idb
// void __thiscall CString::TrimRight(CString *__hidden this); idb
// int __thiscall CDialog::Create(CDialog *__hidden this, const unsigned __int16 *, struct CWnd *); idb
// int __thiscall CWinApp::Enable3dControls(CWinApp *__hidden this); idb
// void __cdecl AfxEnableControlContainer(struct COccManager *); idb
// int __thiscall CWnd::ShowWindow(CWnd *__hidden this, int); idb
// HINSTANCE __stdcall AfxFindResourceHandle(const unsigned __int16 *, const unsigned __int16 *); idb
// int __thiscall CString::LoadStringW(CString *__hidden this, unsigned int); idb
// struct CMenu *__stdcall CMenu::FromHandle(HMENU); idb
// int __thiscall CWnd::ModifyStyleEx(CWnd *__hidden this, unsigned int, unsigned int, unsigned int); idb
// int __thiscall CTabCtrl::InsertItem(CTabCtrl *__hidden this, unsigned int, int, const unsigned __int16 *, int, int); idb
// int __thiscall CWnd::Attach(CWnd *__hidden this, HWND); idb
// int __thiscall CString::operator+=(_DWORD, _DWORD); weak
// int __thiscall CWnd::MessageBoxW(CWnd *__hidden this, const unsigned __int16 *, const unsigned __int16 *, unsigned int); idb
// void __thiscall CWnd::GetWindowTextW(CWnd *__hidden this, struct CString *); idb
// int __thiscall CWnd::EnableWindow(CWnd *__hidden this, int); idb
// void __stdcall DDX_DateTimeCtrl(struct CDataExchange *, int, struct CTime *); idb
// void __thiscall CWnd::ClientToScreen(CWnd *__hidden this, struct tagRECT *); idb
// void CWnd::InvokeHelper(CWnd *__hidden this, int, unsigned __int16, unsigned __int16, void *, const unsigned __int8 *, ...); idb
// int __thiscall CWnd::UpdateData(CWnd *__hidden this, int); idb
// int __thiscall CWinApp::WriteProfileInt(CWinApp *__hidden this, const unsigned __int16 *, const unsigned __int16 *, int); idb
// int __thiscall CWinApp::WriteProfileStringW(CWinApp *__hidden this, const unsigned __int16 *, const unsigned __int16 *, const unsigned __int16 *); idb
// void __thiscall CTabCtrl::~CTabCtrl(CTabCtrl *__hidden this); idb
// struct CWnd *__stdcall CWnd::FromHandle(HWND); idb
// int __stdcall AfxMessageBox(const unsigned __int16 *, unsigned int, unsigned int); idb
// int __thiscall CGdiObject::Attach(CGdiObject *__hidden this, void *); idb
// int __thiscall CGdiObject::DeleteObject(CGdiObject *__hidden this); idb
// int __cdecl atexit(void (__cdecl *)());
// void __stdcall `eh vector destructor iterator'(void *, unsigned int, int, void (__thiscall *)(void *)); idb
// void __stdcall `eh vector constructor iterator'(void *, unsigned int, int, void (__thiscall *)(void *), void (__thiscall *)(void *)); idb
// void __stdcall __noreturn CxxThrowException(void *pExceptionObject, _ThrowInfo *pThrowInfo);
// void *__cdecl memset(void *, int Val, size_t Size);
// void *__cdecl memcpy(void *, const void *Src, size_t Size);
// double __cdecl sin(double X);
// double __cdecl cos(double X);
int __cdecl UserMathErrorFunction();
// BOOL __stdcall SetSystemPowerState(BOOL fSuspend, BOOL fForce);
void __stdcall __noreturn sub_41A7B0(int a1);
void __cdecl __noreturn sub_41A7BE(int a1, int a2);
_DWORD *__thiscall sub_41A7E2(_DWORD *this, int a2, int a3, char a4);
_DWORD *__thiscall sub_41A814(_DWORD *this, char a2);
_DWORD *__thiscall sub_41A830(_DWORD *this, int a2);
HLOCAL __thiscall sub_41A85D(_DWORD *this);
// int __stdcall AfxInitialize(char, unsigned int); idb
int sub_41A8BC();
// _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this); weak
// int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::_Tidy(_DWORD, _DWORD); weak
// int __cdecl std::operator==(_DWORD); weak
// int __thiscall std::string::erase(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::string(_DWORD, _DWORD); weak
// int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::append(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::string(_DWORD, _DWORD, _DWORD); weak
// int __thiscall std::string::append(_DWORD, _DWORD, _DWORD); weak
// int __cdecl std::operator!=(_DWORD); weak
// int __thiscall std::string::substr(_DWORD, _DWORD, _DWORD, _DWORD); weak
// void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this); weak

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN sub_4101F8;
_UNKNOWN loc_41B84E; // weak
// extern BOOL (__stdcall *OpenProcessToken)(HANDLE ProcessHandle, DWORD DesiredAccess, PHANDLE TokenHandle);
// extern LSTATUS (__stdcall *RegCloseKey)(HKEY hKey);
// extern LSTATUS (__stdcall *RegCreateKeyExW)(HKEY hKey, LPCWSTR lpSubKey, DWORD Reserved, LPWSTR lpClass, DWORD dwOptions, REGSAM samDesired, const LPSECURITY_ATTRIBUTES lpSecurityAttributes, PHKEY phkResult, LPDWORD lpdwDisposition);
// extern LSTATUS (__stdcall *RegOpenKeyExW)(HKEY hKey, LPCWSTR lpSubKey, DWORD ulOptions, REGSAM samDesired, PHKEY phkResult);
// extern LSTATUS (__stdcall *RegDeleteValueW)(HKEY hKey, LPCWSTR lpValueName);
// extern LSTATUS (__stdcall *RegOpenKeyW)(HKEY hKey, LPCWSTR lpSubKey, PHKEY phkResult);
// extern LSTATUS (__stdcall *RegSetValueExW)(HKEY hKey, LPCWSTR lpValueName, DWORD Reserved, DWORD dwType, const BYTE *lpData, DWORD cbData);
// extern BOOL (__stdcall *LookupPrivilegeValueW)(LPCWSTR lpSystemName, LPCWSTR lpName, PLUID lpLuid);
// extern BOOL (__stdcall *AdjustTokenPrivileges)(HANDLE TokenHandle, BOOL DisableAllPrivileges, PTOKEN_PRIVILEGES NewState, DWORD BufferLength, PTOKEN_PRIVILEGES PreviousState, PDWORD ReturnLength);
// extern LSTATUS (__stdcall *RegQueryValueExW)(HKEY hKey, LPCWSTR lpValueName, LPDWORD lpReserved, LPDWORD lpType, LPBYTE lpData, LPDWORD lpcbData);
// extern HIMAGELIST (__stdcall *ImageList_Create)(int cx, int cy, UINT flags, int cInitial, int cGrow);
// extern int (__stdcall *ImageList_ReplaceIcon)(HIMAGELIST himl, int i, HICON hicon);
// extern BOOL (__stdcall *ImageList_Draw)(HIMAGELIST himl, int i, HDC hdcDst, int x, int y, UINT fStyle);
// extern int (__stdcall *SetGraphicsMode)(HDC hdc, int iMode);
// extern BOOL (__stdcall *SetWorldTransform)(HDC hdc, const XFORM *lpxf);
// extern BOOL (__stdcall *StretchBlt)(HDC hdcDest, int xDest, int yDest, int wDest, int hDest, HDC hdcSrc, int xSrc, int ySrc, int wSrc, int hSrc, DWORD rop);
// extern COLORREF (__stdcall *GetPixel)(HDC hdc, int x, int y);
// extern HBRUSH (__stdcall *CreateSolidBrush)(COLORREF color);
// extern COLORREF (__stdcall *SetTextColor)(HDC hdc, COLORREF color);
// extern HGDIOBJ (__stdcall *GetCurrentObject)(HDC hdc, UINT type);
// extern COLORREF (__stdcall *SetPixel)(HDC hdc, int x, int y, COLORREF color);
// extern HBITMAP (__stdcall *CreateBitmap)(int nWidth, int nHeight, UINT nPlanes, UINT nBitCount, const void *lpBits);
// extern HBRUSH (__stdcall *CreatePatternBrush)(HBITMAP hbm);
// extern COLORREF (__stdcall *SetBkColor)(HDC hdc, COLORREF color);
// extern BOOL (__stdcall *ExtTextOutW)(HDC hdc, int x, int y, UINT options, const RECT *lprect, LPCWSTR lpString, UINT c, const INT *lpDx);
// extern int (__stdcall *SetBkMode)(HDC hdc, int mode);
// extern HDC (__stdcall *CreateCompatibleDC)(HDC hdc);
// extern BOOL (__stdcall *DeleteDC)(HDC hdc);
// extern HGDIOBJ (__stdcall *GetStockObject)(int i);
// extern BOOL (__stdcall *DeleteObject)(HGDIOBJ ho);
// extern HGDIOBJ (__stdcall *SelectObject)(HDC hdc, HGDIOBJ h);
// extern int (__stdcall *GetObjectW)(HANDLE h, int c, LPVOID pv);
// extern HFONT (__stdcall *CreateFontIndirectW)(const LOGFONTW *lplf);
// extern HBITMAP (__stdcall *CreateCompatibleBitmap)(HDC hdc, int cx, int cy);
// extern HANDLE (__stdcall *CreateFileW)(LPCWSTR lpFileName, DWORD dwDesiredAccess, DWORD dwShareMode, LPSECURITY_ATTRIBUTES lpSecurityAttributes, DWORD dwCreationDisposition, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile);
// extern BOOL (__stdcall *WriteFile)(HANDLE hFile, LPCVOID lpBuffer, DWORD nNumberOfBytesToWrite, LPDWORD lpNumberOfBytesWritten, LPOVERLAPPED lpOverlapped);
// extern BOOL (__stdcall *CloseHandle)(HANDLE hObject);
// extern BOOL (__stdcall *CopyFileW)(LPCWSTR lpExistingFileName, LPCWSTR lpNewFileName, BOOL bFailIfExists);
// extern int (__stdcall *WideCharToMultiByte)(UINT CodePage, DWORD dwFlags, LPCWCH lpWideCharStr, int cchWideChar, LPSTR lpMultiByteStr, int cbMultiByte, LPCCH lpDefaultChar, LPBOOL lpUsedDefaultChar);
// extern DWORD (__stdcall *GetModuleFileNameW)(HMODULE hModule, LPWSTR lpFilename, DWORD nSize);
// extern LPWSTR (__stdcall *lstrcpynW)(LPWSTR lpString1, LPCWSTR lpString2, int iMaxLength);
// extern BOOL (__stdcall *SetProcessShutdownParameters)(DWORD dwLevel, DWORD dwFlags);
// extern int (__stdcall *lstrcmpiW)(LPCWSTR lpString1, LPCWSTR lpString2);
// extern int (__stdcall *lstrcmpW)(LPCWSTR lpString1, LPCWSTR lpString2);
// extern FARPROC (__stdcall *GetProcAddress)(HMODULE hModule, LPCSTR lpProcName);
// extern EXECUTION_STATE (__stdcall *SetThreadExecutionState)(EXECUTION_STATE esFlags);
// extern void (__stdcall *OutputDebugStringW)(LPCWSTR lpOutputString);
// extern HMODULE (__stdcall *GetModuleHandleA)(LPCSTR lpModuleName);
// extern void (__stdcall *OutputDebugStringA)(LPCSTR lpOutputString);
// extern BOOL (__stdcall *DeleteFileW)(LPCWSTR lpFileName);
// extern BOOL (__stdcall *CreateDirectoryW)(LPCWSTR lpPathName, LPSECURITY_ATTRIBUTES lpSecurityAttributes);
// extern BOOL (__stdcall *WritePrivateProfileStringW)(LPCWSTR lpAppName, LPCWSTR lpKeyName, LPCWSTR lpString, LPCWSTR lpFileName);
// extern DWORD (__stdcall *GetPrivateProfileStringW)(LPCWSTR lpAppName, LPCWSTR lpKeyName, LPCWSTR lpDefault, LPWSTR lpReturnedString, DWORD nSize, LPCWSTR lpFileName);
// extern DWORD (__stdcall *GetTimeZoneInformation)(LPTIME_ZONE_INFORMATION lpTimeZoneInformation);
// extern LPVOID (__stdcall *LockResource)(HGLOBAL hResData);
// extern HGLOBAL (__stdcall *LoadResource)(HMODULE hModule, HRSRC hResInfo);
// extern HRSRC (__stdcall *FindResourceW)(HMODULE hModule, LPCWSTR lpName, LPCWSTR lpType);
// extern DWORD (__stdcall *GetEnvironmentVariableW)(LPCWSTR lpName, LPWSTR lpBuffer, DWORD nSize);
// extern int (__stdcall *lstrlenA)(LPCSTR lpString);
// extern HANDLE (__stdcall *CreateThread)(LPSECURITY_ATTRIBUTES lpThreadAttributes, SIZE_T dwStackSize, LPTHREAD_START_ROUTINE lpStartAddress, LPVOID lpParameter, DWORD dwCreationFlags, LPDWORD lpThreadId);
// extern DWORD (__stdcall *GetTempPathW)(DWORD nBufferLength, LPWSTR lpBuffer);
// extern int (__stdcall *lstrlenW)(LPCWSTR lpString);
// extern LPWSTR (__stdcall *lstrcatW)(LPWSTR lpString1, LPCWSTR lpString2);
// extern HMODULE (__stdcall *GetModuleHandleW)(LPCWSTR lpModuleName);
// extern BOOL (__stdcall *GetVersionExW)(LPOSVERSIONINFOW lpVersionInformation);
// extern LPWSTR (__stdcall *lstrcpyW)(LPWSTR lpString1, LPCWSTR lpString2);
// extern LONG (__stdcall *InterlockedDecrement)(volatile LONG *lpAddend);
// extern DWORD (__stdcall *GetLastError)();
// extern LANGID (__stdcall *GetUserDefaultLangID)();
// extern HMODULE (__stdcall *LoadLibraryW)(LPCWSTR lpLibFileName);
// extern HANDLE (__stdcall *GetCurrentProcess)();
// extern UINT (__stdcall *GetSystemDirectoryW)(LPWSTR lpBuffer, UINT uSize);
// extern void (__stdcall *LeaveCriticalSection)(LPCRITICAL_SECTION lpCriticalSection);
// extern void (__stdcall *EnterCriticalSection)(LPCRITICAL_SECTION lpCriticalSection);
// extern LONG (__stdcall *InterlockedIncrement)(volatile LONG *lpAddend);
// extern DWORD (__stdcall *WaitForSingleObject)(HANDLE hHandle, DWORD dwMilliseconds);
// extern BOOL (__stdcall *ResetEvent)(HANDLE hEvent);
// extern HANDLE (__stdcall *CreateEventW)(LPSECURITY_ATTRIBUTES lpEventAttributes, BOOL bManualReset, BOOL bInitialState, LPCWSTR lpName);
// extern void (__stdcall *InitializeCriticalSection)(LPCRITICAL_SECTION lpCriticalSection);
// extern void (__stdcall *DeleteCriticalSection)(LPCRITICAL_SECTION lpCriticalSection);
// extern void (__stdcall *Sleep)(DWORD dwMilliseconds);
// extern DWORD (__stdcall *WaitForMultipleObjects)(DWORD nCount, const HANDLE *lpHandles, BOOL bWaitAll, DWORD dwMilliseconds);
// extern BOOL (__stdcall *TerminateThread)(HANDLE hThread, DWORD dwExitCode);
// extern BOOL (__stdcall *SetEvent)(HANDLE hEvent);
// extern DWORD (__stdcall *GetCurrentThreadId)();
// extern HLOCAL (__stdcall *LocalFree)(HLOCAL hMem);
// extern int (__stdcall *GetNumberFormatW)(LCID Locale, DWORD dwFlags, LPCWSTR lpValue, const NUMBERFMTW *lpFormat, LPWSTR lpNumberStr, int cchNumber);
// extern int (__stdcall *GetLocaleInfoW)(LCID Locale, LCTYPE LCType, LPWSTR lpLCData, int cchData);
// extern BOOL (__stdcall *FileTimeToSystemTime)(const FILETIME *lpFileTime, LPSYSTEMTIME lpSystemTime);
// extern BOOL (__stdcall *SystemTimeToFileTime)(const SYSTEMTIME *lpSystemTime, LPFILETIME lpFileTime);
// extern void (__stdcall *GetLocalTime)(LPSYSTEMTIME lpSystemTime);
// extern BOOL (__stdcall *LocalFileTimeToFileTime)(const FILETIME *lpLocalFileTime, LPFILETIME lpFileTime);
// extern BOOL (__stdcall *FreeLibrary)(HMODULE hLibModule);
// extern DWORD (__stdcall *GetFileAttributesW)(LPCWSTR lpFileName);
// extern HANDLE (__stdcall *CreateMutexW)(LPSECURITY_ATTRIBUTES lpMutexAttributes, BOOL bInitialOwner, LPCWSTR lpName);
// extern _UNKNOWN CWnd::classCWnd; weak
// extern _UNKNOWN CTabCtrl::messageMap; weak
// extern _UNKNOWN CWnd::messageMap; weak
// extern _UNKNOWN CWinApp::messageMap; weak
// extern _UNKNOWN CCmdTarget::eventsinkMap; weak
// extern _UNKNOWN CDialog::messageMap; weak
// extern _UNKNOWN `std::string::_Nullstr'::`2'::_C; weak
// extern _UNKNOWN std::string::npos; weak
// extern int (__cdecl *memicmp)(const void *Buf1, const void *Buf2, size_t Size);
// extern clock_t (__cdecl *clock)();
// extern int (__cdecl *wtoi)(const wchar_t *String);
// extern wchar_t *(__cdecl *wcsrchr)(const wchar_t *Str, wchar_t Ch);
// extern void (__cdecl *free)(void *Block);
// extern int (*sprintf)(char *const Buffer, const char *const Format, ...);
// extern __time32_t (__cdecl *time)(__time32_t *const Time);
// extern void *(__cdecl *malloc)(size_t Size);
// extern int (__cdecl *wcscmp)(const wchar_t *String1, const wchar_t *String2);
// extern wchar_t *(__cdecl *wcscat)(wchar_t *Destination, const wchar_t *Source);
// extern wchar_t *(__cdecl *wcsstr)(const wchar_t *Str, const wchar_t *SubStr);
// extern void *(__cdecl *realloc)(void *Block, size_t Size);
// extern int (__cdecl *wcsicmp)(const wchar_t *String1, const wchar_t *String2);
// extern int *(__cdecl *errno)();
// extern uintptr_t (__cdecl *beginthreadex)(void *Security, unsigned int StackSize, _beginthreadex_proc_type StartAddress, void *ArgList, unsigned int InitFlag, unsigned int *ThrdAddr);
// extern int (__cdecl *fclose)(FILE *Stream);
// extern size_t (__cdecl *fread)(void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
// extern size_t (__cdecl *strftime)(char *Buffer, size_t SizeInBytes, const char *Format, const struct tm *Tm);
// extern size_t (__cdecl *fwrite)(const void *Buffer, size_t ElementSize, size_t ElementCount, FILE *Stream);
// extern struct tm *(__cdecl *localtime)(const __time32_t *const Time);
// extern FILE *(__cdecl *wfopen)(const wchar_t *FileName, const wchar_t *Mode);
// extern size_t (__cdecl *wcslen)(const wchar_t *String);
// extern void (__cdecl __noreturn *exit)(int Code);
// extern int (__cdecl *putc)(int Character, FILE *Stream);
// extern int (__cdecl *getc)(FILE *Stream);
// extern BSTR (__stdcall *SysAllocString)(const OLECHAR *psz);
// extern void (__stdcall *VariantInit)(VARIANTARG *pvarg);
// extern SAFEARRAY *(__stdcall *SafeArrayCreateVector)(VARTYPE vt, LONG lLbound, ULONG cElements);
// extern HRESULT (__stdcall *SafeArrayAccessData)(SAFEARRAY *psa, void **ppvData);
// extern HRESULT (__stdcall *SafeArrayUnaccessData)(SAFEARRAY *psa);
// extern void (__stdcall *SysFreeString)(BSTR bstrString);
// extern HRESULT (__stdcall *VariantClear)(VARIANTARG *pvarg);
// extern UINT_PTR (__stdcall *SHAppBarMessage)(DWORD dwMessage, PAPPBARDATA pData);
// extern BOOL (__stdcall *Shell_NotifyIconW)(DWORD dwMessage, PNOTIFYICONDATAW lpData);
// extern BOOL (__stdcall *SHGetSpecialFolderPathW)(HWND hwnd, LPWSTR pszPath, int csidl, BOOL fCreate);
// extern UINT (__stdcall *ExtractIconExW)(LPCWSTR lpszFile, int nIconIndex, HICON *phiconLarge, HICON *phiconSmall, UINT nIcons);
// extern HINSTANCE (__stdcall *ShellExecuteW)(HWND hwnd, LPCWSTR lpOperation, LPCWSTR lpFile, LPCWSTR lpParameters, LPCWSTR lpDirectory, INT nShowCmd);
// extern BOOL (__stdcall *ShellExecuteExW)(SHELLEXECUTEINFOW *pExecInfo);
// extern LONG (__stdcall *SetWindowLongW)(HWND hWnd, int nIndex, LONG dwNewLong);
// extern LONG (__stdcall *GetWindowLongW)(HWND hWnd, int nIndex);
// extern LRESULT (__stdcall *CallWindowProcW)(WNDPROC lpPrevWndFunc, HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// extern BOOL (__stdcall *DestroyMenu)(HMENU hMenu);
// extern DWORD (__stdcall *GetMessagePos)();
// extern BOOL (__stdcall *TrackPopupMenuEx)(HMENU hMenu, UINT uFlags, int x, int y, HWND hwnd, LPTPMPARAMS lptpm);
// extern int (__stdcall *MapWindowPoints)(HWND hWndFrom, HWND hWndTo, LPPOINT lpPoints, UINT cPoints);
// extern int (__stdcall *FillRect)(HDC hDC, const RECT *lprc, HBRUSH hbr);
// extern HBITMAP (__stdcall *LoadBitmapW)(HINSTANCE hInstance, LPCWSTR lpBitmapName);
// extern HWND (__stdcall *GetWindow)(HWND hWnd, UINT uCmd);
// extern int (__stdcall *GetDlgCtrlID)(HWND hWnd);
// extern int (__stdcall *GetWindowTextW)(HWND hWnd, LPWSTR lpString, int nMaxCount);
// extern LRESULT (__stdcall *SendDlgItemMessageW)(HWND hDlg, int nIDDlgItem, UINT Msg, WPARAM wParam, LPARAM lParam);
// extern BOOL (__stdcall *ScreenToClient)(HWND hWnd, LPPOINT lpPoint);
// extern BOOL (__stdcall *ExitWindowsEx)(UINT uFlags, DWORD dwReason);
// extern BOOL (__stdcall *GetKeyboardState)(PBYTE lpKeyState);
// extern HWND (__stdcall *GetParent)(HWND hWnd);
// extern LRESULT (__stdcall *CallNextHookEx)(HHOOK hhk, int nCode, WPARAM wParam, LPARAM lParam);
// extern SHORT (__stdcall *GetKeyState)(int nVirtKey);
// extern BOOL (__stdcall *UnhookWindowsHookEx)(HHOOK hhk);
// extern HHOOK (__stdcall *SetWindowsHookExW)(int idHook, HOOKPROC lpfn, HINSTANCE hmod, DWORD dwThreadId);
// extern BOOL (__stdcall *ClientToScreen)(HWND hWnd, LPPOINT lpPoint);
// extern BOOL (__stdcall *RedrawWindow)(HWND hWnd, const RECT *lprcUpdate, HRGN hrgnUpdate, UINT flags);
// extern HWND (__stdcall *CreateWindowExW)(DWORD dwExStyle, LPCWSTR lpClassName, LPCWSTR lpWindowName, DWORD dwStyle, int X, int Y, int nWidth, int nHeight, HWND hWndParent, HMENU hMenu, HINSTANCE hInstance, LPVOID lpParam);
// extern void (__stdcall *keybd_event)(BYTE bVk, BYTE bScan, DWORD dwFlags, ULONG_PTR dwExtraInfo);
// extern BOOL (__stdcall *SetForegroundWindow)(HWND hWnd);
// extern HWND (__stdcall *SetActiveWindow)(HWND hWnd);
// extern HMENU (__stdcall *GetMenu)(HWND hWnd);
// extern int (__stdcall *GetMenuItemCount)(HMENU hMenu);
// extern BOOL (__stdcall *DeleteMenu)(HMENU hMenu, UINT uPosition, UINT uFlags);
// extern HWND (__stdcall *GetForegroundWindow)();
// extern BOOL (__stdcall *PostMessageW)(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// extern BOOL (__stdcall *EnableMenuItem)(HMENU hMenu, UINT uIDEnableItem, UINT uEnable);
// extern BOOL (__stdcall *SetWindowPos)(HWND hWnd, HWND hWndInsertAfter, int X, int Y, int cx, int cy, UINT uFlags);
// extern BOOL (__stdcall *InsertMenuW)(HMENU hMenu, UINT uPosition, UINT uFlags, UINT_PTR uIDNewItem, LPCWSTR lpNewItem);
// extern BOOL (__stdcall *IsWindowVisible)(HWND hWnd);
// extern BOOL (__stdcall *GetIconInfo)(HICON hIcon, PICONINFO piconinfo);
// extern HICON (__stdcall *CreateIconIndirect)(PICONINFO piconinfo);
// extern HMENU (__stdcall *GetSubMenu)(HMENU hMenu, int nPos);
// extern BOOL (__stdcall *DrawAnimatedRects)(HWND hwnd, int idAni, const RECT *lprcFrom, const RECT *lprcTo);
// extern HWND (__stdcall *FindWindowExW)(HWND hWndParent, HWND hWndChildAfter, LPCWSTR lpszClass, LPCWSTR lpszWindow);
// extern BOOL (__stdcall *DestroyIcon)(HICON hIcon);
// extern int (__stdcall *FrameRect)(HDC hDC, const RECT *lprc, HBRUSH hbr);
// extern BOOL (__stdcall *SetMenuItemInfoW)(HMENU hmenu, UINT item, BOOL fByPositon, LPCMENUITEMINFOW lpmii);
// extern BOOL (__stdcall *DrawEdge)(HDC hdc, LPRECT qrc, UINT edge, UINT grfFlags);
// extern BOOL (__stdcall *CopyRect)(LPRECT lprcDst, const RECT *lprcSrc);
// extern BOOL (__stdcall *OffsetRect)(LPRECT lprc, int dx, int dy);
// extern HMENU (__stdcall *GetSystemMenu)(HWND hWnd, BOOL bRevert);
// extern BOOL (__stdcall *SetMenu)(HWND hWnd, HMENU hMenu);
// extern BOOL (__stdcall *SystemParametersInfoW)(UINT uiAction, UINT uiParam, PVOID pvParam, UINT fWinIni);
// extern UINT (__stdcall *RegisterWindowMessageW)(LPCWSTR lpString);
// extern BOOL (__stdcall *EnumWindows)(WNDENUMPROC lpEnumFunc, LPARAM lParam);
// extern BOOL (__stdcall *IsWindow)(HWND hWnd);
// extern LRESULT (__stdcall *SendMessageW)(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam);
// extern HBRUSH (__stdcall *GetSysColorBrush)(int nIndex);
// extern BOOL (__stdcall *GetMenuItemInfoW)(HMENU hmenu, UINT item, BOOL fByPosition, LPMENUITEMINFOW lpmii);
// extern int (__stdcall *DrawTextW)(HDC hdc, LPCWSTR lpchText, int cchText, LPRECT lprc, UINT format);
// extern HDC (__stdcall *GetDC)(HWND hWnd);
// extern DWORD (__stdcall *GetSysColor)(int nIndex);
// extern int (__stdcall *ReleaseDC)(HWND hWnd, HDC hDC);
// extern UINT_PTR (__stdcall *SetTimer)(HWND hWnd, UINT_PTR nIDEvent, UINT uElapse, TIMERPROC lpTimerFunc);
// extern BOOL (__stdcall *KillTimer)(HWND hWnd, UINT_PTR uIDEvent);
// extern BOOL (__stdcall *EnableWindow)(HWND hWnd, BOOL bEnable);
// extern HANDLE (__stdcall *LoadImageW)(HINSTANCE hInst, LPCWSTR name, UINT type, int cx, int cy, UINT fuLoad);
// extern LRESULT (__stdcall *SendMessageTimeoutW)(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam, UINT fuFlags, UINT uTimeout, PDWORD_PTR lpdwResult);
// extern HWND (__stdcall *GetActiveWindow)();
// extern int (__stdcall *MessageBoxW)(HWND hWnd, LPCWSTR lpText, LPCWSTR lpCaption, UINT uType);
// extern BOOL (__stdcall *GetClientRect)(HWND hWnd, LPRECT lpRect);
// extern void (__stdcall *PostQuitMessage)(int nExitCode);
// extern HICON (__stdcall *LoadIconW)(HINSTANCE hInstance, LPCWSTR lpIconName);
// extern BOOL (__stdcall *SetDlgItemTextW)(HWND hDlg, int nIDDlgItem, LPCWSTR lpString);
// extern HMENU (__stdcall *CreatePopupMenu)();
// extern BOOL (__stdcall *GetWindowRect)(HWND hWnd, LPRECT lpRect);
// extern BOOL (__stdcall *AppendMenuW)(HMENU hMenu, UINT uFlags, UINT_PTR uIDNewItem, LPCWSTR lpNewItem);
// extern BOOL (__stdcall *TrackPopupMenu)(HMENU hMenu, UINT uFlags, int x, int y, int nReserved, HWND hWnd, const RECT *prcRect);
// extern DWORD (__stdcall *CheckMenuItem)(HMENU hMenu, UINT uIDCheckItem, UINT uCheck);
// extern SHORT (__stdcall *GetAsyncKeyState)(int vKey);
// extern BOOL (__stdcall *GetCursorPos)(LPPOINT lpPoint);
// extern BOOL (__stdcall *ShowWindow)(HWND hWnd, int nCmdShow);
// extern BOOL (__stdcall *SetWindowTextW)(HWND hWnd, LPCWSTR lpString);
// extern HWND (__stdcall *GetDlgItem)(HWND hDlg, int nIDDlgItem);
// extern int (*wsprintfW)(LPWSTR, LPCWSTR, ...);
// extern int (__stdcall *GetSystemMetrics)(int nIndex);
// extern UINT (__stdcall *joyGetNumDevs)();
// extern MMRESULT (__stdcall *joyGetPos)(UINT uJoyID, LPJOYINFO pji);
// extern MMRESULT (__stdcall *joyGetPosEx)(UINT uJoyID, LPJOYINFOEX pji);
// extern int (__stdcall *WSACleanup)();
// extern SOCKET (__stdcall *WSAAccept)(SOCKET s, struct sockaddr *addr, LPINT addrlen, LPCONDITIONPROC lpfnCondition, DWORD_PTR dwCallbackData);
// extern int (__stdcall *WSAEnumNetworkEvents)(SOCKET s, HANDLE hEventObject, LPWSANETWORKEVENTS lpNetworkEvents);
// extern DWORD (__stdcall *WSAWaitForMultipleEvents)(DWORD cEvents, const HANDLE *lphEvents, BOOL fWaitAll, DWORD dwTimeout, BOOL fAlertable);
// extern int (__stdcall *WSAEventSelect)(SOCKET s, HANDLE hEventObject, int lNetworkEvents);
// extern HANDLE (__stdcall *WSACreateEvent)();
// extern int (__stdcall *listen)(SOCKET s, int backlog);
// extern int (__stdcall *bind)(SOCKET s, const struct sockaddr *name, int namelen);
// extern int (__stdcall *WSAGetLastError)();
// extern BOOL (__stdcall *WSACloseEvent)(HANDLE hEvent);
// extern int (__stdcall *WSAStartup)(WORD wVersionRequested, LPWSADATA lpWSAData);
// extern u_short (__stdcall *htons)(u_short hostshort);
// extern int (__stdcall *WSASend)(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesSent, DWORD dwFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// extern int (__stdcall *WSARecv)(SOCKET s, LPWSABUF lpBuffers, DWORD dwBufferCount, LPDWORD lpNumberOfBytesRecvd, LPDWORD lpFlags, LPWSAOVERLAPPED lpOverlapped, LPWSAOVERLAPPED_COMPLETION_ROUTINE lpCompletionRoutine);
// extern unsigned int (__stdcall *inet_addr)(const char *cp);
// extern u_long (__stdcall *htonl)(u_long hostlong);
// extern int (__stdcall *closesocket)(SOCKET s);
// extern SOCKET (__stdcall *WSASocketW)(int af, int type, int protocol, LPWSAPROTOCOL_INFOW lpProtocolInfo, GROUP g, DWORD dwFlags);
// extern BOOL (__stdcall *GetOpenFileNameW)(LPOPENFILENAMEW);
// extern HRESULT (__stdcall *CoInitialize)(LPVOID pvReserved);
int (*off_41D770)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41D7F0)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41D8C8)(CComboBox *__hidden this) = &CComboBox::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this) = &CButton::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41DA5C)(CEdit *__hidden this) = &CEdit::GetRuntimeClass; // weak
int (*off_41DB20)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41DB88)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (*off_41DC70)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41DCA8)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41DD80)(CStatic *__hidden this) = &CStatic::GetRuntimeClass; // weak
int (*off_41DE48)() = &sub_412F4F; // weak
int (*off_41DE98)() = &sub_404CAA; // weak
struct CRuntimeClass *(__thiscall *off_41DEF8)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (*off_41DFD0)() = &sub_412ECD; // weak
const struct _GUID stru_41E090 = { 2287401313u, 13322u, 4560u, { 169u, 107u, 0u, 192u, 79u, 215u, 5u, 162u } }; // idb
int (*off_41E0A0)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41E138)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41E210)(CProgressCtrl *__hidden this) = &CProgressCtrl::GetRuntimeClass; // weak
int (__thiscall *off_41E2D8)(void *, char) = &sub_4077A6; // weak
int (*off_41E2F8)() = &sub_407C7E; // weak
struct CRuntimeClass *(__thiscall *off_41E330)(CWinApp *__hidden this) = &CWinApp::GetRuntimeClass; // weak
int (*off_41E3D8)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41E470)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (*off_41E550)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41E570)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (__thiscall *off_41E690)(void *, char) = &sub_40D263; // weak
int (*off_41E698)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41E748)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (*off_41E838)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41E858)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (__thiscall *off_41E930)(void *, char) = &sub_410066; // weak
int (*off_41E938)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41E970)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (*off_41EA48)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41EB10)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
int (*off_41EBE8)() = &sub_412F4F; // weak
struct CRuntimeClass *(__thiscall *off_41EC68)(CDialog *__hidden this) = &CDialog::GetRuntimeClass; // weak
char *off_41ED48 = "CWebBrowser2"; // weak
int (__thiscall *off_41EE70)(void *, char) = &sub_4135F5; // weak
int (*off_41EE78)() = &sub_4136D0; // weak
struct CRuntimeClass *(__thiscall *off_41EE98)(CTabCtrl *__hidden this) = &CTabCtrl::GetRuntimeClass; // weak
void *off_41EF5C = &loc_413782; // weak
int (__thiscall *off_41EF68)(void *, char) = &sub_4155A2; // weak
int (__thiscall *off_41EF90)(void *, char) = &sub_415E6E; // weak
int (__thiscall *off_41EFD0)(void *, char) = &sub_416361; // weak
int (__stdcall *off_41EFD4)(int, int, int, LPARAM, int) = &sub_416576; // weak
struct CRuntimeClass *(__thiscall *off_41EFE4)(CBrush *__hidden this) = &CBrush::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this) = &CObject::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this) = &CGdiObject::GetRuntimeClass; // weak
int (*off_41F020)() = &nullsub_4; // weak
int (__stdcall *off_41F040)(int, int, int, LPARAM, int) = &sub_417944; // weak
int (__thiscall *off_41F04C)(void *, char) = &sub_41845C; // weak
struct CRuntimeClass *(__thiscall *off_41F050)(CBitmap *__hidden this) = &CBitmap::GetRuntimeClass; // weak
struct CRuntimeClass *(__thiscall *off_41F090)(CFont *__hidden this) = &CFont::GetRuntimeClass; // weak
int (__thiscall *off_41F104)(void *, char) = &sub_419779; // weak
void *_com_error::`vftable' = &sub_41A814; // weak
const _ThrowInfo _TI1K = { 0u, NULL, NULL, &_CTA1K }; // idb
const _ThrowInfo _TI1_AV_com_error__ = { 0u, &sub_41A85D, NULL, &_CTA1_AV_com_error__ }; // idb
unsigned __int16 word_424150 = 38u; // idb
unsigned __int16 aSDS[] = { 37u, 115u, 32u, 37u, 100u, 32u, 37u, 37u, 32u, 37u, 115u, 0u }; // idb
unsigned __int16 off_42416C = 65u; // idb
CHAR aByOn[] = "!by_on\n"; // idb
unsigned __int16 aSD[] = { 37u, 115u, 32u, 37u, 100u, 32u, 37u, 37u, 0u }; // idb
char aAc[] = " (AC)"; // idb
WPARAM dword_4241B0 = 600u; // idb
WPARAM dword_4241B4 = 300u; // idb
WPARAM dword_4241B8 = 30u; // idb
CHAR aXinputgetstate[] = "XInputGetState"; // idb
char aUseHibernate[] = "use_hibernate"; // idb
char aPleaseSleepBlo[] = "please_sleep_block_logof"; // idb
char aPleaseSleepBlo_0[] = "please_sleep_block_shutdown"; // idb
char aPleaseSleepBlo_1[] = "please_sleep_block_standby"; // idb
char aUpcomingSlepMe[] = "upcoming_slep_message_sec"; // idb
char aNoName[] = "no_name"; // idb
char aLastPowerSheme[] = "last_power_sheme"; // idb
char aMTotrayIco[] = "m_totray_ico"; // idb
char aPowerokModeSec[] = "powerok_mode_sec"; // idb
char aMonitorModeSle_0[] = "monitor_mode_slep_sec"; // idb
char aComputerModeSl_0[] = "computer_mode_slep_sec"; // idb
char aMonitorModeSle[] = "monitor_mode_slep"; // idb
char aMouseToleranz[] = "mouse_toleranz"; // idb
char aDetectControll[] = "detect_controller"; // idb
char aMZoom[] = "m_zoom"; // idb
char aMActivePowerTh[] = "m_active_power_theme"; // idb
char aPowerokModeNo[] = "powerok_mode_no"; // idb
char aPowerokModeYes[] = "powerok_mode_yes"; // idb
char aPowerokMode[] = "powerok_mode"; // idb
char aStartTray[] = "start_tray"; // idb
char aComputerModeSl[] = "computer_mode_slep"; // idb
char aMoreOptions[] = "more_options"; // idb
WCHAR aS_0[] = L"%s"; // idb
WCHAR aSS[] = L"%s : %s"; // idb
WCHAR aDS[] = L"%d %s"; // idb
WCHAR a02d02d[] = L"%02d:%02d"; // idb
WCHAR aS[] = L"%s :"; // idb
wchar_t aExplorer[9] = L"explorer"; // weak
WCHAR aKeyDown[] = L"key_down\n"; // idb
char aDS_1[] = "%d %s"; // idb
char asc_4243EC[] = " > "; // idb
char asc_4243F0[] = ":"; // idb
char aSD_0[] = "%s (%d)"; // idb
char aUninstall[] = "/Uninstall"; // idb
char aSeiteFreeware[] = "?seite=Freeware/"; // idb
char aSoftwareMicros[] = "Software\\Microsoft\\Internet Explorer\\Main\\FeatureControl\\FEATURE_BROWSER_EMULATION\\"; // idb
char aAutoupdate[] = "/Autoupdate"; // idb
unsigned __int16 aContentTypeApp[] =
{
  67u,
  111u,
  110u,
  116u,
  101u,
  110u,
  116u,
  45u,
  84u,
  121u,
  112u,
  101u,
  58u,
  32u,
  97u,
  112u,
  112u,
  108u,
  105u,
  99u,
  97u,
  116u,
  105u,
  111u,
  110u,
  47u,
  120u,
  45u,
  119u,
  119u,
  119u,
  45u,
  102u,
  111u,
  114u,
  109u,
  45u,
  117u,
  114u,
  108u,
  101u,
  110u,
  99u,
  111u,
  100u,
  101u,
  100u,
  13u,
  10u,
  66u,
  114u,
  111u,
  119u,
  115u,
  101u,
  114u,
  45u,
  84u,
  121u,
  112u,
  101u,
  58u,
  32u,
  77u,
  105u,
  110u,
  105u,
  66u,
  111u,
  119u,
  115u,
  101u,
  114u,
  79u,
  75u,
  13u,
  10u,
  0u
}; // idb
WCHAR aCreateError[] = L"Create Error!"; // idb
char aH4[] = "</h4>"; // idb
char asc_424574[] = "_"; // idb
char aExe[] = ".exe"; // idb
char aH4UpdateIn5Sec[] = "<h4>Update in 5 sec.<br>Backup:<br>"; // idb
wchar_t aFffaeetfffaeet[15] = L"FFFAEETFFFAEET"; // weak
char asc_4245C4[] = "\\"; // idb
char aAutoupdateExe[] = "_Autoupdate.exe"; // idb
char aNewVersion[] = "New-Version"; // idb
char aVersionInfo[] = "Version-Info"; // idb
unsigned __int16 asc_4245F4[] = { 13u }; // idb
char asc_4245F8[] = "\r\n\r\n"; // idb
_UNKNOWN unk_424600; // weak
wchar_t aRunas[6] = L"runas"; // weak
WCHAR Caption[] = L"Autoupdate-Error1!"; // idb
wchar_t aVersion[10] = L"Version=\""; // weak
wchar_t asc_424658[3] = L"\" "; // weak
wchar_t aPath[7] = L"Path=\""; // weak
WCHAR Operation[] = L"open"; // idb
unsigned __int16 asc_42467C[] = { 35u, 35u, 35u, 0u }; // idb
unsigned __int16 asc_424684[] = { 13u, 10u, 0u }; // idb
wchar_t aSelfdestructBa[18] = L"_selfdestruct.bat"; // weak
unsigned __int16 aRepeatDelSIfEx[] =
{
  58u,
  82u,
  101u,
  112u,
  101u,
  97u,
  116u,
  35u,
  35u,
  35u,
  68u,
  69u,
  76u,
  32u,
  34u,
  37u,
  115u,
  34u,
  35u,
  35u,
  35u,
  105u,
  102u,
  32u,
  101u,
  120u,
  105u,
  115u,
  116u,
  32u,
  34u,
  37u,
  115u,
  34u,
  32u,
  103u,
  111u,
  116u,
  111u,
  32u,
  82u,
  101u,
  112u,
  101u,
  97u,
  116u,
  35u,
  35u,
  35u,
  68u,
  69u,
  76u,
  32u,
  34u,
  37u,
  115u,
  34u,
  35u,
  35u,
  35u,
  0u
}; // idb
char aBadAutoupdate2[] = "Bad-Autoupdate-2"; // idb
char aBadAutoupdate1[] = "Bad-Autoupdate-1"; // idb
char asc_424754[] = "\n\n"; // idb
char aBackup[] = "\nBackup:\n"; // idb
char aAutoupdate_1[] = "Autoupdate: "; // idb
char asc_424774[] = "?"; // idb
WCHAR aVersion_0[] = L"Version"; // idb
WCHAR aPath_0[] = L"Path"; // idb
const wchar_t SubStr[] = L"="; // idb
char aAutoupdate_0[] = "_autoupdate"; // idb
WCHAR String2[] = L" "; // idb
char aMCpuMode[] = "m_CPU_mode"; // idb
char aMCpuPrecentage[] = "m_CPU_Precentage"; // idb
char aUseCpuPrecenta[] = "use_CPU_Precentage"; // idb
char aUseCpuPrecenta_0[] = "use_CPU_Precentage_XX"; // idb
unsigned __int16 aPr[] = { 37u, 112u, 114u, 37u, 32u, 0u }; // idb
unsigned __int16 aMin[] = { 37u, 109u, 105u, 110u, 37u, 0u }; // idb
WCHAR aD[] = L"%d"; // idb
unsigned __int16 aD_1[] = { 37u, 100u, 32u, 37u, 37u, 0u }; // idb
unsigned __int16 aSD03dSS[] =
{
  37u,
  115u,
  58u,
  32u,
  37u,
  100u,
  32u,
  37u,
  37u,
  32u,
  37u,
  48u,
  51u,
  100u,
  32u,
  37u,
  115u,
  32u,
  60u,
  32u,
  37u,
  115u,
  32u,
  37u,
  37u,
  0u
}; // idb
CHAR aRrrrr34[] = "rrrrr34\n"; // idb
unsigned __int16 aSD_1[] = { 37u, 115u, 58u, 32u, 37u, 100u, 32u, 37u, 37u, 0u }; // idb
char a2[] = " (2)"; // idb
WCHAR aTotal[] = L"_Total"; // idb
_UNKNOWN unk_42488C; // weak
char aK_0[] = "/k \""; // idb
char asc_42E3CC[] = "\""; // idb
char aCmdExe[8] = "cmd.exe"; // weak
char aRestartDesktop[] = "RESTART_DESKTOPOK_2018"; // idb
WCHAR aLng[] = L"lng"; // idb
char aDontsleep[10] = "DontSleep"; // weak
char aAaaaUc[8] = "AAAA_UC"; // weak
int dword_42E40C = -33; // weak
char aPleaseSleepMod[] = "please_sleep_mode"; // idb
char aMBatteryPrecen[] = "m_Battery_Precentage"; // idb
char aUseBatteryPrec[] = "use_Battery_Precentage"; // idb
char aMBatteryMode[] = "m_Battery_mode"; // idb
char aTrayIfMinimize[] = "tray_if_minimize"; // idb
char aTrayIfClose[] = "tray_if_close"; // idb
char aUseMiniHttp[] = "use_mini_http"; // idb
char aMNetworkMode[] = "m_Network_mode"; // idb
char aMNetworkPrecen[] = "m_Network_Precentage"; // idb
char aUseNetworkPrec[] = "use_Network_Precentage"; // idb
char aUseNetworkKb[] = "use_Network_KB"; // idb
char aTrayStart[] = "tray_start"; // idb
char aStartupDisable[] = "startup_disabled"; // idb
char aAlwaysStartDis[] = "always_start_disabled"; // idb
CHAR aWtsregisterses[] = "WTSRegisterSessionNotification"; // idb
WCHAR aWtsapi32Dll[] = L"Wtsapi32.dll"; // idb
char aPortable_0[] = " Portable"; // idb
unsigned __int16 aSOsDDD[] =
{
  37u,
  115u,
  32u,
  45u,
  32u,
  79u,
  83u,
  58u,
  37u,
  100u,
  46u,
  37u,
  100u,
  32u,
  37u,
  100u,
  0u
}; // idb
WCHAR Name[] = L"SeShutdownPrivilege"; // idb
char asc_42E5B4[] = "   "; // idb
char aOk[8] = "....OK "; // weak
char aSleep[6] = "Sleep"; // weak
char asc_42E5C8[3] = "  "; // weak
char aDonT[6] = "Don't"; // weak
char aIni_0[] = ".ini"; // idb
char aIni_1[] = ".ini/.."; // idb
wchar_t asc_42E5E4[4] = L"/.."; // weak
WCHAR NewItem = 38u; // idb
char asc_42E608[] = "&"; // idb
wchar_t aLng_0[6] = L"# LNG"; // weak
wchar_t asc_42E618[4] = L"# ?"; // weak
WCHAR aRundll32Exe[] = L"rundll32.exe"; // idb
char aShell32DllCont[] = "shell32.dll,Control_RunDLL"; // idb
char aDieFunktionWir[50] = "Die Funktion wird berarbeitet, verfgbar ab 6.11"; // weak
char aTheFunctionWil[] = "The function will be revised, available from 6.21"; // idb
wchar_t aProgram_0[9] = L"Program="; // weak
char aPaypal[] = "?paypal&"; // idb
char aSeiteFaq[] = "?seite=faq-"; // idb
char aSeiteMicrosoft[] = "?seite=Microsoft/"; // idb
WCHAR aMsconfigExe[] = L"msconfig.exe"; // idb
char aMsinfo32Exe[] = "msinfo32.exe"; // idb
wchar_t aShellFonts[12] = L"shell:fonts"; // weak
wchar_t aControlUserpas[23] = L"control userpasswords2"; // weak
char aDeskCpl3[13] = " desk.cpl,,3"; // weak
wchar_t aTaskmgrExe[12] = L"taskmgr.exe"; // weak
char aSysdmCpl3[14] = " sysdm.cpl,,3"; // weak
char aDeskCpl0[13] = " desk.cpl,,0"; // weak
char aDeskCpl1[13] = " desk.cpl,,1"; // weak
char aPowercfgCpl[] = " powercfg.cpl"; // idb
CHAR aSetImg[] = "Set-Img\n"; // idb
char asc_42E7EC[] = " [+]"; // idb
wchar_t asc_42E7F4[3] = L"//"; // weak
wchar_t aPowercfgCpl_0[13] = L"powercfg.cpl"; // weak
wchar_t aMystifyScr[12] = L"Mystify.scr"; // weak
wchar_t aDeskCpl[9] = L"desk.cpl"; // weak
WCHAR aLoadFromFileUn[] = L"Load from File (Unicode)"; // idb
WCHAR aTranslate[] = L"Translate"; // idb
unsigned __int16 aDSD[] = { 37u, 100u, 41u, 32u, 37u, 115u, 32u, 47u, 37u, 100u, 37u, 37u, 0u }; // idb
unsigned __int16 aSD_2[] = { 37u, 115u, 32u, 47u, 37u, 100u, 37u, 37u, 0u }; // idb
char aUpcomingSlepMe_1[] = "upcoming_slep_message_sec=60\n"; // idb
char aUpcomingSlepMe_0[] = "upcoming_slep_message=(1/0)\n"; // idb
char aMonitorModeSle_1[] = "monitor_mode_slep_sec=600\n"; // idb
char aComputerModeSl_1[] = "computer_mode_slep_sec=600\n"; // idb
char aPleaseSleepMod_0[] = "please_sleep_mode=(0/1)\n"; // idb
char aHide_0[] = "hide\n"; // idb
char aExit[] = "exit\n"; // idb
char aTimerInMin[] = "timer in min\n"; // idb
char asc_42E970[] = "\n"; // idb
char aSetTimer10[] = "set_timer=10\n"; // idb
char aUseTimer1[] = "use_timer=1\n"; // idb
char aEnable1[] = "enable=1\n"; // idb
char aBlockScreensav[] = "block_screensaver=1\n"; // idb
char aBlockLogoff1[] = "block_logoff=1\n"; // idb
char aBlockShutdown0[] = "block_shutdown=0\n"; // idb
char aBlockStandby1[] = "block_standby=1\n"; // idb
unsigned __int16 aS_2[] = { 37u, 115u, 61u, 0u }; // idb
WCHAR aHide[] = L"hide"; // idb
WCHAR aBg_0[] = L"-bg"; // idb
wchar_t asc_42EA0C[] = L":"; // idb
char aUmserverLog[] = "UMServer.log"; // idb
char aBeginthreadexF[28] = "_beginthreadex(...) failure"; // weak
char aAddclient[10] = "AddClient"; // weak
char aUnableToGetRes_0[70] = "Unable to get response from Helper Thread within specified Timeout ->"; // weak
char aBeginthreadexF_1[47] = "_beginthreadex(...) failure, for Helper Thread"; // weak
char aUnableToGetRes[71] = "Unable to get response from Accept Thread withing specified Timeout ->"; // weak
char aBeginthreadexF_0[47] = "_beginthreadex(...) failure, for Launch Thread"; // weak
char aRun[4] = "Run"; // weak
char aTerminatethrea_1[70] = "TerminateThread(.ThreadC.) failure, probably it is already terminated"; // weak
char aTerminatethrea_0[70] = "TerminateThread(.ThreadA.) failure, probably it is already terminated"; // weak
char aWaitformultipl_0[38] = "WaitForMultipleObjects(...) timed out"; // weak
char aShutdown[9] = "Shutdown"; // weak
char aThreadNotFound[29] = "Thread not found in the list"; // weak
char aClientthread[13] = "ClientThread"; // weak
char aRequestedSocke[35] = "Requested Socket version not exist"; // weak
char aWsaenumnetwork[34] = "WSAEnumNetworkEvents(...) failure"; // weak
char aWaitformultipl[36] = "WaitForMultipleObjects(...) failure"; // weak
char aAddclientFailu[23] = "AddClient(...) failure"; // weak
char aWsaacceptFailu[23] = "WSAAccept(...) failure"; // weak
char aWsaeventselect[28] = "WSAEventSelect(...) failure"; // weak
char aWsacreateevent_0[38] = "WSACreateEvent(...) failure for Event"; // weak
char aWsacreateevent[46] = "WSACreateEvent(...) failure for ShutdownEvent"; // weak
char aListenFailure[20] = "listen(...) failure"; // weak
char aBindFailure[18] = "bind(...) failure"; // weak
char aWsasocketFailu[23] = "WSASocket(...) failure"; // weak
char aWsastartupFail[24] = "WSAStartup(...) failure"; // weak
char aAcceptthread[13] = "AcceptThread"; // weak
char aWsawaitformult[38] = "WSAWaitForMultipleEvents(...) failure"; // weak
char aWsarecvFailure[21] = "WSARecv(...) failure"; // weak
char aWsasendFailure[21] = "WSASend(...) failure"; // weak
char aClientthreadPr[27] = "ClientThread, Primary Send"; // weak
char aWsacreateevent_1[28] = "WSACreateEvent(...) failure"; // weak
char aTerminatethrea[64] = "TerminateThread(.h.) failure, probably it is already terminated"; // weak
char aWaitforsingleo[35] = "WaitForSingleObject(...) timed out"; // weak
char aHelperthread[13] = "HelperThread"; // weak
char asc_42EEB8[] = " "; // idb
unsigned __int16 asc_42EEBC[] = { 92u, 92u, 0u }; // idb
unsigned __int16 asc_42EEC4[] = { 92u, 0u }; // idb
char Format[] = "%a, %d %b %Y %H:%M:%S"; // idb
const wchar_t aA[] = L"a"; // idb
int dword_42EF08 = 3211317; // weak
unsigned __int16 aDKb[] = { 37u, 100u, 32u, 75u, 66u, 0u }; // idb
unsigned __int16 aPr_0[] = { 37u, 112u, 114u, 37u, 0u }; // idb
unsigned __int16 aS1fMb[] = { 37u, 115u, 32u, 58u, 32u, 37u, 46u, 49u, 102u, 32u, 77u, 66u, 0u }; // idb
int dword_42EF44 = 46; // weak
int dword_42EF48 = 44; // weak
unsigned __int16 asc_42EF4C[] = { 37u, 102u, 0u }; // idb
char aSec[] = "sec."; // idb
char aTotal_0[] = "Total"; // idb
char aCurrent[] = "Current"; // idb
unsigned __int16 aCurrentSKbSecS[] =
{
  67u,
  117u,
  114u,
  114u,
  101u,
  110u,
  116u,
  58u,
  32u,
  37u,
  115u,
  32u,
  75u,
  66u,
  47u,
  115u,
  101u,
  99u,
  46u,
  32u,
  47u,
  47u,
  32u,
  37u,
  115u,
  32u,
  47u,
  47u,
  32u,
  32u,
  84u,
  111u,
  116u,
  97u,
  108u,
  58u,
  37u,
  115u,
  32u,
  77u,
  66u,
  41u,
  0u
}; // idb
unsigned __int16 word_42EFC4 = 216u; // idb
int dword_42EFE8 = 10; // weak
char aBlockScreensav_0[] = "block_screensaver"; // idb
char aByEnable[] = "by_enable"; // idb
char aBlockLogof[] = "block_logof"; // idb
char aBlockStandby[] = "block_standby"; // idb
char aBlockShutdown[] = "block_shutdown"; // idb
unsigned __int16 aBlockbyexecuti[] =
{
  66u,
  108u,
  111u,
  99u,
  107u,
  98u,
  121u,
  69u,
  120u,
  101u,
  99u,
  117u,
  116u,
  105u,
  111u,
  110u,
  83u,
  116u,
  97u,
  116u,
  101u,
  58u,
  32u,
  37u,
  100u,
  32u,
  111u,
  110u,
  58u,
  37u,
  100u,
  32u,
  98u,
  121u,
  95u,
  101u,
  110u,
  97u,
  98u,
  108u,
  101u,
  58u,
  37u,
  100u,
  10u,
  0u
}; // idb
char aPcShutDownIn[] = "PC Shut Down in"; // idb
char aShutDown[] = "Shut Down"; // idb
char aOk_0[] = "OK"; // idb
char aAbbrechen[] = "Abbrechen"; // idb
WCHAR File[] = L"shutdown.exe"; // idb
WCHAR Parameters[] = L"-s -t 0"; // idb
WCHAR aSFT0[] = L" -s -f -t 0"; // idb
WCHAR aPowrprofDllSet[] = L"powrprof.dll,SetSuspendState"; // idb
CHAR aPowersetactive[] = "PowerSetActiveScheme"; // idb
CHAR aSetactivepwrsc[] = "SetActivePwrScheme"; // idb
CHAR aGetactivepwrsc[] = "GetActivePwrScheme"; // idb
CHAR aPowergetactive[] = "PowerGetActiveScheme"; // idb
CHAR aPowerreadfrien[] = "PowerReadFriendlyName"; // idb
CHAR aPowerenumerate[] = "PowerEnumerate"; // idb
CHAR aEnumpwrschemes[] = "EnumPwrSchemes"; // idb
WCHAR LibFileName[] = L"powrprof.DLL"; // idb
unsigned __int16 aPowerShemeD[] =
{
  80u,
  111u,
  119u,
  101u,
  114u,
  32u,
  83u,
  104u,
  101u,
  109u,
  101u,
  32u,
  40u,
  37u,
  100u,
  41u,
  0u
}; // idb
char asc_42F210[] = "\r\n"; // idb
WCHAR aUser32DllLockw[] = L"user32.dll,LockWorkStation"; // idb
CHAR ProcName[] = "IsPwrSuspendAllowed"; // idb
char aS_1[] = "%s"; // idb
CHAR aShowinfoIntTyp[] = "ShowInfo(int type,CString info_str)\n"; // idb
WCHAR aLT0[] = L" -l -t 0"; // idb
WCHAR aLFT0[] = L" -l -f -t 0"; // idb
WCHAR aRT0[] = L" -r -t 0"; // idb
WCHAR aRFT0[] = L" -r -f -t 0"; // idb
char aMSelTab2[] = "m_sel_tab_2"; // idb
char aStartTimer[] = "start_timer"; // idb
char aMUseAllRuleNoS[] = "m_use_all_rule_no_sleep"; // idb
char aFromStandbyTim[] = "from_standby_timer"; // idb
char aStartTimer1H[] = "start_timer-1-h"; // idb
char aStartTimer1M[] = "start_timer-1-m"; // idb
char aStartTimer1S[] = "start_timer-1-s"; // idb
WCHAR aDH[] = L"%d h"; // idb
unsigned __int16 a4[] = { 52u, 0u }; // idb
WCHAR aS02d02d02d[] = L"%s (%02d:%02d:%02d)"; // idb
char aUseTimer[] = "use_timer"; // idb
char aTimeoutMode[] = "timeout_mode"; // idb
char asc_42F40C[] = " + "; // idb
WCHAR a02d02d02d[] = L"%02d:%02d:%02d"; // idb
unsigned __int8 aLlll[] = { 8u, 76u, 76u, 76u, 76u, 0u }; // idb
unsigned __int8 aLllll[] = { 76u, 76u, 76u, 76u, 76u, 0u }; // idb
char aWorking[11] = "Working..."; // weak
char cp[] = "127.0.0.1"; // idb
char aServerAlreadyL[] = "Server Already Launched"; // idb
char aServerNotLaunc[] = "Server not Launched"; // idb
char aStopped[9] = "Stopped."; // weak
char a1f[] = "%.1f"; // idb
char aD_2[] = "%d"; // idb
char aPto[] = "PTO"; // idb
char aPort_0[] = "Port"; // idb
char aDefindex[] = "Defindex"; // idb
char aSettings[] = "Settings"; // idb
char aServerRoot[] = "Server Root"; // idb
char aHttpLocalhost8[] = "http://localhost:8191/index.html"; // idb
CHAR aGetsystempower[] = "GetSystemPowerStatus"; // idb
WCHAR aKernel32Dll_0[] = L"kernel32.dll"; // idb
CHAR aEnablethemedia[] = "EnableThemeDialogTexture"; // idb
WCHAR aUxthemeDll[] = L"UxTheme.dll"; // idb
WCHAR aTestini[] = L"TestIni"; // idb
WCHAR aM[] = L"M"; // idb
char aPort[] = "_port"; // idb
char aPortable[] = "_portable"; // idb
char aP[] = "_p"; // idb
char aIni[] = "Ini ?"; // idb
WCHAR AppName[] = L"Program"; // idb
char aString[] = "string"; // idb
char aCom[] = "com"; // idb
char aEu[] = "eu"; // idb
char aDe[] = "de"; // idb
WCHAR aStrings[] = L"Strings?"; // idb
WCHAR Text = 85u; // idb
WCHAR aError[] = L"Error!"; // idb
unsigned __int16 aStrD[] = { 115u, 116u, 114u, 58u, 37u, 100u, 63u, 0u }; // idb
wchar_t aLidStrD[12] = L"lid-str:%d?"; // weak
char asc_42F700[] = "##="; // idb
char aAndLanguageNam[] = " and Language Name i.e. : German / Deutsch "; // idb
char aPleaseDonTForg[] = "\r\nPlease don't forget! Write in e-mail subject: Strings for: "; // idb
wchar_t aTranslateTxt[15] = L"_translate.txt"; // weak
unsigned __int16 aD_0[] = { 37u, 100u, 44u, 0u }; // idb
unsigned __int16 aDS_0[] = { 37u, 100u, 61u, 37u, 115u, 10u, 0u }; // idb
char asc_42F7A8[] = "........\n"; // idb
char aMiss[] = "\n\nmiss:\n"; // idb
WCHAR ModuleName[] = L"kernel32"; // idb
CHAR aIswow64process[] = "IsWow64Process"; // idb
CHAR aWow64enablewow[] = "Wow64EnableWow64FsRedirection"; // idb
wchar_t aUserprofile[14] = L"%UserProfile%"; // weak
WCHAR aShell32[] = L"shell32"; // idb
char aPosCreatedumtb[] = "Pos CreateDumTB"; // idb
WCHAR ClassName[] = L"ToolbarWindow32"; // idb
CHAR aSetwindowtheme[] = "SetWindowTheme"; // idb
CHAR aSetprocessdpia[] = "SetProcessDPIAware"; // idb
WCHAR aUser32Dll_0[] = L"user32.dll"; // idb
char BASE64_table_42F99C[] = { 'A' }; // weak
_UNKNOWN unk_42F9E0; // weak
WCHAR OutputString[] = L"NULL\n"; // idb
WCHAR szClass[] = L"Shell_TrayWnd"; // idb
WCHAR aTraynotifywnd[] = L"TrayNotifyWnd"; // idb
char aDesktopApp[16] = "Desktop App    "; // weak
char aImage[6] = "Image"; // weak
char a64[3] = "64"; // weak
char aBase[5] = "Base"; // weak
char aTahoma[] = "Tahoma"; // idb
char aAharoni[] = "Aharoni"; // idb
char aReadError[11] = "Read Error"; // weak
_DWORD dword_42FB10 = 0; // weak
int dword_42FB14 = 0; // weak
WCHAR word_42FB18 = 0u; // idb
_UNKNOWN unk_42FB20; // weak
char byte_42FB60[832] =
{
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  '\0',
  
}; // weak
_UNKNOWN unk_42FEA0; // weak
__int64 qword_42FFA0; // weak
struct tagPOINT Point; // idb
_UNKNOWN unk_42FFB0; // weak
_UNKNOWN unk_42FFB4; // weak
_UNKNOWN unk_42FFB8; // weak
int dword_42FFBC[33]; // weak
_DWORD dword_4301C0[514]; // weak
int dword_4309C8; // weak
WCHAR word_4309CC; // idb
int dword_430A50; // weak
WCHAR word_430A54; // idb
int dword_430AD8; // weak
WCHAR word_430ADC; // idb
int dword_430B60; // idb
WCHAR word_430B64; // idb
WCHAR word_430BE8; // idb
_UNKNOWN unk_430C68; // weak
int dword_430C70; // idb
WCHAR word_430C74; // idb
int dword_430CF8; // weak
__int16 word_430CFC; // weak
int dword_430D80; // weak
__int16 word_430D84; // weak
LPARAM lParam; // idb
__int16 word_430E0C; // weak
WPARAM wParam; // idb
__int16 word_430E94; // weak
int dword_430F18; // weak
WCHAR word_430F1C; // idb
WPARAM dword_430FA0; // idb
WCHAR word_430FA4[66]; // weak
int dword_431028; // weak
__int16 word_43102C; // weak
int dword_4310B0; // weak
WCHAR word_4310B4; // idb
WPARAM dword_431138; // idb
__int16 word_43113C; // weak
int dword_4311C0; // idb
WCHAR word_4311C4; // idb
WPARAM dword_431248; // idb
__int16 word_43124C; // weak
WPARAM dword_4312D0; // idb
__int16 word_4312D4; // weak
int dword_431358; // weak
__int16 word_43135C; // weak
WPARAM dword_4313E0; // idb
__int16 word_4313E4; // weak
int dword_431468; // weak
__int16 word_43146C; // weak
int dword_4314FC; // weak
int dword_431500; // weak
int dword_431504; // weak
int dword_431508; // weak
HMODULE dword_43150C; // idb
DWORD (__stdcall *XInputGetState)(DWORD dwUserIndex, XINPUT_STATE *pState);
char byte_431514[4]; // idb
HINSTANCE hInst; // idb
int dword_43151C; // weak
WCHAR word_431520[2]; // weak
ULONG_PTR dwResult; // idb
int dword_431528; // idb
WCHAR word_43152C; // idb
WPARAM dword_4315B0; // idb
WCHAR word_4315B4; // idb
WPARAM dword_431638; // idb
WCHAR word_43163C; // idb
WPARAM dword_4316C0; // idb
WCHAR word_4316C4; // idb
int dword_431744; // weak
int dword_431748; // weak
int dword_431784; // weak
char byte_431788; // weak
UINT Msg; // idb
_DWORD dword_431798[49]; // weak
HANDLE hObject; // idb
int dword_431860; // idb
WCHAR word_431864; // idb
int dword_4318E8; // idb
WCHAR word_4318EC; // idb
int dword_431970; // idb
WCHAR word_431974; // idb
int dword_4319F8; // idb
WCHAR word_4319FC; // idb
WPARAM dword_431A80; // idb
WCHAR word_431A84; // idb
WPARAM dword_431B08; // idb
WCHAR word_431B0C; // idb
WPARAM dword_431B90; // idb
WCHAR word_431B94; // idb
int dword_431C18; // idb
WCHAR word_431C1C; // idb
int dword_431CA0; // idb
WCHAR word_431CA4; // idb
int dword_431D28; // idb
WCHAR word_431D2C; // idb
WPARAM dword_431DB0; // idb
WCHAR word_431DB4; // idb
WPARAM dword_431E38; // idb
WCHAR KeyName; // idb
int dword_431EC0; // idb
WCHAR word_431EC4; // idb
WPARAM dword_431F48; // idb
WCHAR word_431F4C; // idb
_DWORD dword_431FD0[2]; // weak
int dword_431FD8; // weak
int dword_4327EC; // weak
_DWORD dword_4327F8[16]; // weak
HMENU hMenu; // idb
HWND dword_432844; // idb
_DWORD dword_432CE0[3]; // weak
HWND hWnd; // idb
int dword_432CF0; // weak
int dword_432CF4; // weak
int dword_432CF8; // weak
HMODULE dword_432CFC; // idb
BOOL (__stdcall *WTSRegisterSessionNotification)(HWND hWnd, DWORD dwFlags);
int dword_432D04; // weak
HIMAGELIST himl; // idb
int dword_432D0C; // weak
int dword_432D10; // weak
int dword_432D14; // weak
int dword_432F28; // weak
int dword_432F2C; // weak
int dword_432F30; // weak
int dword_432F34; // weak
int dword_432F38; // weak
WPARAM dword_432FC0; // idb
int dword_433048; // weak
int dword_4330D0; // weak
WCHAR word_4330D4; // idb
int dword_433158; // weak
HWND dword_4331DC; // idb
int dword_4331E0; // weak
_UNKNOWN unk_433434; // weak
_UNKNOWN unk_433438; // weak
_UNKNOWN unk_43343C; // weak
_UNKNOWN unk_433440; // weak
char byte_433444; // weak
_UNKNOWN unk_433448; // weak
BOOLEAN (__stdcall *EnumPwrSchemes)(PWRSCHEMESENUMPROC lpfn, LPARAM lParam);
DWORD (__stdcall *PowerEnumerate)(HKEY RootPowerKey, const GUID *SchemeGuid, const GUID *SubGroupOfPowerSettingsGuid, POWER_DATA_ACCESSOR AccessFlags, ULONG Index, UCHAR *Buffer, DWORD *BufferSize);
DWORD (__stdcall *PowerReadFriendlyName)(HKEY RootPowerKey, const GUID *SchemeGuid, const GUID *SubGroupOfPowerSettingsGuid, const GUID *PowerSettingGuid, PUCHAR Buffer, LPDWORD BufferSize);
DWORD (__stdcall *PowerGetActiveScheme)(HKEY UserRootPowerKey, GUID **ActivePolicyGuid);
BOOLEAN (__stdcall *GetActivePwrScheme)(PUINT puiID);
BOOLEAN (__stdcall *SetActivePwrScheme)(UINT uiID, PGLOBAL_POWER_POLICY pGlobalPowerPolicy, PPOWER_POLICY pPowerPolicy);
DWORD (__stdcall *PowerSetActiveScheme)(HKEY UserRootPowerKey, const GUID *SchemeGuid);
_UNKNOWN unk_433478; // weak
int dword_4334E0; // weak
_UNKNOWN unk_4334E4; // weak
int dword_4334EC; // weak
_UNKNOWN unk_433530; // weak
int dword_433550; // weak
int dword_433590; // idb
WCHAR word_433594; // idb
int dword_433618; // idb
WCHAR word_43361C; // idb
int dword_4336A0; // idb
WCHAR word_4336A4; // idb
int dword_433728; // idb
WCHAR word_43372C[66]; // weak
int dword_4337B0; // weak
WCHAR word_4337B4; // idb
int dword_433838; // idb
WCHAR word_43383C; // idb
WPARAM dword_4338C0; // idb
HIMAGELIST dword_433944; // idb
WPARAM dword_433948; // idb
WCHAR word_43394C; // idb
int dword_4339D0[33]; // weak
_UNKNOWN unk_433A54; // weak
HMODULE hModule; // idb
int dword_433A5C; // weak
_UNKNOWN dword_433A60; // weak
char byte_433A64; // weak
struct _OSVERSIONINFOW VersionInformation; // idb
struct _OSVERSIONINFOW stru_433B80; // idb
_UNKNOWN dword_433C9C; // weak
char byte_433CA0; // weak
_UNKNOWN dword_433CA4; // weak
char byte_433CA8; // weak
_UNKNOWN unk_433CAC; // weak
_UNKNOWN unk_433CB0; // weak
LPCWSTR lpValueName; // idb
LPCWSTR lpFile; // idb
int dword_433CBC; // weak
WCHAR String; // idb
HMODULE hInstance; // idb
_UNKNOWN unk_433EC4; // weak
_UNKNOWN unk_433ECC; // weak
int dword_433ED0[256]; // weak
LPCWSTR dword_4342D0[256]; // weak
int dword_4346D0[]; // weak
int dword_4346D4; // weak
LPCWSTR dword_434AD0[256]; // weak
LPCWSTR lpString[256]; // weak
_UNKNOWN unk_4352D0; // weak
int dword_444AD0[]; // weak
LPCWSTR lpString2; // idb
int dword_444BD0[256]; // weak
int dword_444FD0; // idb
CHAR MultiByteStr[1024]; // idb
int dword_4453D4; // weak
int dword_4453D8; // weak
int dword_4453DC; // weak
int dword_4453E0; // weak
LPCWSTR Str; // idb
WCHAR String1; // idb
int dword_448AF8; // weak
int dword_448AFC; // weak
WPARAM dword_448B08; // idb
HMODULE dword_448B0C; // idb
HMODULE dword_448B10; // idb
char byte_448B14[61]; // weak
char byte_448B51; // weak
char byte_448BD1; // weak
int dword_448C14; // weak
HINSTANCE dword_448C24; // idb
_UNKNOWN unk_448C28; // weak
int dword_448C2C; // weak
char byte_448C30; // weak
int dword_448C38; // weak
HHOOK hhk; // idb
WNDPROC dword_448C40; // idb
WNDPROC lpPrevWndFunc; // idb
int dword_448C48; // weak
WPARAM dword_448C4C; // idb
_UNKNOWN unk_448C58; // weak
int dword_448C68; // weak
int dword_448C6C; // weak
int dword_448C70; // weak
int dword_448C74; // weak
int dword_448C78; // weak
int dword_448C7C; // weak
int dword_448C80; // weak
int dword_448C84; // weak
char byte_448CA0; // weak
char byte_448CA1; // weak
LPBYTE Block; // idb
int dword_448CAC; // weak


//----- (00401000) --------------------------------------------------------
int sub_401000()
{
  sub_40100A();
  return atexit(sub_401020);
}

//----- (0040100A) --------------------------------------------------------
_DWORD *sub_40100A()
{
  _DWORD *result; // eax

  result = &dword_42FB10;
  dword_42FB10 = &off_41EE70;
  return result;
}
// 41EE70: using guessed type int (__thiscall *off_41EE70)(void *, char);
// 42FB10: using guessed type _DWORD dword_42FB10;

//----- (00401020) --------------------------------------------------------
void __cdecl sub_401020()
{
  sub_413611(&dword_42FB10);
}
// 42FB10: using guessed type _DWORD dword_42FB10;

//----- (0040102A) --------------------------------------------------------
_DWORD *__thiscall sub_40102A(_DWORD *this, struct CWnd *a2)
{
  CDialog::CDialog((CDialog *)this, 0xA4u, a2);
  CWnd::CWnd((CWnd *)(this + 26));
  this[26] = &off_41DA5C;
  CWnd::CWnd((CWnd *)(this + 42));
  this[42] = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 58));
  this[58] = &off_41D8C8;
  CWnd::CWnd((CWnd *)(this + 74));
  this[74] = &off_41D8C8;
  this[24] = 9;
  this[25] = 9;
  *this = &off_41D7F0;
  return this;
}
// 41D7F0: using guessed type struct CRuntimeClass *(__thiscall *off_41D7F0)(CDialog *__hidden this);
// 41D8C8: using guessed type struct CRuntimeClass *(__thiscall *off_41D8C8)(CComboBox *__hidden this);
// 41D998: using guessed type struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this);
// 41DA5C: using guessed type struct CRuntimeClass *(__thiscall *off_41DA5C)(CEdit *__hidden this);

//----- (004010C2) --------------------------------------------------------
void *__thiscall sub_4010C2(void *this, char a2)
{
  sub_4010DE((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004010DE) --------------------------------------------------------
void __thiscall sub_4010DE(int this)
{
  CComboBox::~CComboBox((CComboBox *)(this + 296));
  CComboBox::~CComboBox((CComboBox *)(this + 232));
  CButton::~CButton((CButton *)(this + 168));
  CEdit::~CEdit((CEdit *)(this + 104));
  CDialog::~CDialog((CDialog *)this);
}

//----- (00401143) --------------------------------------------------------
void __thiscall sub_401143(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 1000, (struct CWnd *)(this + 104));
  DDX_Control(a2, 2105, (struct CWnd *)(this + 168));
  DDX_Control(a2, 5011, (struct CWnd *)(this + 232));
  DDX_Control(a2, 1014, (struct CWnd *)(this + 296));
}

//----- (00401195) --------------------------------------------------------
int (**sub_401195())()
{
  return &off_41D770;
}
// 41D770: using guessed type int (*off_41D770)();

//----- (0040119B) --------------------------------------------------------
int __thiscall sub_40119B(HWND *this)
{
  CDialog::OnInitDialog((CDialog *)this);
  dword_431EC0 = sub_4141D6(&word_431EC4, dword_431EC0);
  dword_431E38 = sub_4141D6(&KeyName, dword_431E38);
  dword_431DB0 = sub_4141D6(&word_431DB4, dword_431DB0);
  sub_401267(this);
  SendMessageW(this[50], 0xF1u, dword_431E38, 0);
  return 1;
}

//----- (0040120A) --------------------------------------------------------
UINT_PTR __thiscall sub_40120A(HWND *this)
{
  int v2; // eax

  v2 = SendMessageW(this[50], 0xF0u, 0, 0);
  if ( v2 != dword_431E38 )
  {
    dword_431E38 = v2;
    sub_4141BE(&KeyName, v2);
  }
  KillTimer(this[8], 0x7D0u);
  KillTimer(this[8], 0x7D0u);
  return SetTimer(this[8], 0x7D0u, 0x64u, 0);
}

//----- (00401267) --------------------------------------------------------
int __thiscall sub_401267(HWND *this)
{
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // eax
  int i; // ebx
  unsigned __int16 *v5; // eax
  HWND v6; // eax
  unsigned __int16 *v7; // eax
  unsigned __int16 *v9; // [esp-4h] [ebp-2Ch]
  struct _SYSTEM_POWER_STATUS v10; // [esp+Ch] [ebp-1Ch] BYREF
  LPARAM lParam; // [esp+18h] [ebp-10h] BYREF
  int v12; // [esp+24h] [ebp-4h]

  sub_413618(&v10);
  CString::CString((CString *)&lParam);
  v12 = 0;
  CString::Format((CString *)&lParam, &off_42416C, v10.ACLineStatus, v10.BatteryLifePercent);
  if ( v10.BatteryLifePercent == 0xFF )
  {
    v2 = sub_414BE2(152);
    CString::operator=(&lParam, v2);
  }
  CWnd::SetWindowTextW((CWnd *)(this + 26), (const unsigned __int16 *)lParam);
  v3 = sub_414BE2(67);
  CWnd::SetWindowTextW((CWnd *)(this + 42), v3);
  SendMessageW(this[66], 0x14Bu, 0, 0);
  SendMessageW(this[82], 0x14Bu, 0, 0);
  for ( i = 3; i < 21; ++i )
  {
    v9 = sub_414BE2(132);
    v5 = sub_414BE2(150);
    CString::Format((CString *)&lParam, aSDS, v5, i, v9);
    SendMessageW(this[66], 0x14Au, i - 3, lParam);
  }
  v6 = (HWND)(this + 74);
  if ( this != (HWND *)-296 )
    v6 = this[82];
  sub_412397(v6);
  SendMessageW(this[66], 0x14Eu, 4u, 0);
  SendMessageW(this[82], 0x14Eu, 7u, 0);
  SendMessageW(this[82], 0x14Eu, dword_431DB0, 0);
  SendMessageW(this[66], 0x14Eu, dword_431EC0 - 3, 0);
  SendMessageW(this[50], 0xF1u, dword_431E38, 0);
  v7 = sub_414BE2(67);
  CString::operator=(&lParam, v7);
  CString::Replace((CString *)&lParam, &word_424150, &word_42FB18);
  CWnd::SetWindowTextW((CWnd *)(this + 42), (const unsigned __int16 *)lParam);
  KillTimer(this[8], 0x7D0u);
  SetTimer(this[8], 0x7D0u, 0x64u, 0);
  v12 = -1;
  CString::~CString((CString *)&lParam);
  return 1;
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (0040142D) --------------------------------------------------------
int __thiscall sub_40142D(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[90] = a2;
  return result;
}

//----- (0040143A) --------------------------------------------------------
int __thiscall sub_40143A(HWND *this)
{
  int result; // eax

  if ( this[8] )
    return sub_401267(this);
  return result;
}

//----- (00401446) --------------------------------------------------------
UINT_PTR __thiscall sub_401446(HWND *this)
{
  int v2; // eax

  v2 = SendMessageW(this[82], 0x147u, 0, 0);
  if ( v2 != dword_431DB0 )
  {
    dword_431DB0 = v2;
    sub_4141BE(&word_431DB4, v2);
  }
  KillTimer(this[8], 0x7D0u);
  KillTimer(this[8], 0x7D0u);
  return SetTimer(this[8], 0x7D0u, 0x64u, 0);
}

//----- (004014A3) --------------------------------------------------------
UINT_PTR __thiscall sub_4014A3(HWND *this)
{
  int v2; // eax

  v2 = SendMessageW(this[66], 0x147u, 0, 0) + 3;
  if ( v2 != dword_431EC0 )
  {
    dword_431EC0 = v2;
    sub_4141BE(&word_431EC4, v2);
  }
  KillTimer(this[8], 0x7D0u);
  KillTimer(this[8], 0x7D0u);
  return SetTimer(this[8], 0x7D0u, 0x64u, 0);
}

//----- (00401503) --------------------------------------------------------
void __thiscall sub_401503(int this)
{
  unsigned __int16 *v2; // eax
  int v3; // eax
  unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  int BatteryLifePercent; // eax
  bool v7; // zf
  unsigned __int16 *v8; // eax
  unsigned __int16 *v9; // eax
  int v10; // eax
  clock_t v11; // eax
  unsigned __int16 *v12; // eax
  int v13; // ecx
  int CurSel; // eax
  int v15; // [esp-8h] [ebp-40h] BYREF
  _DWORD v16[4]; // [esp-4h] [ebp-3Ch] BYREF
  struct _SYSTEM_POWER_STATUS v17; // [esp+Ch] [ebp-2Ch] BYREF
  CString *v18; // [esp+18h] [ebp-20h]
  CString *v19; // [esp+1Ch] [ebp-1Ch]
  char v20[4]; // [esp+20h] [ebp-18h] BYREF
  char v21[4]; // [esp+24h] [ebp-14h] BYREF
  unsigned __int16 *v22; // [esp+28h] [ebp-10h] BYREF
  int v23; // [esp+34h] [ebp-4h]

  sub_413618(&v17);
  CString::CString((CString *)&v22);
  v23 = 0;
  CString::Format((CString *)&v22, &off_42416C, v17.ACLineStatus, v17.BatteryLifePercent);
  if ( v17.ACLineStatus )
  {
    v16[0] = CString::CString((CString *)v20, aAc);
    LOBYTE(v23) = 1;
    v2 = sub_414BE2(151);
    v3 = operator+(v21, v2, v16[0]);
    LOBYTE(v23) = 2;
    CString::operator=(&v22, v3);
    LOBYTE(v23) = 1;
    CString::~CString((CString *)v21);
    LOBYTE(v23) = 0;
    CString::~CString((CString *)v20);
  }
  else
  {
    v16[0] = v17.BatteryLifePercent;
    v4 = sub_414BE2(151);
    CString::Format((CString *)&v22, aSD, v4, v16[0]);
  }
  if ( !*(_DWORD *)(this + 360) )
  {
    OutputDebugStringA(aByOn);
LABEL_7:
    v5 = sub_414BE2(30);
    CWnd::SetWindowTextW((CWnd *)(this + 104), v5);
    goto LABEL_22;
  }
  if ( !dword_431E38 )
    goto LABEL_7;
  if ( v17.ACLineStatus != 1 )
  {
    BatteryLifePercent = v17.BatteryLifePercent;
    v7 = v17.BatteryLifePercent == 255;
    *(_DWORD *)(this + 100) = v17.BatteryLifePercent;
    if ( v7 )
    {
      v8 = sub_414BE2(152);
      CString::operator=(&v22, v8);
    }
    else
    {
      v16[0] = BatteryLifePercent;
      v9 = sub_414BE2(151);
      CString::Format((CString *)&v22, aSD, v9, v16[0]);
    }
    if ( *(_DWORD *)(this + 32) )
      CWnd::SetWindowTextW((CWnd *)(this + 104), v22);
    if ( *(_DWORD *)(this + 360) )
    {
      v10 = *(_DWORD *)(this + 100);
      if ( v10 >= *(_DWORD *)(this + 96) )
      {
        *(_DWORD *)(this + 96) = v10;
      }
      else if ( v10 <= dword_431EC0 )
      {
        v11 = clock();
        if ( v11 - dword_42FB14 < 60000 )
        {
          dword_42FB14 = v11;
          KillTimer(*(HWND *)(this + 32), 0x7D0u);
          SetTimer(*(HWND *)(this + 32), 0x7D0u, 0x3E8u, 0);
          if ( dword_431E38 )
          {
            dword_431E38 = 0;
            sub_4141BE(&KeyName, 0);
          }
          SendMessageW(*(HWND *)(this + 200), 0xF1u, 0, 0);
          v12 = sub_414BE2(161);
          v19 = (CString *)v16;
          CString::CString((CString *)v16, v12);
          v15 = v13;
          v18 = (CString *)&v15;
          LOBYTE(v23) = 3;
          CString::CString((CString *)&v15, (const struct CString *)&v22);
          LOBYTE(v23) = 0;
          CurSel = CComboBox::GetCurSel((CComboBox *)(this + 296));
          sub_410C56(CurSel);
        }
      }
    }
  }
LABEL_22:
  v23 = -1;
  CString::~CString((CString *)&v22);
}
// 4016F1: variable 'v13' is possibly undefined
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A074: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 42FB14: using guessed type int dword_42FB14;
// 401503: using guessed type char var_18[4];
// 401503: using guessed type char var_14[4];

//----- (00401773) --------------------------------------------------------
CButton *__thiscall sub_401773(CButton *this, char a2)
{
  CButton::~CButton(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040178F) --------------------------------------------------------
CComboBox *__thiscall sub_40178F(CComboBox *this, char a2)
{
  CComboBox::~CComboBox(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004017BE) --------------------------------------------------------
CEdit *__thiscall sub_4017BE(CEdit *this, char a2)
{
  CEdit::~CEdit(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004017DF) --------------------------------------------------------
void sub_4017DF()
{
  dword_431468 = 0;
  word_43146C = 0;
}
// 431468: using guessed type int dword_431468;
// 43146C: using guessed type __int16 word_43146C;

//----- (004017F4) --------------------------------------------------------
void sub_4017F4()
{
  dword_4313E0 = 0;
  word_4313E4 = 0;
}
// 4313E4: using guessed type __int16 word_4313E4;

//----- (00401809) --------------------------------------------------------
void sub_401809()
{
  dword_431358 = 0;
  word_43135C = 0;
}
// 431358: using guessed type int dword_431358;
// 43135C: using guessed type __int16 word_43135C;

//----- (0040181E) --------------------------------------------------------
void sub_40181E()
{
  dword_4312D0 = 0;
  word_4312D4 = 0;
}
// 4312D4: using guessed type __int16 word_4312D4;

//----- (00401833) --------------------------------------------------------
void sub_401833()
{
  dword_431248 = 0;
  word_43124C = 0;
}
// 43124C: using guessed type __int16 word_43124C;

//----- (00401848) --------------------------------------------------------
WCHAR *__thiscall sub_401848(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseHibernate);
  return sub_403F67((WCHAR *)&dword_4311C0, 0, v2[0]);
}

//----- (0040186D) --------------------------------------------------------
void sub_40186D()
{
  dword_431138 = 0;
  word_43113C = 0;
}
// 43113C: using guessed type __int16 word_43113C;

//----- (00401882) --------------------------------------------------------
void sub_401882()
{
  dword_4310B0 = 0;
  word_4310B4 = 0;
}
// 4310B0: using guessed type int dword_4310B0;

//----- (00401897) --------------------------------------------------------
void sub_401897()
{
  dword_431028 = 0;
  word_43102C = 0;
}
// 431028: using guessed type int dword_431028;
// 43102C: using guessed type __int16 word_43102C;

//----- (004018AC) --------------------------------------------------------
void sub_4018AC()
{
  dword_430FA0 = 0;
  word_430FA4 = 0;
}
// 430FA4: using guessed type __int16 word_430FA4;

//----- (004018C1) --------------------------------------------------------
void sub_4018C1()
{
  dword_430F18 = 0;
  word_430F1C = 0;
}
// 430F18: using guessed type int dword_430F18;

//----- (004018D6) --------------------------------------------------------
void sub_4018D6()
{
  wParam = 0;
  word_430E94 = 0;
}
// 430E94: using guessed type __int16 word_430E94;

//----- (004018EB) --------------------------------------------------------
void sub_4018EB()
{
  lParam = 0;
  word_430E0C = 0;
}
// 430E0C: using guessed type __int16 word_430E0C;

//----- (00401900) --------------------------------------------------------
void sub_401900()
{
  dword_430D80 = 0;
  word_430D84 = 0;
}
// 430D80: using guessed type int dword_430D80;
// 430D84: using guessed type __int16 word_430D84;

//----- (00401915) --------------------------------------------------------
void sub_401915()
{
  dword_430CF8 = 0;
  word_430CFC = 0;
}
// 430CF8: using guessed type int dword_430CF8;
// 430CFC: using guessed type __int16 word_430CFC;

//----- (0040192A) --------------------------------------------------------
void sub_40192A()
{
  dword_430C70 = 0;
  word_430C74 = 0;
}

//----- (0040193A) --------------------------------------------------------
int sub_40193A()
{
  sub_401944();
  return atexit(sub_40195A);
}

//----- (00401944) --------------------------------------------------------
WCHAR *sub_401944()
{
  CString::CString((CString *)(&word_430BE8 + 64));
  word_430BE8 = 0;
  return &word_430BE8;
}

//----- (0040195A) --------------------------------------------------------
void __cdecl sub_40195A()
{
  CString::~CString((CString *)(&word_430BE8 + 64));
}

//----- (00401974) --------------------------------------------------------
void sub_401974()
{
  dword_430B60 = 0;
  word_430B64 = 0;
}

//----- (00401989) --------------------------------------------------------
WCHAR *__thiscall sub_401989(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aPleaseSleepBlo);
  return sub_403F67((WCHAR *)&dword_430AD8, 0, v2[0]);
}
// 430AD8: using guessed type int dword_430AD8;

//----- (004019AE) --------------------------------------------------------
WCHAR *__thiscall sub_4019AE(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aPleaseSleepBlo_0);
  return sub_403F67((WCHAR *)&dword_430A50, 0, v2[0]);
}
// 430A50: using guessed type int dword_430A50;

//----- (004019D3) --------------------------------------------------------
WCHAR *__thiscall sub_4019D3(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aPleaseSleepBlo_1);
  return sub_403F67((WCHAR *)&dword_4309C8, 0, v2[0]);
}
// 4309C8: using guessed type int dword_4309C8;

//----- (004019F8) --------------------------------------------------------
_DWORD *sub_4019F8()
{
  _DWORD *result; // eax
  int v1; // ecx
  _DWORD *v2; // edx

  result = dword_4301C0;
  v1 = 256;
  v2 = &dword_4301C0[1];
  do
  {
    v2[1] = 0;
    *v2 = 0;
    v2 += 2;
    --v1;
  }
  while ( v1 );
  dword_4301C0[0] = 0;
  return result;
}
// 4301C0: using guessed type _DWORD dword_4301C0[514];

//----- (00401A1D) --------------------------------------------------------
int sub_401A1D()
{
  sub_401A27();
  return atexit(sub_401A43);
}

//----- (00401A27) --------------------------------------------------------
CString *sub_401A27()
{
  return CString::CString((CString *)&unk_42FFB8, byte_431514);
}

//----- (00401A43) --------------------------------------------------------
void __cdecl sub_401A43()
{
  CString::~CString((CString *)&unk_42FFB8);
}

//----- (00401A4D) --------------------------------------------------------
int sub_401A4D()
{
  sub_401A57();
  return atexit(sub_401A73);
}

//----- (00401A57) --------------------------------------------------------
CString *sub_401A57()
{
  return CString::CString((CString *)&unk_42FFB4, byte_431514);
}

//----- (00401A73) --------------------------------------------------------
void __cdecl sub_401A73()
{
  CString::~CString((CString *)&unk_42FFB4);
}

//----- (00401A7D) --------------------------------------------------------
int sub_401A7D()
{
  sub_401A87();
  return atexit(sub_401AA3);
}

//----- (00401A87) --------------------------------------------------------
CString *sub_401A87()
{
  return CString::CString((CString *)&unk_42FFB0, byte_431514);
}

//----- (00401AA3) --------------------------------------------------------
void __cdecl sub_401AA3()
{
  CString::~CString((CString *)&unk_42FFB0);
}

//----- (00401AAD) --------------------------------------------------------
int __thiscall sub_401AAD(int this, struct CWnd *a2)
{
  const WCHAR *v3; // ecx
  const WCHAR *v4; // ecx
  const WCHAR *v5; // ecx
  const WCHAR *v6; // ecx
  const WCHAR *v7; // ecx
  const WCHAR *v8; // ecx
  const WCHAR *v9; // ecx
  const WCHAR *v10; // ecx
  const WCHAR *v11; // ecx
  const WCHAR *v12; // ecx
  const WCHAR *v13; // ecx
  const WCHAR *v14; // ecx
  const WCHAR *v15; // ecx
  const WCHAR *v16; // ecx
  const WCHAR *v17; // ecx
  const WCHAR *v18; // ecx
  const char *v19; // ecx
  const WCHAR *v20; // ecx
  char *v22; // [esp-8h] [ebp-24h] BYREF
  LPCWSTR v23[5]; // [esp-4h] [ebp-20h] BYREF
  int v24; // [esp+18h] [ebp-4h]

  v23[4] = (LPCWSTR)this;
  CDialog::CDialog((CDialog *)this, 0x82u, a2);
  v24 = 0;
  sub_41558D((_DWORD *)(this + 104));
  sub_41539A((_DWORD *)(this + 120));
  sub_4103EF((void *)(this + 140));
  sub_40FF8F(this + 144);
  CWnd::CWnd((CWnd *)(this + 1692));
  *(_DWORD *)(this + 1692) = &off_41D998;
  v23[0] = v3;
  LOBYTE(v24) = 5;
  v22 = aMoreOptions;
  *(_DWORD *)this = &off_41DB88;
  CString::CString((CString *)v23, v22);
  sub_403FAF(&dword_431468, 1, v23[0]);
  v23[0] = v4;
  CString::CString((CString *)v23, aComputerModeSl);
  sub_403FAF(&dword_4313E0, 2, v23[0]);
  v23[0] = v5;
  CString::CString((CString *)v23, aStartTray);
  sub_403FAF(&dword_431358, 2, v23[0]);
  v23[0] = v6;
  CString::CString((CString *)v23, aPowerokMode);
  sub_403FAF(&dword_4312D0, 3, v23[0]);
  v23[0] = v7;
  CString::CString((CString *)v23, aPowerokModeYes);
  sub_403FAF(&dword_431248, -1, v23[0]);
  v23[0] = v8;
  CString::CString((CString *)v23, aPowerokModeNo);
  sub_403FAF(&dword_431138, -1, v23[0]);
  v23[0] = v9;
  CString::CString((CString *)v23, aMActivePowerTh);
  sub_403FAF(&dword_4310B0, -1, v23[0]);
  v23[0] = v10;
  CString::CString((CString *)v23, aMZoom);
  sub_403FAF(&dword_431028, 0, v23[0]);
  v23[0] = v11;
  CString::CString((CString *)v23, aDetectControll);
  sub_403FAF(&dword_430FA0, 1, v23[0]);
  v23[0] = v12;
  CString::CString((CString *)v23, aMouseToleranz);
  sub_403FAF(&dword_430F18, 2, v23[0]);
  v23[0] = v13;
  CString::CString((CString *)v23, aMonitorModeSle);
  sub_403FAF(&wParam, 2, v23[0]);
  v23[0] = v14;
  CString::CString((CString *)v23, aComputerModeSl_0);
  sub_403FAF(&lParam, 600, v23[0]);
  v23[0] = v15;
  CString::CString((CString *)v23, aMonitorModeSle_0);
  sub_403FAF(&dword_430D80, 300, v23[0]);
  v23[0] = v16;
  CString::CString((CString *)v23, aPowerokModeSec);
  sub_403FAF(&dword_430CF8, 10, v23[0]);
  v23[0] = v17;
  CString::CString((CString *)v23, aMTotrayIco);
  sub_403FAF(&dword_430C70, 0, v23[0]);
  v23[0] = v18;
  CString::CString((CString *)v23, aLastPowerSheme);
  v22 = (char *)v19;
  LOBYTE(v24) = 6;
  v23[3] = (LPCWSTR)&v22;
  CString::CString((CString *)&v22, aNoName);
  LOBYTE(v24) = 5;
  sub_40401F(&word_430BE8, (char)v22, v23[0]);
  v23[0] = v20;
  CString::CString((CString *)v23, aUpcomingSlepMe);
  sub_403FAF(&dword_430B60, 100, v23[0]);
  return this;
}
// 401B1A: variable 'v3' is possibly undefined
// 401B40: variable 'v4' is possibly undefined
// 401B5C: variable 'v5' is possibly undefined
// 401B78: variable 'v6' is possibly undefined
// 401B94: variable 'v7' is possibly undefined
// 401BB0: variable 'v8' is possibly undefined
// 401BCC: variable 'v9' is possibly undefined
// 401BE8: variable 'v10' is possibly undefined
// 401C04: variable 'v11' is possibly undefined
// 401C20: variable 'v12' is possibly undefined
// 401C3C: variable 'v13' is possibly undefined
// 401C58: variable 'v14' is possibly undefined
// 401C77: variable 'v15' is possibly undefined
// 401C96: variable 'v16' is possibly undefined
// 401CB2: variable 'v17' is possibly undefined
// 401CCE: variable 'v18' is possibly undefined
// 401CDE: variable 'v19' is possibly undefined
// 401D00: variable 'v20' is possibly undefined
// 41D998: using guessed type struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this);
// 41DB88: using guessed type struct CRuntimeClass *(__thiscall *off_41DB88)(CDialog *__hidden this);
// 430CF8: using guessed type int dword_430CF8;
// 430D80: using guessed type int dword_430D80;
// 430F18: using guessed type int dword_430F18;
// 431028: using guessed type int dword_431028;
// 4310B0: using guessed type int dword_4310B0;
// 431358: using guessed type int dword_431358;
// 431468: using guessed type int dword_431468;

//----- (00401D2E) --------------------------------------------------------
_DWORD *__thiscall sub_401D2E(_DWORD *this, char a2)
{
  sub_401D4A(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00401D4A) --------------------------------------------------------
void __thiscall sub_401D4A(_DWORD *this)
{
  CButton::~CButton((CButton *)(this + 423));
  sub_410087(this + 36);
  sub_4103FD();
  sub_4153AD(this + 30);
  sub_4155BE(this + 26);
  CDialog::~CDialog((CDialog *)this);
}
// 4153AD: using guessed type int __thiscall sub_4153AD(_DWORD);

//----- (00401DBB) --------------------------------------------------------
void __thiscall sub_401DBB(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 2041, (struct CWnd *)(this + 1692));
}

//----- (00401DD3) --------------------------------------------------------
int (**sub_401DD3())()
{
  return &off_41DB20;
}
// 41DB20: using guessed type int (*off_41DB20)();

//----- (00401DD9) --------------------------------------------------------
int __thiscall sub_401DD9(int *this)
{
  HWND v2; // eax
  WPARAM v4; // [esp-8h] [ebp-Ch]
  LPARAM v5; // [esp-4h] [ebp-8h]

  CDialog::OnInitDialog((CDialog *)this);
  this[29] = this[8];
  hInstance = (HMODULE)*((_DWORD *)AfxGetModuleState() + 2);
  dword_4311C0 = sub_4141D6(&word_4311C4, dword_4311C0);
  sub_403A95();
  v5 = dword_430FA0;
  v4 = dword_430FA0;
  v2 = sub_402952((HWND *)this, 1067);
  SendMessageW(v2, 0xF1u, v4, v5);
  sub_401E60(0xFu, 1);
  sub_402BAB((HWND *)this, this[8]);
  SetTimer((HWND)this[8], 0x3E9u, 0x3E8u, 0);
  return 1;
}

//----- (00401E60) --------------------------------------------------------
HANDLE __stdcall sub_401E60(unsigned __int16 a1, int a2)
{
  int v2; // eax
  int SystemMetrics; // [esp-8h] [ebp-18h]
  CHAR ModuleName[8]; // [esp+8h] [ebp-8h] BYREF

  strcpy(ModuleName, "shell32");
  if ( !hInst )
  {
    hInst = GetModuleHandleA(ModuleName);
    if ( !hInst )
      return 0;
  }
  if ( a2 )
  {
    SystemMetrics = GetSystemMetrics(12);
    v2 = GetSystemMetrics(11);
  }
  else
  {
    SystemMetrics = GetSystemMetrics(50);
    v2 = GetSystemMetrics(49);
  }
  return LoadImageW(hInst, (LPCWSTR)a1, 1u, v2, SystemMetrics, 0);
}

//----- (00401EE5) --------------------------------------------------------
int __thiscall sub_401EE5(CWnd *this, unsigned int a2, int a3)
{
  HWND v4; // eax
  HWND v6; // eax
  LRESULT v7; // eax
  int *v8; // ecx
  int v9; // eax
  HWND v10; // [esp-4h] [ebp-10h]
  HWND v11; // [esp-4h] [ebp-10h]
  int v12; // [esp-4h] [ebp-10h]
  HWND v13; // [esp-4h] [ebp-10h]
  HWND v14; // [esp-4h] [ebp-10h]
  HWND v15; // [esp-4h] [ebp-10h]

  if ( (unsigned __int16)a2 > 0x80AAu )
  {
    switch ( (unsigned __int16)a2 )
    {
      case 0x80ACu:
        if ( HIWORD(a2) == 9 )
        {
          v15 = sub_402952((HWND *)this, 32940);
          sub_403FDD((WCHAR *)&dword_4312D0, v15);
          goto LABEL_45;
        }
        break;
      case 0x80ADu:
LABEL_27:
        if ( HIWORD(a2) == 9 )
        {
          v6 = sub_402952((HWND *)this, (unsigned __int16)a2);
          v7 = SendMessageW(v6, 0x147u, 0, 0);
          if ( v7 >= 0 && v7 < dword_4314FC )
          {
            v8 = &dword_430D80;
            if ( (unsigned __int16)a2 == 32937 )
              v8 = &lParam;
            if ( (unsigned __int16)a2 == 32941 )
              v8 = &dword_430CF8;
            v9 = dword_42FFBC[v7];
            if ( v9 != *v8 )
            {
              *v8 = v9;
              sub_4141BE((LPCWSTR)v8 + 2, v9);
              sub_402AB3((HWND *)this, 1);
            }
            if ( (unsigned __int16)a2 == 32936 )
              dword_4241B4 = dword_430D80;
            if ( (unsigned __int16)a2 == 32937 )
              dword_4241B0 = lParam;
            if ( (unsigned __int16)a2 == 32941 )
              dword_4241B8 = dword_430CF8;
            sub_402980((HWND *)this);
          }
        }
        return 1;
      case 0x80AEu:
        if ( HIWORD(a2) == 9 )
        {
          v14 = sub_402952((HWND *)this, 32942);
          sub_403FDD((WCHAR *)&dword_431248, v14);
          goto LABEL_45;
        }
        break;
      case 0x80AFu:
        if ( HIWORD(a2) == 9 )
        {
          v13 = sub_402952((HWND *)this, 32943);
          sub_403FDD((WCHAR *)&dword_431138, v13);
          goto LABEL_45;
        }
        break;
      default:
        return CWnd::OnCommand(this, a2, a3);
    }
  }
  else
  {
    switch ( (unsigned __int16)a2 )
    {
      case 0x80AAu:
        if ( HIWORD(a2) == 9 )
        {
          v4 = sub_402952((HWND *)this, (unsigned __int16)a2);
          SendMessageW(v4, 0x147u, 0, 0);
          sub_402980((HWND *)this);
          sub_4141BE(&word_430B64, dword_430B60);
        }
        return 1;
      case 0x42Bu:
        v12 = dword_430FA0 == 0;
        dword_430FA0 = v12;
        sub_4141BE(word_430FA4, v12);
        break;
      case 0x7EFu:
        nullsub_1(this);
        break;
      case 0x1394u:
        if ( HIWORD(a2) == 9 )
        {
          v11 = sub_402952((HWND *)this, 5012);
          sub_403FDD((WCHAR *)&wParam, v11);
          goto LABEL_45;
        }
        break;
      case 0x80A5u:
        if ( HIWORD(a2) == 9 )
        {
          v10 = sub_402952((HWND *)this, 32933);
          sub_403FDD((WCHAR *)&dword_4313E0, v10);
LABEL_45:
          sub_402EC9((int)this, *((_DWORD *)this + 8), 0);
        }
        break;
      default:
        if ( (unsigned __int16)a2 <= 0x80A7u || (unsigned __int16)a2 > 0x80A9u )
          return CWnd::OnCommand(this, a2, a3);
        goto LABEL_27;
    }
  }
  return 1;
}
// 40FF8E: using guessed type int __thiscall nullsub_1(_DWORD);
// 42FFBC: using guessed type int dword_42FFBC[33];
// 430CF8: using guessed type int dword_430CF8;
// 430D80: using guessed type int dword_430D80;
// 430FA4: using guessed type WCHAR word_430FA4[66];
// 4314FC: using guessed type int dword_4314FC;

//----- (0040213D) --------------------------------------------------------
void __thiscall sub_40213D(int this, int a2)
{
  HWND v3; // eax
  HWND v4; // eax
  HWND v5; // eax
  HWND v6; // eax
  HWND v7; // eax
  HWND v8; // eax
  HWND v9; // eax
  HWND v10; // eax
  HWND v11; // eax
  HWND v12; // eax
  HWND v13; // eax
  int v14; // ecx
  int v15; // eax
  const WCHAR *Buffer; // eax
  bool v17; // zf
  HWND v18; // eax
  HWND v19; // eax
  HWND v20; // eax
  HWND v21; // eax
  HWND v22; // eax
  HWND v23; // eax
  unsigned __int16 *v24; // eax
  LPARAM v25; // edi
  HWND v26; // eax
  HWND v27; // eax
  HWND v28; // eax
  unsigned __int16 *v29; // eax
  HWND v30; // eax
  signed int v31; // eax
  bool v32; // cc
  HWND v33; // eax
  HWND v34; // eax
  HWND v35; // eax
  HWND v36; // eax
  WPARAM v37; // edi
  unsigned __int16 *v38; // eax
  HWND v39; // eax
  HWND v40; // eax
  HWND v41; // eax
  LPARAM v42; // eax
  unsigned __int16 *v43; // eax
  HWND v44; // eax
  HWND v45; // eax
  HWND v46; // eax
  HWND v47; // eax
  HWND v48; // eax
  HWND v49; // eax
  HWND v50; // eax
  HWND v51; // eax
  HWND v52; // eax
  HWND v53; // eax
  LRESULT v54; // eax
  WPARAM v55; // [esp+4h] [ebp-4D4h]
  WPARAM v56; // [esp+4h] [ebp-4D4h]
  WPARAM v57; // [esp+4h] [ebp-4D4h]
  WPARAM v58; // [esp+4h] [ebp-4D4h]
  WPARAM v59; // [esp+4h] [ebp-4D4h]
  LPARAM v60; // [esp+4h] [ebp-4D4h]
  int v61[5]; // [esp+8h] [ebp-4D0h] BYREF
  WPARAM wParam; // [esp+1Ch] [ebp-4BCh]
  LPARAM lParam; // [esp+20h] [ebp-4B8h]
  LPARAM *v64; // [esp+24h] [ebp-4B4h]
  LPARAM v65; // [esp+28h] [ebp-4B0h] BYREF
  __int16 v66; // [esp+2Ch] [ebp-4ACh]
  int v67[10]; // [esp+30h] [ebp-4A8h] BYREF
  WCHAR v68[64]; // [esp+58h] [ebp-480h] BYREF
  WCHAR v69[2]; // [esp+D8h] [ebp-400h] BYREF
  char v70[504]; // [esp+DCh] [ebp-3FCh] BYREF
  __int16 v71; // [esp+2D4h] [ebp-204h]
  WCHAR v72[256]; // [esp+2D8h] [ebp-200h] BYREF

  v67[0] = (int)sub_414BE2(101);
  v67[1] = (int)sub_414BE2(102);
  v67[2] = (int)sub_414BE2(103);
  v67[3] = (int)sub_414BE2(105);
  memset(&v67[4], 0, 24);
  wParam = 0;
  v3 = sub_402952((HWND *)this, 5012);
  SendMessageW(v3, 0x14Bu, 0, 0);
  v4 = sub_402952((HWND *)this, 32933);
  SendMessageW(v4, 0x14Bu, 0, 0);
  v5 = sub_402952((HWND *)this, 32940);
  SendMessageW(v5, 0x14Bu, 0, 0);
  if ( v67[0] )
  {
    lParam = v67[0];
    v64 = v67;
    do
    {
      v6 = sub_402952((HWND *)this, 5012);
      SendMessageW(v6, 0x14Au, wParam, lParam);
      v7 = sub_402952((HWND *)this, 32933);
      SendMessageW(v7, 0x14Au, wParam, lParam);
      v8 = sub_402952((HWND *)this, 32940);
      SendMessageW(v8, 0x14Au, wParam, lParam);
      ++v64;
      ++wParam;
      lParam = *v64;
    }
    while ( lParam );
  }
  v55 = ::wParam;
  v9 = sub_402952((HWND *)this, 5012);
  SendMessageW(v9, 0x14Eu, v55, 0);
  v56 = dword_4313E0;
  v10 = sub_402952((HWND *)this, 32933);
  SendMessageW(v10, 0x14Eu, v56, 0);
  v57 = dword_4312D0;
  v11 = sub_402952((HWND *)this, 32940);
  SendMessageW(v11, 0x14Eu, v57, 0);
  sub_4100D2((char *)(this + 144), 331);
  CoInitialize(0);
  v12 = sub_402952((HWND *)this, 32942);
  sub_4028AD((_DWORD *)(this + 144), v12);
  v13 = sub_402952((HWND *)this, 32943);
  sub_4028AD((_DWORD *)(this + 144), v13);
  if ( (dword_431248 & 0x80000000) != 0 || (signed int)dword_431248 >= *(_DWORD *)(this + 152) )
    dword_431248 = *(_DWORD *)(this + 148);
  if ( (dword_431138 & 0x80000000) != 0 || (signed int)dword_431138 >= *(_DWORD *)(this + 152) )
    dword_431138 = *(_DWORD *)(this + 148);
  v15 = *(_DWORD *)(this + 148);
  if ( v15 != dword_4310B0 )
  {
    v61[0] = *(_DWORD *)(this + 148);
    dword_4310B0 = v15;
    sub_4141BE(&word_4310B4, v61[0]);
    v14 = v61[0];
  }
  v61[0] = v14;
  v64 = v61;
  CString::CString((CString *)v61, (const struct CString *)&unk_430C68);
  sub_40290B((_DWORD *)(this + 144), v61[0]);
  Buffer = CString::GetBuffer((CString *)&unk_430C68, 0);
  sub_414211(&word_430BE8, Buffer);
  sub_402962((HWND *)this, 32942, dword_431248);
  sub_402962((HWND *)this, 32943, dword_431138);
  v17 = dword_431248 == *(_DWORD *)(this + 148);
  v61[0] = 0;
  v58 = v17;
  v18 = sub_402952((HWND *)this, 1038);
  SendMessageW(v18, 0xF1u, v58, v61[0]);
  v17 = dword_431138 == *(_DWORD *)(this + 148);
  v61[0] = 0;
  v59 = v17;
  v19 = sub_402952((HWND *)this, 1039);
  SendMessageW(v19, 0xF1u, v59, v61[0]);
  v61[0] = 0;
  lParam = 0;
  v20 = sub_402952((HWND *)this, 32941);
  SendMessageW(v20, 0x14Bu, 0, v61[0]);
  v61[0] = 0;
  v21 = sub_402952((HWND *)this, 32937);
  SendMessageW(v21, 0x14Bu, 0, v61[0]);
  v61[0] = 0;
  v22 = sub_402952((HWND *)this, 32936);
  SendMessageW(v22, 0x14Bu, 0, v61[0]);
  v61[0] = 0;
  v23 = sub_402952((HWND *)this, 32938);
  SendMessageW(v23, 0x14Bu, 0, v61[0]);
  *(_DWORD *)v69 = dword_43151C;
  memset(v70, 0, sizeof(v70));
  v71 = 0;
  if ( dword_430D80 < 10 )
    dword_430D80 = 10;
  if ( ::lParam < 10 )
    ::lParam = 10;
  wParam = 10;
  v64 = dword_42FFBC;
  do
  {
    v24 = sub_414BE2(108);
    wsprintfW(v69, aDS, wParam, v24);
    v25 = lParam;
    v61[0] = (int)v69;
    v60 = lParam;
    v26 = sub_402952((HWND *)this, 32941);
    SendMessageW(v26, 0x14Au, v60, v61[0]);
    v61[0] = (int)v69;
    v27 = sub_402952((HWND *)this, 32937);
    SendMessageW(v27, 0x14Au, v25, v61[0]);
    v61[0] = (int)v69;
    v28 = sub_402952((HWND *)this, 32936);
    SendMessageW(v28, 0x14Au, v25, v61[0]);
    v61[0] = (int)v69;
    v29 = sub_414BE2(110);
    wsprintfW(v72, aSS, v29);
    v61[0] = (int)v72;
    v30 = sub_402952((HWND *)this, 32938);
    SendMessageW(v30, 0x14Au, v25, v61[0]);
    v31 = wParam;
    v32 = dword_430D80 < (int)wParam;
    *v64 = wParam;
    if ( !v32 )
    {
      v61[0] = 0;
      v33 = sub_402952((HWND *)this, 32936);
      SendMessageW(v33, 0x14Eu, v25, v61[0]);
      v31 = wParam;
    }
    if ( ::lParam >= v31 )
    {
      v61[0] = 0;
      v34 = sub_402952((HWND *)this, 32937);
      SendMessageW(v34, 0x14Eu, v25, v61[0]);
      v31 = wParam;
    }
    if ( dword_430CF8 >= v31 )
    {
      v61[0] = 0;
      v35 = sub_402952((HWND *)this, 32941);
      SendMessageW(v35, 0x14Eu, v25, v61[0]);
      v31 = wParam;
    }
    if ( dword_430B60 >= v31 )
    {
      v61[0] = 0;
      v36 = sub_402952((HWND *)this, 32938);
      SendMessageW(v36, 0x14Eu, v25, v61[0]);
      v31 = wParam;
    }
    ++v64;
    v37 = v25 + 1;
    lParam = v37;
    if ( v31 > 5 )
      v31 += 5;
    wParam = v31 + 5;
  }
  while ( v31 + 5 < 70 );
  wParam = 2;
  lParam = 120;
  v64 = (LPARAM *)(4 * v37 + 4390844);
  do
  {
    v68[0] = 0;
    sub_402A43((double)(int)wParam, v68);
    v61[0] = (int)v68;
    v38 = sub_414BE2(109);
    wsprintfW(v69, aDS, wParam, v38);
    if ( lParam > 3600 )
      wsprintfW(v69, aS_0, v68);
    v61[0] = (int)v69;
    v39 = sub_402952((HWND *)this, 32937);
    SendMessageW(v39, 0x14Au, v37, v61[0]);
    v61[0] = (int)v69;
    v40 = sub_402952((HWND *)this, 32936);
    SendMessageW(v40, 0x14Au, v37, v61[0]);
    v61[0] = (int)v69;
    v41 = sub_402952((HWND *)this, 32941);
    SendMessageW(v41, 0x14Au, v37, v61[0]);
    v42 = lParam;
    if ( lParam < 1860 )
    {
      v61[0] = (int)v69;
      v43 = sub_414BE2(110);
      wsprintfW(v72, aSS, v43);
      v61[0] = (int)v72;
      v44 = sub_402952((HWND *)this, 32938);
      SendMessageW(v44, 0x14Au, v37, v61[0]);
      v42 = lParam;
    }
    v32 = dword_430D80 < v42;
    *v64 = v42;
    if ( !v32 )
    {
      v61[0] = 0;
      v45 = sub_402952((HWND *)this, 32936);
      SendMessageW(v45, 0x14Eu, v37, v61[0]);
      v42 = lParam;
    }
    if ( ::lParam >= v42 )
    {
      v61[0] = 0;
      v46 = sub_402952((HWND *)this, 32937);
      SendMessageW(v46, 0x14Eu, v37, v61[0]);
      v42 = lParam;
    }
    if ( dword_430CF8 >= v42 )
    {
      v61[0] = 0;
      v47 = sub_402952((HWND *)this, 32941);
      SendMessageW(v47, 0x14Eu, v37, v61[0]);
      v42 = lParam;
    }
    if ( v42 < 1860 && dword_430B60 >= v42 )
    {
      v61[0] = 0;
      v48 = sub_402952((HWND *)this, 32938);
      SendMessageW(v48, 0x14Eu, v37, v61[0]);
      v42 = lParam;
    }
    if ( v42 < 1800 )
    {
      if ( v42 >= 600 )
      {
        wParam += 4;
        v42 += 240;
      }
    }
    else
    {
      wParam += 29;
      v42 += 1740;
    }
    ++v64;
    ++v37;
    ++wParam;
    lParam = v42 + 60;
  }
  while ( v42 + 60 < 34200 );
  v61[0] = (int)sub_414BE2(105);
  v49 = sub_402952((HWND *)this, 32938);
  SendMessageW(v49, 0x14Au, v37, v61[0]);
  if ( dword_430B60 >= dword_42FFBC[v37] )
  {
    v61[0] = 0;
    v50 = sub_402952((HWND *)this, 32938);
    SendMessageW(v50, 0x14Eu, v37, v61[0]);
  }
  v66 = 0;
  v61[0] = (int)&v65;
  v65 = 2107006;
  v51 = sub_402952((HWND *)this, 32937);
  SendMessageW(v51, 0x14Au, v37, v61[0]);
  v32 = ::lParam < 0x40000000;
  dword_42FFBC[v37] = 0x40000000;
  if ( !v32 )
  {
    v61[0] = 0;
    v52 = sub_402952((HWND *)this, 32937);
    SendMessageW(v52, 0x14Eu, v37, v61[0]);
  }
  v61[0] = 0;
  v53 = sub_402952((HWND *)this, 32937);
  v54 = SendMessageW(v53, 0x146u, 0, v61[0]);
  dword_42FFBC[v54] = 0x40000000;
  dword_4314FC = v54 + 1;
  sub_402980((HWND *)this);
  sub_402AB3((HWND *)this, 1);
}
// 402335: variable 'v14' is possibly undefined
// 42FFBC: using guessed type int dword_42FFBC[33];
// 430CF8: using guessed type int dword_430CF8;
// 430D80: using guessed type int dword_430D80;
// 4310B0: using guessed type int dword_4310B0;
// 4314FC: using guessed type int dword_4314FC;
// 43151C: using guessed type int dword_43151C;

//----- (004028AD) --------------------------------------------------------
LRESULT __thiscall sub_4028AD(_DWORD *this, HWND hWnd)
{
  signed int v2; // ebx
  CString *v4; // ebp
  unsigned __int16 *Buffer; // eax
  int v6; // eax

  v2 = 0;
  SendMessageW(hWnd, 0x14Bu, 0, 0);
  if ( (int)this[2] > 0 )
  {
    v4 = (CString *)(this + 3);
    do
    {
      Buffer = CString::GetBuffer(v4, 0);
      SendMessageW(hWnd, 0x14Au, v2++, (LPARAM)Buffer);
      v4 = (CString *)((char *)v4 + 32);
    }
    while ( v2 < this[2] );
  }
  v6 = sub_41036E(this);
  return SendMessageW(hWnd, 0x14Eu, v6, 0);
}

//----- (0040290B) --------------------------------------------------------
int __thiscall sub_40290B(_DWORD *this, char a2)
{
  int v2; // eax
  int v3; // esi

  v2 = this[1];
  v3 = 0;
  if ( v2 >= 0 )
  {
    CString::operator=(&a2, &this[8 * v2 + 3]);
    v3 = 1;
  }
  CString::~CString((CString *)&a2);
  return v3;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (00402952) --------------------------------------------------------
HWND __thiscall sub_402952(HWND *this, int nIDDlgItem)
{
  return GetDlgItem(this[8], nIDDlgItem);
}

//----- (00402962) --------------------------------------------------------
LRESULT __thiscall sub_402962(HWND *this, int nIDDlgItem, WPARAM wParam)
{
  HWND v3; // eax

  v3 = sub_402952(this, nIDDlgItem);
  return SendMessageW(v3, 0x14Eu, wParam, 0);
}

//----- (00402980) --------------------------------------------------------
int __thiscall sub_402980(HWND *this)
{
  HWND v2; // eax
  LRESULT v3; // eax
  HWND v4; // eax
  LRESULT v5; // eax
  HWND v6; // eax
  HWND v7; // eax
  HWND v8; // eax
  int result; // eax
  WPARAM v10; // [esp-8h] [ebp-18h]
  BOOL v11; // [esp-4h] [ebp-14h]

  v2 = sub_402952(this, 32937);
  v3 = SendMessageW(v2, 0x147u, 0, 0);
  if ( v3 >= 0 && v3 < dword_4314FC )
    lParam = dword_42FFBC[v3];
  v4 = sub_402952(this, 32936);
  v5 = SendMessageW(v4, 0x147u, 0, 0);
  if ( v5 >= 0 && v5 < dword_4314FC )
    dword_430D80 = dword_42FFBC[v5];
  if ( lParam >= 20 )
  {
    v11 = 1;
  }
  else
  {
    v10 = dword_4314FC - 1;
    v6 = sub_402952(this, 32938);
    SendMessageW(v6, 0x14Eu, v10, 0);
    v11 = 0;
  }
  v7 = sub_402952(this, 32938);
  EnableWindow(v7, v11);
  v8 = sub_402952(this, 32938);
  result = dword_42FFBC[SendMessageW(v8, 0x147u, 0, 0)];
  dword_430B60 = result;
  return result;
}
// 42FFBC: using guessed type int dword_42FFBC[33];
// 430D80: using guessed type int dword_430D80;
// 4314FC: using guessed type int dword_4314FC;

//----- (00402A43) --------------------------------------------------------
LPWSTR __stdcall sub_402A43(double a1, LPWSTR a2)
{
  int v2; // ebx

  v2 = (__int64)fmod(a1, 60.0);
  if ( !v2 )
    wsprintfW(a2, a02d02d, 0, 0);
  wsprintfW(a2, a02d02d, (unsigned int)(__int64)fmod((double)(int)(__int64)(a1 * 0.01666666666666667), 60.0), v2);
  return a2;
}

//----- (00402AB3) --------------------------------------------------------
void __thiscall sub_402AB3(HWND *this, int a2)
{
  HWND v3; // eax
  HWND v4; // eax
  HWND v5; // eax
  HWND v6; // eax
  HWND v7; // eax
  HWND v8; // eax
  HWND v9; // eax
  WPARAM v10; // [esp-8h] [ebp-1Ch]
  WPARAM v11; // [esp-8h] [ebp-1Ch]
  WPARAM v12; // [esp-8h] [ebp-1Ch]
  LPARAM v13; // [esp-4h] [ebp-18h]
  LPARAM v14; // [esp-4h] [ebp-18h]
  LPARAM v15; // [esp-4h] [ebp-18h]
  LPARAM v16; // [esp-4h] [ebp-18h]
  char v17[4]; // [esp+10h] [ebp-4h] BYREF

  if ( a2 )
  {
    v13 = (unsigned __int16)dword_430D80 << 16;
    v3 = sub_402952(this, 1073);
    SendMessageW(v3, 0x401u, 0, v13);
  }
  v10 = dword_4241B4;
  v4 = sub_402952(this, 1073);
  SendMessageW(v4, 0x402u, v10, 0);
  if ( a2 )
  {
    v14 = (unsigned __int16)lParam << 16;
    v5 = sub_402952(this, 1064);
    SendMessageW(v5, 0x401u, 0, v14);
  }
  v15 = lParam;
  v6 = sub_402952(this, 1064);
  SendMessageW(v6, 0x406u, 0, v15);
  v11 = dword_4241B0;
  v7 = sub_402952(this, 1064);
  SendMessageW(v7, 0x402u, v11, 0);
  if ( a2 )
  {
    v16 = (unsigned __int16)dword_430CF8 << 16;
    v8 = sub_402952(this, 1065);
    SendMessageW(v8, 0x401u, 0, v16);
  }
  CString::CString((CString *)v17);
  v12 = dword_4241B8;
  v9 = sub_402952(this, 1065);
  SendMessageW(v9, 0x402u, v12, 0);
  CString::~CString((CString *)v17);
}
// 430CF8: using guessed type int dword_430CF8;
// 430D80: using guessed type int dword_430D80;
// 402AB3: using guessed type char var_4[4];

//----- (00402BAB) --------------------------------------------------------
void __thiscall sub_402BAB(HWND *this, int a2)
{
  CString *v2; // eax
  HWND v3; // eax
  CString *v4; // eax
  HWND v5; // eax
  CString *v6; // eax
  HWND v7; // eax
  CString *v8; // eax
  HWND v9; // eax
  CString *v10; // eax
  HWND v11; // eax
  CString *v12; // eax
  HWND v13; // eax
  CString *v14; // eax
  HWND v15; // eax
  CString *v16; // eax
  HWND *v17; // edi
  HWND v18; // eax
  HWND v19; // eax
  HWND v20; // eax
  unsigned __int16 *v21; // eax
  HWND v22; // eax
  unsigned __int16 *v23; // [esp-10h] [ebp-214h]
  unsigned __int16 *v24; // [esp-10h] [ebp-214h]
  unsigned __int16 *v25; // [esp-10h] [ebp-214h]
  WCHAR String[256]; // [esp+0h] [ebp-204h] BYREF
  HWND *v27; // [esp+200h] [ebp-4h]

  v27 = this;
  if ( a2 )
  {
    v2 = sub_402E58((CString *)&a2, 141);
    wsprintfW(String, aS, *(_DWORD *)v2);
    CString::~CString((CString *)&a2);
    v3 = sub_402952(v27, 32934);
    SetWindowTextW(v3, String);
    v4 = sub_402E58((CString *)&a2, 142);
    wsprintfW(String, aS, *(_DWORD *)v4);
    CString::~CString((CString *)&a2);
    v5 = sub_402952(v27, 32935);
    SetWindowTextW(v5, String);
    v6 = sub_402E58((CString *)&a2, 143);
    wsprintfW(String, aS, *(_DWORD *)v6);
    CString::~CString((CString *)&a2);
    v7 = sub_402952(v27, 32939);
    SetWindowTextW(v7, String);
    v8 = sub_402E58((CString *)&a2, 100);
    wsprintfW(String, aS, *(_DWORD *)v8);
    CString::~CString((CString *)&a2);
    v9 = sub_402952(v27, 1061);
    SetWindowTextW(v9, String);
    v10 = sub_402E58((CString *)&a2, 100);
    wsprintfW(String, aS, *(_DWORD *)v10);
    CString::~CString((CString *)&a2);
    v11 = sub_402952(v27, 1062);
    SetWindowTextW(v11, String);
    v12 = sub_402E58((CString *)&a2, 131);
    wsprintfW(String, aS, *(_DWORD *)v12);
    CString::~CString((CString *)&a2);
    v13 = sub_402952(v27, 1063);
    SetWindowTextW(v13, String);
    v14 = sub_402E58((CString *)&a2, 132);
    wsprintfW(String, aS, *(_DWORD *)v14);
    CString::~CString((CString *)&a2);
    v15 = sub_402952(v27, 1068);
    SetWindowTextW(v15, String);
    v16 = sub_402E58((CString *)&a2, 133);
    wsprintfW(String, aS, *(_DWORD *)v16);
    CString::~CString((CString *)&a2);
    v17 = v27;
    v18 = sub_402952(v27, 1069);
    SetWindowTextW(v18, String);
    v23 = sub_414BE2(42);
    v19 = sub_402952(v17, 1060);
    SetWindowTextW(v19, v23);
    v24 = sub_414BE2(106);
    v20 = sub_402952(v17, 1067);
    SetWindowTextW(v20, v24);
    v21 = sub_414BE2(155);
    CWnd::SetWindowTextW((CWnd *)(v17 + 423), v21);
    if ( sub_4105FF() )
      dword_431500 = 1;
    if ( !dword_431500 )
    {
      v25 = sub_414BE2(104);
      v22 = sub_402952(v17, 1066);
      SetWindowTextW(v22, v25);
    }
    sub_40213D((int)v17, (int)v17[8]);
  }
}
// 431500: using guessed type int dword_431500;

//----- (00402E58) --------------------------------------------------------
CString *__stdcall sub_402E58(CString *a1, int a2)
{
  unsigned __int16 *v2; // eax
  const unsigned __int16 *Buffer; // eax

  v2 = sub_414BE2(a2);
  CString::CString((CString *)&a2, v2);
  CString::Replace((CString *)&a2, &word_424150, &word_42FB18);
  Buffer = CString::GetBuffer((CString *)&a2, 255);
  CString::CString(a1, Buffer);
  CString::~CString((CString *)&a2);
  return a1;
}

//----- (00402EC9) --------------------------------------------------------
BOOL __thiscall sub_402EC9(int this, int a2, int a3)
{
  int v4; // ebp
  HWND v5; // eax
  HWND v6; // eax
  HWND v7; // eax
  HWND v8; // eax
  HWND v9; // eax
  HWND v10; // eax
  HWND v11; // eax
  HWND v12; // eax
  HWND v13; // eax
  HWND v14; // eax
  HWND v15; // eax
  HWND v16; // eax
  HWND v17; // eax
  int v19; // [esp+10h] [ebp-8h]
  int v20; // [esp+14h] [ebp-4h]
  int v21; // [esp+20h] [ebp+8h]

  v4 = *(_DWORD *)(this + 100);
  if ( a3 )
    v4 = 1;
  sub_403077(this);
  v5 = sub_402952((HWND *)this, 1024);
  EnableWindow(v5, v4 != 0);
  v6 = sub_402952((HWND *)this, 2105);
  EnableWindow(v6, v4 != 0);
  v7 = sub_402952((HWND *)this, 1021);
  EnableWindow(v7, v4 != 0);
  v8 = sub_402952((HWND *)this, 1022);
  EnableWindow(v8, v4 != 0);
  v21 = v4;
  v19 = v4;
  v20 = v4;
  if ( wParam == 3 )
    v21 = 0;
  if ( dword_4313E0 == 3 )
    v19 = 0;
  if ( dword_4312D0 == 3 )
    v20 = 0;
  if ( !v21 )
  {
    v9 = sub_402952((HWND *)this, 1073);
    sub_415DEA(v9, word_431520, word_431520);
  }
  if ( !v19 )
  {
    v10 = sub_402952((HWND *)this, 1064);
    sub_415DEA(v10, word_431520, word_431520);
  }
  if ( !v20 )
  {
    v11 = sub_402952((HWND *)this, 1065);
    sub_415DEA(v11, word_431520, word_431520);
  }
  if ( v21 )
  {
    v12 = sub_402952((HWND *)this, 1073);
    sub_415DEA(v12, aExplorer, 0);
  }
  if ( v19 )
  {
    v13 = sub_402952((HWND *)this, 1064);
    sub_415DEA(v13, aExplorer, 0);
  }
  if ( v20 )
  {
    v14 = sub_402952((HWND *)this, 1065);
    sub_415DEA(v14, aExplorer, 0);
  }
  v15 = sub_402952((HWND *)this, 1073);
  EnableWindow(v15, v21 != 0);
  v16 = sub_402952((HWND *)this, 1064);
  EnableWindow(v16, v19 != 0);
  v17 = sub_402952((HWND *)this, 1065);
  return EnableWindow(v17, v20 != 0);
}
// 4243BC: using guessed type wchar_t aExplorer[9];
// 431520: using guessed type WCHAR word_431520[2];

//----- (00403077) --------------------------------------------------------
BOOL __thiscall sub_403077(int this)
{
  HWND v2; // eax
  LRESULT v3; // ebx
  HWND v4; // eax
  LRESULT v5; // ebp
  HWND v6; // eax
  HWND v7; // eax
  HWND v8; // eax
  HWND v9; // eax
  BOOL v11; // [esp-8h] [ebp-18h]
  BOOL v12; // [esp-8h] [ebp-18h]
  int v13; // [esp-4h] [ebp-14h]
  int v14; // [esp-4h] [ebp-14h]

  v2 = sub_402952((HWND *)this, 32942);
  v3 = SendMessageW(v2, 0x147u, 0, 0);
  v4 = sub_402952((HWND *)this, 32943);
  v5 = SendMessageW(v4, 0x147u, 0, 0);
  sub_41036E((_DWORD *)(this + 144));
  v11 = v3 == *(_DWORD *)(this + 148);
  v6 = sub_402952((HWND *)this, 1038);
  SendMessageW(v6, 0xF1u, v11, 0);
  v12 = v5 == *(_DWORD *)(this + 148);
  v7 = sub_402952((HWND *)this, 1039);
  SendMessageW(v7, 0xF1u, v12, 0);
  v13 = v3 == *(_DWORD *)(this + 148);
  v8 = sub_402952((HWND *)this, 1038);
  ShowWindow(v8, v13);
  v14 = v5 == *(_DWORD *)(this + 148);
  v9 = sub_402952((HWND *)this, 1039);
  return ShowWindow(v9, v14);
}

//----- (00403142) --------------------------------------------------------
void __thiscall sub_403142(int this)
{
  int v2; // edi
  int v3; // eax
  int v4; // eax
  int v5; // edx
  int v6; // ecx
  int v7; // esi
  unsigned __int16 *v8; // eax
  unsigned __int16 *v9; // eax
  int v10; // edi
  char v11; // [esp-Ch] [ebp-E4h] BYREF
  char v12; // [esp-8h] [ebp-E0h] BYREF
  int v13; // [esp-4h] [ebp-DCh]
  int v14; // [esp+10h] [ebp-C8h]
  int v15; // [esp+14h] [ebp-C4h]
  char *v16; // [esp+18h] [ebp-C0h]
  int v17[44]; // [esp+1Ch] [ebp-BCh] BYREF
  int v18; // [esp+D4h] [ebp-4h]

  GetCursorPos(&Point);
  if ( !*(_DWORD *)(this + 100) )
    return;
  v2 = clock() / 1000;
  v3 = v2 - *(_DWORD *)(this + 96);
  if ( v3 < 0 )
    v3 = *(_DWORD *)(this + 96) - v2;
  if ( v3 > 2 )
  {
    dword_4241B4 = dword_430D80;
    dword_4241B0 = lParam;
    dword_4241B8 = dword_430CF8;
  }
  v15 = 0;
  *(_DWORD *)(this + 96) = v2;
  v4 = dword_430F18;
  if ( dword_430F18 < 1 )
  {
    v4 = 1;
    dword_430F18 = 1;
  }
  if ( v4 > 10 )
  {
    v4 = 10;
    dword_430F18 = 10;
  }
  v5 = qword_42FFA0 - Point.x;
  if ( (int)qword_42FFA0 - Point.x < 0 )
    v5 = Point.x - qword_42FFA0;
  v6 = HIDWORD(qword_42FFA0) - Point.y;
  if ( HIDWORD(qword_42FFA0) - Point.y < 0 )
    v6 = Point.y - HIDWORD(qword_42FFA0);
  if ( v5 > v4 || v6 > v4 )
    v15 = 1;
  if ( (_DWORD)qword_42FFA0 != Point.x || HIDWORD(qword_42FFA0) != Point.y )
    qword_42FFA0 = (__int64)Point;
  v7 = 0;
  if ( wParam )
    goto LABEL_23;
  if ( !dword_4313E0 )
  {
    if ( !dword_4312D0 )
      goto LABEL_29;
LABEL_23:
    if ( wParam == 3 && dword_4313E0 == 3 && dword_4312D0 == wParam )
      goto LABEL_29;
  }
  v7 = sub_403673((_WORD *)this, 1);
  if ( !v7 && dword_430FA0 )
    v7 = sub_4036DE(1);
LABEL_29:
  v14 = 0;
  if ( v2 != dword_431504 )
  {
    ++dword_431508;
    dword_431504 = v2;
    v14 = 1;
    sub_403853(this, (int)dword_4241B8 > 0);
  }
  if ( v7 )
  {
    OutputDebugStringW(aKeyDown);
    if ( wParam == 1 || wParam == 2 )
      dword_4241B4 = dword_430D80;
    if ( dword_4313E0 == 1 || dword_4313E0 == 2 )
      dword_4241B0 = lParam;
    if ( dword_4312D0 == 1 || dword_4312D0 == 2 )
      dword_4241B8 = dword_430CF8;
    sub_402AB3((HWND *)this, 0);
    qmemcpy(v17, &wParam, 0x84u);
    if ( v17[0] == 1 || v17[0] == 2 )
      SetThreadExecutionState(2u);
    qmemcpy(v17, &dword_4313E0, 0x84u);
    if ( v17[0] == 1 || v17[0] == 2 )
      SetThreadExecutionState(0x80000000);
  }
  if ( v15 )
  {
    if ( !wParam || wParam == 2 )
      dword_4241B4 = dword_430D80;
    if ( !dword_4313E0 || dword_4313E0 == 2 )
      dword_4241B0 = lParam;
    if ( !dword_4312D0 || dword_4312D0 == 2 )
      dword_4241B8 = dword_430CF8;
    sub_402AB3((HWND *)this, 0);
    qmemcpy(v17, &wParam, 0x84u);
    if ( !v17[0] || v17[0] == 2 )
      SetThreadExecutionState(2u);
    qmemcpy(v17, &dword_4313E0, 0x84u);
    if ( !v17[0] || v17[0] == 2 )
      SetThreadExecutionState(0x80000000);
    return;
  }
  if ( !v14 )
    return;
  if ( (int)dword_4241B0 <= 0 || dword_4313E0 == 3 )
  {
LABEL_83:
    sub_402AB3((HWND *)this, 0);
    return;
  }
  --dword_4241B0;
  sub_403EDB();
  if ( !dword_430B60 || dword_430B60 >= lParam || dword_430B60 < (int)dword_4241B0 )
  {
    if ( !dword_4241B0 )
    {
      KillTimer(*(HWND *)(this + 32), 0x3E9u);
      KillTimer(*(HWND *)(this + 32), 0x3E9u);
      SetTimer(*(HWND *)(this + 32), 0x3E9u, 0x2710u, 0);
      SetThreadExecutionState(0x80000000);
      sub_410405(1);
      dword_4241B4 = dword_430D80;
      dword_4241B0 = lParam;
      return;
    }
    if ( (int)dword_4241B4 > 0 && wParam != 3 && !--dword_4241B4 )
    {
      sub_4105CF();
      dword_4241B4 = dword_430D80 + 1;
    }
    if ( (int)dword_4241B8 > 0 && dword_4312D0 != 3 )
      --dword_4241B8;
    goto LABEL_83;
  }
  dword_4241B4 = dword_430D80;
  v14 = this + 140;
  sub_4105E7();
  sub_4040AA((int)v17, 0);
  v18 = 0;
  KillTimer(*(HWND *)(this + 32), 0x3E9u);
  KillTimer(*(HWND *)(this + 32), 0x3E9u);
  SetThreadExecutionState(2u);
  v13 = dword_430B60;
  v8 = sub_414BE2(142);
  v15 = (int)&v12;
  CString::CString((CString *)&v12, v8);
  LOBYTE(v18) = 1;
  v9 = sub_414BE2(61);
  v16 = &v11;
  CString::CString((CString *)&v11, v9);
  LOBYTE(v18) = 0;
  v10 = sub_404244(v17, v11, v12, v13);
  SetThreadExecutionState(0x80000000);
  SetTimer(*(HWND *)(this + 32), 0x3E9u, 0x3E8u, 0);
  if ( v10 == 1 )
  {
    v13 = 1;
    if ( dword_4311C0 )
      sub_410418(v13);
    else
      sub_410405(v13);
  }
  v18 = -1;
  sub_4035E3((int)v17);
}
// 42FFA0: using guessed type __int64 qword_42FFA0;
// 430CF8: using guessed type int dword_430CF8;
// 430D80: using guessed type int dword_430D80;
// 430F18: using guessed type int dword_430F18;
// 431504: using guessed type int dword_431504;
// 431508: using guessed type int dword_431508;

//----- (004035E3) --------------------------------------------------------
void __thiscall sub_4035E3(int this)
{
  CStatic::~CStatic((CStatic *)(this + 112));
  CString::~CString((CString *)(this + 100));
  CString::~CString((CString *)(this + 96));
  CDialog::~CDialog((CDialog *)this);
}

//----- (00403633) --------------------------------------------------------
UINT_PTR __thiscall sub_403633(HWND *this, int a2)
{
  UINT_PTR result; // eax

  if ( a2 == 1001 )
  {
    KillTimer(this[8], 0x3E9u);
    KillTimer(this[8], 0x3E9u);
    sub_403142((int)this);
    return SetTimer(this[8], 0x3E9u, 0xC8u, 0);
  }
  return result;
}

//----- (00403673) --------------------------------------------------------
int __thiscall sub_403673(_WORD *this, int a2)
{
  int v2; // edi
  char *v4; // esi
  char Buf2[508]; // [esp+Ch] [ebp-200h] BYREF
  __int16 v7; // [esp+208h] [ebp-4h]

  v2 = 0;
  if ( !a2 )
    return 0;
  v4 = Buf2;
  do
  {
    *(_WORD *)v4 = GetAsyncKeyState(v2++);
    v4 += 2;
  }
  while ( v2 < 255 );
  if ( !memicmp(this + 590, Buf2, 0x1FEu) )
    return 0;
  qmemcpy(this + 590, Buf2, 0x1FCu);
  this[844] = v7;
  return 1;
}

//----- (004036DE) --------------------------------------------------------
int __stdcall sub_4036DE(int a1)
{
  char *v1; // ebx
  char *v2; // ebx
  char *v4; // ebx
  struct joyinfoex_tag v5; // [esp+Ch] [ebp-4Ch] BYREF
  struct joyinfo_tag pji; // [esp+40h] [ebp-18h] BYREF
  int v7; // [esp+50h] [ebp-8h]
  UINT uJoyID; // [esp+54h] [ebp-4h]

  joyGetNumDevs();
  v7 = 0;
  uJoyID = 0;
  v1 = (char *)&unk_42FEA0;
  do
  {
    if ( !joyGetPos(uJoyID, &pji) && memcmp((const char *)&pji, v1, 16) )
    {
      *(struct joyinfo_tag *)v1 = pji;
      v7 = 1;
    }
    ++uJoyID;
    v1 += 16;
  }
  while ( (int)v1 < (int)&dword_42FFA0 );
  if ( v7 )
    return 1;
  uJoyID = 0;
  v2 = byte_42FB60;
  do
  {
    if ( !joyGetPosEx(uJoyID, &v5) && memcmp((const char *)&v5, v2, 52) )
    {
      qmemcpy(v2, &v5, 0x34u);
      v7 = 1;
    }
    ++uJoyID;
    v2 += 52;
  }
  while ( (int)v2 < (int)&unk_42FEA0 );
  if ( v7 )
    return 1;
  if ( !dword_43150C )
    return 0;
  if ( XInputGetState
    || (XInputGetState = (DWORD (__stdcall *)(DWORD, XINPUT_STATE *))GetProcAddress(dword_43150C, aXinputgetstate)) != 0 )
  {
    uJoyID = 0;
    v4 = (char *)&unk_42FB20;
    do
    {
      memset(&pji, 0, sizeof(pji));
      if ( !XInputGetState(uJoyID, (XINPUT_STATE *)&pji) )
      {
        *(struct joyinfo_tag *)v4 = pji;
        if ( memcmp((const char *)&pji, v4, 16) )
        {
          *(struct joyinfo_tag *)v4 = pji;
          v7 = 1;
        }
      }
      ++uJoyID;
      v4 += 16;
    }
    while ( v4 < byte_42FB60 );
  }
  return v7;
}
// 42FFA0: using guessed type int dword_42FFA0;

//----- (0040383C) --------------------------------------------------------
int __thiscall sub_40383C(_DWORD *this, int a2)
{
  int v3; // [esp-8h] [ebp-8h]

  v3 = this[8];
  this[25] = a2;
  sub_402EC9((int)this, v3, 0);
  return 1;
}

//----- (00403853) --------------------------------------------------------
void __thiscall sub_403853(int this, int a2)
{
  HWND v3; // eax
  HWND v4; // eax
  LRESULT v5; // ebx
  int *v6; // eax
  HWND v7; // eax
  HWND v8; // eax
  HWND v9; // eax
  HWND v10; // eax
  BOOL v11; // [esp-14h] [ebp-28h]
  BOOL v12; // [esp-14h] [ebp-28h]
  int v13; // [esp-10h] [ebp-24h]
  int v14; // [esp-10h] [ebp-24h]
  int v15; // [esp+4h] [ebp-10h] BYREF
  int v16; // [esp+10h] [ebp-4h]
  int savedregs; // [esp+14h] [ebp+0h] BYREF

  v15 = this;
  v3 = sub_402952((HWND *)this, 32942);
  SendMessageW(v3, 0x147u, 0, 0);
  v4 = sub_402952((HWND *)this, 32943);
  v5 = SendMessageW(v4, 0x147u, 0, 0);
  CString::CString((CString *)&v15);
  v16 = 0;
  v6 = (int *)v5;
  if ( a2 )
    v6 = &savedregs;
  if ( sub_4102C5(this + 144, 1, (int)v6) )
  {
    v11 = &savedregs == *(int **)(this + 148);
    v7 = sub_402952((HWND *)this, 1038);
    SendMessageW(v7, 0xF1u, v11, 0);
    v12 = v5 == *(_DWORD *)(this + 148);
    v8 = sub_402952((HWND *)this, 1039);
    SendMessageW(v8, 0xF1u, v12, 0);
    v13 = &savedregs == *(int **)(this + 148);
    v9 = sub_402952((HWND *)this, 1038);
    ShowWindow(v9, v13);
    v14 = v5 == *(_DWORD *)(this + 148);
    v10 = sub_402952((HWND *)this, 1039);
    ShowWindow(v10, v14);
  }
  v16 = -1;
  CString::~CString((CString *)&v15);
}

//----- (00403980) --------------------------------------------------------
int __thiscall sub_403980(HWND *this)
{
  int i; // esi
  const unsigned __int16 *v3; // edi
  unsigned __int16 *v4; // eax
  UINT v5; // eax
  int result; // eax
  struct tagRECT Rect; // [esp+Ch] [ebp-30h] BYREF
  int x; // [esp+1Ch] [ebp-20h]
  int y; // [esp+20h] [ebp-1Ch]
  char v10[4]; // [esp+24h] [ebp-18h] BYREF
  HMENU hMenu; // [esp+28h] [ebp-14h]
  LPCWSTR lpNewItem; // [esp+2Ch] [ebp-10h] BYREF
  int v13; // [esp+38h] [ebp-4h]

  hMenu = CreatePopupMenu();
  GetWindowRect(this[431], &Rect);
  x = Rect.right;
  y = Rect.bottom;
  for ( i = 1; i < 11; ++i )
  {
    CString::CString((CString *)&lpNewItem);
    v13 = 0;
    v3 = *(const unsigned __int16 **)CString::CString((CString *)v10, aDS_1);
    LOBYTE(v13) = 1;
    v4 = sub_414BE2(156);
    CString::Format((CString *)&lpNewItem, v3, i, v4);
    LOBYTE(v13) = 0;
    CString::~CString((CString *)v10);
    AppendMenuW(hMenu, 0x410u, i + 33110, lpNewItem);
    if ( dword_430F18 == i )
      v5 = 8;
    else
      v5 = 0;
    CheckMenuItem(hMenu, i + 33110, v5);
    v13 = -1;
    CString::~CString((CString *)&lpNewItem);
  }
  result = TrackPopupMenu(hMenu, 0x108u, x, y, 0, this[29], 0);
  if ( result > 100 && 100 - result != dword_430F18 )
  {
    dword_430F18 = 100 - result;
    return sub_4141BE(&word_430F1C, 100 - result);
  }
  return result;
}
// 430F18: using guessed type int dword_430F18;
// 403980: using guessed type char var_18[4];

//----- (00403A95) --------------------------------------------------------
void sub_403A95()
{
  int v0; // esi
  int v1; // eax
  bool v2; // cc
  int *v3; // edi
  int v4; // esi
  int v5[20]; // [esp+Ch] [ebp-68h] BYREF
  int v6[4]; // [esp+5Ch] [ebp-18h] BYREF
  int v7; // [esp+6Ch] [ebp-8h]
  int *v8; // [esp+70h] [ebp-4h]

  v5[19] = 0;
  v7 = 0;
  v5[0] = (int)&dword_431468;
  v5[1] = (int)&dword_4313E0;
  v5[2] = (int)&dword_430C70;
  v5[3] = (int)&dword_4312D0;
  v5[4] = (int)&dword_4309C8;
  v5[5] = (int)&dword_430AD8;
  v5[6] = (int)&dword_430A50;
  v5[7] = (int)&dword_431248;
  v5[8] = (int)&dword_431138;
  v5[9] = (int)&dword_4310B0;
  v5[10] = (int)&wParam;
  v5[11] = (int)&lParam;
  v5[12] = (int)&dword_430D80;
  v5[13] = (int)&dword_430CF8;
  v5[14] = (int)&dword_431028;
  v5[15] = (int)&dword_430FA0;
  v5[16] = (int)&dword_430F18;
  v5[17] = (int)&dword_431358;
  v5[18] = (int)&dword_430B60;
  v8 = v5;
  do
  {
    v0 = *v8;
    if ( !*v8 )
      break;
    v1 = sub_4141D6((LPCWSTR)(v0 + 4), *(_DWORD *)v0);
    ++v7;
    ++v8;
    v2 = v7 < 10000;
    *(_DWORD *)v0 = v1;
  }
  while ( v2 );
  v6[3] = 0;
  v7 = 0;
  v6[1] = (int)&wParam;
  v6[2] = (int)&dword_4312D0;
  v6[0] = (int)&dword_4313E0;
  v3 = v6;
  do
  {
    v4 = *v3;
    if ( !*v3 )
      break;
    if ( sub_403BBA(dword_4301C0, (LPCWSTR)(v4 + 4), 1) )
      *(_DWORD *)v4 = sub_403C02(dword_4301C0, (LPCWSTR)(v4 + 4));
    ++v7;
    ++v3;
  }
  while ( v7 < 1000 );
  sub_40407F(&word_430BE8);
}
// 4301C0: using guessed type _DWORD dword_4301C0[514];
// 4309C8: using guessed type int dword_4309C8;
// 430A50: using guessed type int dword_430A50;
// 430AD8: using guessed type int dword_430AD8;
// 430CF8: using guessed type int dword_430CF8;
// 430D80: using guessed type int dword_430D80;
// 430F18: using guessed type int dword_430F18;
// 431028: using guessed type int dword_431028;
// 4310B0: using guessed type int dword_4310B0;
// 431358: using guessed type int dword_431358;
// 431468: using guessed type int dword_431468;

//----- (00403BBA) --------------------------------------------------------
int __thiscall sub_403BBA(int *this, LPCWSTR lpString2, int a3)
{
  int v4; // ebx
  LPCWSTR *i; // esi

  v4 = 0;
  if ( *this <= 0 )
    return 0;
  for ( i = (LPCWSTR *)(this + 1); a3 ? lstrcmpiW(*i, lpString2) : lstrcmpW(lpString2, *i); i += 2 )
  {
    if ( ++v4 >= *this )
      return 0;
  }
  return 1;
}

//----- (00403C02) --------------------------------------------------------
int __thiscall sub_403C02(int *this, LPCWSTR lpString1)
{
  int v3; // edi
  LPCWSTR *i; // ebx

  v3 = 0;
  if ( *this <= 0 )
    return 0;
  for ( i = (LPCWSTR *)(this + 1); lstrcmpW(lpString1, *i); i += 2 )
  {
    if ( ++v3 >= *this )
      return 0;
  }
  return wtoi((const wchar_t *)this[2 * v3 + 2]);
}

//----- (00403C3D) --------------------------------------------------------
BOOL __thiscall sub_403C3D(CWnd *this)
{
  struct CWnd *DlgItem; // eax
  HMENU PopupMenu; // ebx
  CString *v3; // eax
  unsigned __int16 *v4; // eax
  LPCWSTR *v5; // eax
  unsigned __int16 *v6; // eax
  unsigned __int16 *v7; // eax
  unsigned __int16 *v8; // eax
  LPCWSTR *v9; // eax
  unsigned __int16 *v10; // eax
  int v11; // eax
  unsigned __int16 *v12; // eax
  LPCWSTR *v13; // eax
  int v14; // eax
  int v15; // esi
  BOOL result; // eax
  CString *v17; // [esp-4h] [ebp-50h]
  CString *v18; // [esp-4h] [ebp-50h]
  int v19; // [esp-4h] [ebp-50h]
  int v20; // [esp-4h] [ebp-50h]
  int v21; // [esp-4h] [ebp-50h]
  struct tagRECT Rect; // [esp+Ch] [ebp-40h] BYREF
  int x; // [esp+1Ch] [ebp-30h]
  int y; // [esp+20h] [ebp-2Ch]
  CWnd *v25; // [esp+24h] [ebp-28h]
  char v26[4]; // [esp+28h] [ebp-24h] BYREF
  char v27[4]; // [esp+2Ch] [ebp-20h] BYREF
  char v28[4]; // [esp+30h] [ebp-1Ch] BYREF
  char v29[4]; // [esp+34h] [ebp-18h] BYREF
  CString *v30; // [esp+38h] [ebp-14h] BYREF
  char v31[4]; // [esp+3Ch] [ebp-10h] BYREF
  int v32; // [esp+48h] [ebp-4h]

  v25 = this;
  DlgItem = CWnd::GetDlgItem(this, 1023);
  GetWindowRect(*((HWND *)DlgItem + 8), &Rect);
  x = Rect.left;
  y = Rect.bottom;
  PopupMenu = CreatePopupMenu();
  v3 = CString::CString((CString *)&v30, asc_4243F0);
  v32 = 0;
  v17 = v3;
  v4 = sub_414BE2(181);
  v5 = (LPCWSTR *)operator+(v31, v4, v17);
  AppendMenuW(PopupMenu, 0x403u, 0, *v5);
  CString::~CString((CString *)v31);
  v32 = -1;
  CString::~CString((CString *)&v30);
  v6 = sub_414BE2(84);
  AppendMenuW(PopupMenu, 0x400u, 1u, v6);
  v7 = sub_414BE2(85);
  AppendMenuW(PopupMenu, 0x400u, 2u, v7);
  AppendMenuW(PopupMenu, 0xC00u, 0, 0);
  v18 = CString::CString((CString *)v31, asc_4243F0);
  v32 = 1;
  v8 = sub_414BE2(182);
  v9 = (LPCWSTR *)operator+(&v30, v8, v18);
  AppendMenuW(PopupMenu, 0x403u, 0, *v9);
  CString::~CString((CString *)&v30);
  v32 = -1;
  CString::~CString((CString *)v31);
  v30 = CString::CString((CString *)v26, asc_4243EC);
  v32 = 2;
  v10 = sub_414BE2(10);
  v11 = *(_DWORD *)CString::CString((CString *)v27, v10);
  LOBYTE(v32) = 3;
  v30 = (CString *)operator+(v28, v11, v30);
  LOBYTE(v32) = 4;
  v12 = sub_414BE2(20);
  v13 = (LPCWSTR *)operator+(v29, v30, v12);
  AppendMenuW(PopupMenu, 0x400u, 0xBu, *v13);
  CString::~CString((CString *)v29);
  LOBYTE(v32) = 3;
  CString::~CString((CString *)v28);
  LOBYTE(v32) = 2;
  CString::~CString((CString *)v27);
  v32 = -1;
  CString::~CString((CString *)v26);
  CheckMenuItem(PopupMenu, 1u, dword_4311C0 != 0 ? 8 : 0);
  v14 = -(dword_4311C0 != 0);
  LOBYTE(v14) = v14 & 0xF8;
  CheckMenuItem(PopupMenu, 2u, v14 + 8);
  CheckMenuItem(PopupMenu, 0xBu, dword_4309C8 != 0 ? 8 : 0);
  v15 = TrackPopupMenu(PopupMenu, 0x100u, x, y, 0, *((HWND *)v25 + 8), 0);
  if ( v15 == 11 )
  {
    v19 = dword_4309C8 == 0;
    dword_4309C8 = v19;
    sub_4141BE(&word_4309CC, v19);
  }
  if ( v15 == 12 )
  {
    v20 = dword_430A50 == 0;
    dword_430A50 = v20;
    sub_4141BE(&word_430A54, v20);
  }
  if ( v15 == 13 )
  {
    v21 = dword_430AD8 == 0;
    dword_430AD8 = v21;
    sub_4141BE(&word_430ADC, v21);
  }
  result = 1;
  if ( v15 == 1 )
  {
    if ( dword_4311C0 == 1 )
      return result;
    dword_4311C0 = 1;
    result = sub_4141BE(&word_4311C4, 1);
  }
  if ( v15 == 2 )
  {
    if ( dword_4311C0 )
    {
      dword_4311C0 = 0;
      return sub_4141BE(&word_4311C4, 0);
    }
  }
  return result;
}
// 41A074: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A09E: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 4309C8: using guessed type int dword_4309C8;
// 430A50: using guessed type int dword_430A50;
// 430AD8: using guessed type int dword_430AD8;
// 403C3D: using guessed type char var_10[4];
// 403C3D: using guessed type char var_24[4];
// 403C3D: using guessed type char var_20[4];
// 403C3D: using guessed type char var_1C[4];
// 403C3D: using guessed type char var_18[4];

//----- (00403EDB) --------------------------------------------------------
int sub_403EDB()
{
  int result; // eax
  EXECUTION_STATE v1; // edi
  EXECUTION_STATE v2; // eax

  result = dword_4309C8;
  if ( dword_4309C8 && (dword_430AD8 || dword_430A50 || dword_4309C8) )
  {
    if ( !SetProcessShutdownParameters(0x4FFu, 0)
      && !SetProcessShutdownParameters(0x4F0u, 0)
      && !SetProcessShutdownParameters(0x3FFu, 0)
      && !SetProcessShutdownParameters(0x3F0u, 0) )
    {
      SetProcessShutdownParameters(0x300u, 0);
    }
    v1 = 0x80000000;
    SetThreadExecutionState(0x80000000);
    if ( dword_4309C8 )
      v1 = -2147483647;
    SetThreadExecutionState(v1);
    v2 = v1;
    LOBYTE(v2) = v1 | 0x40;
    result = SetThreadExecutionState(v2);
    if ( !result )
      return SetThreadExecutionState(v1);
  }
  return result;
}
// 4309C8: using guessed type int dword_4309C8;
// 430A50: using guessed type int dword_430A50;
// 430AD8: using guessed type int dword_430AD8;

//----- (00403F67) --------------------------------------------------------
WCHAR *__thiscall sub_403F67(WCHAR *this, int a2, char a3)
{
  LPCWSTR v5[3]; // [esp-4h] [ebp-18h] BYREF
  int v6; // [esp+10h] [ebp-4h]

  v6 = 0;
  v5[0] = this;
  v5[2] = (LPCWSTR)v5;
  CString::CString((CString *)v5, (const struct CString *)&a3);
  sub_403FAF(this, a2, v5[0]);
  v6 = -1;
  CString::~CString((CString *)&a3);
  return this;
}

//----- (00403FAF) --------------------------------------------------------
void __thiscall sub_403FAF(_WORD *this, int a2, LPCWSTR lpString2)
{
  bool v3; // zf

  this[2] = 0;
  v3 = lpString2 == 0;
  *(_DWORD *)this = a2;
  if ( !v3 )
    lstrcpynW(this + 2, lpString2, 64);
  CString::~CString((CString *)&lpString2);
}

//----- (00403FDD) --------------------------------------------------------
int __thiscall sub_403FDD(WCHAR *this, HWND hWnd)
{
  int result; // eax

  result = SendMessageW(hWnd, 0x147u, 0, 0);
  if ( result != *(_DWORD *)this )
  {
    *(_DWORD *)this = result;
    return sub_4141BE(this + 2, result);
  }
  return result;
}

//----- (0040401F) --------------------------------------------------------
void __thiscall sub_40401F(WCHAR *this, char a2, LPCWSTR lpString2)
{
  CString::operator=(this + 64, &a2);
  *this = 0;
  if ( lpString2 )
    lstrcpynW(this, lpString2, 64);
  CString::~CString((CString *)&a2);
  CString::~CString((CString *)&lpString2);
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (0040407F) --------------------------------------------------------
void __thiscall sub_40407F(LPCWSTR lpKeyName)
{
  CString *v2; // edi
  WCHAR *Buffer; // eax

  v2 = (CString *)(lpKeyName + 64);
  Buffer = CString::GetBuffer((CString *)(lpKeyName + 64), 1034);
  sub_4141F0(lpKeyName, Buffer);
  CString::ReleaseBuffer(v2, -1);
}

//----- (004040AA) --------------------------------------------------------
int __thiscall sub_4040AA(int this, struct CWnd *a2)
{
  CDialog::CDialog((CDialog *)this, 0xA2u, a2);
  CString::CString((CString *)(this + 96));
  CString::CString((CString *)(this + 100));
  CWnd::CWnd((CWnd *)(this + 112));
  *(_DWORD *)(this + 112) = &off_41DD80;
  *(_DWORD *)this = &off_41DCA8;
  return this;
}
// 41DCA8: using guessed type struct CRuntimeClass *(__thiscall *off_41DCA8)(CDialog *__hidden this);
// 41DD80: using guessed type struct CRuntimeClass *(__thiscall *off_41DD80)(CStatic *__hidden this);

//----- (0040410D) --------------------------------------------------------
void *__thiscall sub_40410D(void *this, char a2)
{
  sub_4035E3((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00404129) --------------------------------------------------------
void __thiscall sub_404129(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 1011, (struct CWnd *)(this + 112));
}

//----- (0040413E) --------------------------------------------------------
int (**sub_40413E())()
{
  return &off_41DC70;
}
// 41DC70: using guessed type int (*off_41DC70)();

//----- (00404144) --------------------------------------------------------
void __thiscall sub_404144(int this, LPCWSTR lpString)
{
  int v3; // eax
  int v4; // edx
  int v5; // ecx
  const unsigned __int16 **v6; // eax
  const unsigned __int16 *v7; // ebx
  unsigned __int16 *v8; // eax
  int v9; // [esp-8h] [ebp-20h]
  char v10[4]; // [esp+8h] [ebp-10h] BYREF
  int v11; // [esp+14h] [ebp-4h]

  if ( lpString == (LPCWSTR)1000 )
  {
    KillTimer(*(HWND *)(this + 32), 0x3E8u);
    v3 = clock() / 1000;
    v4 = *(_DWORD *)(this + 108);
    v5 = v3 - v4;
    if ( v3 - v4 < 0 )
      v5 = v4 - v3;
    if ( v5 > 2 )
    {
      CDialog::EndDialog((CDialog *)this, 0);
      return;
    }
    if ( v4 != v3 )
    {
      --*(_DWORD *)(this + 104);
      *(_DWORD *)(this + 108) = v3;
      CString::CString((CString *)&lpString);
      v11 = 0;
      v6 = (const unsigned __int16 **)CString::CString((CString *)v10, aSD_0);
      v9 = *(_DWORD *)(this + 104);
      v7 = *v6;
      LOBYTE(v11) = 1;
      v8 = sub_414BE2(112);
      CString::Format((CString *)&lpString, v7, v8, v9);
      LOBYTE(v11) = 0;
      CString::~CString((CString *)v10);
      SetDlgItemTextW(*(HWND *)(this + 32), 1, lpString);
      if ( *(int *)(this + 104) <= 0 )
      {
        CDialog::EndDialog((CDialog *)this, 1);
        v11 = -1;
        CString::~CString((CString *)&lpString);
        return;
      }
      v11 = -1;
      CString::~CString((CString *)&lpString);
    }
    SetTimer(*(HWND *)(this + 32), 0x3E8u, 0x32u, 0);
  }
  CWnd::Default((CWnd *)this);
}
// 404144: using guessed type char var_10[4];

//----- (00404244) --------------------------------------------------------
int __thiscall sub_404244(_DWORD *this, char a2, char a3, int a4)
{
  int v5; // esi

  CString::operator=(this + 24, &a2);
  CString::operator=(this + 25, &a3);
  this[26] = a4;
  v5 = (*(int (__thiscall **)(_DWORD *))(*this + 192))(this);
  CString::~CString((CString *)&a2);
  CString::~CString((CString *)&a3);
  return v5;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (004042AB) --------------------------------------------------------
int __thiscall sub_4042AB(int this)
{
  HICON IconW; // ebx
  struct CFont *Font; // edx
  HFONT v4; // ebx
  HWND DlgItem; // eax
  HWND v6; // eax
  HWND v7; // eax
  unsigned __int16 *v8; // eax
  unsigned __int16 *v9; // eax
  clock_t v10; // eax
  HWND v12; // [esp-10h] [ebp-7Ch]
  LOGFONTW pv; // [esp+10h] [ebp-5Ch] BYREF

  CDialog::OnInitDialog((CDialog *)this);
  IconW = LoadIconW(0, (LPCWSTR)0x7F04);
  SendMessageW(*(HWND *)(this + 32), 0x80u, 1u, (LPARAM)IconW);
  SendMessageW(*(HWND *)(this + 32), 0x80u, 0, (LPARAM)IconW);
  Font = CWnd::GetFont((CWnd *)(this + 112));
  if ( Font )
  {
    memset(&pv, 0, sizeof(pv));
    GetObjectW(*((HANDLE *)Font + 1), 92, &pv);
    CreateFontIndirectW(&pv);
    pv.lfItalic = 0;
    pv.lfHeight = (__int64)((double)pv.lfHeight * 1.5);
    v4 = CreateFontIndirectW(&pv);
    DlgItem = GetDlgItem(*(HWND *)(this + 32), 1011);
    SendMessageW(DlgItem, 0x30u, (WPARAM)v4, 0);
    v6 = GetDlgItem(*(HWND *)(this + 32), 1);
    SendMessageW(v6, 0x30u, (WPARAM)v4, 0);
    v7 = GetDlgItem(*(HWND *)(this + 32), 2);
    SendMessageW(v7, 0x30u, (WPARAM)v4, 0);
    SetWindowTextW(*(HWND *)(this + 32), *(LPCWSTR *)(this + 96));
    v8 = sub_414BE2(112);
    SetDlgItemTextW(*(HWND *)(this + 32), 1, v8);
    v9 = sub_414BE2(66);
    SetDlgItemTextW(*(HWND *)(this + 32), 2, v9);
    CWnd::SetWindowTextW((CWnd *)(this + 112), *(const unsigned __int16 **)(this + 100));
    v10 = clock();
    v12 = *(HWND *)(this + 32);
    *(_DWORD *)(this + 108) = v10 / 1000;
    SetTimer(v12, 0x3E8u, 0x64u, 0);
  }
  return 1;
}

//----- (004043F5) --------------------------------------------------------
CStatic *__thiscall sub_4043F5(CStatic *this, char a2)
{
  CStatic::~CStatic(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00404411) --------------------------------------------------------
_DWORD *__thiscall sub_404411(_DWORD *this, struct CWnd *a2)
{
  CDialog::CDialog((CDialog *)this, 0x8Au, a2);
  CString::CString((CString *)(this + 26));
  CWnd::CWnd((CWnd *)(this + 27));
  this[27] = &off_41DFD0;
  this[24] = 0;
  *this = &off_41DEF8;
  return this;
}
// 41DEF8: using guessed type struct CRuntimeClass *(__thiscall *off_41DEF8)(CDialog *__hidden this);
// 41DFD0: using guessed type int (*off_41DFD0)();

//----- (0040446C) --------------------------------------------------------
int __thiscall sub_40446C(
        CWnd *this,
        int a2,
        unsigned __int16 *a3,
        unsigned int a4,
        struct tagRECT *a5,
        struct CWnd *a6,
        unsigned int a7,
        int a8)
{
  return CWnd::CreateControl(this, &stru_41E090, a3, a4, a5, a6, a7, 0, 0, 0);
}

//----- (00404491) --------------------------------------------------------
void *__thiscall sub_404491(void *this, char a2)
{
  sub_4044AD((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004044AD) --------------------------------------------------------
void __thiscall sub_4044AD(int this)
{
  CWnd::~CWnd((CWnd *)(this + 108));
  CString::~CString((CString *)(this + 104));
  CDialog::~CDialog((CDialog *)this);
}

//----- (004044F1) --------------------------------------------------------
CWnd *__thiscall sub_4044F1(CWnd *this, char a2)
{
  CWnd::~CWnd(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00404512) --------------------------------------------------------
void __thiscall sub_404512(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 1000, (struct CWnd *)(this + 108));
}

//----- (00404527) --------------------------------------------------------
int (**sub_404527())()
{
  return &off_41DE48;
}
// 41DE48: using guessed type int (*off_41DE48)();

//----- (0040452D) --------------------------------------------------------
int __thiscall sub_40452D(_DWORD *this)
{
  CString *v2; // eax
  int v3; // eax
  CString *v4; // ebx
  CString *v5; // edi
  CString *v6; // eax
  int v7; // eax
  int v8; // eax
  int v9; // eax
  VARIANTARG pvarg; // [esp+Ch] [ebp-5Ch] BYREF
  VARIANTARG v12; // [esp+1Ch] [ebp-4Ch] BYREF
  char v13[4]; // [esp+2Ch] [ebp-3Ch] BYREF
  char v14[4]; // [esp+30h] [ebp-38h] BYREF
  char v15[4]; // [esp+34h] [ebp-34h] BYREF
  char v16[4]; // [esp+38h] [ebp-30h] BYREF
  char v17[4]; // [esp+3Ch] [ebp-2Ch] BYREF
  char v18[4]; // [esp+40h] [ebp-28h] BYREF
  char v19[4]; // [esp+44h] [ebp-24h] BYREF
  char v20[4]; // [esp+48h] [ebp-20h] BYREF
  char v21[4]; // [esp+4Ch] [ebp-1Ch] BYREF
  CString *v22; // [esp+50h] [ebp-18h] BYREF
  CString *v23; // [esp+54h] [ebp-14h] BYREF
  char v24[4]; // [esp+58h] [ebp-10h] BYREF
  int v25; // [esp+64h] [ebp-4h]

  CDialog::OnInitDialog((CDialog *)this);
  AfxVariantInit(&v12);
  v25 = 0;
  sub_404742(0xF9u);
  v22 = CString::CString((CString *)v18, (const struct CString *)&lpValueName);
  LOBYTE(v25) = 1;
  v23 = CString::CString((CString *)v19, aSeiteFreeware);
  LOBYTE(v25) = 2;
  v2 = sub_4145B8((CString *)v20);
  LOBYTE(v25) = 3;
  v3 = operator+(v21, v2, v23);
  LOBYTE(v25) = 4;
  operator+(v24, v3, v22);
  LOBYTE(v25) = 9;
  CString::~CString((CString *)v21);
  LOBYTE(v25) = 8;
  CString::~CString((CString *)v20);
  LOBYTE(v25) = 7;
  CString::~CString((CString *)v19);
  LOBYTE(v25) = 6;
  CString::~CString((CString *)v18);
  CWnd::SetWindowTextW((CWnd *)this, lpValueName);
  if ( this[24] )
  {
    CString::CString((CString *)&v23, aUninstall);
    LOBYTE(v25) = 10;
    v4 = CString::CString((CString *)v13, (const struct CString *)&lpValueName);
    LOBYTE(v25) = 11;
    v5 = CString::CString((CString *)v14, aSeiteFreeware);
    LOBYTE(v25) = 12;
    v6 = sub_4145B8((CString *)v15);
    LOBYTE(v25) = 13;
    v7 = operator+(v16, v6, v5);
    LOBYTE(v25) = 14;
    v8 = operator+(v17, v7, v4);
    LOBYTE(v25) = 15;
    v9 = operator+(&v22, v8, &v23);
    LOBYTE(v25) = 16;
    CString::operator=(v24, v9);
    LOBYTE(v25) = 15;
    CString::~CString((CString *)&v22);
    LOBYTE(v25) = 14;
    CString::~CString((CString *)v17);
    LOBYTE(v25) = 13;
    CString::~CString((CString *)v16);
    LOBYTE(v25) = 12;
    CString::~CString((CString *)v15);
    LOBYTE(v25) = 11;
    CString::~CString((CString *)v14);
    LOBYTE(v25) = 10;
    CString::~CString((CString *)v13);
    LOBYTE(v25) = 6;
    CString::~CString((CString *)&v23);
    pvarg.vt = 0;
    COleVariant::operator=(&pvarg, v24);
    LOBYTE(v25) = 17;
    sub_412F20((CWnd *)(this + 27), (int)&pvarg, (int)&v12, (int)&v12, (int)&v12, (int)&v12);
    VariantClear(&pvarg);
  }
  else
  {
    sub_4048FF(this);
  }
  LOBYTE(v25) = 0;
  CString::~CString((CString *)v24);
  VariantClear(&v12);
  return 1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0C8: using guessed type int __thiscall COleVariant::operator=(_DWORD, _DWORD);
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 40452D: using guessed type char var_28[4];
// 40452D: using guessed type char var_24[4];
// 40452D: using guessed type char var_20[4];
// 40452D: using guessed type char var_1C[4];
// 40452D: using guessed type char var_10[4];
// 40452D: using guessed type char var_3C[4];
// 40452D: using guessed type char var_38[4];
// 40452D: using guessed type char var_34[4];
// 40452D: using guessed type char var_30[4];
// 40452D: using guessed type char var_2C[4];

//----- (00404742) --------------------------------------------------------
void __stdcall sub_404742(BYTE Data)
{
  wchar_t *v1; // eax
  WCHAR Filename[260]; // [esp+4h] [ebp-228h] BYREF
  DWORD dwDisposition; // [esp+20Ch] [ebp-20h] BYREF
  HKEY phkResult; // [esp+210h] [ebp-1Ch] BYREF
  LPCWSTR lpValueName; // [esp+214h] [ebp-18h] BYREF
  LPCWSTR lpSubKey; // [esp+218h] [ebp-14h] BYREF
  HKEY hKey; // [esp+21Ch] [ebp-10h] BYREF
  int v8; // [esp+228h] [ebp-4h]

  CString::CString((CString *)&lpValueName);
  v8 = 0;
  GetModuleFileNameW(0, Filename, 0x104u);
  v1 = wcsrchr(Filename, 0x5Cu);
  if ( v1 )
    CString::operator=(&lpValueName, v1 + 1);
  hKey = 0;
  LOBYTE(v8) = 1;
  CString::CString((CString *)&lpSubKey, aSoftwareMicros);
  LOBYTE(v8) = 2;
  if ( sub_406376(&hKey, HKEY_CURRENT_USER, lpSubKey, 0xF003Fu) )
  {
    phkResult = 0;
    if ( !RegCreateKeyExW(HKEY_CURRENT_USER, lpSubKey, 0, 0, 0, 0xF003Fu, 0, &phkResult, &dwDisposition) )
    {
      if ( hKey )
        RegCloseKey(hKey);
      hKey = phkResult;
    }
    if ( hKey )
    {
      RegCloseKey(hKey);
      hKey = 0;
    }
  }
  sub_406376(&hKey, HKEY_CURRENT_USER, lpSubKey, 0xF003Fu);
  RegSetValueExW(hKey, lpValueName, 0, 4u, &Data, 4u);
  LOBYTE(v8) = 1;
  CString::~CString((CString *)&lpSubKey);
  if ( hKey )
  {
    RegCloseKey(hKey);
    hKey = 0;
  }
  v8 = -1;
  CString::~CString((CString *)&lpValueName);
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (0040486E) --------------------------------------------------------
int __thiscall sub_40486E(CDialog *this, unsigned int a2, unsigned int a3, int a4)
{
  if ( a2 == 273 )
  {
    if ( (unsigned __int16)a3 == 1 )
    {
      CDialog::EndDialog(this, 1);
      goto LABEL_5;
    }
    if ( (unsigned __int16)a3 == 2 )
    {
      CDialog::EndDialog(this, 0);
LABEL_5:
      PostQuitMessage(0);
      return 1;
    }
  }
  return CWnd::WindowProc(this, a2, a3, a4);
}

//----- (004048AE) --------------------------------------------------------
int __thiscall sub_4048AE(int this)
{
  int result; // eax
  struct tagRECT Rect; // [esp+4h] [ebp-10h] BYREF

  GetClientRect(*(HWND *)(this + 32), &Rect);
  CRect::DeflateRect((CRect *)&Rect, 1, 1, 1, 1);
  result = 0;
  if ( this != -108 )
  {
    if ( *(_DWORD *)(this + 140) )
      return CWnd::SetWindowPos(
               (CWnd *)(this + 108),
               0,
               Rect.left,
               Rect.top,
               Rect.right - Rect.left,
               Rect.bottom - Rect.top,
               0);
  }
  return result;
}

//----- (004048FF) --------------------------------------------------------
void __thiscall sub_4048FF(_DWORD *this)
{
  CString *v2; // ebx
  CString *v3; // eax
  int v4; // eax
  int v5; // eax
  __time32_t v6; // eax
  int v7; // ecx
  int v8; // [esp-8h] [ebp-148h] BYREF
  const char *v9; // [esp-4h] [ebp-144h]
  char Buffer[256]; // [esp+Ch] [ebp-134h] BYREF
  char v11[4]; // [esp+10Ch] [ebp-34h] BYREF
  char v12[4]; // [esp+110h] [ebp-30h] BYREF
  char v13[4]; // [esp+114h] [ebp-2Ch] BYREF
  char v14[4]; // [esp+118h] [ebp-28h] BYREF
  char v15[4]; // [esp+11Ch] [ebp-24h] BYREF
  CString *v16; // [esp+120h] [ebp-20h]
  char v17[4]; // [esp+124h] [ebp-1Ch] BYREF
  char v18[4]; // [esp+128h] [ebp-18h] BYREF
  char v19[4]; // [esp+12Ch] [ebp-14h] BYREF
  void *Block; // [esp+130h] [ebp-10h] BYREF
  int v21; // [esp+13Ch] [ebp-4h]

  CString::CString((CString *)v18, aAutoupdate);
  v21 = 0;
  v2 = CString::CString((CString *)v12, (const struct CString *)&lpValueName);
  LOBYTE(v21) = 1;
  v16 = CString::CString((CString *)v14, aSeiteFreeware);
  LOBYTE(v21) = 2;
  v3 = sub_4145B8((CString *)v11);
  LOBYTE(v21) = 3;
  v4 = operator+(v13, v3, v16);
  LOBYTE(v21) = 4;
  v5 = operator+(v15, v4, v2);
  LOBYTE(v21) = 5;
  operator+(v17, v5, v18);
  LOBYTE(v21) = 12;
  CString::~CString((CString *)v15);
  LOBYTE(v21) = 11;
  CString::~CString((CString *)v13);
  LOBYTE(v21) = 10;
  CString::~CString((CString *)v11);
  LOBYTE(v21) = 9;
  CString::~CString((CString *)v14);
  LOBYTE(v21) = 8;
  CString::~CString((CString *)v12);
  LOBYTE(v21) = 7;
  CString::~CString((CString *)v18);
  v6 = time(0);
  sprintf(Buffer, "Unicode=%d&Portable=%d&X64=%d&time=%d&Version=", 1, dword_433CBC, 0, 431 * v6);
  CString::CString((CString *)v19, Buffer);
  LOBYTE(v21) = 13;
  CString::operator+=(v19, &unk_433CAC);
  Block = 0;
  LOBYTE(v21) = 14;
  sub_404A8F(&Block, (CString *)v19);
  v9 = (const char *)Block;
  v8 = v7;
  v16 = (CString *)&v8;
  CString::CString((CString *)&v8, (const struct CString *)v17);
  sub_404C39(this, v8, v9);
  if ( Block )
    free(Block);
  LOBYTE(v21) = 7;
  CString::~CString((CString *)v19);
  v21 = -1;
  CString::~CString((CString *)v17);
}
// 404A37: variable 'v7' is possibly undefined
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 433CBC: using guessed type int dword_433CBC;
// 4048FF: using guessed type char var_18[4];
// 4048FF: using guessed type char var_30[4];
// 4048FF: using guessed type char var_28[4];
// 4048FF: using guessed type char var_34[4];
// 4048FF: using guessed type char var_2C[4];
// 4048FF: using guessed type char var_24[4];
// 4048FF: using guessed type char var_1C[4];
// 4048FF: using guessed type char var_14[4];

//----- (00404A8F) --------------------------------------------------------
int __thiscall sub_404A8F(void *this, CString *a2)
{
  CHAR *v3; // eax
  const WCHAR *Buffer; // eax
  CHAR *v6; // [esp-10h] [ebp-1Ch]
  int v7; // [esp-Ch] [ebp-18h]

  v3 = (CHAR *)malloc(2 * *(_DWORD *)(*(_DWORD *)a2 - 8) + 1);
  *(_DWORD *)this = v3;
  v7 = *(_DWORD *)(*(_DWORD *)a2 - 8);
  v6 = v3;
  Buffer = CString::GetBuffer(a2, 0);
  WideCharToMultiByte(0, 0, Buffer, -1, v6, v7, 0, 0);
  *(_BYTE *)(*(_DWORD *)(*(_DWORD *)a2 - 8) + *(_DWORD *)this) = 0;
  return *(_DWORD *)this;
}

//----- (00404ADB) --------------------------------------------------------
void __thiscall sub_404ADB(_DWORD *this, int a2, void *ppvData, ULONG cElements, char a5)
{
  CWnd *v6; // ebx
  const void *v7; // esi
  SAFEARRAY *Vector; // ebx
  VARIANTARG pvarg; // [esp+Ch] [ebp-48h] BYREF
  VARIANTARG v10; // [esp+1Ch] [ebp-38h] BYREF
  VARIANTARG v11; // [esp+2Ch] [ebp-28h] BYREF
  CWnd *v12; // [esp+3Ch] [ebp-18h]
  BSTR bstrString; // [esp+40h] [ebp-14h]
  char v14[4]; // [esp+44h] [ebp-10h] BYREF
  int v15; // [esp+50h] [ebp-4h]

  v15 = 1;
  CString::CString((CString *)v14, aContentTypeApp);
  LOBYTE(v15) = 2;
  CString::operator+=(v14, &a5);
  if ( a2 )
  {
    v6 = (CWnd *)(this + 27);
    v12 = (CWnd *)(this + 27);
    if ( this != (_DWORD *)-108 )
    {
      if ( this[35] )
      {
        VariantInit(&pvarg);
        VariantInit(&v11);
        VariantInit(&v10);
        bstrString = CString::AllocSysString((CString *)&a2);
        if ( !bstrString )
          goto LABEL_12;
        v11.lVal = (LONG)CString::AllocSysString((CString *)v14);
        if ( !v11.lVal )
          goto LABEL_12;
        v7 = ppvData;
        v11.vt = 8;
        if ( ppvData )
        {
          ppvData = 0;
          Vector = SafeArrayCreateVector(0x11u, 0, cElements);
          if ( !Vector )
            goto LABEL_12;
          if ( SafeArrayAccessData(Vector, &ppvData) < 0 )
            goto LABEL_12;
          qmemcpy(ppvData, v7, cElements);
          if ( SafeArrayUnaccessData(Vector) < 0 )
            goto LABEL_12;
          v10.lVal = (LONG)Vector;
          v6 = v12;
          v10.vt = 8209;
        }
        sub_412ED3(v6, (int)bstrString, (int)&pvarg, (int)&pvarg, (int)&v10, (int)&v11);
LABEL_12:
        SysFreeString(bstrString);
        VariantClear(&pvarg);
        VariantClear(&v11);
        VariantClear(&v10);
      }
    }
  }
  LOBYTE(v15) = 1;
  CString::~CString((CString *)v14);
  LOBYTE(v15) = 0;
  CString::~CString((CString *)&a2);
  v15 = -1;
  CString::~CString((CString *)&a5);
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 404ADB: using guessed type char var_10[4];

//----- (00404C39) --------------------------------------------------------
int __thiscall sub_404C39(_DWORD *this, char a2, const char *ppvData)
{
  int v5; // [esp-10h] [ebp-28h] BYREF
  char *v6; // [esp-Ch] [ebp-24h]
  ULONG v7; // [esp-8h] [ebp-20h]
  _DWORD v8[4]; // [esp-4h] [ebp-1Ch] BYREF
  int v9; // [esp+14h] [ebp-4h]

  v9 = 0;
  v8[0] = this;
  v8[3] = v8;
  CString::CString((CString *)v8, byte_431514);
  LOBYTE(v9) = 1;
  v7 = strlen(ppvData);
  v6 = (char *)ppvData;
  v5 = v7;
  ppvData = (const char *)&v5;
  CString::CString((CString *)&v5, (const struct CString *)&a2);
  LOBYTE(v9) = 0;
  sub_404ADB(this, v5, v6, v7, v8[0]);
  v9 = -1;
  CString::~CString((CString *)&a2);
  return 1;
}

//----- (00404CAA) --------------------------------------------------------
int sub_404CAA()
{
  return CCmdTarget::eventsinkMap;
}

//----- (00404CB0) --------------------------------------------------------
int (**sub_404CB0())()
{
  return &off_41DE98;
}
// 41DE98: using guessed type int (*off_41DE98)();

//----- (00404CB6) --------------------------------------------------------
int __cdecl sub_404CB6(CString *a1, int a2, int a3, int *a4)
{
  int v4; // ebx
  unsigned __int16 *Buffer; // eax
  unsigned __int16 *v6; // edi
  int v7; // ebx
  unsigned __int16 *v8; // eax

  CString::operator=(a2, byte_431514);
  v4 = CString::Find(a1, 0xAu, *a4);
  if ( v4 >= *a4 )
  {
    Buffer = CString::GetBuffer(a1, 0);
    Buffer[v4] = 0;
    v6 = &Buffer[v4];
    CString::operator=(a2, &Buffer[*a4]);
    *v6 = 10;
    v7 = v4 + 1;
LABEL_6:
    *a4 = v7;
    return 1;
  }
  if ( a3 )
  {
    v7 = *(_DWORD *)(*(_DWORD *)a1 - 8);
    if ( *a4 < v7 )
    {
      v8 = CString::GetBuffer(a1, 0);
      CString::operator=(a2, &v8[*a4]);
      goto LABEL_6;
    }
  }
  return 0;
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (00404D3D) --------------------------------------------------------
int __cdecl sub_404D3D(_DWORD *a1, const wchar_t *a2, int a3)
{
  int v3; // eax
  int v4; // esi

  CString::operator=(a3, byte_431514);
  v3 = sub_40627F(a1, &a2);
  if ( v3 == -1 )
  {
    v4 = 0;
  }
  else
  {
    CString::operator=(a3, a1[1] + 4 * v3);
    v4 = 1;
  }
  CString::~CString((CString *)&a2);
  return v4;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (00404D9D) --------------------------------------------------------
int __cdecl sub_404D9D(int a1, CString *a2)
{
  int v2; // edi
  int v3; // esi
  int v4; // ecx
  int v5; // ecx
  int v7; // [esp-8h] [ebp-38h] BYREF
  _DWORD v8[6]; // [esp-4h] [ebp-34h] BYREF
  int v9; // [esp+14h] [ebp-1Ch] BYREF
  char v10[4]; // [esp+18h] [ebp-18h] BYREF
  char v11[4]; // [esp+1Ch] [ebp-14h] BYREF
  int v12; // [esp+20h] [ebp-10h] BYREF
  int v13; // [esp+2Ch] [ebp-4h]

  v2 = 0;
  CString::CString((CString *)&v12);
  v13 = 0;
  v9 = 0;
  while ( sub_404CB6(a2, (int)&v12, 0, &v9) )
  {
    v3 = CString::Find((CString *)&v12, 0x3Du);
    if ( v3 != -1 )
    {
      CString::Left(&v12, v10, v3);
      LOBYTE(v13) = 1;
      CString::Mid(&v12, v11, v3 + 1);
      v8[0] = v4;
      v8[5] = v8;
      LOBYTE(v13) = 2;
      CString::CString((CString *)v8, (const struct CString *)v11);
      v7 = v5;
      v8[4] = &v7;
      LOBYTE(v13) = 3;
      CString::CString((CString *)&v7, (const struct CString *)v10);
      LOBYTE(v13) = 2;
      sub_4061EE(a1, v7, v8[0]);
      ++v2;
      LOBYTE(v13) = 1;
      CString::~CString((CString *)v11);
      LOBYTE(v13) = 0;
      CString::~CString((CString *)v10);
    }
    CString::operator=(&v12, byte_431514);
  }
  v13 = -1;
  CString::~CString((CString *)&v12);
  return v2;
}
// 404E0B: variable 'v4' is possibly undefined
// 404E1E: variable 'v5' is possibly undefined
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0FE: using guessed type int __thiscall CString::Mid(_DWORD, _DWORD, _DWORD);
// 41A104: using guessed type int __thiscall CString::Left(_DWORD, _DWORD, _DWORD);
// 404D9D: using guessed type char var_18[4];
// 404D9D: using guessed type char var_14[4];

//----- (00404E84) --------------------------------------------------------
CString *sub_404E84(CString *a1, ...)
{
  int v1; // eax
  char v3[4]; // [esp+8h] [ebp-10h] BYREF
  int v4; // [esp+14h] [ebp-4h]
  va_list va; // [esp+24h] [ebp+Ch] BYREF

  va_start(va, a1);
  v4 = 1;
  v1 = CString::ReverseFind((CString *)va, 0x2Eu);
  if ( v1 != -1 )
  {
    CString::Left(va, v3, v1);
    LOBYTE(v4) = 2;
    CString::operator=(va, v3);
    LOBYTE(v4) = 1;
    CString::~CString((CString *)v3);
  }
  CString::CString(a1, (const struct CString *)va);
  LOBYTE(v4) = 0;
  CString::~CString((CString *)va);
  return a1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A104: using guessed type int __thiscall CString::Left(_DWORD, _DWORD, _DWORD);
// 404E84: using guessed type char var_10[4];

//----- (00404EFD) --------------------------------------------------------
int __cdecl sub_404EFD(LPCWSTR lpFileName, int a2, int a3)
{
  int v3; // esi
  HANDLE FileW; // edi
  const void *v6; // [esp-10h] [ebp-28h]
  DWORD v7; // [esp-Ch] [ebp-24h]
  DWORD NumberOfBytesWritten; // [esp+8h] [ebp-10h] BYREF
  int v9; // [esp+14h] [ebp-4h]

  v3 = 0;
  FileW = CreateFileW(lpFileName, 0x40000000u, 0, 0, 2u, 0x80u, 0);
  if ( FileW == (HANDLE)-1 )
  {
    if ( a3 )
      MessageBoxW(0, lpFileName, aCreateError, 0);
  }
  else
  {
    v7 = *(_DWORD *)(a2 + 20);
    v6 = *(const void **)(a2 + 4);
    NumberOfBytesWritten = 0;
    WriteFile(FileW, v6, v7, &NumberOfBytesWritten, 0);
    CloseHandle(FileW);
    v3 = 1;
  }
  v9 = -1;
  CString::~CString((CString *)&lpFileName);
  return v3;
}

//----- (00404F82) --------------------------------------------------------
void __thiscall sub_404F82(int this, int a2, const unsigned __int16 **Block)
{
  CWnd *v3; // esi
  int v4; // esi
  int v5; // edi
  unsigned __int16 *v6; // eax
  const wchar_t *v7; // ecx
  const wchar_t *v8; // ecx
  WCHAR *Buffer; // eax
  int v10; // eax
  int v11; // edi
  const WCHAR *v12; // ecx
  const WCHAR *v13; // ecx
  char *v14; // ecx
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // esi
  unsigned __int16 *v19; // eax
  LPCWSTR v20; // [esp+18h] [ebp-2D4h] BYREF
  const wchar_t *v21; // [esp+1Ch] [ebp-2D0h] BYREF
  char *v22[4]; // [esp+20h] [ebp-2CCh] BYREF
  WCHAR Filename[2]; // [esp+30h] [ebp-2BCh] BYREF
  char v24[516]; // [esp+34h] [ebp-2B8h] BYREF
  __int16 v25; // [esp+238h] [ebp-B4h]
  int v26[7]; // [esp+23Ch] [ebp-B0h] BYREF
  char v27[4]; // [esp+258h] [ebp-94h] BYREF
  unsigned __int16 *v28; // [esp+25Ch] [ebp-90h] BYREF
  char v29[4]; // [esp+260h] [ebp-8Ch] BYREF
  int v30; // [esp+264h] [ebp-88h]
  int v31[3]; // [esp+268h] [ebp-84h] BYREF
  int v32; // [esp+274h] [ebp-78h] BYREF
  char v33[4]; // [esp+278h] [ebp-74h] BYREF
  _DWORD v34[11]; // [esp+27Ch] [ebp-70h] BYREF
  char v35[4]; // [esp+2A8h] [ebp-44h] BYREF
  char v36[4]; // [esp+2ACh] [ebp-40h] BYREF
  int *v37; // [esp+2B0h] [ebp-3Ch] BYREF
  char v38[4]; // [esp+2B4h] [ebp-38h] BYREF
  char v39[4]; // [esp+2B8h] [ebp-34h] BYREF
  char v40[4]; // [esp+2BCh] [ebp-30h] BYREF
  LPCWSTR lpFileName; // [esp+2C0h] [ebp-2Ch] BYREF
  unsigned __int16 *v42; // [esp+2C4h] [ebp-28h] BYREF
  wchar_t *String1; // [esp+2C8h] [ebp-24h] BYREF
  const wchar_t **v44; // [esp+2CCh] [ebp-20h] BYREF
  char v45[4]; // [esp+2D0h] [ebp-1Ch] BYREF
  char v46[4]; // [esp+2D4h] [ebp-18h] BYREF
  int *v47; // [esp+2D8h] [ebp-14h] BYREF
  wchar_t *String2; // [esp+2DCh] [ebp-10h] BYREF
  int v49; // [esp+2E8h] [ebp-4h]

  v30 = this;
  v3 = sub_412EFF((CWnd *)(this + 108));
  CString::CString((CString *)v46, Block[2]);
  v49 = 0;
  if ( v3 )
  {
    v47 = 0;
    (**(void (__stdcall ***)(CWnd *, void *, int *))v3)(v3, &unk_424600, (int *)&v47);
    LOBYTE(v49) = 1;
    CString::MakeLower((CString *)v46);
    sub_4145B8((CString *)&v42);
    LOBYTE(v49) = 2;
    if ( !CString::Find((CString *)v46, v42) && v47 )
    {
      v32 = 0;
      CString::CString((CString *)v40);
      LOBYTE(v49) = 3;
      strcpy((char *)v34, "autoupdate_data_block_DERGDDQWREGGQQQQEQEQE");
      CString::operator=(v40, v34);
      v4 = (int)v47;
      v5 = *v47;
      v6 = CString::AllocSysString((CString *)v40);
      (*(void (__stdcall **)(int, unsigned __int16 *, int *))(v5 + 184))(v4, v6, &v32);
      if ( v32 )
      {
        (*(void (__stdcall **)(int, unsigned __int16 **))(*(_DWORD *)v32 + 240))(v32, &v28);
        CString::CString((CString *)v39, v28);
        LOBYTE(v49) = 4;
        CString::CString((CString *)&String2, asc_4245F8);
        LOBYTE(v49) = 5;
        CString::operator+=(v39, &String2);
        LOBYTE(v49) = 4;
        CString::~CString((CString *)&String2);
        CString::Replace((CString *)v39, asc_4245F4, &word_42FB18);
        memset(v31, 0, sizeof(v31));
        LOBYTE(v49) = 6;
        sub_404D9D((int)v31, (CString *)v39);
        CString::CString((CString *)v36, byte_431514);
        LOBYTE(v49) = 7;
        v22[0] = v36;
        v21 = v7;
        v44 = &v21;
        CString::CString((CString *)&v21, aVersionInfo);
        sub_404D3D(v31, v21, (int)v22[0]);
        CString::CString((CString *)&String1);
        LOBYTE(v49) = 8;
        v22[0] = (char *)&String1;
        v21 = v8;
        v44 = &v21;
        CString::CString((CString *)&v21, aNewVersion);
        sub_404D3D(v31, v21, (int)v22[0]);
        sub_415E57(&v34[4]);
        LOBYTE(v49) = 9;
        sub_415E57(v26);
        Block = 0;
        LOBYTE(v49) = 11;
        sub_404A8F(&Block, (CString *)&String1);
        CString::CString((CString *)&String2, (const char *)Block);
        wcscmp(String1, String2);
        CString::~CString((CString *)&String2);
        sub_4161BE(v26, (LPCSTR)Block);
        if ( *((int *)String1 - 2) > 1100 )
        {
          CString::CString((CString *)v45);
          LOBYTE(v49) = 12;
          Buffer = CString::GetBuffer((CString *)v45, 261);
          GetTempPathW(0x104u, Buffer);
          CString::ReleaseBuffer((CString *)v45, -1);
          CString::operator+=(v45, &lpValueName);
          CString::CString((CString *)&String2, aAutoupdateExe);
          LOBYTE(v49) = 13;
          CString::operator+=(v45, &String2);
          LOBYTE(v49) = 12;
          CString::~CString((CString *)&String2);
          sub_4144DC((CString *)&lpFileName);
          LOBYTE(v49) = 14;
          CString::CString((CString *)&String2, asc_4245C4);
          LOBYTE(v49) = 15;
          v10 = operator+(v35, &String2, &lpValueName);
          LOBYTE(v49) = 16;
          CString::operator+=(&lpFileName, v10);
          LOBYTE(v49) = 15;
          CString::~CString((CString *)v35);
          LOBYTE(v49) = 14;
          CString::~CString((CString *)&String2);
          CString::CString((CString *)&String2, aAutoupdateExe);
          LOBYTE(v49) = 17;
          CString::operator+=(&lpFileName, &String2);
          LOBYTE(v49) = 14;
          CString::~CString((CString *)&String2);
          v11 = v30;
          v22[0] = 0;
          v21 = (const wchar_t *)v26;
          v20 = v12;
          v44 = &v20;
          *(_DWORD *)(v30 + 100) = 0;
          CString::CString((CString *)&v20, (const struct CString *)&lpFileName);
          if ( sub_404EFD(v20, (int)v21, (int)v22[0]) )
            DeleteFileW(lpFileName);
          else
            *(_DWORD *)(v11 + 100) = 1;
          v22[0] = (char *)1;
          v21 = (const wchar_t *)v26;
          v20 = v13;
          v44 = &v20;
          CString::CString((CString *)&v20, (const struct CString *)v45);
          if ( sub_404EFD(v20, (int)v21, (int)v22[0]) )
          {
            v37 = 0;
            (*(void (__stdcall **)(int *, wchar_t *, int **))(*v47 + 184))(v47, aFffaeetfffaeet, &v37);
            if ( v37 )
            {
              CString::CString((CString *)&String2, aH4UpdateIn5Sec);
              *(_DWORD *)Filename = dword_43151C;
              memset(v24, 0, sizeof(v24));
              v25 = 0;
              LOBYTE(v49) = 18;
              GetModuleFileNameW(0, Filename, 0x104u);
              CString::CString((CString *)v35, Filename);
              v22[0] = v14;
              v44 = (const wchar_t **)v22;
              LOBYTE(v49) = 19;
              CString::CString((CString *)v22, (const struct CString *)v35);
              sub_404E84((CString *)v33);
              LOBYTE(v49) = 20;
              CString::CString((CString *)v38, aExe);
              LOBYTE(v49) = 21;
              CString::CString((CString *)v29, asc_424574);
              LOBYTE(v49) = 22;
              v15 = operator+(&v44, v29, &unk_433CAC);
              LOBYTE(v49) = 23;
              v16 = operator+(v27, v15, v38);
              LOBYTE(v49) = 24;
              CString::operator+=(v33, v16);
              LOBYTE(v49) = 23;
              CString::~CString((CString *)v27);
              LOBYTE(v49) = 22;
              CString::~CString((CString *)&v44);
              LOBYTE(v49) = 21;
              CString::~CString((CString *)v29);
              LOBYTE(v49) = 20;
              CString::~CString((CString *)v38);
              CString::CString((CString *)v38, aH4);
              LOBYTE(v49) = 25;
              v17 = operator+(&v44, v33, v38);
              LOBYTE(v49) = 26;
              CString::operator+=(&String2, v17);
              LOBYTE(v49) = 25;
              CString::~CString((CString *)&v44);
              LOBYTE(v49) = 20;
              CString::~CString((CString *)v38);
              v18 = *v37;
              v19 = CString::AllocSysString((CString *)&String2);
              (*(void (__stdcall **)(int *, unsigned __int16 *))(v18 + 228))(v37, v19);
              LOBYTE(v49) = 19;
              CString::~CString((CString *)v33);
              LOBYTE(v49) = 18;
              CString::~CString((CString *)v35);
              LOBYTE(v49) = 14;
              CString::~CString((CString *)&String2);
              v11 = v30;
            }
            SetTimer(*(HWND *)(v11 + 32), 0x2B67u, 0x1388u, 0);
            CString::operator=(v11 + 104, v45);
          }
          LOBYTE(v49) = 12;
          CString::~CString((CString *)&lpFileName);
          LOBYTE(v49) = 11;
          CString::~CString((CString *)v45);
        }
        if ( Block )
          free(Block);
        LOBYTE(v49) = 9;
        sub_415E8A(v26);
        LOBYTE(v49) = 8;
        sub_415E8A(&v34[4]);
        LOBYTE(v49) = 7;
        CString::~CString((CString *)&String1);
        LOBYTE(v49) = 6;
        CString::~CString((CString *)v36);
        LOBYTE(v49) = 4;
        sub_4062C2((int)v31);
        LOBYTE(v49) = 3;
        CString::~CString((CString *)v39);
      }
      LOBYTE(v49) = 2;
      CString::~CString((CString *)v40);
    }
    LOBYTE(v49) = 1;
    CString::~CString((CString *)&v42);
    LOBYTE(v49) = 0;
    if ( v47 )
      (*(void (__stdcall **)(int *))(*v47 + 8))(v47);
  }
  v49 = -1;
  CString::~CString((CString *)v46);
}
// 40518E: variable 'v7' is possibly undefined
// 4051BD: variable 'v8' is possibly undefined
// 405336: variable 'v12' is possibly undefined
// 40536F: variable 'v13' is possibly undefined
// 4053FA: variable 'v14' is possibly undefined
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 4245A4: using guessed type wchar_t aFffaeetfffaeet[15];
// 43151C: using guessed type int dword_43151C;
// 404F82: using guessed type char var_18[4];
// 404F82: using guessed type char var_30[4];
// 404F82: using guessed type char var_34[4];
// 404F82: using guessed type char var_40[4];
// 404F82: using guessed type char var_1C[4];
// 404F82: using guessed type char var_44[4];
// 404F82: using guessed type char var_74[4];
// 404F82: using guessed type char var_38[4];
// 404F82: using guessed type char var_8C[4];
// 404F82: using guessed type char var_94[4];

//----- (0040564F) --------------------------------------------------------
BOOL __cdecl sub_40564F(int a1, char a2, int a3)
{
  BOOL v3; // esi
  WCHAR Filename[260]; // [esp+8h] [ebp-258h] BYREF
  SHELLEXECUTEINFOW pExecInfo; // [esp+210h] [ebp-50h] BYREF
  const WCHAR *v7; // [esp+24Ch] [ebp-14h] BYREF
  char v8[4]; // [esp+250h] [ebp-10h] BYREF
  int v9; // [esp+25Ch] [ebp-4h]

  v9 = 1;
  GetModuleFileNameW(hInstance, Filename, 0x104u);
  if ( !*(_DWORD *)(a1 - 8) )
    CString::operator=(&a1, Filename);
  memset(&pExecInfo, 0, sizeof(pExecInfo));
  pExecInfo.cbSize = 60;
  CString::CString((CString *)v8, (const struct CString *)&a1);
  LOBYTE(v9) = 2;
  pExecInfo.fMask = 0;
  pExecInfo.lpFile = CString::GetBuffer((CString *)v8, 0);
  pExecInfo.lpClass = 0;
  pExecInfo.hwnd = 0;
  pExecInfo.nShow = 1;
  CString::CString((CString *)&v7, (const struct CString *)&a2);
  pExecInfo.lpParameters = v7;
  if ( a3 )
    pExecInfo.lpVerb = aRunas;
  v3 = ShellExecuteExW(&pExecInfo);
  CString::~CString((CString *)&v7);
  LOBYTE(v9) = 1;
  CString::~CString((CString *)v8);
  LOBYTE(v9) = 0;
  CString::~CString((CString *)&a1);
  v9 = -1;
  CString::~CString((CString *)&a2);
  return v3;
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 424610: using guessed type wchar_t aRunas[6];
// 40564F: using guessed type char var_10[4];

//----- (00405738) --------------------------------------------------------
int __stdcall sub_405738(LPCWSTR lpText, CString *a2)
{
  int v2; // eax
  int v3; // eax
  int v4; // eax
  const WCHAR *v5; // ecx
  const WCHAR *v6; // ecx
  BOOL v7; // eax
  HWND ActiveWindow; // eax
  int v9; // esi
  LPCWSTR v11; // [esp-Ch] [ebp-248h] BYREF
  WCHAR *v12; // [esp-8h] [ebp-244h] BYREF
  CString *v13; // [esp-4h] [ebp-240h]
  WCHAR Filename[2]; // [esp+Ch] [ebp-230h] BYREF
  char v15[516]; // [esp+10h] [ebp-22Ch] BYREF
  __int16 v16; // [esp+214h] [ebp-28h]
  LPCWSTR *v17; // [esp+218h] [ebp-24h]
  char v18[4]; // [esp+21Ch] [ebp-20h] BYREF
  char v19[4]; // [esp+220h] [ebp-1Ch] BYREF
  char v20[4]; // [esp+224h] [ebp-18h] BYREF
  char v21[4]; // [esp+228h] [ebp-14h] BYREF
  char v22[4]; // [esp+22Ch] [ebp-10h] BYREF
  int v23; // [esp+238h] [ebp-4h]

  *(_DWORD *)Filename = dword_43151C;
  memset(v15, 0, sizeof(v15));
  v16 = 0;
  v23 = 0;
  GetModuleFileNameW(0, Filename, 0x104u);
  CString::CString((CString *)v21, Filename);
  LOBYTE(v23) = 1;
  v2 = operator+(v18, aPath, v21);
  LOBYTE(v23) = 2;
  operator+(v22, v2, asc_424658);
  LOBYTE(v23) = 4;
  CString::~CString((CString *)v18);
  v3 = operator+(v19, aVersion, &unk_433CAC);
  LOBYTE(v23) = 5;
  v4 = operator+(v20, v3, asc_424658);
  LOBYTE(v23) = 6;
  CString::operator+=(v22, v4);
  LOBYTE(v23) = 5;
  CString::~CString((CString *)v20);
  LOBYTE(v23) = 4;
  CString::~CString((CString *)v19);
  v13 = a2;
  v12 = (WCHAR *)v5;
  a2 = (CString *)&v12;
  CString::CString((CString *)&v12, (const struct CString *)v22);
  v11 = v6;
  v17 = &v11;
  LOBYTE(v23) = 7;
  CString::CString((CString *)&v11, (const struct CString *)&lpText);
  LOBYTE(v23) = 4;
  v7 = sub_40564F((int)v11, (char)v12, (int)v13);
  v13 = 0;
  if ( v7 )
  {
    PostQuitMessage((int)v13);
    v9 = 1;
  }
  else
  {
    v12 = Caption;
    v11 = lpText;
    ActiveWindow = GetActiveWindow();
    MessageBoxW(ActiveWindow, v11, v12, (UINT)v13);
    v9 = 0;
  }
  LOBYTE(v23) = 1;
  CString::~CString((CString *)v22);
  LOBYTE(v23) = 0;
  CString::~CString((CString *)v21);
  v23 = -1;
  CString::~CString((CString *)&lpText);
  return v9;
}
// 405811: variable 'v5' is possibly undefined
// 40581D: variable 'v6' is possibly undefined
// 41A074: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A09E: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 424644: using guessed type wchar_t aVersion[10];
// 424658: using guessed type wchar_t asc_424658[3];
// 424660: using guessed type wchar_t aPath[7];
// 43151C: using guessed type int dword_43151C;
// 405738: using guessed type char var_14[4];
// 405738: using guessed type char var_20[4];
// 405738: using guessed type char var_10[4];
// 405738: using guessed type char var_1C[4];
// 405738: using guessed type char var_18[4];

//----- (00405899) --------------------------------------------------------
void sub_405899()
{
  int v0; // ecx
  LPCWSTR v1; // eax
  CHAR *v2; // esi
  int v3; // eax
  int v4; // edi
  int v5; // eax
  void *v6; // esp
  int v7; // [esp-4h] [ebp-860h] BYREF
  CHAR v8[12]; // [esp+0h] [ebp-85Ch] BYREF
  WCHAR Filename[2]; // [esp+Ch] [ebp-850h] BYREF
  char v10[516]; // [esp+10h] [ebp-84Ch] BYREF
  __int16 v11; // [esp+214h] [ebp-648h]
  WCHAR Directory[2]; // [esp+218h] [ebp-644h] BYREF
  char v13[516]; // [esp+21Ch] [ebp-640h] BYREF
  WCHAR v14[2]; // [esp+420h] [ebp-43Ch] BYREF
  char v15[516]; // [esp+424h] [ebp-438h] BYREF
  WCHAR Buffer[2]; // [esp+628h] [ebp-234h] BYREF
  char v17[516]; // [esp+62Ch] [ebp-230h] BYREF
  DWORD NumberOfBytesWritten; // [esp+830h] [ebp-2Ch] BYREF
  LPCWCH lpWideCharStr; // [esp+834h] [ebp-28h]
  char v20[4]; // [esp+838h] [ebp-24h] BYREF
  HANDLE hFile; // [esp+83Ch] [ebp-20h]
  unsigned __int16 *v22; // [esp+840h] [ebp-1Ch] BYREF
  wchar_t *Source; // [esp+844h] [ebp-18h] BYREF
  int v24; // [esp+848h] [ebp-14h] BYREF
  LPCWSTR lpString; // [esp+84Ch] [ebp-10h] BYREF
  int v26; // [esp+858h] [ebp-4h]

  CString::CString((CString *)&v22, aRepeatDelSIfEx);
  *(_DWORD *)Filename = dword_43151C;
  memset(v10, 0, sizeof(v10));
  v11 = 0;
  v26 = 0;
  GetModuleFileNameW(0, Filename, 0x104u);
  v7 = v0;
  lpWideCharStr = (LPCWCH)&v7;
  CString::CString((CString *)&v7, Filename);
  sub_4143D0((CString *)v20);
  LOBYTE(v26) = 1;
  operator+(&Source, v20, aSelfdestructBa);
  *(_DWORD *)v14 = dword_43151C;
  *(_DWORD *)Buffer = dword_43151C;
  memset(v15, 0, sizeof(v15));
  memset(v17, 0, sizeof(v17));
  *(_DWORD *)Directory = dword_43151C;
  LOBYTE(v26) = 2;
  memset(v13, 0, sizeof(v13));
  GetTempPathW(0x104u, Buffer);
  GetTempPathW(0x104u, Directory);
  wcscat(Buffer, Source);
  GetModuleFileNameW(0, v14, 0x104u);
  CString::CString((CString *)&v24, v14);
  LOBYTE(v26) = 3;
  hFile = CreateFileW(Buffer, 0x40000000u, 0, 0, 2u, 0x80u, 0);
  if ( hFile != (HANDLE)-1 )
  {
    CString::CString((CString *)&lpString);
    LOBYTE(v26) = 4;
    CString::Format((CString *)&lpString, v22, v24, v24, Source);
    CString::Replace((CString *)&lpString, asc_42467C, asc_424684);
    v1 = lpString;
    lpWideCharStr = lpString;
    if ( lpString )
    {
      v3 = lstrlenW(lpString);
      v4 = 2 * v3 + 2;
      v5 = 2 * v3 + 5;
      LOBYTE(v5) = v5 & 0xFC;
      v6 = alloca(v5);
      v2 = v8;
      v8[0] = 0;
      WideCharToMultiByte(0, 0, lpWideCharStr, -1, v8, v4, 0, 0);
      v1 = lpString;
    }
    else
    {
      v2 = 0;
    }
    WriteFile(hFile, v2, *((_DWORD *)v1 - 2), &NumberOfBytesWritten, 0);
    CloseHandle(hFile);
    ShellExecuteW(0, Operation, Buffer, 0, Directory, 0);
    LOBYTE(v26) = 3;
    CString::~CString((CString *)&lpString);
  }
  LOBYTE(v26) = 2;
  CString::~CString((CString *)&v24);
  LOBYTE(v26) = 1;
  CString::~CString((CString *)&Source);
  LOBYTE(v26) = 0;
  CString::~CString((CString *)v20);
  v26 = -1;
  CString::~CString((CString *)&v22);
}
// 4058EE: variable 'v0' is possibly undefined
// 41A09E: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 42468C: using guessed type wchar_t aSelfdestructBa[18];
// 43151C: using guessed type int dword_43151C;
// 405899: using guessed type char var_24[4];

//----- (00405AD7) --------------------------------------------------------
HINSTANCE __cdecl sub_405AD7(
        HWND hwnd,
        LPCWSTR lpOperation,
        LPCWSTR lpFile,
        LPCWSTR lpParameters,
        LPCWSTR lpDirectory,
        INT nShowCmd)
{
  return ShellExecuteW(hwnd, lpOperation, lpFile, lpParameters, lpDirectory, nShowCmd);
}

//----- (00405AF4) --------------------------------------------------------
BOOL __stdcall EnumFunc(HWND hWnd, LPARAM a2)
{
  if ( SendMessageTimeoutW(hWnd, Msg, 0, 0, 3u, 0x3E8u, &dwResult) && dwResult == Msg )
    SendMessageW(hWnd, Msg, Msg, Msg);
  return 1;
}

//----- (00405B38) --------------------------------------------------------
BOOL sub_405B38()
{
  return EnumWindows(EnumFunc, 0);
}

//----- (00405B46) --------------------------------------------------------
int sub_405B46()
{
  wchar_t *v0; // ecx
  int v1; // eax
  struct AFX_MODULE_STATE *ModuleState; // eax
  char *v3; // eax
  int v4; // ecx
  const WCHAR *Buffer; // eax
  const unsigned __int16 *v6; // eax
  const unsigned __int16 *v7; // eax
  wchar_t *v8; // ecx
  int v9; // eax
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  LPCWSTR *v18; // eax
  const WCHAR *v19; // eax
  HWND ActiveWindow; // eax
  const WCHAR *v21; // eax
  HWND v22; // eax
  const WCHAR *v24; // [esp-Ch] [ebp-A98h]
  const WCHAR *v25; // [esp-Ch] [ebp-A98h]
  wchar_t *v26[4]; // [esp-4h] [ebp-A90h] BYREF
  int v27; // [esp+Ch] [ebp-A80h] BYREF
  char v28; // [esp+10h] [ebp-A7Ch] BYREF
  WCHAR Filename[2]; // [esp+810h] [ebp-27Ch] BYREF
  char v30[516]; // [esp+814h] [ebp-278h] BYREF
  __int16 v31; // [esp+A18h] [ebp-74h]
  char v32[4]; // [esp+A1Ch] [ebp-70h] BYREF
  char v33[4]; // [esp+A20h] [ebp-6Ch] BYREF
  char v34[4]; // [esp+A24h] [ebp-68h] BYREF
  char v35[4]; // [esp+A28h] [ebp-64h] BYREF
  char v36[4]; // [esp+A2Ch] [ebp-60h] BYREF
  char v37[4]; // [esp+A30h] [ebp-5Ch] BYREF
  char v38[4]; // [esp+A34h] [ebp-58h] BYREF
  char v39[4]; // [esp+A38h] [ebp-54h] BYREF
  char v40[4]; // [esp+A3Ch] [ebp-50h] BYREF
  char v41[4]; // [esp+A40h] [ebp-4Ch] BYREF
  char v42[4]; // [esp+A44h] [ebp-48h] BYREF
  char v43[4]; // [esp+A48h] [ebp-44h] BYREF
  LPCWSTR lpCaption; // [esp+A4Ch] [ebp-40h] BYREF
  wchar_t **v45; // [esp+A50h] [ebp-3Ch]
  char v46[4]; // [esp+A54h] [ebp-38h] BYREF
  LPCWSTR lpNewFileName; // [esp+A58h] [ebp-34h] BYREF
  char v48[4]; // [esp+A5Ch] [ebp-30h] BYREF
  char v49[4]; // [esp+A60h] [ebp-2Ch] BYREF
  char v50[4]; // [esp+A64h] [ebp-28h] BYREF
  char v51[4]; // [esp+A68h] [ebp-24h] BYREF
  char v52[4]; // [esp+A6Ch] [ebp-20h] BYREF
  char v53[4]; // [esp+A70h] [ebp-1Ch] BYREF
  int v54; // [esp+A74h] [ebp-18h] BYREF
  LPCWSTR lpExistingFileName; // [esp+A78h] [ebp-14h] BYREF
  bool v56; // [esp+A7Fh] [ebp-Dh]
  int v57; // [esp+A88h] [ebp-4h]

  *(_DWORD *)Filename = dword_43151C;
  memset(v30, 0, sizeof(v30));
  v31 = 0;
  GetModuleFileNameW(0, Filename, 0x104u);
  v26[0] = v0;
  v45 = v26;
  CString::CString((CString *)v26, Filename);
  sub_4143D0((CString *)v48);
  v57 = 0;
  CString::MakeLower((CString *)v48);
  CString::CString((CString *)v43, Filename);
  LOBYTE(v57) = 1;
  CString::CString((CString *)v40, Filename);
  LOBYTE(v57) = 2;
  v26[0] = *(wchar_t **)CString::CString((CString *)v50, aAutoupdate_0);
  LOBYTE(v57) = 3;
  v1 = CString::Find((CString *)v48, v26[0]);
  LOBYTE(v57) = 2;
  v56 = v1 >= 0;
  CString::~CString((CString *)v50);
  if ( v56 )
  {
    ModuleState = AfxGetModuleState();
    CString::CString((CString *)v50, *(const unsigned __int16 **)(*((_DWORD *)ModuleState + 1) + 116));
    LOBYTE(v57) = 4;
    v3 = &v28;
    v4 = 256;
    do
    {
      *((_DWORD *)v3 + 1) = 0;
      *(_DWORD *)v3 = 0;
      v3 += 8;
      --v4;
    }
    while ( v4 );
    v26[0] = (wchar_t *)SubStr;
    v27 = 0;
    Buffer = CString::GetBuffer((CString *)v50, 0);
    sub_406043(&v27, Buffer, v26[0]);
    v6 = (const unsigned __int16 *)sub_4061B5(&v27, aPath_0);
    CString::CString((CString *)&lpExistingFileName, v6);
    LOBYTE(v57) = 5;
    v7 = (const unsigned __int16 *)sub_4061B5(&v27, aVersion_0);
    CString::CString((CString *)&v54, v7);
    v26[0] = v8;
    v45 = v26;
    LOBYTE(v57) = 6;
    CString::CString((CString *)v26, (const struct CString *)&lpExistingFileName);
    sub_404E84((CString *)&lpNewFileName);
    LOBYTE(v57) = 7;
    CString::CString((CString *)v53, aExe);
    LOBYTE(v57) = 8;
    CString::CString((CString *)v52, asc_424574);
    LOBYTE(v57) = 9;
    v9 = operator+(v46, v52, &v54);
    LOBYTE(v57) = 10;
    v10 = operator+(v49, v9, v53);
    LOBYTE(v57) = 11;
    CString::operator+=(&lpNewFileName, v10);
    LOBYTE(v57) = 10;
    CString::~CString((CString *)v49);
    LOBYTE(v57) = 9;
    CString::~CString((CString *)v46);
    LOBYTE(v57) = 8;
    CString::~CString((CString *)v52);
    LOBYTE(v57) = 7;
    CString::~CString((CString *)v53);
    CString::CString((CString *)v53, asc_4243EC);
    LOBYTE(v57) = 12;
    v11 = operator+(v38, &v54, v53);
    LOBYTE(v57) = 13;
    operator+(&lpCaption, v11, &unk_433CAC);
    LOBYTE(v57) = 16;
    CString::~CString((CString *)v38);
    LOBYTE(v57) = 15;
    CString::~CString((CString *)v53);
    CString::CString((CString *)v39, asc_424774);
    LOBYTE(v57) = 17;
    CString::CString((CString *)v41, asc_4243EC);
    LOBYTE(v57) = 18;
    CString::CString((CString *)v52, aAutoupdate_1);
    LOBYTE(v57) = 19;
    v12 = operator+(v33, v52, &v54);
    LOBYTE(v57) = 20;
    v13 = operator+(v34, v12, v41);
    LOBYTE(v57) = 21;
    v14 = operator+(v36, v13, &unk_433CAC);
    LOBYTE(v57) = 22;
    operator+(v42, v14, v39);
    LOBYTE(v57) = 29;
    CString::~CString((CString *)v36);
    LOBYTE(v57) = 28;
    CString::~CString((CString *)v34);
    LOBYTE(v57) = 27;
    CString::~CString((CString *)v33);
    LOBYTE(v57) = 26;
    CString::~CString((CString *)v52);
    LOBYTE(v57) = 25;
    CString::~CString((CString *)v41);
    LOBYTE(v57) = 24;
    CString::~CString((CString *)v39);
    sub_405B38();
    CString::CString((CString *)v49, aBackup);
    LOBYTE(v57) = 30;
    CString::CString((CString *)v46, asc_424754);
    LOBYTE(v57) = 31;
    v15 = operator+(v51, v42, v46);
    LOBYTE(v57) = 32;
    v16 = operator+(v37, v15, &lpExistingFileName);
    LOBYTE(v57) = 33;
    v17 = operator+(v32, v16, v49);
    LOBYTE(v57) = 34;
    v18 = (LPCWSTR *)operator+(v35, v17, &lpNewFileName);
    v45 = (wchar_t **)MessageBoxW(0, *v18, lpCaption, 0x40003u);
    CString::~CString((CString *)v35);
    LOBYTE(v57) = 33;
    CString::~CString((CString *)v32);
    LOBYTE(v57) = 32;
    CString::~CString((CString *)v37);
    LOBYTE(v57) = 31;
    CString::~CString((CString *)v51);
    LOBYTE(v57) = 30;
    CString::~CString((CString *)v46);
    LOBYTE(v57) = 24;
    CString::~CString((CString *)v49);
    if ( !*(_DWORD *)(v54 - 8) )
    {
      v19 = *(const WCHAR **)CString::CString((CString *)v51, aBadAutoupdate1);
      v26[0] = 0;
      v24 = v19;
      ActiveWindow = GetActiveWindow();
      MessageBoxW(ActiveWindow, v24, 0, (UINT)v26[0]);
      CString::~CString((CString *)v51);
    }
    if ( !*((_DWORD *)lpExistingFileName - 2) )
    {
      v21 = *(const WCHAR **)CString::CString((CString *)v51, aBadAutoupdate2);
      v26[0] = 0;
      v25 = v21;
      v22 = GetActiveWindow();
      MessageBoxW(v22, v25, 0, (UINT)v26[0]);
      CString::~CString((CString *)v51);
    }
    if ( v45 == (wchar_t **)6 )
    {
      CopyFileW(lpExistingFileName, lpNewFileName, 0);
      CopyFileW(Filename, lpExistingFileName, 0);
    }
    sub_405AD7(0, Operation, lpExistingFileName, 0, 0, 5);
    sub_405899();
    PostQuitMessage(0);
    LOBYTE(v57) = 15;
    CString::~CString((CString *)v42);
    LOBYTE(v57) = 7;
    CString::~CString((CString *)&lpCaption);
    LOBYTE(v57) = 6;
    CString::~CString((CString *)&lpNewFileName);
    LOBYTE(v57) = 5;
    CString::~CString((CString *)&v54);
    LOBYTE(v57) = 4;
    CString::~CString((CString *)&lpExistingFileName);
    LOBYTE(v57) = 2;
    CString::~CString((CString *)v50);
    LOBYTE(v57) = 1;
    CString::~CString((CString *)v40);
    LOBYTE(v57) = 0;
    CString::~CString((CString *)v43);
    v57 = -1;
    CString::~CString((CString *)v48);
    return 1;
  }
  else
  {
    LOBYTE(v57) = 1;
    CString::~CString((CString *)v40);
    LOBYTE(v57) = 0;
    CString::~CString((CString *)v43);
    v57 = -1;
    CString::~CString((CString *)v48);
    return 0;
  }
}
// 405B8A: variable 'v0' is possibly undefined
// 405C91: variable 'v8' is possibly undefined
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 43151C: using guessed type int dword_43151C;
// 405B46: using guessed type char var_30[4];
// 405B46: using guessed type char var_44[4];
// 405B46: using guessed type char var_50[4];
// 405B46: using guessed type char var_28[4];
// 405B46: using guessed type char var_1C[4];
// 405B46: using guessed type char var_20[4];
// 405B46: using guessed type char var_38[4];
// 405B46: using guessed type char var_2C[4];
// 405B46: using guessed type char var_58[4];
// 405B46: using guessed type char var_54[4];
// 405B46: using guessed type char var_4C[4];
// 405B46: using guessed type char var_6C[4];
// 405B46: using guessed type char var_68[4];
// 405B46: using guessed type char var_60[4];
// 405B46: using guessed type char var_48[4];
// 405B46: using guessed type char var_24[4];
// 405B46: using guessed type char var_5C[4];
// 405B46: using guessed type char var_70[4];
// 405B46: using guessed type char var_64[4];

//----- (00406043) --------------------------------------------------------
int __thiscall sub_406043(_DWORD *this, LPCWSTR lpString, wchar_t *SubStr)
{
  int v3; // eax
  WCHAR *v4; // ebx
  WCHAR *v5; // eax
  int v6; // edx
  WCHAR *v7; // ecx
  WCHAR *v8; // edi
  WCHAR *v9; // eax
  WCHAR *v10; // ebx
  const WCHAR *v11; // edi
  unsigned int v12; // eax
  bool v13; // cf
  _DWORD *v14; // edi
  wchar_t *v15; // eax
  const WCHAR *v18; // [esp+10h] [ebp-8h]
  const WCHAR *v19; // [esp+14h] [ebp-4h]
  LPCWSTR v20; // [esp+14h] [ebp-4h]
  int lpStringc; // [esp+20h] [ebp+8h]
  BOOL lpStringa; // [esp+20h] [ebp+8h]
  const wchar_t *lpStringb; // [esp+20h] [ebp+8h]

  *this = 0;
  v3 = lstrlenW(lpString);
  v4 = (WCHAR *)malloc(2 * v3 + 2050);
  *(_DWORD *)v4 = 0;
  *v4 = 0;
  lstrcatW(v4, String2);
  lstrcatW(v4, lpString);
  lstrcatW(v4, String2);
  lstrcatW(v4, String2);
  lstrcatW(v4, String2);
  lstrcatW(v4, String2);
  lstrlenW(v4);
  lpStringc = lstrlenW(v4);
  v5 = (WCHAR *)malloc(4 * lpStringc);
  v6 = lpStringc;
  lpStringa = 0;
  v7 = v5;
  *(_DWORD *)v5 = 0;
  v8 = &v4[v6];
  v19 = v5;
  v9 = v4;
  if ( v4 < v8 )
  {
    do
    {
      if ( *v9 == 34 )
        lpStringa = !lpStringa;
      if ( lpStringa && *v9 == 32 )
        *v9 = 9;
      ++v9;
    }
    while ( v9 < v8 );
    while ( v4 < v8 )
    {
      if ( *v4 != 34 )
        *v7++ = *v4;
      ++v4;
    }
  }
  *v7 = 0;
  v10 = (WCHAR *)v19;
  v11 = v19;
  lpStringb = v19;
  v12 = (unsigned int)&v19[lstrlenW(v19) - 1];
  v18 = v19;
  v13 = (unsigned int)v19 < v12;
  v20 = (LPCWSTR)v12;
  if ( v13 )
  {
    do
    {
      if ( *v11 == 32 )
      {
        *v11 = 0;
        if ( lstrlenW(lpStringb) )
        {
          v14 = this;
          this[2 * *this + 1] = lpStringb;
          this[2 * *this + 2] = 0;
          v15 = wcsstr(lpStringb, SubStr);
          if ( v15 )
          {
            this[2 * *this + 2] = v15 + 1;
            *v15 = 0;
          }
          if ( (int)++*this >= 256 )
            goto LABEL_22;
          v11 = v18;
        }
        lpStringb = v11 + 1;
      }
      v18 = ++v11;
    }
    while ( v11 < v20 );
  }
  v14 = this;
LABEL_22:
  while ( v10 < v20 )
  {
    if ( *v10 == 10 )
      *v10 = 32;
    if ( *v10 == 9 )
      *v10 = 32;
    ++v10;
  }
  return *v14;
}

//----- (004061B5) --------------------------------------------------------
int __thiscall sub_4061B5(int *this, LPCWSTR lpString1)
{
  int v3; // edi
  LPCWSTR *i; // ebx

  v3 = 0;
  if ( *this <= 0 )
    return 0;
  for ( i = (LPCWSTR *)(this + 1); lstrcmpW(lpString1, *i); i += 2 )
  {
    if ( ++v3 >= *this )
      return 0;
  }
  return this[2 * v3 + 2];
}

//----- (004061EE) --------------------------------------------------------
int __thiscall sub_4061EE(int this, char a2, char a3)
{
  int v4; // ebx
  void *v5; // eax
  void *v6; // eax

  v4 = 1;
  v5 = realloc(*(void **)this, 4 * *(_DWORD *)(this + 8) + 4);
  if ( v5 && (*(_DWORD *)this = v5, (v6 = realloc(*(void **)(this + 4), 4 * *(_DWORD *)(this + 8) + 4)) != 0) )
  {
    ++*(_DWORD *)(this + 8);
    *(_DWORD *)(this + 4) = v6;
    sub_406316((_DWORD *)this, *(_DWORD *)(this + 8) - 1, (struct CString *)&a2, (struct CString *)&a3);
  }
  else
  {
    v4 = 0;
  }
  CString::~CString((CString *)&a2);
  CString::~CString((CString *)&a3);
  return v4;
}

//----- (0040627F) --------------------------------------------------------
int __thiscall sub_40627F(_DWORD *this, const wchar_t **a2)
{
  int v3; // edi

  v3 = 0;
  if ( (int)this[2] <= 0 )
    return -1;
  while ( wcscmp(*(const wchar_t **)(*this + 4 * v3), *a2) )
  {
    if ( ++v3 >= this[2] )
      return -1;
  }
  return v3;
}

//----- (004062C2) --------------------------------------------------------
void __thiscall sub_4062C2(int this)
{
  int v2; // edi

  v2 = 0;
  if ( *(_DWORD *)this )
  {
    if ( *(int *)(this + 8) > 0 )
    {
      do
      {
        CString::~CString((CString *)(*(_DWORD *)this + 4 * v2));
        CString::~CString((CString *)(4 * v2++ + *(_DWORD *)(this + 4)));
      }
      while ( v2 < *(_DWORD *)(this + 8) );
    }
    free(*(void **)this);
    *(_DWORD *)this = 0;
  }
  if ( *(_DWORD *)(this + 4) )
  {
    free(*(void **)(this + 4));
    *(_DWORD *)(this + 4) = 0;
  }
  *(_DWORD *)(this + 8) = 0;
}

//----- (00406316) --------------------------------------------------------
CString *__thiscall sub_406316(_DWORD *this, int a2, struct CString *a3, struct CString *a4)
{
  CString *result; // eax
  CString *v6; // ecx
  CString *v7; // ecx

  result = (CString *)a2;
  v6 = (CString *)(4 * a2 + *this);
  if ( v6 )
    result = sub_406347(v6, a3);
  v7 = (CString *)(4 * a2 + this[1]);
  if ( v7 )
    return sub_406347(v7, a4);
  return result;
}

//----- (00406347) --------------------------------------------------------
CString *__thiscall sub_406347(CString *this, struct CString *a2)
{
  CString::CString(this, a2);
  return this;
}

//----- (00406376) --------------------------------------------------------
LSTATUS __thiscall sub_406376(HKEY *this, HKEY hKey, LPCWSTR lpSubKey, REGSAM samDesired)
{
  LSTATUS result; // eax
  HKEY phkResult; // [esp+4h] [ebp-4h] BYREF

  phkResult = 0;
  result = RegOpenKeyExW(hKey, lpSubKey, 0, samDesired, &phkResult);
  if ( !result )
  {
    if ( *this )
    {
      result = RegCloseKey(*this);
      *this = 0;
    }
    *this = phkResult;
  }
  return result;
}

//----- (004063B4) --------------------------------------------------------
CString *__cdecl sub_4063B4(CString *a1, int a2)
{
  unsigned __int16 *v2; // eax
  const unsigned __int16 *Buffer; // eax

  v2 = sub_414BE2(a2);
  CString::CString((CString *)&a2, v2);
  CString::Replace((CString *)&a2, &word_424150, &word_42FB18);
  Buffer = CString::GetBuffer((CString *)&a2, 255);
  CString::CString(a1, Buffer);
  CString::~CString((CString *)&a2);
  return a1;
}

//----- (00406428) --------------------------------------------------------
WCHAR *__thiscall sub_406428(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMCpuMode);
  return sub_403F67((WCHAR *)&dword_4316C0, 7, v2[0]);
}

//----- (0040644D) --------------------------------------------------------
WCHAR *__thiscall sub_40644D(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMCpuPrecentage);
  return sub_403F67((WCHAR *)&dword_431638, 7, v2[0]);
}

//----- (00406472) --------------------------------------------------------
WCHAR *__thiscall sub_406472(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseCpuPrecenta);
  return sub_403F67((WCHAR *)&dword_4315B0, 0, v2[0]);
}

//----- (00406497) --------------------------------------------------------
WCHAR *__thiscall sub_406497(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseCpuPrecenta_0);
  return sub_403F67((WCHAR *)&dword_431528, 20, v2[0]);
}

//----- (004064B7) --------------------------------------------------------
int __thiscall sub_4064B7(int this, struct CWnd *a2)
{
  CDialog::CDialog((CDialog *)this, 0xA5u, a2);
  sub_407788((_DWORD *)(this + 96));
  *(_BYTE *)(this + 144) = 0;
  *(_BYTE *)(this + 136) = HIBYTE(a2);
  *(_BYTE *)(this + 137) = HIBYTE(a2);
  sub_407436((_DWORD *)(this + 136));
  CWnd::CWnd((CWnd *)(this + 152));
  *(_DWORD *)(this + 152) = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 216));
  *(_DWORD *)(this + 216) = &off_41D8C8;
  CWnd::CWnd((CWnd *)(this + 280));
  *(_DWORD *)(this + 280) = &off_41E210;
  CWnd::CWnd((CWnd *)(this + 344));
  *(_DWORD *)(this + 344) = &off_41DA5C;
  CWnd::CWnd((CWnd *)(this + 408));
  *(_DWORD *)(this + 408) = &off_41D8C8;
  CWnd::CWnd((CWnd *)(this + 472));
  *(_DWORD *)(this + 472) = &off_41D8C8;
  *(_DWORD *)(this + 132) = 0;
  *(_DWORD *)this = &off_41E138;
  return this;
}
// 41D8C8: using guessed type struct CRuntimeClass *(__thiscall *off_41D8C8)(CComboBox *__hidden this);
// 41D998: using guessed type struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this);
// 41DA5C: using guessed type struct CRuntimeClass *(__thiscall *off_41DA5C)(CEdit *__hidden this);
// 41E138: using guessed type struct CRuntimeClass *(__thiscall *off_41E138)(CDialog *__hidden this);
// 41E210: using guessed type struct CRuntimeClass *(__thiscall *off_41E210)(CProgressCtrl *__hidden this);

//----- (004065A7) --------------------------------------------------------
_DWORD *__thiscall sub_4065A7(_DWORD *this, char a2)
{
  sub_4065C8(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004065C8) --------------------------------------------------------
void __thiscall sub_4065C8(_DWORD *this)
{
  CComboBox::~CComboBox((CComboBox *)(this + 118));
  CComboBox::~CComboBox((CComboBox *)(this + 102));
  CEdit::~CEdit((CEdit *)(this + 86));
  CProgressCtrl::~CProgressCtrl((CProgressCtrl *)(this + 70));
  CComboBox::~CComboBox((CComboBox *)(this + 54));
  CButton::~CButton((CButton *)(this + 38));
  sub_406FD3((int)(this + 34));
  sub_4077C2(this + 24);
  CDialog::~CDialog((CDialog *)this);
}

//----- (00406669) --------------------------------------------------------
void __thiscall sub_406669(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 2105, (struct CWnd *)(this + 152));
  DDX_Control(a2, 1061, (struct CWnd *)(this + 216));
  DDX_Control(a2, 1073, (struct CWnd *)(this + 280));
  DDX_Control(a2, 1000, (struct CWnd *)(this + 344));
  DDX_Control(a2, 1014, (struct CWnd *)(this + 408));
  DDX_Control(a2, 5011, (struct CWnd *)(this + 472));
}

//----- (004066E2) --------------------------------------------------------
int (**sub_4066E2())()
{
  return &off_41E0A0;
}
// 41E0A0: using guessed type int (*off_41E0A0)();

//----- (004066E8) --------------------------------------------------------
int __thiscall sub_4066E8(HWND *this)
{
  int result; // eax

  if ( this[8] )
    return sub_4066F4(this);
  return result;
}

//----- (004066F4) --------------------------------------------------------
int __thiscall sub_4066F4(HWND *this)
{
  signed int v2; // ebx
  HWND DlgItem; // eax
  unsigned __int16 *v4; // eax
  HWND v5; // eax
  unsigned __int16 *v6; // eax
  unsigned __int16 *v7; // eax
  unsigned __int16 *v9; // [esp+10h] [ebp-18h] BYREF
  unsigned __int16 *v10; // [esp+14h] [ebp-14h] BYREF
  LPARAM lParam; // [esp+18h] [ebp-10h] BYREF
  int v12; // [esp+24h] [ebp-4h]

  sub_406B45(this);
  SendMessageW(this[126], 0x14Bu, 0, 0);
  SendMessageW(this[110], 0x14Bu, 0, 0);
  CString::CString((CString *)&lParam);
  v2 = 0;
  v12 = 0;
  DlgItem = GetDlgItem(this[8], 1073);
  SendMessageW(DlgItem, 0x401u, 0, 6553600);
  v4 = sub_414BE2(67);
  CWnd::SetWindowTextW((CWnd *)(this + 38), v4);
  CString::CString((CString *)&v9);
  LOBYTE(v12) = 1;
  if ( this == (HWND *)-408 )
    v5 = 0;
  else
    v5 = this[110];
  sub_412397(v5);
  v6 = sub_414BE2(105);
  CString::operator=(&lParam, v6);
  if ( dword_431528 < 1 )
    dword_431528 = 1;
  if ( dword_431528 > 50 )
    dword_431528 = 50;
  CString::CString((CString *)&v10);
  LOBYTE(v12) = 2;
  CString::Format((CString *)&v10, aD, dword_431528);
  do
  {
    v7 = sub_414BE2(160);
    CString::operator=(&lParam, v7);
    CString::Format((CString *)&v9, aD, v2 + 1);
    CString::Replace((CString *)&lParam, aMin, v9);
    CString::Replace((CString *)&lParam, aPr, v10);
    SendMessageW(this[126], 0x14Au, v2++, lParam);
  }
  while ( v2 < 5 );
  SendMessageW(this[126], 0x14Eu, 4u, 0);
  SendMessageW(this[110], 0x14Eu, 6u, 0);
  SendMessageW(this[110], 0x14Eu, dword_4316C0, 0);
  SendMessageW(this[126], 0x14Eu, dword_431638, 0);
  sub_406B45(this);
  sub_40692A(this);
  KillTimer(this[8], 0x7D0u);
  SetTimer(this[8], 0x7D0u, 0x1F4u, 0);
  LOBYTE(v12) = 1;
  CString::~CString((CString *)&v10);
  LOBYTE(v12) = 0;
  CString::~CString((CString *)&v9);
  v12 = -1;
  CString::~CString((CString *)&lParam);
  return 1;
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (0040692A) --------------------------------------------------------
int __thiscall sub_40692A(HWND *this)
{
  int v2; // eax

  v2 = SendMessageW(this[126], 0x147u, 0, 0);
  if ( v2 != dword_431638 )
  {
    dword_431638 = v2;
    sub_4141BE(&word_43163C, v2);
  }
  KillTimer(this[8], 0x7D0u);
  KillTimer(this[8], 0x7D0u);
  KillTimer(this[8], 0x7D1u);
  SetTimer(this[8], 0x7D0u, 0x1F4u, 0);
  return sub_406B45(this);
}

//----- (00406A07) --------------------------------------------------------
int __thiscall sub_406A07(HWND *this)
{
  int v2; // ebx
  LPARAM lParam; // [esp+Ch] [ebp-10h] BYREF
  int v5; // [esp+18h] [ebp-4h]

  CDialog::OnInitDialog((CDialog *)this);
  dword_431528 = sub_4141D6(&word_43152C, dword_431528);
  dword_4316C0 = sub_4141D6(&word_4316C4, dword_4316C0);
  dword_431638 = sub_4141D6(&word_43163C, dword_431638);
  dword_4315B0 = sub_4141D6(&word_4315B4, dword_4315B0);
  v2 = 1;
  if ( dword_431528 < 1 )
    dword_431528 = 1;
  if ( dword_431528 > 50 )
    dword_431528 = 50;
  CString::CString((CString *)&lParam);
  v5 = 0;
  do
  {
    CString::Format((CString *)&lParam, aD_1, v2);
    SendMessageW(this[62], 0x14Au, v2++ - 1, lParam);
  }
  while ( v2 < 51 );
  SendMessageW(this[62], 0x14Eu, 0x14u, 0);
  SendMessageW(this[62], 0x14Eu, dword_431528 - 1, 0);
  SendMessageW(this[46], 0xF1u, dword_4315B0, 0);
  SetTimer(this[8], 0x7D0u, 0x1F4u, 0);
  sub_4066F4(this);
  v5 = -1;
  CString::~CString((CString *)&lParam);
  return 1;
}

//----- (00406B45) --------------------------------------------------------
int __thiscall sub_406B45(void *this)
{
  int v1; // esi
  __time32_t v2; // edi
  int v3; // ebx
  int result; // eax
  int v5; // [esp+Ch] [ebp-10h] BYREF
  int v6[2]; // [esp+14h] [ebp-8h] BYREF

  v1 = (int)this + 136;
  v2 = time(0);
  v3 = 1800;
  do
  {
    v6[0] = v2;
    v6[1] = 33;
    sub_4070CB(v1, (int)&v5, v6);
    result = v5;
    --v2;
    --v3;
    *(_DWORD *)(v5 + 16) = 50;
  }
  while ( v3 );
  return result;
}

//----- (00406BCF) --------------------------------------------------------
void __thiscall sub_406BCF(int this)
{
  int v2; // eax
  _DWORD *v3; // edi
  CString *v4; // eax
  CString *v5; // ecx
  CString *v6; // eax
  CString *v7; // eax
  int v8; // eax
  HWND DlgItem; // eax
  CString *v10; // eax
  unsigned __int16 *v11; // eax
  WPARAM v12; // ecx
  int CurSel; // eax
  WPARAM v14; // [esp-8h] [ebp-64h] BYREF
  const unsigned __int16 *v15[4]; // [esp-4h] [ebp-60h] BYREF
  int v16; // [esp+Ch] [ebp-50h] BYREF
  int v17; // [esp+14h] [ebp-48h] BYREF
  int v18[2]; // [esp+1Ch] [ebp-40h] BYREF
  int v19[2]; // [esp+24h] [ebp-38h] BYREF
  __time32_t v20; // [esp+2Ch] [ebp-30h] BYREF
  CString *v21; // [esp+30h] [ebp-2Ch] BYREF
  const unsigned __int16 *v22; // [esp+34h] [ebp-28h] BYREF
  CString *v23; // [esp+38h] [ebp-24h] BYREF
  int v24; // [esp+3Ch] [ebp-20h] BYREF
  int i; // [esp+40h] [ebp-1Ch] BYREF
  WPARAM wParam; // [esp+44h] [ebp-18h]
  __time32_t v27; // [esp+48h] [ebp-14h] BYREF
  unsigned __int16 *v28; // [esp+4Ch] [ebp-10h] BYREF
  int v29; // [esp+58h] [ebp-4h]

  v2 = *(_DWORD *)(this + 536);
  v3 = (_DWORD *)(this + 536);
  if ( v2 )
  {
    *(_DWORD *)(this + 540) = v2;
    if ( (int)dword_4315B0 <= 0 )
    {
      CString::CString((CString *)&v23, a2);
      v29 = 3;
      v6 = sub_4063B4((CString *)&v24, 30);
      LOBYTE(v29) = 4;
      v15[0] = *(const unsigned __int16 **)operator+(&v21, v6, &v23);
      LOBYTE(v29) = 5;
      CWnd::SetWindowTextW((CWnd *)(this + 344), v15[0]);
      LOBYTE(v29) = 4;
      CString::~CString((CString *)&v21);
      LOBYTE(v29) = 3;
      CString::~CString((CString *)&v24);
      v29 = -1;
      CString::~CString((CString *)&v23);
      sub_406B45((void *)this);
      return;
    }
    wParam = sub_4077CF(this + 96);
    CString::CString((CString *)&v28);
    v29 = 6;
    v7 = sub_4063B4((CString *)&v21, 161);
    LOBYTE(v29) = 7;
    CString::Format((CString *)&v28, aSD_1, *(_DWORD *)v7, wParam);
    LOBYTE(v29) = 6;
    CString::~CString((CString *)&v21);
    v27 = time(0);
    v20 = v27;
    v21 = (CString *)33;
    sub_4070CB(this + 136, (int)v18, &v20);
    v23 = 0;
    *(_DWORD *)(v18[0] + 16) = wParam;
    v8 = dword_431638;
    v21 = 0;
    if ( (dword_431638 & 0x80000000) != 0 )
    {
      v8 = 0;
      dword_431638 = 0;
    }
    if ( v8 > 4 )
    {
      v8 = 4;
      dword_431638 = 4;
    }
    v24 = 60 * (v8 + 1);
    if ( dword_431528 < 1 )
      dword_431528 = 1;
    if ( dword_431528 > 50 )
      dword_431528 = 50;
    OutputDebugStringA(aRrrrr34);
    for ( i = 0; i < v24; --v27 )
    {
      v19[0] = v27;
      v19[1] = 33;
      sub_4070CB(this + 136, (int)&v17, v19);
      if ( *(_DWORD *)(v17 + 16) >= dword_431528 )
        break;
      v23 = (CString *)((char *)v23 + 1);
      v18[0] = v27;
      v18[1] = 33;
      sub_4070CB(this + 136, (int)&v16, v18);
      v21 = (CString *)((char *)v21 + *(_DWORD *)(v16 + 16));
      ++i;
    }
    v15[0] = 0;
    v14 = wParam;
    DlgItem = GetDlgItem(*(HWND *)(this + 32), 1073);
    SendMessageW(DlgItem, 0x402u, v14, 0);
    CString::CString((CString *)&v22);
    LOBYTE(v29) = 8;
    CString::Format((CString *)&v22, aD, dword_431528);
    v21 = sub_4063B4((CString *)&v27, 48);
    LOBYTE(v29) = 9;
    v10 = sub_4063B4((CString *)&i, 161);
    v15[0] = v22;
    LOBYTE(v29) = 10;
    v14 = *(_DWORD *)v21;
    v23 = (CString *)(v24 - (_DWORD)v23);
    CString::Format((CString *)&v28, aSD03dSS, *(_DWORD *)v10, wParam, v23, v14, v22);
    LOBYTE(v29) = 9;
    CString::~CString((CString *)&i);
    LOBYTE(v29) = 8;
    CString::~CString((CString *)&v27);
    if ( (int)v23 <= 0 )
    {
      *(_DWORD *)(this + 132) = 10;
      if ( dword_4315B0 )
      {
        dword_4315B0 = 0;
        sub_4141BE(&word_4315B4, 0);
      }
      SendMessageW(*(HWND *)(this + 184), 0xF1u, 0, 0);
      KillTimer(*(HWND *)(this + 32), 0x7D0u);
      KillTimer(*(HWND *)(this + 32), 0x7D1u);
      v11 = sub_414BE2(161);
      v21 = (CString *)v15;
      CString::CString((CString *)v15, v11);
      v14 = v12;
      v23 = (CString *)&v14;
      LOBYTE(v29) = 11;
      CString::CString((CString *)&v14, (const struct CString *)&v28);
      LOBYTE(v29) = 8;
      CurSel = CComboBox::GetCurSel((CComboBox *)(this + 408));
      sub_410C56(CurSel);
    }
    CWnd::SetWindowTextW((CWnd *)(this + 344), v28);
    LOBYTE(v29) = 6;
    CString::~CString((CString *)&v22);
    v29 = -1;
    v5 = (CString *)&v28;
  }
  else
  {
    OutputDebugStringA(aByOn);
    if ( *(_DWORD *)(this + 540) == *v3 )
      return;
    CString::CString((CString *)&v23, byte_431514);
    v29 = 0;
    v4 = sub_4063B4((CString *)&v24, 30);
    LOBYTE(v29) = 1;
    v15[0] = *(const unsigned __int16 **)operator+(&v21, v4, &v23);
    LOBYTE(v29) = 2;
    CWnd::SetWindowTextW((CWnd *)(this + 344), v15[0]);
    LOBYTE(v29) = 1;
    CString::~CString((CString *)&v21);
    LOBYTE(v29) = 0;
    CString::~CString((CString *)&v24);
    v29 = -1;
    v5 = (CString *)&v23;
  }
  CString::~CString(v5);
}
// 406F48: variable 'v12' is possibly undefined
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);

//----- (00406FA8) --------------------------------------------------------
int __thiscall sub_406FA8(_DWORD *this, int a2)
{
  _DWORD *v3; // esi
  int result; // eax

  v3 = this + 134;
  if ( this[134] != a2 )
    result = sub_406B45(this);
  *v3 = a2;
  if ( !a2 )
    return sub_406B45(this);
  return result;
}

//----- (00406FD3) --------------------------------------------------------
void __thiscall sub_406FD3(int this)
{
  void *v2; // esi
  int v3; // [esp+4h] [ebp-4h] BYREF

  sub_407034((_DWORD *)this, &v3, **(_DWORD ***)(this + 4), *(_DWORD **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 12) = 0;
  v2 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  if ( !--dword_431748 )
  {
    v2 = (void *)dword_431744;
    dword_431744 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v2 )
    operator delete(v2);
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 431744: using guessed type int dword_431744;
// 431748: using guessed type int dword_431748;

//----- (00407034) --------------------------------------------------------
_DWORD *__thiscall sub_407034(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v5; // ecx
  _DWORD *v6; // eax
  void ***v7; // ebx
  int v8; // eax
  void ***i; // edi
  _DWORD *v10; // eax
  _DWORD *result; // eax
  _DWORD *v12; // edi
  int v13; // [esp+8h] [ebp-4h] BYREF

  v5 = a3;
  if ( this[3] && (v6 = (_DWORD *)this[1], a3 == (_DWORD *)*v6) && a4 == v6 )
  {
    v7 = (void ***)v6[1];
    v8 = dword_431744;
    for ( i = v7; i != (void ***)dword_431744; v7 = i )
    {
      sub_407400(i[2]);
      i = (void ***)*i;
      operator delete(v7);
      v8 = dword_431744;
    }
    *(_DWORD *)(this[1] + 4) = v8;
    v10 = (_DWORD *)this[1];
    this[3] = 0;
    *v10 = v10;
    *(_DWORD *)(this[1] + 8) = this[1];
    result = a2;
    *a2 = *(_DWORD *)this[1];
  }
  else
  {
    while ( v5 != a4 )
    {
      v12 = v5;
      sub_4076D8(&a3);
      sub_407169(this, &v13, v12);
      v5 = a3;
    }
    result = a2;
    *a2 = v5;
  }
  return result;
}
// 431744: using guessed type int dword_431744;

//----- (004070CB) --------------------------------------------------------
int __thiscall sub_4070CB(int this, int a2, _DWORD *a3)
{
  bool v4; // dl
  _DWORD *v5; // eax
  _DWORD *v6; // ebx
  _DWORD *v7; // esi
  int *v8; // eax
  int v9; // ecx
  int v10; // ecx
  int result; // eax
  _DWORD *v12; // [esp+Ch] [ebp-4h] BYREF

  v4 = 1;
  v5 = *(_DWORD **)(this + 4);
  v6 = v5;
  v7 = (_DWORD *)v5[1];
  while ( v7 != (_DWORD *)dword_431744 )
  {
    v6 = v7;
    v4 = *a3 < v7[3];
    if ( *a3 >= v7[3] )
      v7 = (_DWORD *)v7[2];
    else
      v7 = (_DWORD *)*v7;
  }
  if ( *(_BYTE *)(this + 8) )
    goto LABEL_7;
  v9 = (int)v6;
  v12 = v6;
  if ( v4 )
  {
    if ( v6 == (_DWORD *)*v5 )
    {
LABEL_7:
      v8 = sub_4074C1((_DWORD *)this, &a3, (int)v7, v6, a3);
LABEL_13:
      v10 = *v8;
      result = a2;
      *(_DWORD *)a2 = v10;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_40769C(&v12);
    v9 = (int)v12;
  }
  if ( *(_DWORD *)(v9 + 12) < *a3 )
  {
    v8 = sub_4074C1((_DWORD *)this, &a3, (int)v7, v6, a3);
    goto LABEL_13;
  }
  result = a2;
  *(_BYTE *)(a2 + 4) = 0;
  *(_DWORD *)a2 = v9;
  return result;
}
// 431744: using guessed type int dword_431744;

//----- (00407169) --------------------------------------------------------
_DWORD *__thiscall sub_407169(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  _DWORD *v4; // esi
  _DWORD *v5; // ebx
  bool v6; // zf
  _DWORD *v7; // ecx
  _DWORD *v8; // eax
  _DWORD *v9; // edx
  _DWORD *v10; // ebx
  int v11; // ecx
  _DWORD *v12; // ecx
  int v13; // ecx
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  _DWORD *v17; // ecx
  _DWORD *v18; // edx
  _DWORD *v19; // edx
  _DWORD *v20; // ebx
  int v21; // edx
  _DWORD *v22; // ebx
  _DWORD *v23; // edi
  int v24; // eax
  _DWORD *v25; // eax
  _DWORD *result; // eax
  char v27[4]; // [esp+Ch] [ebp-1Ch] BYREF
  _DWORD *v28; // [esp+10h] [ebp-18h]
  void *v29; // [esp+14h] [ebp-14h]
  _DWORD *v30; // [esp+18h] [ebp-10h]
  int v31; // [esp+24h] [ebp-4h]

  v30 = this;
  v3 = a3;
  sub_4076D8(&a3);
  v4 = (_DWORD *)*v3;
  v5 = v3 + 2;
  v6 = *v3 == dword_431744;
  v29 = v3;
  v28 = v3 + 2;
  if ( v6 )
  {
    v4 = (_DWORD *)*v5;
  }
  else
  {
    v7 = (_DWORD *)*v5;
    if ( *v5 != dword_431744 )
    {
      while ( *v7 != dword_431744 )
        v7 = (_DWORD *)*v7;
      v4 = (_DWORD *)v7[2];
      v29 = v7;
      v28 = v7 + 2;
    }
  }
  std::_Lockit::_Lockit((std::_Lockit *)v27);
  v8 = v29;
  v31 = 0;
  if ( v29 == v3 )
  {
    v15 = (int)v30;
    v4[1] = *((_DWORD *)v29 + 1);
    v16 = *(_DWORD *)(v15 + 4);
    if ( *(_DWORD **)(v16 + 4) == v3 )
    {
      *(_DWORD *)(v16 + 4) = v4;
    }
    else
    {
      v17 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v17 == v3 )
        *v17 = v4;
      else
        v17[2] = v4;
    }
    v18 = *(_DWORD **)(v15 + 4);
    v28 = v18;
    if ( (_DWORD *)*v18 == v3 )
    {
      if ( *v5 == dword_431744 )
      {
        *v18 = v3[1];
      }
      else
      {
        v19 = (_DWORD *)*v4;
        v20 = v4;
        while ( v19 != (_DWORD *)dword_431744 )
        {
          v20 = v19;
          v19 = (_DWORD *)*v19;
        }
        *v28 = v20;
      }
    }
    v21 = v30[1];
    if ( *(_DWORD **)(v21 + 8) == v3 )
    {
      if ( *v3 == dword_431744 )
      {
        *(_DWORD *)(v21 + 8) = v3[1];
      }
      else
      {
        v22 = (_DWORD *)v4[2];
        v23 = v4;
        while ( v22 != (_DWORD *)dword_431744 )
        {
          v23 = v22;
          v22 = (_DWORD *)v22[2];
        }
        *(_DWORD *)(v21 + 8) = v23;
      }
    }
    v10 = v30;
  }
  else
  {
    *(_DWORD *)(*v3 + 4) = v29;
    *v8 = *v3;
    if ( v8 == (_DWORD *)*v5 )
    {
      v4[1] = v8;
    }
    else
    {
      v9 = v28;
      v4[1] = v8[1];
      *(_DWORD *)v8[1] = v4;
      *v9 = *v5;
      *(_DWORD *)(*v5 + 4) = v8;
    }
    v10 = v30;
    v11 = v30[1];
    if ( *(_DWORD **)(v11 + 4) == v3 )
    {
      *(_DWORD *)(v11 + 4) = v8;
    }
    else
    {
      v12 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v12 == v3 )
        *v12 = v8;
      else
        v12[2] = v8;
    }
    v13 = v3[1];
    v29 = v3;
    v8[1] = v13;
    v14 = v8[5];
    v8[5] = v3[5];
    v3[5] = v14;
    v8 = v3;
  }
  if ( v8[5] == 1 )
  {
    while ( v4 != *(_DWORD **)(v10[1] + 4) && v4[5] == 1 )
    {
      v24 = v4[1];
      if ( v4 == *(_DWORD **)v24 )
      {
        v25 = *(_DWORD **)(v24 + 8);
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_407612(v10, v4[1]);
          v25 = *(_DWORD **)(v4[1] + 8);
        }
        if ( *(_DWORD *)(*v25 + 20) != 1 || *(_DWORD *)(v25[2] + 20) != 1 )
        {
          if ( *(_DWORD *)(v25[2] + 20) == 1 )
          {
            *(_DWORD *)(*v25 + 20) = 1;
            v25[5] = 0;
            sub_407656(v10, v25);
            v25 = *(_DWORD **)(v4[1] + 8);
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(v25[2] + 20) = 1;
          sub_407612(v10, v4[1]);
          break;
        }
      }
      else
      {
        v25 = *(_DWORD **)v24;
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_407656(v10, (_DWORD *)v4[1]);
          v25 = *(_DWORD **)v4[1];
        }
        if ( *(_DWORD *)(v25[2] + 20) != 1 || *(_DWORD *)(*v25 + 20) != 1 )
        {
          if ( *(_DWORD *)(*v25 + 20) == 1 )
          {
            *(_DWORD *)(v25[2] + 20) = 1;
            v25[5] = 0;
            sub_407612(v10, (int)v25);
            v25 = *(_DWORD **)v4[1];
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(*v25 + 20) = 1;
          sub_407656(v10, (_DWORD *)v4[1]);
          break;
        }
      }
      v25[5] = 0;
      v4 = (_DWORD *)v4[1];
    }
    v4[5] = 1;
  }
  v31 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)v27);
  operator delete(v29);
  result = a2;
  --v10[3];
  *a2 = a3;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 431744: using guessed type int dword_431744;
// 407169: using guessed type char var_1C[4];

//----- (00407400) --------------------------------------------------------
void __stdcall sub_407400(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; i != (void **)dword_431744; v1 = i )
  {
    sub_407400(i[2]);
    i = (void **)*i;
    operator delete(v1);
  }
}
// 431744: using guessed type int dword_431744;

//----- (00407436) --------------------------------------------------------
int __thiscall sub_407436(_DWORD *this)
{
  _DWORD *v2; // esi
  int v3; // esi
  _DWORD *v4; // eax
  int result; // eax
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  void *v7; // [esp+10h] [ebp-4h]

  v2 = operator new(0x18u);
  v2[1] = 0;
  v2[5] = 1;
  v7 = v2;
  std::_Lockit::_Lockit((std::_Lockit *)v6);
  if ( !dword_431744 )
  {
    dword_431744 = (int)v2;
    *v2 = 0;
    v7 = 0;
    *(_DWORD *)(dword_431744 + 8) = 0;
  }
  ++dword_431748;
  std::_Lockit::~_Lockit((std::_Lockit *)v6);
  if ( v7 )
    operator delete(v7);
  v3 = dword_431744;
  v4 = operator new(0x18u);
  v4[1] = v3;
  v4[5] = 0;
  this[1] = v4;
  this[3] = 0;
  *v4 = v4;
  result = this[1];
  *(_DWORD *)(result + 8) = result;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 431744: using guessed type int dword_431744;
// 431748: using guessed type int dword_431748;
// 407436: using guessed type char var_8[4];

//----- (004074C1) --------------------------------------------------------
_DWORD *__thiscall sub_4074C1(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5)
{
  _DWORD *v6; // edi
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  _DWORD *v10; // eax
  _DWORD *v11; // edx
  _DWORD *v12; // ecx
  _DWORD *result; // eax

  v6 = operator new(0x18u);
  v6[5] = 0;
  v6[1] = a4;
  *v6 = dword_431744;
  v6[2] = dword_431744;
  sub_40770E(v6 + 3, a5);
  ++this[3];
  if ( a4 != (_DWORD *)this[1] && a3 == dword_431744 && *a5 >= a4[3] )
  {
    a4[2] = v6;
    v7 = this[1];
    if ( a4 != *(_DWORD **)(v7 + 8) )
      goto LABEL_10;
    goto LABEL_5;
  }
  *a4 = v6;
  v8 = (_DWORD *)this[1];
  if ( a4 == v8 )
  {
    v8[1] = v6;
    v7 = this[1];
LABEL_5:
    *(_DWORD *)(v7 + 8) = v6;
    goto LABEL_10;
  }
  if ( a4 == (_DWORD *)*v8 )
    *v8 = v6;
LABEL_10:
  v9 = v6;
  while ( v9 != *(_DWORD **)(this[1] + 4) )
  {
    v10 = (_DWORD *)v9[1];
    if ( v10[5] )
      break;
    v11 = (_DWORD *)v10[1];
    v12 = (_DWORD *)*v11;
    if ( v10 == (_DWORD *)*v11 )
    {
      v12 = (_DWORD *)v11[2];
      if ( v12[5] )
      {
        if ( v9 == (_DWORD *)v10[2] )
        {
          v9 = (_DWORD *)v9[1];
          sub_407612(this, (int)v10);
        }
        *(_DWORD *)(v9[1] + 20) = 1;
        *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
        sub_407656(this, *(_DWORD **)(v9[1] + 4));
        continue;
      }
    }
    else if ( v12[5] )
    {
      if ( v9 == (_DWORD *)*v10 )
      {
        v9 = (_DWORD *)v9[1];
        sub_407656(this, v10);
      }
      *(_DWORD *)(v9[1] + 20) = 1;
      *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
      sub_407612(this, *(_DWORD *)(v9[1] + 4));
      continue;
    }
    v10[5] = 1;
    v12[5] = 1;
    *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
    v9 = *(_DWORD **)(v9[1] + 4);
  }
  *(_DWORD *)(*(_DWORD *)(this[1] + 4) + 20) = 1;
  result = a2;
  *a2 = v6;
  return result;
}
// 431744: using guessed type int dword_431744;

//----- (00407612) --------------------------------------------------------
_DWORD *__thiscall sub_407612(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( *result != dword_431744 )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = this[1];
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
  }
  *result = a2;
  *(_DWORD *)(a2 + 4) = result;
  return result;
}
// 431744: using guessed type int dword_431744;

//----- (00407656) --------------------------------------------------------
int __thiscall sub_407656(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( v3 != dword_431744 )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = this[1];
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
  }
  *(_DWORD *)(result + 8) = a2;
  a2[1] = result;
  return result;
}
// 431744: using guessed type int dword_431744;

//----- (0040769C) --------------------------------------------------------
_DWORD *__thiscall sub_40769C(void *this)
{
  _DWORD *result; // eax
  _DWORD *v2; // edx

  result = *(_DWORD **)this;
  if ( *(_DWORD *)(*(_DWORD *)this + 20) || *(_DWORD **)(result[1] + 4) != result )
  {
    v2 = (_DWORD *)*result;
    if ( *result == dword_431744 )
    {
      while ( 1 )
      {
        result = (_DWORD *)result[1];
        if ( *(_DWORD *)this != *result )
          break;
        *(_DWORD *)this = result;
      }
    }
    else
    {
      do
      {
        result = v2;
        v2 = (_DWORD *)v2[2];
      }
      while ( v2 != (_DWORD *)dword_431744 );
    }
  }
  else
  {
    result = (_DWORD *)result[2];
  }
  *(_DWORD *)this = result;
  return result;
}
// 431744: using guessed type int dword_431744;

//----- (004076D8) --------------------------------------------------------
_DWORD *__thiscall sub_4076D8(void *this)
{
  _DWORD *result; // eax

  result = *(_DWORD **)(*(_DWORD *)this + 8);
  if ( result != (_DWORD *)dword_431744 )
  {
    while ( *result != dword_431744 )
      result = (_DWORD *)*result;
LABEL_8:
    *(_DWORD *)this = result;
    return result;
  }
  for ( result = *(_DWORD **)(*(_DWORD *)this + 4); *(_DWORD *)this == result[2]; result = (_DWORD *)result[1] )
    *(_DWORD *)this = result;
  if ( *(_DWORD **)(*(_DWORD *)this + 8) != result )
    goto LABEL_8;
  return result;
}
// 431744: using guessed type int dword_431744;

//----- (0040770E) --------------------------------------------------------
_DWORD *__cdecl sub_40770E(_DWORD *a1, _DWORD *a2)
{
  _DWORD *result; // eax

  result = a1;
  if ( a1 )
  {
    *a1 = *a2;
    a1[1] = a2[1];
  }
  return result;
}

//----- (00407725) --------------------------------------------------------
CProgressCtrl *__thiscall sub_407725(CProgressCtrl *this, char a2)
{
  CProgressCtrl::~CProgressCtrl(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00407741) --------------------------------------------------------
int sub_407741()
{
  struct _OSVERSIONINFOW VersionInformation; // [esp+0h] [ebp-114h] BYREF

  VersionInformation.dwOSVersionInfoSize = 276;
  if ( GetVersionExW(&VersionInformation) )
  {
    if ( VersionInformation.dwPlatformId == 1 )
      return 2;
    if ( VersionInformation.dwPlatformId == 2 )
      return VersionInformation.dwMajorVersion != 4;
  }
  return 3;
}

//----- (00407788) --------------------------------------------------------
_DWORD *__thiscall sub_407788(_DWORD *this)
{
  this[4] = 0;
  this[5] = 0;
  *this = &off_41E2D8;
  *((_BYTE *)this + 8) = 1;
  this[6] = 0;
  this[7] = 0;
  return this;
}
// 41E2D8: using guessed type int (__thiscall *off_41E2D8)(void *, char);

//----- (004077A6) --------------------------------------------------------
_DWORD *__thiscall sub_4077A6(_DWORD *this, char a2)
{
  sub_4077C2(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004077C2) --------------------------------------------------------
void __thiscall sub_4077C2(_DWORD *this)
{
  *this = &off_41E2D8;
}
// 41E2D8: using guessed type int (__thiscall *off_41E2D8)(void *, char);

//----- (004077C9) --------------------------------------------------------
int __stdcall sub_4077C9(int a1)
{
  return 1;
}

//----- (004077CF) --------------------------------------------------------
int __thiscall sub_4077CF(int this)
{
  __int64 v2; // rax
  int v3; // ebx
  int v4; // edi
  int v5; // eax
  int v6; // edx
  bool v7; // zf
  int v8; // ebx
  int v9; // edi
  int v10; // eax
  unsigned __int64 v11; // kr00_8
  double v12; // st7
  double v13; // st6
  int v14; // ecx
  double v15; // st7
  double v16; // st6
  int v17; // ecx
  WCHAR String1[256]; // [esp+Ch] [ebp-224h] BYREF
  __int64 v20; // [esp+210h] [ebp-20h]
  int v21; // [esp+218h] [ebp-18h]
  int v22; // [esp+21Ch] [ebp-14h]
  int v23[4]; // [esp+220h] [ebp-10h] BYREF

  if ( (byte_431788 & 1) == 0 )
  {
    byte_431788 |= 1u;
    dword_431784 = sub_407741();
  }
  if ( *(_BYTE *)(this + 8) )
    sub_4077C9(1);
  memset(String1, 0, sizeof(String1));
  v23[3] = 0;
  if ( !dword_431784 )
  {
    v3 = 240;
    v4 = 2;
LABEL_10:
    v23[0] = 0;
    v5 = sub_4078FB(v23, v4, v3, String1);
    v7 = *(_BYTE *)(this + 8) == 0;
    v8 = v5;
    v22 = v6;
    v9 = *(_DWORD *)(v23[0] + 72);
    v10 = *(_DWORD *)(v23[0] + 76);
    v21 = v8;
    if ( v7 )
    {
      v12 = (double)*(__int64 *)(v23[0] + 72);
      v13 = (double)*(__int64 *)(this + 24);
      v11 = __PAIR64__(v6, v8) - *(_QWORD *)(this + 16);
      LODWORD(v20) = v11;
      v14 = v21;
      *(_DWORD *)(this + 24) = v9;
      HIDWORD(v20) = HIDWORD(v11);
      *(_DWORD *)(this + 16) = v14;
      v15 = v12 - v13;
      v16 = (double)v20;
      v17 = v22;
      *(_DWORD *)(this + 28) = v10;
      *(_DWORD *)(this + 20) = v17;
      v2 = (__int64)((1.0 - v16 / v15) * 100.0 + 0.5);
      if ( (int)v2 >= 0 )
        return v2;
    }
    else
    {
      *(_BYTE *)(this + 8) = 0;
      *(_DWORD *)(this + 16) = v8;
      *(_DWORD *)(this + 24) = v9;
      *(_DWORD *)(this + 20) = v6;
      *(_DWORD *)(this + 28) = v10;
    }
    LODWORD(v2) = 0;
    return v2;
  }
  if ( dword_431784 == 1 )
  {
    v3 = 6;
    v4 = 238;
    lstrcpyW(String1, aTotal);
    goto LABEL_10;
  }
  LODWORD(v2) = -1;
  return v2;
}
// 407882: variable 'v6' is possibly undefined
// 431784: using guessed type int dword_431784;
// 431788: using guessed type char byte_431788;

//----- (004078FB) --------------------------------------------------------
int __stdcall sub_4078FB(_DWORD *a1, int a2, int a3, OLECHAR *psz)
{
  int v4; // eax
  _DWORD *v5; // ecx
  unsigned int v6; // esi
  int v8; // [esp+Ch] [ebp-8h]

  sub_407953(a1, a2, a3);
  v4 = 0;
  v8 = 0;
  v5 = (_DWORD *)(*a1 + *(_DWORD *)(*a1 + 24));
  v6 = *(_DWORD *)(*a1 + 28);
  if ( v6 )
  {
    while ( v5[3] != a2 )
    {
      v5 = (_DWORD *)((char *)v5 + *v5);
      if ( ++v4 >= v6 )
        return v8;
    }
    return sub_407A38(v5, a3, psz);
  }
  return v8;
}

//----- (00407953) --------------------------------------------------------
_DWORD *__stdcall sub_407953(_DWORD *a1, int a2, int a3)
{
  LSTATUS i; // eax
  _DWORD *result; // eax
  WCHAR ValueName[32]; // [esp+4h] [ebp-44h] BYREF
  DWORD cbData; // [esp+44h] [ebp-4h] BYREF

  if ( (byte_448CA1 & 1) == 0 )
  {
    byte_448CA1 |= 1u;
    dword_448CAC = 102400;
    Block = (LPBYTE)malloc(0x19000u);
    atexit(sub_407C70);
  }
  cbData = dword_448CAC;
  wsprintfW(ValueName, aD, a2);
  memset(Block, 0, dword_448CAC);
  for ( i = RegQueryValueExW(HKEY_PERFORMANCE_DATA, ValueName, 0, 0, Block, &cbData);
        i == 234;
        i = RegQueryValueExW(HKEY_PERFORMANCE_DATA, ValueName, 0, 0, Block, &cbData) )
  {
    cbData += 10240;
    dword_448CAC = cbData;
    Block = (LPBYTE)realloc(Block, cbData);
  }
  result = a1;
  *a1 = Block;
  return result;
}
// 448CA1: using guessed type char byte_448CA1;
// 448CAC: using guessed type int dword_448CAC;

//----- (00407A38) --------------------------------------------------------
int __stdcall sub_407A38(_DWORD *a1, int a2, OLECHAR *psz)
{
  _DWORD *v3; // esi
  unsigned int v4; // ecx
  unsigned int v5; // eax
  _DWORD *v6; // ebx
  char *v7; // ecx
  int v8; // edi
  int *v9; // edi
  const wchar_t *v10; // ecx
  const wchar_t *v11; // eax
  bool v12; // zf
  int v13; // eax
  __int64 v14; // rax
  char *v16; // [esp+Ch] [ebp-10h]

  v3 = a1;
  v4 = 0;
  v5 = a1[8];
  v6 = (_DWORD *)((char *)a1 + a1[2]);
  v16 = 0;
  if ( v5 )
  {
    do
    {
      if ( v6[1] == a2 )
        break;
      v6 = (_DWORD *)((char *)v6 + *v6);
      ++v4;
    }
    while ( v4 < v5 );
  }
  if ( a1[10] == -1 )
  {
    v7 = (char *)a1 + a1[1];
  }
  else
  {
    v8 = a1[1];
    a1 = 0;
    v9 = (_DWORD *)((char *)v3 + v8);
    sub_407B38((BSTR **)&psz, psz);
    a2 = 0;
    if ( (int)v3[10] > 0 )
    {
      while ( 1 )
      {
        sub_407B9F((BSTR **)&a1, (OLECHAR *)((char *)v9 + v9[4]));
        v10 = psz ? *(const wchar_t **)psz : 0;
        v11 = a1 ? (const wchar_t *)*a1 : 0;
        v12 = wcsicmp(v11, v10) == 0;
        v13 = *v9;
        if ( v12 )
          break;
        v9 = (int *)((char *)v9 + v13 + *(int *)((char *)v9 + v13));
        if ( ++a2 >= v3[10] )
          goto LABEL_17;
      }
      v16 = (char *)v9 + v13;
    }
LABEL_17:
    if ( psz )
    {
      sub_407C23((volatile LONG *)psz);
      psz = 0;
    }
    if ( a1 )
    {
      sub_407C23(a1);
      a1 = 0;
    }
    v7 = v16;
  }
  if ( v7 )
    return *(_QWORD *)&v7[v6[9]];
  else
    LODWORD(v14) = -1;
  return v14;
}

//----- (00407B38) --------------------------------------------------------
BSTR **__thiscall sub_407B38(BSTR **this, OLECHAR *psz)
{
  BSTR *v3; // ecx
  BSTR *v4; // eax

  v3 = (BSTR *)operator new(0xCu);
  if ( v3 )
    v4 = sub_407BEF(v3, psz);
  else
    v4 = 0;
  *this = v4;
  if ( !v4 )
    sub_41A7B0(-2147024882);
  return this;
}

//----- (00407B9F) --------------------------------------------------------
BSTR **__thiscall sub_407B9F(BSTR **this, OLECHAR *psz)
{
  volatile LONG *v3; // ecx
  BSTR *v4; // ecx
  BSTR *v5; // eax

  v3 = (volatile LONG *)*this;
  if ( v3 )
  {
    sub_407C23(v3);
    *this = 0;
  }
  v4 = (BSTR *)operator new(0xCu);
  if ( v4 )
    v5 = sub_407BEF(v4, psz);
  else
    v5 = 0;
  *this = v5;
  return this;
}

//----- (00407BEF) --------------------------------------------------------
BSTR *__thiscall sub_407BEF(BSTR *this, OLECHAR *psz)
{
  BSTR v3; // eax

  this[1] = 0;
  this[2] = (BSTR)1;
  v3 = SysAllocString(psz);
  *this = v3;
  if ( !v3 && psz )
    sub_41A7B0(-2147024882);
  return this;
}

//----- (00407C23) --------------------------------------------------------
int __thiscall sub_407C23(volatile LONG *this)
{
  char *v2; // edi

  v2 = (char *)(this + 2);
  if ( InterlockedDecrement(this + 2) )
    return *(_DWORD *)v2;
  if ( this )
  {
    sub_407C50((int)this);
    operator delete((void *)this);
  }
  return 0;
}

//----- (00407C50) --------------------------------------------------------
void __thiscall sub_407C50(int this)
{
  void *v2; // esi

  if ( *(_DWORD *)this )
    SysFreeString(*(BSTR *)this);
  v2 = *(void **)(this + 4);
  if ( v2 )
    operator delete(v2);
}

//----- (00407C70) --------------------------------------------------------
void __cdecl sub_407C70()
{
  free(Block);
}

//----- (00407C7E) --------------------------------------------------------
int sub_407C7E()
{
  return CWinApp::messageMap;
}

//----- (00407C84) --------------------------------------------------------
int (**sub_407C84())()
{
  return &off_41E2F8;
}
// 41E2F8: using guessed type int (*off_41E2F8)();

//----- (00407C9E) --------------------------------------------------------
CWinApp *__thiscall sub_407C9E(CWinApp *this, char a2)
{
  CWinApp::~CWinApp(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00407CBF) --------------------------------------------------------
int sub_407CBF()
{
  sub_407CC9();
  return atexit(sub_407CDF);
}

//----- (00407CC9) --------------------------------------------------------
_DWORD *sub_407CC9()
{
  CWinApp::CWinApp((CWinApp *)dword_431798, 0);
  dword_431798[0] = &off_41E330;
  return dword_431798;
}
// 41E330: using guessed type struct CRuntimeClass *(__thiscall *off_41E330)(CWinApp *__hidden this);
// 431798: using guessed type _DWORD dword_431798[49];

//----- (00407CDF) --------------------------------------------------------
void __cdecl sub_407CDF()
{
  CWinApp::~CWinApp((CWinApp *)dword_431798);
}
// 431798: using guessed type _DWORD dword_431798[49];

//----- (00407CE9) --------------------------------------------------------
BOOL __stdcall sub_407CE9(HWND hWnd, HWND *a2)
{
  HWND v2; // esi

  v2 = hWnd;
  if ( !SendMessageTimeoutW(hWnd, Msg, 0, 0, 3u, 0x2710u, (PDWORD_PTR)&hWnd) || hWnd != (HWND)Msg )
    return 1;
  *a2 = v2;
  return 0;
}

//----- (00407D2C) --------------------------------------------------------
void __cdecl sub_407D2C(int a1)
{
  CString *v1; // esi
  CString *v2; // eax
  int v3; // eax
  WCHAR Filename[260]; // [esp+Ch] [ebp-264h] BYREF
  SHELLEXECUTEINFOW pExecInfo; // [esp+214h] [ebp-5Ch] BYREF
  char v6[4]; // [esp+250h] [ebp-20h] BYREF
  char v7[4]; // [esp+254h] [ebp-1Ch] BYREF
  char v8[4]; // [esp+258h] [ebp-18h] BYREF
  const WCHAR *v9; // [esp+25Ch] [ebp-14h] BYREF
  char v10[4]; // [esp+260h] [ebp-10h] BYREF
  int v11; // [esp+26Ch] [ebp-4h]

  GetModuleFileNameW(hInstance, Filename, 0x104u);
  CloseHandle(hObject);
  memset(&pExecInfo, 0, sizeof(pExecInfo));
  pExecInfo.cbSize = 60;
  CString::CString((CString *)v10, Filename);
  v11 = 0;
  CString::operator=(v10, aCmdExe);
  pExecInfo.fMask = 0;
  pExecInfo.lpFile = CString::GetBuffer((CString *)v10, 0);
  pExecInfo.lpClass = 0;
  pExecInfo.hwnd = 0;
  pExecInfo.nShow = 0;
  v1 = CString::CString((CString *)v7, asc_42E3CC);
  LOBYTE(v11) = 1;
  v2 = CString::CString((CString *)v8, aK_0);
  LOBYTE(v11) = 2;
  v3 = operator+(v6, v2, Filename);
  LOBYTE(v11) = 3;
  operator+(&v9, v3, v1);
  LOBYTE(v11) = 7;
  CString::~CString((CString *)v6);
  LOBYTE(v11) = 6;
  CString::~CString((CString *)v8);
  LOBYTE(v11) = 5;
  CString::~CString((CString *)v7);
  pExecInfo.lpParameters = v9;
  pExecInfo.lpVerb = a1 != 0 ? aRunas : 0;
  if ( ShellExecuteExW(&pExecInfo) )
    PostQuitMessage(65278);
  else
    hObject = CreateMutexW(0, 0, lpValueName);
  LOBYTE(v11) = 0;
  CString::~CString((CString *)&v9);
  v11 = -1;
  CString::~CString((CString *)v10);
}
// 41A09E: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 424610: using guessed type wchar_t aRunas[6];
// 407D2C: using guessed type char var_10[4];
// 407D2C: using guessed type char var_1C[4];
// 407D2C: using guessed type char var_18[4];
// 407D2C: using guessed type char var_20[4];

//----- (00407E7E) --------------------------------------------------------
void __cdecl sub_407E7E(int a1)
{
  WCHAR Filename[260]; // [esp+8h] [ebp-258h] BYREF
  SHELLEXECUTEINFOW pExecInfo; // [esp+210h] [ebp-50h] BYREF
  const WCHAR *v3; // [esp+24Ch] [ebp-14h] BYREF
  char v4[4]; // [esp+250h] [ebp-10h] BYREF
  int v5; // [esp+25Ch] [ebp-4h]

  GetModuleFileNameW(hInstance, Filename, 0x104u);
  CloseHandle(hObject);
  memset(&pExecInfo, 0, sizeof(pExecInfo));
  pExecInfo.cbSize = 60;
  CString::CString((CString *)v4, Filename);
  v5 = 0;
  pExecInfo.fMask = 0;
  pExecInfo.lpFile = CString::GetBuffer((CString *)v4, 0);
  pExecInfo.lpClass = 0;
  pExecInfo.hwnd = 0;
  pExecInfo.nShow = 1;
  CString::CString((CString *)&v3, aRestartDesktop);
  pExecInfo.lpParameters = v3;
  pExecInfo.lpVerb = a1 != 0 ? aRunas : 0;
  if ( ShellExecuteExW(&pExecInfo) )
    PostQuitMessage(65278);
  else
    hObject = CreateMutexW(0, 0, lpValueName);
  CString::~CString((CString *)&v3);
  v5 = -1;
  CString::~CString((CString *)v4);
}
// 424610: using guessed type wchar_t aRunas[6];
// 407E7E: using guessed type char var_10[4];

//----- (00407F67) --------------------------------------------------------
CString *__cdecl sub_407F67(CString *a1, char a2, unsigned __int16 a3)
{
  int v3; // eax

  CString::TrimRight((CString *)&a2);
  CString::TrimLeft((CString *)&a2);
  v3 = CString::ReverseFind((CString *)&a2, a3);
  if ( v3 != -1 )
  {
    CString::Mid(&a2, &a3, v3 + 1);
    CString::operator=(&a2, &a3);
    CString::~CString((CString *)&a3);
  }
  CString::TrimRight((CString *)&a2);
  CString::TrimLeft((CString *)&a2);
  CString::CString(a1, (const struct CString *)&a2);
  CString::~CString((CString *)&a2);
  return a1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0FE: using guessed type int __thiscall CString::Mid(_DWORD, _DWORD, _DWORD);

//----- (00408021) --------------------------------------------------------
int __thiscall sub_408021(CWinApp *this)
{
  __int16 v1; // di
  LANGID UserDefaultLangID; // ax
  __int16 v3; // ax
  CWinApp *v5; // edi
  const unsigned __int16 *v6; // eax
  CString *v7; // eax
  CWinApp *v8; // ecx
  CDialog *v9; // eax
  int v10; // [esp-8h] [ebp-2Ch] BYREF
  int v11; // [esp-4h] [ebp-28h]
  char v12[4]; // [esp+Ch] [ebp-18h] BYREF
  CWinApp *v13; // [esp+10h] [ebp-14h]
  LPARAM lParam; // [esp+14h] [ebp-10h] BYREF
  int v15; // [esp+20h] [ebp-4h]

  v13 = this;
  hInstance = (HMODULE)*((_DWORD *)AfxGetModuleState() + 2);
  sub_415E25();
  CString::operator=(&unk_433ECC, aAaaaUc);
  dword_448AF8 = (int)&unk_42488C;
  CString::operator=(&lpValueName, aDontsleep);
  AfxEnableControlContainer(0);
  CString::operator=(&unk_433CB0, &lpValueName);
  GetUserDefaultLangID();
  v1 = GetUserDefaultLangID() & 0x3FF;
  UserDefaultLangID = GetUserDefaultLangID();
  dword_444FD0 = 1;
  v3 = UserDefaultLangID >> 10;
  switch ( v1 )
  {
    case 7:
      dword_444FD0 = 0;
      break;
    case 21:
      dword_444FD0 = 2;
      break;
    case 12:
      dword_444FD0 = 3;
      break;
    case 8:
      dword_444FD0 = 4;
      break;
    case 18:
      dword_444FD0 = 5;
      break;
    case 4:
      dword_444FD0 = 12;
      if ( v3 == 1 )
        dword_444FD0 = 6;
      break;
    case 1:
      dword_444FD0 = 7;
      break;
    case 16:
      dword_444FD0 = 8;
      break;
    case 25:
      dword_444FD0 = 9;
      break;
    case 31:
      dword_444FD0 = 10;
      break;
    case 24:
      dword_444FD0 = 11;
      break;
  }
  sub_413B5D();
  if ( !sub_4147A5() )
    return 0;
  dword_444FD0 = sub_4141D6(aLng, dword_444FD0);
  if ( !sub_405B46() )
  {
    Msg = RegisterWindowMessageW(lpValueName);
    hObject = CreateMutexW(0, 0, lpValueName);
    lParam = 0;
    if ( GetLastError() == 183 || GetLastError() == 5 )
    {
      EnumWindows((WNDENUMPROC)sub_407CE9, (LPARAM)&lParam);
      return 0;
    }
    v5 = v13;
    CWinApp::Enable3dControls(v13);
    v11 = 32;
    v6 = (const unsigned __int16 *)sub_414BAC(19);
    v13 = (CWinApp *)&v10;
    CString::CString((CString *)&v10, v6);
    v7 = sub_407F67((CString *)v12, v10, v11);
    v15 = 0;
    CString::operator=(&unk_433CAC, v7);
    v15 = -1;
    CString::~CString((CString *)v12);
    v8 = (CWinApp *)operator new(0x1718u);
    v13 = v8;
    v15 = 1;
    if ( v8 )
      v9 = (CDialog *)sub_408584(v8, 0);
    else
      v9 = 0;
    v15 = -1;
    v11 = 0;
    v10 = 102;
    *((_DWORD *)v5 + 8) = v9;
    CDialog::Create(v9, (const unsigned __int16 *)v10, (struct CWnd *)v11);
  }
  return 1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 448AF8: using guessed type int dword_448AF8;
// 408021: using guessed type char var_18[4];

//----- (00408285) --------------------------------------------------------
int sub_408285()
{
  _DWORD *v0; // ecx
  CDialog *v1; // esi

  v0 = operator new(0xACu);
  if ( v0 )
    v1 = (CDialog *)sub_404411(v0, 0);
  else
    v1 = 0;
  CDialog::Create(v1, (const unsigned __int16 *)0x8A, 0);
  return CWnd::ShowWindow(v1, 3);
}

//----- (004082EB) --------------------------------------------------------
int sub_4082EB()
{
  sub_4082F5();
  return atexit(sub_40830B);
}

//----- (004082F5) --------------------------------------------------------
_DWORD *sub_4082F5()
{
  _DWORD *result; // eax

  result = dword_432CE0;
  dword_432CE0[0] = &off_41EFD0;
  return result;
}
// 41EFD0: using guessed type int (__thiscall *off_41EFD0)(void *, char);
// 432CE0: using guessed type _DWORD dword_432CE0[3];

//----- (0040830B) --------------------------------------------------------
void __cdecl sub_40830B()
{
  sub_41637D(dword_432CE0);
}
// 432CE0: using guessed type _DWORD dword_432CE0[3];

//----- (00408315) --------------------------------------------------------
int sub_408315()
{
  sub_40831F();
  return atexit(sub_408335);
}

//----- (0040831F) --------------------------------------------------------
_DWORD *sub_40831F()
{
  return sub_4163E6(dword_4327F8);
}
// 4327F8: using guessed type _DWORD dword_4327F8[16];

//----- (00408335) --------------------------------------------------------
void __cdecl sub_408335()
{
  sub_41656B(dword_4327F8);
}
// 4327F8: using guessed type _DWORD dword_4327F8[16];

//----- (0040833F) --------------------------------------------------------
int sub_40833F()
{
  sub_408349();
  return atexit(sub_40835F);
}

//----- (00408349) --------------------------------------------------------
void *sub_408349()
{
  void *result; // eax

  result = &unk_431FD0;
  unk_431FD0 = &off_41F020;
  *((_DWORD *)&unk_431FD0 + 520) = 0;
  *((_DWORD *)&unk_431FD0 + 518) = 0;
  *((_DWORD *)&unk_431FD0 + 519) = 0;
  *((_DWORD *)&unk_431FD0 + 516) = 0;
  *((_DWORD *)&unk_431FD0 + 517) = 0;
  *((_DWORD *)&unk_431FD0 + 2) = 0;
  *((_WORD *)&unk_431FD0 + 8) = 0;
  *((_DWORD *)&unk_431FD0 + 3) = 0;
  return result;
}
// 41F020: using guessed type int (*off_41F020)();

//----- (0040835F) --------------------------------------------------------
void __cdecl sub_40835F()
{
  sub_417201(dword_431FD0);
}
// 431FD0: using guessed type _DWORD dword_431FD0[2];

//----- (0040836E) --------------------------------------------------------
WCHAR *__thiscall sub_40836E(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aPleaseSleepMod);
  return sub_403F67((WCHAR *)&dword_431F48, 1, v2[0]);
}

//----- (00408393) --------------------------------------------------------
WCHAR *__thiscall sub_408393(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMBatteryPrecen);
  return sub_403F67((WCHAR *)&dword_431EC0, 7, v2[0]);
}

//----- (004083B8) --------------------------------------------------------
WCHAR *__thiscall sub_4083B8(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseBatteryPrec);
  return sub_403F67((WCHAR *)&dword_431E38, 0, v2[0]);
}

//----- (004083DD) --------------------------------------------------------
WCHAR *__thiscall sub_4083DD(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMBatteryMode);
  return sub_403F67((WCHAR *)&dword_431DB0, 6, v2[0]);
}

//----- (00408402) --------------------------------------------------------
WCHAR *__thiscall sub_408402(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aTrayIfMinimize);
  return sub_403F67((WCHAR *)&dword_431D28, 1, v2[0]);
}

//----- (00408427) --------------------------------------------------------
WCHAR *__thiscall sub_408427(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aTrayIfClose);
  return sub_403F67((WCHAR *)&dword_431CA0, 1, v2[0]);
}

//----- (0040844C) --------------------------------------------------------
WCHAR *__thiscall sub_40844C(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseMiniHttp);
  return sub_403F67((WCHAR *)&dword_431C18, 0, v2[0]);
}

//----- (00408471) --------------------------------------------------------
WCHAR *__thiscall sub_408471(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMNetworkMode);
  return sub_403F67((WCHAR *)&dword_431B90, 6, v2[0]);
}

//----- (00408496) --------------------------------------------------------
WCHAR *__thiscall sub_408496(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMNetworkPrecen);
  return sub_403F67((WCHAR *)&dword_431B08, 3, v2[0]);
}

//----- (004084BB) --------------------------------------------------------
WCHAR *__thiscall sub_4084BB(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseNetworkPrec);
  return sub_403F67((WCHAR *)&dword_431A80, 0, v2[0]);
}

//----- (004084E0) --------------------------------------------------------
WCHAR *__thiscall sub_4084E0(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseNetworkKb);
  return sub_403F67((WCHAR *)&dword_4319F8, 100, v2[0]);
}

//----- (00408505) --------------------------------------------------------
WCHAR *__thiscall sub_408505(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aTrayStart);
  return sub_403F67((WCHAR *)&dword_431970, 0, v2[0]);
}

//----- (0040852A) --------------------------------------------------------
WCHAR *__thiscall sub_40852A(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aStartupDisable);
  return sub_403F67((WCHAR *)&dword_4318E8, 0, v2[0]);
}

//----- (0040854F) --------------------------------------------------------
WCHAR *__thiscall sub_40854F(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aAlwaysStartDis);
  return sub_403F67((WCHAR *)&dword_431860, 0, v2[0]);
}

//----- (00408574) --------------------------------------------------------
void sub_408574()
{
  dword_431F48 = 0;
  word_431F4C = 0;
}

//----- (00408584) --------------------------------------------------------
_DWORD *__thiscall sub_408584(_DWORD *this, struct CWnd *a2)
{
  HINSTANCE ResourceHandle; // eax

  CDialog::CDialog((CDialog *)this, 0x66u, a2);
  sub_40FF6B((CDialog *)(this + 24), 0);
  sub_4103EF(this + 48);
  sub_41558D(this + 52);
  sub_410DC7(this + 56, 0);
  sub_401AAD((int)(this + 1006), 0);
  sub_413697((CWnd *)(this + 1446));
  CWnd::CWnd((CWnd *)(this + 1462));
  this[1462] = &off_41D998;
  this[50] = -1;
  this[51] = -1;
  *this = &off_41E470;
  AfxGetModuleState();
  ResourceHandle = AfxFindResourceHandle((const unsigned __int16 *)0x80, (const unsigned __int16 *)0xE);
  this[1445] = LoadIconW(ResourceHandle, (LPCWSTR)0x80);
  return this;
}
// 41D998: using guessed type struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this);
// 41E470: using guessed type struct CRuntimeClass *(__thiscall *off_41E470)(CDialog *__hidden this);

//----- (0040865C) --------------------------------------------------------
_DWORD *__thiscall sub_40865C(_DWORD *this, char a2)
{
  sub_408886(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040867D) --------------------------------------------------------
void __thiscall sub_40867D(_DWORD *this)
{
  CButton::~CButton((CButton *)(this + 934));
  CButton::~CButton((CButton *)(this + 918));
  CButton::~CButton((CButton *)(this + 902));
  CButton::~CButton((CButton *)(this + 886));
  CButton::~CButton((CButton *)(this + 870));
  sub_4136C5((CTabCtrl *)(this + 854));
  sub_40881C((int)(this + 431));
  sub_4010DE((int)(this + 340));
  sub_40873C(this + 160);
  sub_4065C8(this + 24);
  CDialog::~CDialog((CDialog *)this);
}

//----- (0040873C) --------------------------------------------------------
void __thiscall sub_40873C(_DWORD *this)
{
  CComboBox::~CComboBox((CComboBox *)(this + 159));
  CComboBox::~CComboBox((CComboBox *)(this + 143));
  CComboBox::~CComboBox((CComboBox *)(this + 127));
  CEdit::~CEdit((CEdit *)(this + 111));
  CComboBox::~CComboBox((CComboBox *)(this + 95));
  CButton::~CButton((CButton *)(this + 79));
  sub_40B7EC((int)(this + 75));
  sub_40D289(this + 56);
  CString::~CString((CString *)(this + 54));
  CString::~CString((CString *)(this + 50));
  CString::~CString((CString *)(this + 49));
  CString::~CString((CString *)(this + 48));
  CDialog::~CDialog((CDialog *)this);
}

//----- (0040881C) --------------------------------------------------------
void __thiscall sub_40881C(int this)
{
  CButton::~CButton((CButton *)(this + 300));
  CButton::~CButton((CButton *)(this + 236));
  CComboBox::~CComboBox((CComboBox *)(this + 172));
  CButton::~CButton((CButton *)(this + 108));
  CDialog::~CDialog((CDialog *)this);
}

//----- (00408886) --------------------------------------------------------
void __thiscall sub_408886(_DWORD *this)
{
  *this = &off_41E470;
  sub_417238(dword_431FD0);
  CButton::~CButton((CButton *)(this + 1462));
  sub_4136C5((CTabCtrl *)(this + 1446));
  sub_401D4A(this + 1006);
  sub_40867D(this + 56);
  sub_4155BE(this + 52);
  sub_4103FD();
  CDialog::~CDialog((CDialog *)(this + 24));
  CDialog::~CDialog((CDialog *)this);
}
// 41E470: using guessed type struct CRuntimeClass *(__thiscall *off_41E470)(CDialog *__hidden this);
// 431FD0: using guessed type _DWORD dword_431FD0[2];

//----- (0040892C) --------------------------------------------------------
UINT __cdecl sub_40892C(UINT uiParam)
{
  SystemParametersInfoW(0xFu, uiParam, 0, 3u);
  return uiParam;
}

//----- (00408941) --------------------------------------------------------
void __thiscall sub_408941(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 2105, (struct CWnd *)(this + 5848));
  DDX_Control(a2, 1100, (struct CWnd *)(this + 5784));
}

//----- (00408972) --------------------------------------------------------
BOOL sub_408972()
{
  return dword_4330D0 && dword_431F48 == 0;
}
// 4330D0: using guessed type int dword_4330D0;

//----- (0040898A) --------------------------------------------------------
int (**sub_40898A())()
{
  return &off_41E3D8;
}
// 41E3D8: using guessed type int (*off_41E3D8)();

//----- (00408990) --------------------------------------------------------
void __cdecl sub_408990(unsigned int Frequency, unsigned int Duration)
{
  HMODULE LibraryW; // eax

  if ( !dword_432CF8 )
  {
    LibraryW = dword_432CFC;
    dword_432CF8 = 1;
    if ( dword_432CFC || (LibraryW = LoadLibraryW(aWtsapi32Dll), (dword_432CFC = LibraryW) != 0) )
    {
      if ( WTSRegisterSessionNotification )
        goto LABEL_7;
      WTSRegisterSessionNotification = (BOOL (__stdcall *)(HWND, DWORD))GetProcAddress(LibraryW, aWtsregisterses);
    }
  }
  if ( WTSRegisterSessionNotification )
LABEL_7:
    _beep(Frequency, Duration);
}
// 432CF8: using guessed type int dword_432CF8;

//----- (004089F5) --------------------------------------------------------
HWND __cdecl sub_4089F5(LPARAM lParam)
{
  HWND result; // eax

  result = hWnd;
  if ( hWnd )
    return (HWND)SendMessageW(hWnd, 0x111u, 0x8174u, lParam);
  return result;
}

//----- (00408A14) --------------------------------------------------------
int __thiscall sub_408A14(int this)
{
  HANDLE CurrentProcess; // eax
  HWND DlgItem; // eax
  int v4; // eax
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  HMENU SystemMenu; // eax
  BOOL v8; // eax
  DWORD dwMajorVersion; // [esp-Ch] [ebp-44h]
  DWORD dwMinorVersion; // [esp-8h] [ebp-40h]
  DWORD dwBuildNumber; // [esp-4h] [ebp-3Ch]
  struct _TOKEN_PRIVILEGES NewState; // [esp+Ch] [ebp-2Ch] BYREF
  HANDLE TokenHandle; // [esp+1Ch] [ebp-1Ch] BYREF
  struct CMenu *v15; // [esp+20h] [ebp-18h]
  LPCWSTR lpString; // [esp+24h] [ebp-14h] BYREF
  LPCWSTR lpNewItem; // [esp+28h] [ebp-10h] BYREF
  int v18; // [esp+34h] [ebp-4h]

  CDialog::OnInitDialog((CDialog *)this);
  sub_408990(*(_DWORD *)(this + 32), 0);
  CurrentProcess = GetCurrentProcess();
  if ( OpenProcessToken(CurrentProcess, 0x28u, &TokenHandle)
    && LookupPrivilegeValueW(0, Name, &NewState.Privileges[0].Luid) )
  {
    NewState.PrivilegeCount = 1;
    NewState.Privileges[0].Attributes = 2;
    AdjustTokenPrivileges(TokenHandle, 0, &NewState, 0, 0, 0);
  }
  DlgItem = GetDlgItem(*(HWND *)(this + 32), 1100);
  CWnd::Attach((CWnd *)(this + 5784), DlgItem);
  sub_414229();
  hWnd = *(HWND *)(this + 32);
  CString::CString((CString *)&lpString);
  dwBuildNumber = VersionInformation.dwBuildNumber;
  v18 = 0;
  dwMinorVersion = VersionInformation.dwMinorVersion;
  dwMajorVersion = VersionInformation.dwMajorVersion;
  v4 = sub_414BAC(19);
  CString::Format((CString *)&lpString, aSOsDDD, v4, dwMajorVersion, dwMinorVersion, dwBuildNumber);
  if ( dword_433CBC )
  {
    CString::CString((CString *)&lpNewItem, aPortable_0);
    LOBYTE(v18) = 1;
    CString::operator+=(&lpString, &lpNewItem);
    LOBYTE(v18) = 0;
    CString::~CString((CString *)&lpNewItem);
  }
  SetWindowTextW(*(HWND *)(this + 32), lpString);
  v5 = sub_414BE2(60);
  CTabCtrl::InsertItem((CTabCtrl *)(this + 5784), 3u, 0, v5, 0, 0);
  v6 = sub_414BE2(61);
  CTabCtrl::InsertItem((CTabCtrl *)(this + 5784), 3u, 1, v6, 1, 0);
  dword_431F48 = sub_4141D6(&word_431F4C, dword_431F48);
  dword_431D28 = sub_4141D6(&word_431D2C, dword_431D28);
  dword_431CA0 = sub_4141D6(&word_431CA4, dword_431CA0);
  dword_431C18 = sub_4141D6(&word_431C1C, dword_431C18);
  dword_431970 = sub_4141D6(&word_431974, dword_431970);
  dword_4318E8 = sub_4141D6(&word_4318EC, dword_4318E8);
  dword_431860 = sub_4141D6(&word_431864, dword_431860);
  *(_DWORD *)(this + 196) = sub_415BCD(0, 0x5600994Cu, *(HWND *)(this + 32), 1017);
  CWnd::ModifyStyleEx((CWnd *)(this + 5784), 0, 0x10000u, 0);
  SendMessageW(*(HWND *)(this + 5816), 0x130Cu, dword_431F48, 0);
  sub_4099CE((HWND *)this);
  SystemMenu = GetSystemMenu(*(HWND *)(this + 32), 0);
  v15 = CMenu::FromHandle(SystemMenu);
  if ( v15 )
  {
    CString::CString((CString *)&lpNewItem);
    LOBYTE(v18) = 2;
    CString::LoadStringW((CString *)&lpNewItem, 0x65u);
    if ( *((_DWORD *)lpNewItem - 2) )
    {
      AppendMenuW(*((HMENU *)v15 + 1), 0x800u, 0, 0);
      AppendMenuW(*((HMENU *)v15 + 1), 0, 0x10u, lpNewItem);
    }
    LOBYTE(v18) = 0;
    CString::~CString((CString *)&lpNewItem);
  }
  SendMessageW(*(HWND *)(this + 32), 0x80u, 1u, *(_DWORD *)(this + 5780));
  SendMessageW(*(HWND *)(this + 32), 0x80u, 0, *(_DWORD *)(this + 5780));
  sub_408DB1((HWND *)this);
  sub_417802((int)dword_4327F8, *(HWND *)(this + 32));
  SetMenu(*(HWND *)(this + 32), 0);
  sub_4096DE(this);
  sub_40B57D();
  v8 = dword_431970 == 0;
  if ( dword_432CF0 )
    v8 = 0;
  if ( dword_432CF4 )
    v8 = 0;
  if ( v8 )
    CWnd::ShowWindow((CWnd *)this, 5);
  if ( dword_432CF0 && dword_4318E8 )
    dword_4330D0 = 0;
  if ( dword_431860 )
    dword_4330D0 = 0;
  sub_41726D(dword_431FD0, *(_DWORD *)(this + 32));
  sub_40A6C5((int *)this, -1);
  SetTimer(*(HWND *)(this + 32), 0x3E8u, 0x12Cu, 0);
  SetTimer(*(HWND *)(this + 32), 0x3E9u, 0x1F4u, 0);
  sub_40A22C(this);
  if ( dword_432CF4 )
  {
    sub_417238(dword_431FD0);
    SetTimer(*(HWND *)(this + 32), 0x2780u, 0x1F4u, 0);
  }
  v18 = -1;
  CString::~CString((CString *)&lpString);
  return 1;
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 431FD0: using guessed type _DWORD dword_431FD0[2];
// 4327F8: using guessed type _DWORD dword_4327F8[16];
// 432CF0: using guessed type int dword_432CF0;
// 432CF4: using guessed type int dword_432CF4;
// 4330D0: using guessed type int dword_4330D0;
// 433CBC: using guessed type int dword_433CBC;

//----- (00408DB1) --------------------------------------------------------
int __thiscall sub_408DB1(HWND *this)
{
  HWND DlgItem; // eax
  int v3; // ecx
  HWND v4; // eax
  _DWORD v6[4]; // [esp-4h] [ebp-15Ch] BYREF
  struct tagRECT v7; // [esp+Ch] [ebp-14Ch] BYREF
  struct tagRECT Rect; // [esp+1Ch] [ebp-13Ch] BYREF
  _DWORD v9[52]; // [esp+2Ch] [ebp-12Ch] BYREF
  char v10[4]; // [esp+FCh] [ebp-5Ch] BYREF
  char v11[4]; // [esp+100h] [ebp-58h] BYREF
  char v12[4]; // [esp+104h] [ebp-54h] BYREF
  char v13[52]; // [esp+108h] [ebp-50h] BYREF
  char v14[8]; // [esp+13Ch] [ebp-1Ch] BYREF
  CString *v15; // [esp+144h] [ebp-14h]
  char v16[4]; // [esp+148h] [ebp-10h] BYREF
  int v17; // [esp+154h] [ebp-4h]

  DlgItem = GetDlgItem(this[8], 4030);
  GetWindowRect(DlgItem, &Rect);
  GetClientRect(this[8], &v7);
  sub_41834A(v9);
  v17 = 0;
  v9[17] = 8421504;
  v9[1] = 0xFFFFFF;
  v9[33] = -5;
  CString::operator=(v10, aDonT);
  v9[18] = 8421504;
  v9[2] = 255;
  CString::operator=(v11, asc_42E5C8);
  v9[34] = 5;
  v9[19] = 32800;
  v9[3] = 65344;
  CString::operator=(v12, aSleep);
  v9[35] = -5;
  v9[20] = 8421504;
  v9[4] = 0xFFFFFF;
  CString::operator=(v13, byte_431514);
  v9[36] = 0;
  v9[49] = 4;
  CString::operator=(v14, aOk);
  sub_4184EA((char *)v9, 133);
  CString::CString((CString *)v16, asc_42E5B4);
  v6[0] = v3;
  v15 = (CString *)v6;
  LOBYTE(v17) = 1;
  operator+(v6, &lpValueName, v16);
  LOBYTE(v17) = 1;
  v4 = sub_408F30(this, 4030);
  sub_418655((int)v9, v4, v6[0]);
  LOBYTE(v17) = 0;
  CString::~CString((CString *)v16);
  v17 = -1;
  return sub_418478(v9);
}
// 408ED5: variable 'v3' is possibly undefined
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 408DB1: using guessed type char var_5C[4];
// 408DB1: using guessed type char var_58[4];
// 408DB1: using guessed type char var_54[4];
// 408DB1: using guessed type char var_50[52];
// 408DB1: using guessed type char var_1C[8];
// 408DB1: using guessed type char var_10[4];

//----- (00408F30) --------------------------------------------------------
HWND __thiscall sub_408F30(HWND *this, int nIDDlgItem)
{
  return GetDlgItem(this[8], nIDDlgItem);
}

//----- (00408F40) --------------------------------------------------------
int __thiscall sub_408F40(CWnd *this)
{
  int result; // eax

  if ( dword_431CA0 )
  {
    sub_417452((HWND *)dword_431FD0);
    return CWnd::ShowWindow(this, 0);
  }
  return result;
}
// 431FD0: using guessed type _DWORD dword_431FD0[2];

//----- (00408F61) --------------------------------------------------------
void __thiscall sub_408F61(CDialog *this)
{
  CDialog::OnOK(this);
  PostQuitMessage(0);
}

//----- (00408F6F) --------------------------------------------------------
void __thiscall sub_408F6F(HWND *this)
{
  if ( IsWindowVisible(this[8]) )
  {
    sub_417452((HWND *)dword_431FD0);
    CWnd::ShowWindow((CWnd *)this, 0);
  }
  if ( !dword_431CA0 )
  {
    CDialog::OnCancel((CDialog *)this);
    PostQuitMessage(0);
  }
}
// 431FD0: using guessed type _DWORD dword_431FD0[2];

//----- (00408FAC) --------------------------------------------------------
BOOL __cdecl sub_408FAC(HMENU hMenu)
{
  unsigned __int16 *v1; // eax
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // eax
  unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  unsigned __int16 *v7; // eax
  unsigned __int16 *v8; // eax
  unsigned __int16 *v9; // eax
  unsigned __int16 *v10; // eax
  unsigned __int16 *v11; // eax
  unsigned __int16 *v12; // eax
  unsigned __int16 *v13; // eax
  unsigned __int16 *v14; // eax
  unsigned __int16 *v15; // eax

  v1 = sub_414BE2(94);
  AppendMenuW(hMenu, 3u, 0, v1);
  v2 = sub_414BE2(95);
  AppendMenuW(hMenu, 3u, 0, v2);
  AppendMenuW(hMenu, 0x800u, 0, 0);
  v3 = sub_414BE2(80);
  AppendMenuW(hMenu, 3u, 0, v3);
  v4 = sub_414BE2(81);
  AppendMenuW(hMenu, 0, 0x8084u, v4);
  v5 = sub_414BE2(82);
  AppendMenuW(hMenu, 0, 0x8085u, v5);
  v6 = sub_414BE2(83);
  AppendMenuW(hMenu, 0, 0x8086u, v6);
  v7 = sub_414BE2(84);
  AppendMenuW(hMenu, 0, 0x8087u, v7);
  v8 = sub_414BE2(85);
  AppendMenuW(hMenu, 0, 0x8088u, v8);
  AppendMenuW(hMenu, 0x800u, 0, 0);
  v9 = sub_414BE2(90);
  AppendMenuW(hMenu, 3u, 0, v9);
  v10 = sub_414BE2(81);
  AppendMenuW(hMenu, 0, 0x808Au, v10);
  v11 = sub_414BE2(82);
  AppendMenuW(hMenu, 0, 0x808Bu, v11);
  v12 = sub_414BE2(83);
  AppendMenuW(hMenu, 0, 0x808Cu, v12);
  v13 = sub_414BE2(84);
  AppendMenuW(hMenu, 0, 0x808Du, v13);
  v14 = sub_414BE2(85);
  AppendMenuW(hMenu, 0, 0x808Eu, v14);
  AppendMenuW(hMenu, 0x800u, 0, 0);
  v15 = sub_414BE2(91);
  return AppendMenuW(hMenu, 0, 0x808Fu, v15);
}

//----- (004090DA) --------------------------------------------------------
HMENU sub_4090DA()
{
  HMENU PopupMenu; // ebx
  unsigned __int16 *v1; // eax
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // eax
  unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  unsigned __int16 *v7; // eax
  unsigned __int16 *v8; // eax

  PopupMenu = CreatePopupMenu();
  v1 = sub_414BE2(27);
  AppendMenuW(PopupMenu, 0x400u, 0x8175u, v1);
  v2 = sub_414BE2(28);
  AppendMenuW(PopupMenu, 0x400u, 0x8176u, v2);
  v3 = sub_414BE2(36);
  AppendMenuW(PopupMenu, 0x400u, 0x8177u, v3);
  v4 = sub_414BE2(96);
  AppendMenuW(PopupMenu, 0x400u, 0x8178u, v4);
  AppendMenuW(PopupMenu, 0xC00u, 0, 0);
  v5 = sub_414BE2(35);
  AppendMenuW(PopupMenu, 0x400u, 0x8010u, v5);
  v6 = sub_414BE2(34);
  AppendMenuW(PopupMenu, 0x400u, 0x800Fu, v6);
  AppendMenuW(PopupMenu, 0xC00u, 0, 0);
  v7 = sub_414BE2(115);
  AppendMenuW(PopupMenu, 0x400u, 0x817Bu, v7);
  v8 = sub_414BE2(113);
  AppendMenuW(PopupMenu, 0x400u, 0x817Cu, v8);
  return PopupMenu;
}

//----- (0040919D) --------------------------------------------------------
HMENU __thiscall sub_40919D(void *this)
{
  signed int i; // ebp
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // eax
  HMENU v4; // ebp
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  const WCHAR *v7; // eax
  CString *v8; // eax
  LPCWSTR *v9; // eax
  CString *v10; // eax
  LPCWSTR *v11; // eax
  CString *v12; // eax
  LPCWSTR *v13; // eax
  unsigned __int16 *v14; // eax
  unsigned __int16 *v15; // eax
  unsigned __int16 *v16; // eax
  unsigned __int16 *v17; // eax
  unsigned __int16 *v18; // eax
  unsigned __int16 *v19; // eax
  unsigned __int16 *v20; // eax
  unsigned __int16 *v21; // eax
  unsigned __int16 *v22; // eax
  unsigned __int16 *v23; // eax
  HMENU v24; // ebp
  unsigned __int16 *v25; // eax
  unsigned __int16 *v26; // eax
  unsigned __int16 *v27; // eax
  unsigned __int16 *v28; // eax
  unsigned __int16 *v29; // eax
  unsigned __int16 *v30; // eax
  unsigned __int16 *v31; // eax
  unsigned __int16 *v32; // eax
  unsigned __int16 *v33; // eax
  unsigned __int16 *v34; // eax
  unsigned __int16 *v35; // eax
  unsigned __int16 *v36; // eax
  unsigned __int16 *v37; // eax
  unsigned __int16 *v38; // eax
  HMENU v39; // ebx
  unsigned __int16 *v40; // eax
  unsigned __int16 *v41; // eax
  unsigned __int16 *v42; // eax
  HMENU v43; // esi
  unsigned __int16 *v44; // eax
  signed int uIDNewItem; // [esp+10h] [ebp-138h]
  HMENU uIDNewItema; // [esp+10h] [ebp-138h]
  HMENU PopupMenu; // [esp+14h] [ebp-134h]
  HMENU hMenu; // [esp+18h] [ebp-130h]
  HMENU hMenua; // [esp+18h] [ebp-130h]
  char v51[4]; // [esp+1Ch] [ebp-12Ch] BYREF
  LPCWSTR lpNewItem; // [esp+20h] [ebp-128h] BYREF
  char v53[4]; // [esp+24h] [ebp-124h] BYREF
  char v54[4]; // [esp+28h] [ebp-120h] BYREF
  char v55[4]; // [esp+2Ch] [ebp-11Ch] BYREF
  char v56[4]; // [esp+30h] [ebp-118h] BYREF
  void *v57; // [esp+34h] [ebp-114h]
  char v58[4]; // [esp+38h] [ebp-110h] BYREF
  WCHAR NewItem[128]; // [esp+3Ch] [ebp-10Ch] BYREF
  int v60; // [esp+144h] [ebp-4h]

  v57 = this;
  PopupMenu = CreatePopupMenu();
  hMenu = CreatePopupMenu();
  uIDNewItem = 10;
  for ( i = 5010; i < 6500; ++i )
  {
    v2 = sub_414BE2(48);
    wsprintfW(NewItem, aDS, uIDNewItem, v2);
    if ( i >= 5060 )
    {
      v3 = sub_414BE2(44);
      wsprintfW(NewItem, aDS, uIDNewItem / 60, v3);
    }
    AppendMenuW(hMenu, 0x400u, i, NewItem);
    if ( i >= 5010 )
    {
      uIDNewItem += 9;
      i += 9;
    }
    if ( i >= 5060 )
    {
      uIDNewItem += 50;
      i += 50;
    }
    if ( i >= 5300 )
    {
      uIDNewItem += 240;
      i += 240;
    }
    ++uIDNewItem;
  }
  v4 = CreatePopupMenu();
  AppendMenuW(PopupMenu, 0x410u, (UINT_PTR)v4, &::NewItem);
  v5 = sub_414BE2(47);
  AppendMenuW(v4, 0x400u, 1u, v5);
  v6 = sub_414BE2(49);
  AppendMenuW(v4, 0x400u, 0x800Eu, v6);
  uIDNewItema = CreatePopupMenu();
  v7 = (const WCHAR *)sub_414BAC(19);
  AppendMenuW(v4, 0x410u, (UINT_PTR)uIDNewItema, v7);
  v8 = CString::CString((CString *)v53, (const struct CString *)&lpValueName);
  v60 = 0;
  v9 = (LPCWSTR *)operator+(v51, v8, asc_42E5E4);
  AppendMenuW(uIDNewItema, 0, 0x8166u, *v9);
  CString::~CString((CString *)v51);
  v60 = -1;
  CString::~CString((CString *)v53);
  CString::CString((CString *)v51, aIni_1);
  v60 = 1;
  v10 = CString::CString((CString *)v55, (const struct CString *)&lpValueName);
  LOBYTE(v60) = 2;
  v11 = (LPCWSTR *)operator+(v53, v10, v51);
  AppendMenuW(uIDNewItema, 0, 0x8167u, *v11);
  CString::~CString((CString *)v53);
  LOBYTE(v60) = 1;
  CString::~CString((CString *)v55);
  v60 = -1;
  CString::~CString((CString *)v51);
  CString::CString((CString *)v54, aIni_0);
  v60 = 3;
  v12 = CString::CString((CString *)v56, (const struct CString *)&lpValueName);
  LOBYTE(v60) = 4;
  v13 = (LPCWSTR *)operator+(v58, v12, v54);
  AppendMenuW(uIDNewItema, 0, 0x8168u, *v13);
  CString::~CString((CString *)v58);
  LOBYTE(v60) = 3;
  CString::~CString((CString *)v56);
  v60 = -1;
  CString::~CString((CString *)v54);
  AppendMenuW(v4, 0xC00u, 0, 0);
  v14 = sub_414BE2(38);
  AppendMenuW(v4, 0x400u, 0x8012u, v14);
  v15 = sub_414BE2(45);
  AppendMenuW(v4, 0x400u, 0x8011u, v15);
  v16 = sub_414BE2(45);
  AppendMenuW(v4, 0x400u, 0x8169u, v16);
  AppendMenuW(v4, 0xC00u, 0, 0);
  v17 = sub_414BE2(170);
  AppendMenuW(v4, 0x400u, 0x816Au, v17);
  v18 = sub_414BE2(171);
  AppendMenuW(v4, 0x400u, 0x816Bu, v18);
  AppendMenuW(v4, 0xC00u, 0, 0);
  v19 = sub_414BE2(71);
  AppendMenuW(v4, 0x400u, 0x816Cu, v19);
  AppendMenuW(v4, 0xC00u, 0, 0);
  v20 = sub_414BE2(74);
  AppendMenuW(v4, 0x400u, 0x816Du, v20);
  v21 = sub_414BE2(75);
  AppendMenuW(v4, 0x400u, 0x816Eu, v21);
  v22 = sub_414BE2(76);
  AppendMenuW(v4, 0x400u, 0x816Fu, v22);
  AppendMenuW(v4, 0xC00u, 0, 0);
  v23 = sub_414BE2(46);
  AppendMenuW(v4, 0x400u, 0xA3u, v23);
  v24 = CreatePopupMenu();
  v25 = sub_414BE2(50);
  AppendMenuW(PopupMenu, 0x410u, (UINT_PTR)v24, v25);
  v26 = sub_414BE2(51);
  AppendMenuW(v24, 0x400u, 0xFA6u, v26);
  v27 = sub_414BE2(50);
  AppendMenuW(v24, 0x400u, 0xFA7u, v27);
  v28 = sub_414BE2(32);
  AppendMenuW(v24, 0x400u, 0xFA2u, v28);
  AppendMenuW(v24, 0xC00u, 0, 0);
  v29 = sub_414BE2(52);
  AppendMenuW(v24, 0x400u, 0xFA3u, v29);
  v30 = sub_414BE2(53);
  AppendMenuW(v24, 0x400u, 0xFA5u, v30);
  v31 = sub_414BE2(58);
  AppendMenuW(v24, 0x400u, 0xFA8u, v31);
  AppendMenuW(v24, 0xC00u, 0, 0);
  v32 = sub_414BE2(31);
  CString::CString((CString *)&lpNewItem, v32);
  v60 = 5;
  CString::operator+=(&lpNewItem, String2);
  v33 = sub_414BE2(54);
  CString::operator+=(&lpNewItem, v33);
  AppendMenuW(v24, 0x410u, (UINT_PTR)hMenu, lpNewItem);
  v34 = sub_414BE2(31);
  AppendMenuW(v24, 0x400u, 0xFA0u, v34);
  AppendMenuW(v24, 0xC00u, 0, 0);
  v35 = sub_414BE2(55);
  AppendMenuW(v24, 0x400u, 0xFA4u, v35);
  v36 = sub_414BE2(56);
  AppendMenuW(v24, 0x400u, 0xFCDu, v36);
  v37 = sub_414BE2(57);
  AppendMenuW(v24, 0x400u, 0xFCEu, v37);
  CreatePopupMenu();
  hMenua = CreatePopupMenu();
  v38 = sub_414BE2(79);
  AppendMenuW(PopupMenu, 0x410u, (UINT_PTR)hMenua, v38);
  v39 = CreatePopupMenu();
  v40 = sub_414BE2(53);
  AppendMenuW(PopupMenu, 0x410u, (UINT_PTR)v39, v40);
  v41 = sub_414BE2(86);
  AppendMenuW(v39, 0x400u, 0x36DEu, v41);
  v42 = sub_414BE2(85);
  AppendMenuW(v39, 0x400u, 0x36DFu, v42);
  sub_408FAC(hMenua);
  v43 = sub_4090DA();
  v44 = sub_414BE2(40);
  InsertMenuW(PopupMenu, 1u, 0x410u, (UINT_PTR)v43, v44);
  v60 = -1;
  CString::~CString((CString *)&lpNewItem);
  return PopupMenu;
}
// 41A09E: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A200: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 42E5E4: using guessed type wchar_t asc_42E5E4[4];
// 40919D: using guessed type char var_124[4];
// 40919D: using guessed type char var_12C[4];
// 40919D: using guessed type char var_11C[4];
// 40919D: using guessed type char var_120[4];
// 40919D: using guessed type char var_118[4];
// 40919D: using guessed type char var_110[4];

//----- (004096DE) --------------------------------------------------------
void __thiscall sub_4096DE(int this)
{
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // eax
  unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  HMENU v6; // eax
  const unsigned __int16 *v7; // eax
  int v8; // eax
  const WCHAR *v9; // eax
  unsigned __int16 *v10; // eax
  unsigned __int16 *v11; // eax
  struct _IMAGELIST *v12; // eax
  const unsigned __int16 **v13; // eax
  const unsigned __int16 *v14; // eax
  unsigned __int16 *Buffer; // eax
  HICON v16; // eax
  HICON v17; // eax
  int v18[4]; // [esp-4h] [ebp-234h] BYREF
  WCHAR v19[2]; // [esp+Ch] [ebp-224h] BYREF
  char v20[508]; // [esp+10h] [ebp-220h] BYREF
  char v21[4]; // [esp+20Ch] [ebp-24h] BYREF
  char v22[4]; // [esp+210h] [ebp-20h] BYREF
  HICON hicon; // [esp+214h] [ebp-1Ch]
  int v24; // [esp+218h] [ebp-18h] BYREF
  char v25[4]; // [esp+21Ch] [ebp-14h] BYREF
  HIMAGELIST himl; // [esp+220h] [ebp-10h]
  int v27; // [esp+22Ch] [ebp-4h]

  v2 = sub_414BE2(60);
  hicon = (HICON)v18;
  CString::CString((CString *)v18, v2);
  sub_41379E((HWND *)(this + 5784), 0, v18[0]);
  v3 = sub_414BE2(61);
  hicon = (HICON)v18;
  CString::CString((CString *)v18, v3);
  sub_41379E((HWND *)(this + 5784), 1u, v18[0]);
  v4 = sub_414BE2(30);
  CWnd::SetWindowTextW((CWnd *)(this + 5848), v4);
  sub_418309((HWND *)dword_4327F8);
  sub_418262((int)dword_4327F8, (int)asc_42E618, 33133);
  sub_418262((int)dword_4327F8, (int)aLng_0, 133);
  v18[0] = 33146;
  v5 = sub_414BE2(47);
  sub_418262((int)dword_4327F8, (int)v5, v18[0]);
  v6 = sub_40919D((void *)this);
  sub_417A96((int)dword_4327F8, (UINT)v6);
  SendMessageW(*(HWND *)(this + 196), 0x416u, 0, 0);
  SendMessageW(*(HWND *)(this + 196), 0x416u, 0, 0);
  SendMessageW(*(HWND *)(this + 196), 0x416u, 0, 0);
  *(_DWORD *)v19 = dword_43151C;
  memset(v20, 0, sizeof(v20));
  v7 = (const unsigned __int16 *)sub_414BAC(20);
  CString::CString((CString *)&v24, v7);
  v27 = 0;
  if ( !dword_444FD0 )
  {
    v8 = sub_414BAC(21);
    CString::operator=(&v24, v8);
  }
  v18[0] = v24;
  v9 = (const WCHAR *)sub_414BAC(22);
  wsprintfW(v19, v9);
  sub_415B3E(*(HWND *)(this + 196), (int)v19, 1017, 0, 0);
  v18[0] = 0;
  v10 = sub_414BE2(75);
  sub_415B3E(*(HWND *)(this + 196), (int)v10, 33134, 1, v18[0]);
  v11 = sub_414BE2(46);
  CString::CString((CString *)v25, v11);
  LOBYTE(v27) = 1;
  v12 = *(struct _IMAGELIST **)CString::CString((CString *)v21, byte_431514);
  LOBYTE(v27) = 2;
  himl = v12;
  v13 = (const unsigned __int16 **)CString::CString((CString *)v22, asc_42E608);
  v18[0] = (int)himl;
  v14 = *v13;
  LOBYTE(v27) = 3;
  CString::Replace((CString *)v25, v14, (const unsigned __int16 *)himl);
  LOBYTE(v27) = 2;
  CString::~CString((CString *)v22);
  LOBYTE(v27) = 1;
  CString::~CString((CString *)v21);
  v18[0] = 0;
  Buffer = CString::GetBuffer((CString *)v25, 0);
  sub_415B3E(*(HWND *)(this + 196), (int)Buffer, 163, 2, v18[0]);
  if ( !dword_432D04 )
  {
    dword_432D04 = 1;
    hicon = (HICON)LoadImageW(hInstance, (LPCWSTR)0x9A, 1u, 16, 16, 0);
    himl = ImageList_Create(16, 16, 0x21u, 0, 1);
    v16 = sub_416384(0xEu, 1);
    ImageList_ReplaceIcon(himl, -1, v16);
    ImageList_ReplaceIcon(himl, -1, hicon);
    SendMessageW(*(HWND *)(this + 196), 0x430u, 0, (LPARAM)himl);
    v17 = sub_416384(0x1Cu, 1);
    ImageList_ReplaceIcon(himl, -1, v17);
  }
  sub_410F60((HWND *)(this + 224));
  sub_402BAB((HWND *)(this + 4024), *(_DWORD *)(this + 4056));
  LOBYTE(v27) = 0;
  CString::~CString((CString *)v25);
  v27 = -1;
  CString::~CString((CString *)&v24);
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 42E60C: using guessed type wchar_t aLng_0[6];
// 42E618: using guessed type wchar_t asc_42E618[4];
// 43151C: using guessed type int dword_43151C;
// 4327F8: using guessed type _DWORD dword_4327F8[16];
// 432D04: using guessed type int dword_432D04;
// 4096DE: using guessed type char var_14[4];
// 4096DE: using guessed type char var_24[4];
// 4096DE: using guessed type char var_20[4];

//----- (004099B3) --------------------------------------------------------
HANDLE __cdecl sub_4099B3(unsigned __int16 a1)
{
  return LoadImageW(hInstance, (LPCWSTR)a1, 1u, 32, 32, 0);
}

//----- (004099CE) --------------------------------------------------------
void __thiscall sub_4099CE(HWND *this)
{
  HICON v2; // edi
  HICON v3; // ebx
  HICON v4; // eax
  HICON v5; // eax
  HWND DlgItem; // eax

  if ( !himl )
  {
    himl = ImageList_Create(16, 16, 0x21u, 1, 1);
    v2 = (HICON)sub_4099B3(0x80u);
    ImageList_ReplaceIcon(himl, -1, v2);
    v3 = (HICON)sub_4099B3(0x96u);
    ImageList_ReplaceIcon(himl, -1, v3);
    v4 = sub_4175DC(v2);
    ImageList_ReplaceIcon(himl, -1, v4);
    v5 = sub_4175DC(v3);
    ImageList_ReplaceIcon(himl, -1, v5);
    DlgItem = GetDlgItem(this[8], 1100);
    SendMessageW(DlgItem, 0x1303u, 0, (LPARAM)himl);
  }
}

//----- (00409A77) --------------------------------------------------------
void __cdecl sub_409A77(char a1)
{
  LPCWSTR lpParameters; // [esp+0h] [ebp-14h] BYREF
  char v2[4]; // [esp+4h] [ebp-10h] BYREF
  int v3; // [esp+10h] [ebp-4h]

  v3 = 0;
  CString::CString((CString *)v2, aShell32DllCont);
  LOBYTE(v3) = 1;
  operator+(&lpParameters, v2, &a1);
  LOBYTE(v3) = 3;
  CString::~CString((CString *)v2);
  ShellExecuteW(0, Operation, aRundll32Exe, lpParameters, 0, 5);
  LOBYTE(v3) = 0;
  CString::~CString((CString *)&lpParameters);
  v3 = -1;
  CString::~CString((CString *)&a1);
}
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 409A77: using guessed type char var_10[4];

//----- (00409AF2) --------------------------------------------------------
char __thiscall sub_409AF2(UINT *this, int a2)
{
  char result; // al

  dword_4330D0 = 0;
  result = SetThreadExecutionState(0x80000000);
  switch ( a2 )
  {
    case 32900:
      return sub_410473(this + 48, 1);
    case 32901:
      return sub_41044D(this + 48, 1);
    case 32902:
      return sub_41042B(this + 48, 1);
    case 32903:
      return sub_410418(1);
    case 32904:
      result = sub_410405(1);
      break;
  }
  switch ( a2 )
  {
    case 32906:
      return sub_410473(this + 48, 0);
    case 32907:
      return sub_41044D(this + 48, 0);
    case 32908:
      return sub_41042B(this + 48, 0);
    case 32909:
      return sub_410418(0);
    case 32910:
      return sub_410405(0);
    case 32911:
      return sub_4105AE();
  }
  return result;
}
// 4330D0: using guessed type int dword_4330D0;

//----- (00409BE3) --------------------------------------------------------
int __thiscall sub_409BE3(int this, LPCWSTR lpFile, LPCWSTR a3)
{
  const WCHAR *v4; // eax
  LPCWSTR *p_lpFile; // ecx
  char *v7; // ecx
  int v8; // eax
  HMODULE ModuleHandleW; // eax
  const char *v10; // eax
  const WCHAR *v11; // [esp-4h] [ebp-28h]
  char *v12[3]; // [esp+0h] [ebp-24h] BYREF
  char v13[4]; // [esp+Ch] [ebp-18h] BYREF
  char v14[4]; // [esp+10h] [ebp-14h] BYREF
  char v15[4]; // [esp+14h] [ebp-10h] BYREF
  int v16; // [esp+20h] [ebp-4h]

  if ( (unsigned __int16)lpFile > 0x8167u )
  {
    v7 = (char *)((unsigned __int16)lpFile - 33128);
    switch ( (unsigned __int16)lpFile )
    {
      case 0x8168u:
        ShellExecuteW(0, Operation, ::lpFile, 0, 0, 5);
        return 1;
      case 0x816Au:
        sub_407E7E(0);
        return 1;
      case 0x816Bu:
        sub_407D2C(1);
        return 1;
      case 0x816Cu:
        sub_40B219((CWnd *)this);
        return 1;
      case 0x816Du:
        sub_4145B8((CString *)&a3);
        v16 = 2;
        CString::CString((CString *)v14, aSeiteFaq);
        LOBYTE(v16) = 3;
        CString::operator+=(&a3, v14);
        LOBYTE(v16) = 2;
        CString::~CString((CString *)v14);
        CString::operator+=(&a3, &lpValueName);
        ShellExecuteW(0, Operation, a3, 0, 0, 5);
        v16 = -1;
        p_lpFile = &a3;
        goto LABEL_73;
      case 0x816Eu:
        sub_4145B8((CString *)&a3);
        v16 = 4;
        CString::CString((CString *)v13, aPaypal);
        LOBYTE(v16) = 5;
        CString::operator+=(&a3, v13);
        LOBYTE(v16) = 4;
        CString::~CString((CString *)v13);
        CString::operator+=(&a3, aProgram_0);
        CString::operator+=(&a3, &lpValueName);
        ShellExecuteW(0, Operation, a3, 0, 0, 5);
        v16 = -1;
        p_lpFile = &a3;
        goto LABEL_73;
      case 0x816Fu:
        sub_4145B8((CString *)&a3);
        v16 = 0;
        CString::CString((CString *)v15, aSeiteMicrosoft);
        LOBYTE(v16) = 1;
        CString::operator+=(&a3, v15);
        LOBYTE(v16) = 0;
        CString::~CString((CString *)v15);
        CString::operator+=(&a3, &lpValueName);
        ShellExecuteW(0, Operation, a3, 0, 0, 5);
        v16 = -1;
        p_lpFile = &a3;
        goto LABEL_73;
      case 0x8170u:
        sub_40A67A((HWND *)this);
        return 1;
      case 0x8171u:
        sub_40A67A((HWND *)this);
        break;
      case 0x8172u:
        goto LABEL_74;
      case 0x8173u:
        v10 = aTheFunctionWil;
        if ( !dword_444FD0 )
          v10 = aDieFunktionWir;
        v12[0] = (char *)((unsigned __int16)lpFile - 33128);
        a3 = (LPCWSTR)v12;
        goto LABEL_77;
      case 0x8174u:
        SendMessageW(*(HWND *)(this + 5816), 0x130Cu, (WPARAM)a3, 0);
        sub_40A21B((void *)this, (WPARAM)a3);
        return 1;
      case 0x8175u:
        v12[0] = (char *)(dword_431970 == 0);
        dword_431970 = (int)v12[0];
        sub_4141BE(&word_431974, (int)v12[0]);
        return 1;
      case 0x8176u:
        v8 = sub_419012(lpValueName, 0);
        v12[0] = 0;
        v11 = lpValueName;
        if ( v8 )
        {
          sub_418FAF(lpValueName, (HKEY)v12[0]);
        }
        else
        {
          ModuleHandleW = GetModuleHandleW(0);
          sub_418ECD(ModuleHandleW, v11, (HKEY)v12[0]);
        }
        return 1;
      case 0x8177u:
        v12[0] = (char *)(dword_4318E8 == 0);
        dword_4318E8 = (int)v12[0];
        sub_4141BE(&word_4318EC, (int)v12[0]);
        return 1;
      case 0x8178u:
        v12[0] = (char *)(dword_431860 == 0);
        dword_431860 = (int)v12[0];
        sub_4141BE(&word_431864, (int)v12[0]);
        return 1;
      case 0x8179u:
        break;
      case 0x817Au:
        sub_417452((HWND *)dword_431FD0);
        goto LABEL_64;
      case 0x817Bu:
        sub_408285();
        return 1;
      case 0x817Cu:
        sub_40B75B((CWnd *)this);
        return 1;
      default:
        goto LABEL_83;
    }
    v12[0] = (char *)(dword_4330D0 == 0);
    dword_4330D0 = (int)v12[0];
    sub_4141BE(&word_4330D4, (int)v12[0]);
    return 1;
  }
  if ( (unsigned __int16)lpFile == 33127 )
  {
    v12[0] = (char *)33127;
    a3 = (LPCWSTR)v12;
    CString::CString((CString *)v12, (const struct CString *)&::lpFile);
    sub_414463((CString *)&a3);
    ShellExecuteW(0, Operation, a3, 0, 0, 5);
    p_lpFile = &a3;
    goto LABEL_73;
  }
  if ( (unsigned __int16)lpFile > 0xFA8u )
  {
    if ( (unsigned __int16)lpFile > 0x800Eu )
    {
      if ( (unsigned __int16)lpFile == 32783 )
      {
        v12[0] = (char *)(dword_431CA0 == 0);
        dword_431CA0 = (int)v12[0];
        sub_4141BE(&word_431CA4, (int)v12[0]);
        return 1;
      }
      if ( (unsigned __int16)lpFile == 32784 )
      {
        v12[0] = (char *)(dword_431D28 == 0);
        dword_431D28 = (int)v12[0];
        sub_4141BE(&word_431D2C, (int)v12[0]);
        return 1;
      }
      v7 = (char *)((unsigned __int16)lpFile - 32786);
      if ( (unsigned __int16)lpFile == 32786 )
      {
LABEL_74:
        v10 = aTheFunctionWil;
        if ( !dword_444FD0 )
          v10 = aDieFunktionWir;
        v12[0] = v7;
        a3 = (LPCWSTR)v12;
LABEL_77:
        CString::CString((CString *)v12, v10);
        sub_414379((LPCWSTR)v12[0]);
        return 1;
      }
      if ( (unsigned __int16)lpFile != 33126 )
        goto LABEL_83;
      sub_4144DC((CString *)&a3);
      ShellExecuteW(0, Operation, a3, 0, 0, 5);
      p_lpFile = &a3;
    }
    else
    {
      if ( (unsigned __int16)lpFile == 32782 )
      {
        sub_417238(dword_431FD0);
LABEL_64:
        CWnd::ShowWindow((CWnd *)this, 0);
        return 1;
      }
      if ( (unsigned __int16)lpFile == 4045 )
      {
        v12[0] = (char *)aMsconfigExe;
        goto LABEL_42;
      }
      if ( (unsigned __int16)lpFile != 4046 )
      {
        if ( (unsigned __int16)lpFile == 14046 )
        {
          SetTimer(*(HWND *)(this + 32), 0x89Au, 0x1F4u, 0);
          return 1;
        }
        if ( (unsigned __int16)lpFile == 14047 )
        {
          SetTimer(*(HWND *)(this + 32), 0x899u, 0x1F4u, 0);
          return 1;
        }
        goto LABEL_83;
      }
      CString::CString((CString *)&lpFile, aMsinfo32Exe);
      ShellExecuteW(0, Operation, lpFile, 0, 0, 5);
      p_lpFile = &lpFile;
    }
LABEL_73:
    CString::~CString((CString *)p_lpFile);
    return 1;
  }
  if ( (unsigned __int16)lpFile == 4008 )
  {
    ShellExecuteW(0, Operation, aShellFonts, 0, 0, 5);
    return 1;
  }
  if ( (unsigned __int16)lpFile > 0xFA3u )
  {
    if ( (unsigned __int16)lpFile != 4004 )
    {
      switch ( (unsigned __int16)lpFile )
      {
        case 0xFA5u:
          v12[0] = 0;
          a3 = (LPCWSTR)v12;
          CString::CString((CString *)v12, aDeskCpl3);
          goto LABEL_13;
        case 0xFA6u:
          ShellExecuteW(0, Operation, aTaskmgrExe, 0, 0, 5);
          return 1;
        case 0xFA7u:
          v12[0] = 0;
          a3 = (LPCWSTR)v12;
          CString::CString((CString *)v12, aSysdmCpl3);
          goto LABEL_13;
      }
      goto LABEL_83;
    }
    v12[0] = (char *)aControlUserpas;
LABEL_42:
    sub_41571D((_DWORD *)(this + 208), 0, (WCHAR *)v12[0]);
    return 1;
  }
  switch ( (unsigned __int16)lpFile )
  {
    case 0xFA3u:
      v12[0] = (char *)4003;
      a3 = (LPCWSTR)v12;
      CString::CString((CString *)v12, aDeskCpl0);
      goto LABEL_13;
    case 0x85u:
      sub_40B019((void *)this, *(HWND *)(this + 32));
      return 1;
    case 0xA3u:
      (*(void (__thiscall **)(int))(*(_DWORD *)this + 216))(this);
      return 1;
    case 0x3F9u:
      v12[0] = (char *)5;
      if ( dword_444FD0 )
        v4 = (const WCHAR *)sub_414BAC(24);
      else
        v4 = (const WCHAR *)sub_414BAC(23);
      ShellExecuteW(0, Operation, v4, 0, 0, (INT)v12[0]);
      return 1;
    case 0xFA0u:
      v12[0] = 0;
      a3 = (LPCWSTR)v12;
      CString::CString((CString *)v12, aDeskCpl1);
      goto LABEL_13;
    case 0xFA2u:
      v12[0] = 0;
      a3 = (LPCWSTR)v12;
      CString::CString((CString *)v12, aPowercfgCpl);
LABEL_13:
      sub_409A77((char)v12[0]);
      return 1;
  }
LABEL_83:
  if ( (unsigned __int16)lpFile > 0x1388u && (unsigned __int16)lpFile < 0x1964u )
  {
    sub_40892C((unsigned __int16)lpFile - 5000);
    return 1;
  }
  if ( (unsigned __int16)lpFile >= 0x8084u && (unsigned __int16)lpFile < 0x809Cu )
    sub_409AF2((UINT *)this, (unsigned __int16)lpFile);
  return CWnd::OnCommand((CWnd *)this, (unsigned int)lpFile, (int)a3);
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A200: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 42E6C0: using guessed type wchar_t aProgram_0[9];
// 42E72C: using guessed type wchar_t aShellFonts[12];
// 42E744: using guessed type wchar_t aControlUserpas[23];
// 42E784: using guessed type wchar_t aTaskmgrExe[12];
// 431FD0: using guessed type _DWORD dword_431FD0[2];
// 4330D0: using guessed type int dword_4330D0;
// 409BE3: using guessed type char var_10[4];
// 409BE3: using guessed type char var_14[4];
// 409BE3: using guessed type char var_18[4];

//----- (0040A21B) --------------------------------------------------------
LRESULT __thiscall sub_40A21B(void *this, WPARAM a2)
{
  dword_431F48 = a2;
  return sub_40A22C((int)this);
}

//----- (0040A22C) --------------------------------------------------------
LRESULT __thiscall sub_40A22C(int this)
{
  WPARAM v1; // ebx
  HWND *v3; // edi
  HWND *v4; // edi
  int v5; // edi
  HINSTANCE ResourceHandle; // eax
  HICON IconW; // eax
  HWND v9; // [esp-10h] [ebp-24h]
  WPARAM v10; // [esp+10h] [ebp-4h]

  v1 = dword_431F48;
  v10 = dword_431F48;
  if ( !dword_431F48 )
  {
    v3 = (HWND *)(this + 256);
    if ( !*(_DWORD *)(this + 256) )
      CDialog::Create((CDialog *)(this + 224), (const unsigned __int16 *)0x68, (struct CWnd *)(this + 5784));
    sub_4136DC((HWND *)(this + 5784), *v3);
    CWnd::ShowWindow((CWnd *)(this + 224), 5);
    *(_DWORD *)(this + 1576) = 1;
LABEL_12:
    if ( *(_DWORD *)(this + 4056) )
      CWnd::ShowWindow((CWnd *)(this + 4024), 0);
    *(_DWORD *)(this + 4124) = 0;
    goto LABEL_15;
  }
  if ( dword_431F48 == 1 )
  {
    v4 = (HWND *)(this + 4056);
    if ( !*(_DWORD *)(this + 4056) )
      CDialog::Create((CDialog *)(this + 4024), (const unsigned __int16 *)0x82, (struct CWnd *)(this + 5784));
    sub_4136DC((HWND *)(this + 5784), *v4);
    CWnd::ShowWindow((CWnd *)(this + 4024), 5);
    *(_DWORD *)(this + 4124) = 1;
  }
  if ( *(_DWORD *)(this + 256) )
    CWnd::ShowWindow((CWnd *)(this + 224), 0);
  *(_DWORD *)(this + 1576) = 0;
  if ( v1 != 1 )
    goto LABEL_12;
LABEL_15:
  v5 = 128;
  if ( v10 == 1 )
    v5 = 150;
  dword_431FD8 = v5;
  dword_4327EC = dword_4330D0 == 0;
  sub_4174CA((int)dword_431FD0);
  AfxGetModuleState();
  ResourceHandle = AfxFindResourceHandle((const unsigned __int16 *)(unsigned __int16)v5, (const unsigned __int16 *)0xE);
  IconW = LoadIconW(ResourceHandle, (LPCWSTR)(unsigned __int16)v5);
  v9 = *(HWND *)(this + 32);
  *(_DWORD *)(this + 5780) = IconW;
  SendMessageW(v9, 0x80u, 1u, (LPARAM)IconW);
  return SendMessageW(*(HWND *)(this + 32), 0x80u, 0, *(_DWORD *)(this + 5780));
}
// 431FD0: using guessed type _DWORD dword_431FD0[2];
// 431FD8: using guessed type int dword_431FD8;
// 4327EC: using guessed type int dword_4327EC;
// 4330D0: using guessed type int dword_4330D0;

//----- (0040A40B) --------------------------------------------------------
int __thiscall sub_40A40B(int this)
{
  int result; // eax
  int v3; // eax
  int v4; // eax
  int v5; // eax

  result = dword_4330D0;
  if ( *(_DWORD *)(this + 200) != dword_4330D0
    && (dword_4327EC = dword_4330D0 == 0,
        sub_4174CA((int)dword_431FD0),
        result = dword_4330D0,
        *(_DWORD *)(this + 200) != dword_4330D0)
    || *(_DWORD *)(this + 204) != dword_431F48 )
  {
    *(_DWORD *)(this + 200) = result;
    *(_DWORD *)(this + 204) = dword_431F48;
    OutputDebugStringA(aSetImg);
    SendMessageW(*(HWND *)(this + 5880), 0xF1u, dword_4330D0 == 0, 0);
    v3 = !*(_DWORD *)(this + 204) && *(_DWORD *)(this + 200);
    sub_411867((_DWORD *)(this + 224), v3);
    v4 = *(_DWORD *)(this + 204) == 1 && *(_DWORD *)(this + 200);
    sub_40383C((_DWORD *)(this + 4024), v4);
    if ( *(_DWORD *)(this + 200) && *(_DWORD *)(this + 1576) )
      v5 = 0;
    else
      v5 = 2;
    sub_4137EE((HWND *)(this + 5784), 0, v5);
    if ( *(_DWORD *)(this + 200) && *(_DWORD *)(this + 4124) )
      return sub_4137EE((HWND *)(this + 5784), 1u, 1);
    else
      return sub_4137EE((HWND *)(this + 5784), 1u, 3);
  }
  return result;
}
// 431FD0: using guessed type _DWORD dword_431FD0[2];
// 4327EC: using guessed type int dword_4327EC;
// 4330D0: using guessed type int dword_4330D0;

//----- (0040A521) --------------------------------------------------------
int __thiscall sub_40A521(HWND *this, int a2)
{
  if ( a2 == 1000 )
  {
    KillTimer(this[8], 0x3E8u);
    sub_40A40B((int)this);
    SetTimer(this[8], 0x3E8u, 0x12Cu, 0);
  }
  if ( a2 == 1001 )
  {
    KillTimer(this[8], 0x3E9u);
    sub_40AC29();
  }
  if ( a2 == 10112 )
  {
    KillTimer(this[8], 0x2780u);
    sub_417238(dword_431FD0);
  }
  if ( a2 == 2202 )
  {
    KillTimer(this[8], 0x89Au);
    SendMessageW(HWND_BROADCAST, 0x112u, 0xF170u, 2);
  }
  if ( a2 == 2201 )
  {
    KillTimer(this[8], 0x899u);
    SendMessageW(HWND_BROADCAST, 0x112u, 0xF170u, 2);
    SendMessageW(HWND_BROADCAST, 0x112u, 0xF170u, 1);
  }
  if ( a2 == 3035 && !dword_431F48 )
  {
    KillTimer(this[8], 0xBDBu);
    sub_411874(this + 56);
  }
  return CWnd::Default((CWnd *)this);
}
// 431FD0: using guessed type _DWORD dword_431FD0[2];

//----- (0040A67A) --------------------------------------------------------
void __thiscall sub_40A67A(HWND *this)
{
  ShowWindow(this[8], 5);
  SetWindowPos(this[8], HWND_MESSAGE|0x2, 0, 0, 0, 0, 3u);
  SetWindowPos(this[8], (HWND)0xFFFFFFFE, 0, 0, 0, 0, 3u);
  SetWindowPos(this[8], 0, 0, 0, 0, 0, 3u);
  sub_415D63(this[8]);
}

//----- (0040A6C5) --------------------------------------------------------
int __thiscall sub_40A6C5(int *this, int a2)
{
  int v3; // edi
  const WCHAR *Buffer; // eax

  if ( a2 != -1 )
  {
    if ( a2 != dword_430C70 )
    {
      dword_430C70 = a2;
      sub_4141BE(&word_430C74, a2);
    }
    sub_4141BE(&word_430C74, dword_430C70);
  }
  sub_417238(dword_431FD0);
  v3 = 128;
  if ( dword_430C70 == 1 )
    v3 = 8000;
  if ( dword_430C70 == 2 )
    v3 = 8001;
  sub_41726D(dword_431FD0, this[8]);
  Buffer = CString::GetBuffer((CString *)&lpValueName, 0);
  return sub_417549((int)dword_431FD0, v3, v3, Buffer, 0, 1);
}
// 431FD0: using guessed type _DWORD dword_431FD0[2];

//----- (0040A750) --------------------------------------------------------
int sub_40A750()
{
  int pvParam; // [esp+0h] [ebp-4h] BYREF

  pvParam = 0;
  SystemParametersInfoW(0xEu, 0, &pvParam, 0);
  return pvParam;
}

//----- (0040A76C) --------------------------------------------------------
DWORD __stdcall sub_40A76C(HMENU hMenu)
{
  int v1; // ebx
  int v2; // eax

  v1 = sub_40A750();
  if ( dword_42E40C != v1 && v1 < 2000 )
  {
    if ( dword_42E40C > 5 )
      CheckMenuItem(hMenu, dword_42E40C + 5000, 0);
    dword_42E40C = v1;
    CheckMenuItem(hMenu, v1 + 5000, 8u);
  }
  CheckMenuItem(hMenu, 0x800Fu, dword_431CA0 != 0 ? 8 : 0);
  CheckMenuItem(hMenu, 0x8010u, dword_431D28 != 0 ? 8 : 0);
  CheckMenuItem(hMenu, 0x8012u, dword_431C18 != 0 ? 8 : 0);
  EnableMenuItem(hMenu, 0x8011u, dword_431C18 != 1 ? 3 : 0);
  EnableMenuItem(hMenu, 0x8169u, dword_431C18 != 1 ? 3 : 0);
  CheckMenuItem(hMenu, 0x8175u, dword_431970 != 0 ? 8 : 0);
  v2 = sub_419012(lpValueName, 0);
  CheckMenuItem(hMenu, 0x8176u, v2 != 0 ? 8 : 0);
  CheckMenuItem(hMenu, 0x8177u, dword_4318E8 != 0 ? 8 : 0);
  return CheckMenuItem(hMenu, 0x8178u, dword_431860 != 0 ? 8 : 0);
}
// 42E40C: using guessed type int dword_42E40C;

//----- (0040A8A3) --------------------------------------------------------
int __thiscall sub_40A8A3(HWND *this, unsigned int a2, unsigned int a3, int a4)
{
  unsigned int v4; // esi
  int result; // eax
  bool v7; // zf

  v4 = a2;
  if ( a2 != Msg )
  {
    if ( a2 == 32868 )
    {
      if ( a4 != 513 && a4 != 516 )
        return CWnd::WindowProc((CWnd *)this, v4, a3, a4);
      sub_40AA13(this, a4);
    }
    if ( a2 == 274 )
    {
      if ( !sub_408972() || !dword_433158 )
        return CWnd::WindowProc((CWnd *)this, v4, a3, a4);
      if ( a3 == 61760 || a3 == 61808 || (a3 & 0xFFF0) == 61760 )
        return 1;
      v7 = (a3 & 0xFFF0) == 61808;
LABEL_22:
      if ( v7 )
        return 1;
      return CWnd::WindowProc((CWnd *)this, v4, a3, a4);
    }
    if ( a2 != 17 )
    {
      if ( a2 == 536 )
      {
        if ( a3 == 18 || a3 == 6 || a3 == 7 )
        {
          KillTimer(this[8], 0xBDBu);
          SetTimer(this[8], 0xBDBu, 0x64u, 0);
        }
        if ( sub_408972() )
          return 1112363332;
        v4 = a2;
      }
      return CWnd::WindowProc((CWnd *)this, v4, a3, a4);
    }
    if ( sub_408972() )
    {
      if ( dword_432F38 )
        return 0;
      if ( a4 == 0x80000000 )
      {
        v7 = dword_433048 == 0;
        goto LABEL_22;
      }
      PostQuitMessage(279620);
    }
    return 1;
  }
  ShowWindow(this[8], 5);
  sub_415D63(this[8]);
  result = Msg;
  if ( Msg == a3 && Msg == a4 )
  {
    PostMessageW(this[8], 0x111u, 0xA3u, 0);
    return Msg;
  }
  return result;
}
// 432F38: using guessed type int dword_432F38;
// 433048: using guessed type int dword_433048;
// 433158: using guessed type int dword_433158;

//----- (0040AA13) --------------------------------------------------------
void __thiscall sub_40AA13(HWND *this, int a2)
{
  if ( a2 == 516 )
  {
    GetForegroundWindow();
    sub_415D63(this[8]);
    sub_40AAA6(this);
  }
  else if ( a2 == 513 )
  {
    if ( IsWindowVisible(this[8]) )
    {
      ShowWindow(this[8], 0);
    }
    else
    {
      ShowWindow(this[8], 5);
      SetWindowPos(this[8], HWND_MESSAGE|0x2, 0, 0, 0, 0, 3u);
      SetWindowPos(this[8], (HWND)0xFFFFFFFE, 0, 0, 0, 0, 3u);
      SetWindowPos(this[8], 0, 0, 0, 0, 0, 3u);
      sub_415D63(this[8]);
    }
  }
}

//----- (0040AAA6) --------------------------------------------------------
int __thiscall sub_40AAA6(HWND *this)
{
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // eax
  unsigned __int16 *v4; // eax
  CString *v5; // eax
  LPCWSTR *v6; // eax
  HMENU v7; // edi
  unsigned __int16 *v8; // eax
  LPCWSTR *v9; // eax
  int result; // eax
  UINT v11; // esi
  struct tagPOINT Point; // [esp+Ch] [ebp-28h] BYREF
  char v13[4]; // [esp+14h] [ebp-20h] BYREF
  char v14[4]; // [esp+18h] [ebp-1Ch] BYREF
  char v15[4]; // [esp+1Ch] [ebp-18h] BYREF
  UINT uPosition; // [esp+20h] [ebp-14h]
  HMENU hMenu; // [esp+24h] [ebp-10h] BYREF
  int v18; // [esp+30h] [ebp-4h]

  GetCursorPos(&Point);
  SetForegroundWindow(this[8]);
  SetActiveWindow(this[8]);
  hMenu = GetMenu(this[8]);
  if ( !hMenu )
    hMenu = ::hMenu;
  uPosition = GetMenuItemCount(hMenu);
  AppendMenuW(hMenu, 0xC00u, 0, 0);
  v2 = sub_414BE2(59);
  AppendMenuW(hMenu, 0, 0x8170u, v2);
  AppendMenuW(hMenu, 0xC00u, 0, 0);
  v3 = sub_414BE2(46);
  AppendMenuW(hMenu, 0, 0xA3u, v3);
  CString::CString((CString *)v15, asc_42E7EC);
  v18 = 0;
  v4 = sub_414BE2(29);
  v5 = CString::CString((CString *)v13, v4);
  LOBYTE(v18) = 1;
  v6 = (LPCWSTR *)operator+(v14, v5, v15);
  AppendMenuW(hMenu, dword_4330D0 != 0 ? 8 : 0, 0x8171u, *v6);
  CString::~CString((CString *)v14);
  LOBYTE(v18) = 0;
  CString::~CString((CString *)v13);
  v18 = -1;
  CString::~CString((CString *)v15);
  v7 = hMenu;
  AppendMenuW(hMenu, 0xC00u, 0, 0);
  v8 = sub_414BE2(29);
  v9 = (LPCWSTR *)CString::CString((CString *)&hMenu, v8);
  AppendMenuW(v7, dword_4330D0 != 0 ? 8 : 0, 0x8179u, *v9);
  CString::~CString((CString *)&hMenu);
  sub_41806A((int)dword_4327F8, ::hMenu, Point.x, Point.y);
  result = GetMenuItemCount(v7);
  if ( (int)uPosition < result )
  {
    v11 = result - uPosition;
    do
    {
      result = DeleteMenu(v7, uPosition, 0x400u);
      --v11;
    }
    while ( v11 );
  }
  return result;
}
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 4327F8: using guessed type _DWORD dword_4327F8[16];
// 4330D0: using guessed type int dword_4330D0;
// 40AAA6: using guessed type char var_18[4];
// 40AAA6: using guessed type char var_20[4];
// 40AAA6: using guessed type char var_1C[4];

//----- (0040AC29) --------------------------------------------------------
int sub_40AC29()
{
  int v0; // eax
  int i; // esi
  HICON v2; // eax
  HICON v3; // eax
  HICON v4; // eax
  HICON v5; // eax
  HICON v6; // ebx
  HICON v7; // ebx
  HICON v8; // eax
  HICON v9; // eax
  HICON v10; // eax
  int SystemMetrics; // [esp-8h] [ebp-1058h]
  WCHAR String1[1024]; // [esp+Ch] [ebp-1044h] BYREF
  WCHAR Buffer[1024]; // [esp+80Ch] [ebp-844h] BYREF
  int v15[5]; // [esp+100Ch] [ebp-44h]
  HICON hicon; // [esp+1020h] [ebp-30h]
  HICON v17; // [esp+1024h] [ebp-2Ch]
  HICON v18; // [esp+1028h] [ebp-28h]
  HICON v19; // [esp+102Ch] [ebp-24h]
  HICON phiconSmall; // [esp+1034h] [ebp-1Ch] BYREF
  LPCWSTR lpszFile; // [esp+1038h] [ebp-18h] BYREF
  HICON phiconLarge; // [esp+103Ch] [ebp-14h] BYREF
  HICON ImageW; // [esp+1040h] [ebp-10h]
  int v24; // [esp+104Ch] [ebp-4h]

  SystemMetrics = GetSystemMetrics(12);
  v0 = GetSystemMetrics(11);
  phiconLarge = (HICON)LoadImageW(hInstance, (LPCWSTR)0x80, 1u, v0, SystemMetrics, 0);
  v15[0] = (int)aTaskmgrExe;
  v15[1] = (int)aDeskCpl;
  v15[2] = (int)aMystifyScr;
  v15[3] = (int)aPowercfgCpl_0;
  v15[4] = 0;
  GetSystemDirectoryW(Buffer, 0x400u);
  lstrcatW(String1, Buffer);
  for ( i = 0; i < 4; ++i )
  {
    CString::CString((CString *)&lpszFile, Buffer);
    v24 = 0;
    CString::operator+=(&lpszFile, asc_42E7F4);
    CString::operator+=(&lpszFile, v15[i]);
    phiconSmall = 0;
    ExtractIconExW(lpszFile, 0, &phiconLarge, &phiconSmall, 1u);
    v24 = -1;
    *(HICON *)((char *)&hicon + i * 4) = phiconSmall;
    CString::~CString((CString *)&lpszFile);
  }
  sub_41677C((int)dword_4327F8, hicon, 4006);
  sub_41677C((int)dword_4327F8, v19, 4002);
  phiconLarge = sub_416384(0x10u, 1);
  sub_41677C((int)dword_4327F8, phiconLarge, 4007);
  sub_41677C((int)dword_4327F8, v17, 4003);
  sub_41677C((int)dword_4327F8, v17, 4005);
  sub_41677C((int)dword_4327F8, v18, 4000);
  phiconLarge = sub_416384(0x117u, 1);
  sub_41677C((int)dword_4327F8, phiconLarge, 4004);
  phiconLarge = sub_416384(0x112u, 1);
  sub_41677C((int)dword_4327F8, phiconLarge, 4045);
  phiconLarge = sub_416384(0x18u, 1);
  sub_41677C((int)dword_4327F8, phiconLarge, 4046);
  v2 = sub_416384(0x416Bu, 1);
  sub_41677C((int)dword_4327F8, v2, 33131);
  v3 = sub_416384(0x4163u, 1);
  sub_41677C((int)dword_4327F8, v3, 33130);
  ImageW = (HICON)LoadImageW(hInstance, (LPCWSTR)0xEF, 1u, 32, 32, 0);
  sub_41677C((int)dword_4327F8, ImageW, 32903);
  sub_41677C((int)dword_4327F8, ImageW, 32909);
  ImageW = (HICON)LoadImageW(hInstance, (LPCWSTR)0x9E, 1u, 32, 32, 0);
  sub_41677C((int)dword_4327F8, ImageW, 32900);
  sub_41677C((int)dword_4327F8, ImageW, 32906);
  ImageW = (HICON)LoadImageW(hInstance, (LPCWSTR)0x1F41, 1u, 32, 32, 0);
  sub_41677C((int)dword_4327F8, ImageW, 32901);
  sub_41677C((int)dword_4327F8, ImageW, 32907);
  ImageW = (HICON)LoadImageW(hInstance, (LPCWSTR)0xEE, 1u, 32, 32, 0);
  sub_41677C((int)dword_4327F8, ImageW, 32902);
  sub_41677C((int)dword_4327F8, ImageW, 32908);
  ImageW = (HICON)LoadImageW(hInstance, (LPCWSTR)0xF0, 1u, 32, 32, 0);
  sub_41677C((int)dword_4327F8, ImageW, 32904);
  sub_41677C((int)dword_4327F8, ImageW, 32910);
  v4 = (HICON)LoadImageW(hInstance, (LPCWSTR)0xED, 1u, 32, 32, 0);
  sub_41677C((int)dword_4327F8, v4, 32911);
  v5 = sub_416384(0x1Cu, 1);
  sub_41677C((int)dword_4327F8, v5, 163);
  v6 = sub_416384(0xEu, 1);
  sub_41677C((int)dword_4327F8, v6, 33133);
  sub_41677C((int)dword_4327F8, v6, 33135);
  sub_41677C((int)dword_4327F8, v6, 33147);
  sub_41677C((int)dword_4327F8, v6, 33134);
  sub_41677C((int)dword_4327F8, v6, 33129);
  v7 = sub_416384(4u, 0);
  sub_41677C((int)dword_4327F8, v7, 33126);
  sub_41677C((int)dword_4327F8, v7, 33127);
  v8 = sub_416384(0x97u, 1);
  sub_41677C((int)dword_4327F8, v8, 33128);
  v9 = sub_416384(0x18u, 1);
  sub_41677C((int)dword_4327F8, v9, 33132);
  v10 = sub_416384(0x27u, 1);
  return sub_41677C((int)dword_4327F8, v10, 4008);
}
// 41A200: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 42E784: using guessed type wchar_t aTaskmgrExe[12];
// 42E7F4: using guessed type wchar_t asc_42E7F4[3];
// 42E7FC: using guessed type wchar_t aPowercfgCpl_0[13];
// 42E818: using guessed type wchar_t aMystifyScr[12];
// 42E830: using guessed type wchar_t aDeskCpl[9];
// 4327F8: using guessed type _DWORD dword_4327F8[16];
// 40AC29: using guessed type WCHAR String1[1024];

//----- (0040B019) --------------------------------------------------------
int __thiscall sub_40B019(void *this, HWND hWnd)
{
  int v2; // ebx
  int v3; // eax
  LONG *v4; // eax
  int result; // eax
  int v6; // esi
  int v7; // [esp-4h] [ebp-54h]
  int v8[4]; // [esp+Ch] [ebp-44h] BYREF
  LONG v9; // [esp+1Ch] [ebp-34h]
  LONG v10; // [esp+20h] [ebp-30h]
  LONG v11; // [esp+24h] [ebp-2Ch]
  LONG v12; // [esp+28h] [ebp-28h]
  struct tagPOINT Point; // [esp+2Ch] [ebp-24h] BYREF
  int v14; // [esp+34h] [ebp-1Ch]
  int v15; // [esp+38h] [ebp-18h]
  LPCWSTR lpNewItem; // [esp+3Ch] [ebp-14h] BYREF
  HMENU hMenu; // [esp+40h] [ebp-10h]
  int v18; // [esp+4Ch] [ebp-4h]
  int hWnda; // [esp+58h] [ebp+8h]

  v14 = (int)this;
  v15 = 0;
  hMenu = CreatePopupMenu();
  if ( dword_4453D4 > 0 )
  {
    do
    {
      if ( lstrlenW((LPCWSTR)dword_4346D0[v15]) <= 5 )
      {
        v2 = v15;
      }
      else
      {
        CString::CString((CString *)&lpNewItem);
        v7 = dword_433ED0[v15];
        v18 = 0;
        CString::Format((CString *)&lpNewItem, aSD_2, dword_4346D0[v15], v7);
        v2 = v15;
        CString::Format((CString *)&lpNewItem, aDSD, v15, dword_4346D0[v15], dword_433ED0[v15]);
        if ( dword_444FD0 == v15 )
          v3 = 8;
        else
          v3 = 0;
        AppendMenuW(hMenu, v3 | 0x400, v15 + 10, lpNewItem);
        v18 = -1;
        CString::~CString((CString *)&lpNewItem);
      }
      v15 = v2 + 1;
    }
    while ( v2 + 1 < dword_4453D4 );
  }
  AppendMenuW(hMenu, 0xC00u, 0, 0);
  AppendMenuW(hMenu, 0x400u, 0x3E8u, aTranslate);
  AppendMenuW(hMenu, 0x400u, 0x3E9u, aLoadFromFileUn);
  v4 = sub_415D27(v8, dword_432844, 0x85u);
  v9 = *v4;
  v10 = v4[1];
  v11 = v4[2];
  v12 = v4[3];
  Point.x = v9;
  Point.y = v12;
  ClientToScreen(dword_432844, &Point);
  SendMessageW(dword_432844, 0x403u, 0x85u, 1);
  hWnda = TrackPopupMenu(hMenu, 0x100u, Point.x, Point.y, 0, hWnd, 0);
  SendMessageW(dword_432844, 0x403u, 0x85u, 0);
  result = hWnda;
  if ( hWnda )
  {
    if ( hWnda >= 10 && hWnda <= 50 )
    {
      dword_444FD0 = hWnda - 10;
LABEL_17:
      v6 = v14;
      sub_4096DE(v14);
      RedrawWindow(*(HWND *)(v6 + 5816), 0, 0, 0x105u);
      return sub_4141BE(aLng, dword_444FD0);
    }
    if ( hWnda == 1000 )
    {
      sub_414C59();
    }
    else if ( hWnda == 1001 )
    {
      sub_4152EF();
      goto LABEL_17;
    }
    return sub_4141BE(aLng, dword_444FD0);
  }
  return result;
}
// 433ED0: using guessed type int dword_433ED0[256];
// 4346D0: using guessed type int dword_4346D0[];
// 4453D4: using guessed type int dword_4453D4;
// 40B019: using guessed type int var_44[4];

//----- (0040B219) --------------------------------------------------------
void __thiscall sub_40B219(CWnd *this)
{
  unsigned __int16 *v2; // esi
  unsigned __int16 *v3; // eax
  char v4[4]; // [esp+Ch] [ebp-14h] BYREF
  unsigned __int16 *v5; // [esp+10h] [ebp-10h] BYREF
  int v6; // [esp+1Ch] [ebp-4h]

  CString::CString((CString *)&v5, byte_431514);
  v6 = 0;
  CString::CString((CString *)v4, aBlockStandby1);
  LOBYTE(v6) = 1;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aBlockShutdown0);
  LOBYTE(v6) = 2;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aBlockLogoff1);
  LOBYTE(v6) = 3;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aBlockScreensav);
  LOBYTE(v6) = 4;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aEnable1);
  LOBYTE(v6) = 5;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aUseTimer1);
  LOBYTE(v6) = 6;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aSetTimer10);
  LOBYTE(v6) = 7;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, asc_42E970);
  LOBYTE(v6) = 8;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aTimerInMin);
  LOBYTE(v6) = 9;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, asc_42E970);
  LOBYTE(v6) = 10;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aExit);
  LOBYTE(v6) = 11;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aHide_0);
  LOBYTE(v6) = 12;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, asc_42E970);
  LOBYTE(v6) = 13;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aPleaseSleepMod_0);
  LOBYTE(v6) = 14;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aComputerModeSl_1);
  LOBYTE(v6) = 15;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aMonitorModeSle_1);
  LOBYTE(v6) = 16;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, asc_42E970);
  LOBYTE(v6) = 17;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aUpcomingSlepMe_0);
  LOBYTE(v6) = 18;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, aUpcomingSlepMe_1);
  LOBYTE(v6) = 19;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  CString::CString((CString *)v4, asc_42E970);
  LOBYTE(v6) = 20;
  CString::operator+=(&v5, v4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)v4);
  v2 = v5;
  v3 = sub_414BE2(71);
  CWnd::MessageBoxW(this, v2, v3, 0);
  v6 = -1;
  CString::~CString((CString *)&v5);
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 40B219: using guessed type char var_14[4];

//----- (0040B57D) --------------------------------------------------------
void sub_40B57D()
{
  struct AFX_MODULE_STATE *ModuleState; // eax
  const WCHAR *Buffer; // eax
  int v2; // ecx
  int v3; // edi
  int *v4; // esi
  const wchar_t *v5; // eax
  wchar_t *v6; // eax
  _DWORD v7[5]; // [esp-8h] [ebp-C0h] BYREF
  int v8[34]; // [esp+Ch] [ebp-ACh] BYREF
  char v9[4]; // [esp+94h] [ebp-24h] BYREF
  wchar_t *SubStr; // [esp+98h] [ebp-20h]
  char v11[4]; // [esp+9Ch] [ebp-1Ch] BYREF
  int v12; // [esp+A0h] [ebp-18h] BYREF
  int v13; // [esp+A4h] [ebp-14h] BYREF
  char v14[4]; // [esp+A8h] [ebp-10h] BYREF
  int v15; // [esp+B4h] [ebp-4h]

  ModuleState = AfxGetModuleState();
  CString::CString((CString *)v14, *(const unsigned __int16 **)(*((_DWORD *)ModuleState + 1) + 116));
  v15 = 0;
  CString::CString((CString *)&v12, (const struct CString *)v14);
  LOBYTE(v15) = 1;
  if ( *(int *)(v12 - 8) >= 3 )
  {
    Buffer = CString::GetBuffer((CString *)&v12, 0);
    sub_406043(dword_4301C0, Buffer, asc_42EA0C);
    if ( sub_403BBA(dword_4301C0, aBg_0, 1) )
      dword_432CF0 = 1;
    if ( sub_403BBA(dword_4301C0, aHide, 1) )
      dword_432CF4 = 1;
  }
  CString::CString((CString *)v9);
  v7[1] = 0;
  v7[0] = v2;
  SubStr = (wchar_t *)v7;
  LOBYTE(v15) = 2;
  CString::CString((CString *)v7, (const struct CString *)v14);
  sub_40B752((int)v9);
  v8[0] = (int)&dword_431F48;
  v8[1] = (int)&lParam;
  v8[2] = (int)&dword_430D80;
  v8[3] = (int)&dword_430B60;
  memset(&v8[4], 0, 120);
  v3 = 0;
  CString::CString((CString *)v11, (const struct CString *)v14);
  v4 = (int *)v8[0];
  LOBYTE(v15) = 3;
  while ( v4 )
  {
    CString::CString((CString *)&v13);
    LOBYTE(v15) = 4;
    CString::Format((CString *)&v13, aS_2, v4 + 1);
    SubStr = CString::GetBuffer((CString *)&v13, 0);
    v5 = CString::GetBuffer((CString *)v11, 0);
    v6 = wcsstr(v5, SubStr);
    if ( v6 )
    {
      *v4 = wtoi(&v6[*(_DWORD *)(v13 - 8)]);
      if ( !v3 )
        sub_4089F5(dword_431F48);
    }
    ++v3;
    LOBYTE(v15) = 3;
    CString::~CString((CString *)&v13);
    v4 = (int *)v8[v3];
  }
  LOBYTE(v15) = 2;
  CString::~CString((CString *)v11);
  LOBYTE(v15) = 1;
  CString::~CString((CString *)v9);
  LOBYTE(v15) = 0;
  CString::~CString((CString *)&v12);
  v15 = -1;
  CString::~CString((CString *)v14);
}
// 40B618: variable 'v2' is possibly undefined
// 4301C0: using guessed type _DWORD dword_4301C0[514];
// 430D80: using guessed type int dword_430D80;
// 432CF0: using guessed type int dword_432CF0;
// 432CF4: using guessed type int dword_432CF4;
// 40B57D: using guessed type char var_10[4];
// 40B57D: using guessed type char var_24[4];
// 40B57D: using guessed type char var_1C[4];

//----- (0040B752) --------------------------------------------------------
void sub_40B752(int a1, ...)
{
  va_list va; // [esp+8h] [ebp+8h] BYREF

  va_start(va, a1);
  CString::~CString((CString *)va);
}

//----- (0040B75B) --------------------------------------------------------
int __thiscall sub_40B75B(CWnd *this)
{
  unsigned __int16 *v2; // eax
  int result; // eax
  _DWORD *v4; // ecx
  CDialog *v5; // esi

  v2 = sub_414BE2(114);
  result = CWnd::MessageBoxW(this, v2, 0, 0x40023u);
  if ( result == 6 )
  {
    sub_418FAF(lpValueName, 0);
    sub_405899();
    v4 = operator new(0xACu);
    if ( v4 )
      v5 = (CDialog *)sub_404411(v4, 0);
    else
      v5 = 0;
    *((_DWORD *)v5 + 24) = 1;
    CDialog::Create(v5, (const unsigned __int16 *)0x8A, 0);
    return CWnd::ShowWindow(v5, 3);
  }
  return result;
}

//----- (0040B7EC) --------------------------------------------------------
void __thiscall sub_40B7EC(int this)
{
  void *v2; // esi
  int v3; // [esp+4h] [ebp-4h] BYREF

  sub_40B84D((_DWORD *)this, &v3, **(_DWORD ***)(this + 4), *(_DWORD **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 12) = 0;
  v2 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  if ( !--dword_432D10 )
  {
    v2 = (void *)dword_432D0C;
    dword_432D0C = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v2 )
    operator delete(v2);
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432D0C: using guessed type int dword_432D0C;
// 432D10: using guessed type int dword_432D10;

//----- (0040B84D) --------------------------------------------------------
_DWORD *__thiscall sub_40B84D(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v5; // ecx
  _DWORD *v6; // eax
  void ***v7; // ebx
  int v8; // eax
  void ***i; // edi
  _DWORD *v10; // eax
  _DWORD *result; // eax
  _DWORD *v12; // edi
  int v13; // [esp+8h] [ebp-4h] BYREF

  v5 = a3;
  if ( this[3] && (v6 = (_DWORD *)this[1], a3 == (_DWORD *)*v6) && a4 == v6 )
  {
    v7 = (void ***)v6[1];
    v8 = dword_432D0C;
    for ( i = v7; i != (void ***)dword_432D0C; v7 = i )
    {
      sub_40BB7B(i[2]);
      i = (void ***)*i;
      operator delete(v7);
      v8 = dword_432D0C;
    }
    *(_DWORD *)(this[1] + 4) = v8;
    v10 = (_DWORD *)this[1];
    this[3] = 0;
    *v10 = v10;
    *(_DWORD *)(this[1] + 8) = this[1];
    result = a2;
    *a2 = *(_DWORD *)this[1];
  }
  else
  {
    while ( v5 != a4 )
    {
      v12 = v5;
      sub_40BC3B(&a3);
      sub_40B8E4(this, &v13, v12);
      v5 = a3;
    }
    result = a2;
    *a2 = v5;
  }
  return result;
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040B8E4) --------------------------------------------------------
_DWORD *__thiscall sub_40B8E4(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  _DWORD *v4; // esi
  _DWORD *v5; // ebx
  bool v6; // zf
  _DWORD *v7; // ecx
  _DWORD *v8; // eax
  _DWORD *v9; // edx
  _DWORD *v10; // ebx
  int v11; // ecx
  _DWORD *v12; // ecx
  int v13; // ecx
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  _DWORD *v17; // ecx
  _DWORD *v18; // edx
  _DWORD *v19; // edx
  _DWORD *v20; // ebx
  int v21; // edx
  _DWORD *v22; // ebx
  _DWORD *v23; // edi
  int v24; // eax
  _DWORD *v25; // eax
  _DWORD *result; // eax
  char v27[4]; // [esp+Ch] [ebp-1Ch] BYREF
  _DWORD *v28; // [esp+10h] [ebp-18h]
  void *v29; // [esp+14h] [ebp-14h]
  _DWORD *v30; // [esp+18h] [ebp-10h]
  int v31; // [esp+24h] [ebp-4h]

  v30 = this;
  v3 = a3;
  sub_40BC3B(&a3);
  v4 = (_DWORD *)*v3;
  v5 = v3 + 2;
  v6 = *v3 == dword_432D0C;
  v29 = v3;
  v28 = v3 + 2;
  if ( v6 )
  {
    v4 = (_DWORD *)*v5;
  }
  else
  {
    v7 = (_DWORD *)*v5;
    if ( *v5 != dword_432D0C )
    {
      while ( *v7 != dword_432D0C )
        v7 = (_DWORD *)*v7;
      v4 = (_DWORD *)v7[2];
      v29 = v7;
      v28 = v7 + 2;
    }
  }
  std::_Lockit::_Lockit((std::_Lockit *)v27);
  v8 = v29;
  v31 = 0;
  if ( v29 == v3 )
  {
    v15 = (int)v30;
    v4[1] = *((_DWORD *)v29 + 1);
    v16 = *(_DWORD *)(v15 + 4);
    if ( *(_DWORD **)(v16 + 4) == v3 )
    {
      *(_DWORD *)(v16 + 4) = v4;
    }
    else
    {
      v17 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v17 == v3 )
        *v17 = v4;
      else
        v17[2] = v4;
    }
    v18 = *(_DWORD **)(v15 + 4);
    v28 = v18;
    if ( (_DWORD *)*v18 == v3 )
    {
      if ( *v5 == dword_432D0C )
      {
        *v18 = v3[1];
      }
      else
      {
        v19 = (_DWORD *)*v4;
        v20 = v4;
        while ( v19 != (_DWORD *)dword_432D0C )
        {
          v20 = v19;
          v19 = (_DWORD *)*v19;
        }
        *v28 = v20;
      }
    }
    v21 = v30[1];
    if ( *(_DWORD **)(v21 + 8) == v3 )
    {
      if ( *v3 == dword_432D0C )
      {
        *(_DWORD *)(v21 + 8) = v3[1];
      }
      else
      {
        v22 = (_DWORD *)v4[2];
        v23 = v4;
        while ( v22 != (_DWORD *)dword_432D0C )
        {
          v23 = v22;
          v22 = (_DWORD *)v22[2];
        }
        *(_DWORD *)(v21 + 8) = v23;
      }
    }
    v10 = v30;
  }
  else
  {
    *(_DWORD *)(*v3 + 4) = v29;
    *v8 = *v3;
    if ( v8 == (_DWORD *)*v5 )
    {
      v4[1] = v8;
    }
    else
    {
      v9 = v28;
      v4[1] = v8[1];
      *(_DWORD *)v8[1] = v4;
      *v9 = *v5;
      *(_DWORD *)(*v5 + 4) = v8;
    }
    v10 = v30;
    v11 = v30[1];
    if ( *(_DWORD **)(v11 + 4) == v3 )
    {
      *(_DWORD *)(v11 + 4) = v8;
    }
    else
    {
      v12 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v12 == v3 )
        *v12 = v8;
      else
        v12[2] = v8;
    }
    v13 = v3[1];
    v29 = v3;
    v8[1] = v13;
    v14 = v8[8];
    v8[8] = v3[8];
    v3[8] = v14;
    v8 = v3;
  }
  if ( v8[8] == 1 )
  {
    while ( v4 != *(_DWORD **)(v10[1] + 4) && v4[8] == 1 )
    {
      v24 = v4[1];
      if ( v4 == *(_DWORD **)v24 )
      {
        v25 = *(_DWORD **)(v24 + 8);
        if ( !v25[8] )
        {
          v25[8] = 1;
          *(_DWORD *)(v4[1] + 32) = 0;
          sub_40BBB1(v10, v4[1]);
          v25 = *(_DWORD **)(v4[1] + 8);
        }
        if ( *(_DWORD *)(*v25 + 32) != 1 || *(_DWORD *)(v25[2] + 32) != 1 )
        {
          if ( *(_DWORD *)(v25[2] + 32) == 1 )
          {
            *(_DWORD *)(*v25 + 32) = 1;
            v25[8] = 0;
            sub_40BBF5(v10, v25);
            v25 = *(_DWORD **)(v4[1] + 8);
          }
          v25[8] = *(_DWORD *)(v4[1] + 32);
          *(_DWORD *)(v4[1] + 32) = 1;
          *(_DWORD *)(v25[2] + 32) = 1;
          sub_40BBB1(v10, v4[1]);
          break;
        }
      }
      else
      {
        v25 = *(_DWORD **)v24;
        if ( !v25[8] )
        {
          v25[8] = 1;
          *(_DWORD *)(v4[1] + 32) = 0;
          sub_40BBF5(v10, (_DWORD *)v4[1]);
          v25 = *(_DWORD **)v4[1];
        }
        if ( *(_DWORD *)(v25[2] + 32) != 1 || *(_DWORD *)(*v25 + 32) != 1 )
        {
          if ( *(_DWORD *)(*v25 + 32) == 1 )
          {
            *(_DWORD *)(v25[2] + 32) = 1;
            v25[8] = 0;
            sub_40BBB1(v10, (int)v25);
            v25 = *(_DWORD **)v4[1];
          }
          v25[8] = *(_DWORD *)(v4[1] + 32);
          *(_DWORD *)(v4[1] + 32) = 1;
          *(_DWORD *)(*v25 + 32) = 1;
          sub_40BBF5(v10, (_DWORD *)v4[1]);
          break;
        }
      }
      v25[8] = 0;
      v4 = (_DWORD *)v4[1];
    }
    v4[8] = 1;
  }
  v31 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)v27);
  operator delete(v29);
  result = a2;
  --v10[3];
  *a2 = a3;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432D0C: using guessed type int dword_432D0C;
// 40B8E4: using guessed type char var_1C[4];

//----- (0040BB7B) --------------------------------------------------------
void __stdcall sub_40BB7B(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; i != (void **)dword_432D0C; v1 = i )
  {
    sub_40BB7B(i[2]);
    i = (void **)*i;
    operator delete(v1);
  }
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040BBB1) --------------------------------------------------------
_DWORD *__thiscall sub_40BBB1(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( *result != dword_432D0C )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = this[1];
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
  }
  *result = a2;
  *(_DWORD *)(a2 + 4) = result;
  return result;
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040BBF5) --------------------------------------------------------
int __thiscall sub_40BBF5(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( v3 != dword_432D0C )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = this[1];
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
  }
  *(_DWORD *)(result + 8) = a2;
  a2[1] = result;
  return result;
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040BC3B) --------------------------------------------------------
_DWORD *__thiscall sub_40BC3B(void *this)
{
  _DWORD *result; // eax

  result = *(_DWORD **)(*(_DWORD *)this + 8);
  if ( result != (_DWORD *)dword_432D0C )
  {
    while ( *result != dword_432D0C )
      result = (_DWORD *)*result;
LABEL_8:
    *(_DWORD *)this = result;
    return result;
  }
  for ( result = *(_DWORD **)(*(_DWORD *)this + 4); *(_DWORD *)this == result[2]; result = (_DWORD *)result[1] )
    *(_DWORD *)this = result;
  if ( *(_DWORD **)(*(_DWORD *)this + 8) != result )
    goto LABEL_8;
  return result;
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040BC71) --------------------------------------------------------
CDialog *__thiscall sub_40BC71(CDialog *this, struct CWnd *a2)
{
  CDialog::CDialog(this, 0x88u, a2);
  *(_DWORD *)this = &off_41E570;
  return this;
}
// 41E570: using guessed type struct CRuntimeClass *(__thiscall *off_41E570)(CDialog *__hidden this);

//----- (0040BC8E) --------------------------------------------------------
CDialog *__thiscall sub_40BC8E(CDialog *this, char a2)
{
  CDialog::~CDialog(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040BCAD) --------------------------------------------------------
int (**sub_40BCAD())()
{
  return &off_41E550;
}
// 41E550: using guessed type int (*off_41E550)();

//----- (0040BCB3) --------------------------------------------------------
int __thiscall sub_40BCB3(HWND *this)
{
  HINSTANCE ResourceHandle; // eax
  int v3; // eax
  DWORD dwMajorVersion; // [esp-Ch] [ebp-30h]
  DWORD dwMinorVersion; // [esp-8h] [ebp-2Ch]
  DWORD dwBuildNumber; // [esp-4h] [ebp-28h]
  HICON lParam; // [esp+Ch] [ebp-18h]
  char v9[4]; // [esp+10h] [ebp-14h] BYREF
  LPCWSTR lpString; // [esp+14h] [ebp-10h] BYREF
  int v11; // [esp+20h] [ebp-4h]

  CDialog::OnInitDialog((CDialog *)this);
  AfxGetModuleState();
  ResourceHandle = AfxFindResourceHandle((const unsigned __int16 *)0x80, (const unsigned __int16 *)0xE);
  lParam = LoadIconW(ResourceHandle, (LPCWSTR)0x80);
  SendMessageW(this[8], 0x80u, 1u, (LPARAM)lParam);
  SendMessageW(this[8], 0x80u, 0, (LPARAM)lParam);
  CString::CString((CString *)&lpString);
  dwBuildNumber = VersionInformation.dwBuildNumber;
  v11 = 0;
  dwMinorVersion = VersionInformation.dwMinorVersion;
  dwMajorVersion = VersionInformation.dwMajorVersion;
  v3 = sub_414BAC(19);
  CString::Format((CString *)&lpString, aSOsDDD, v3, dwMajorVersion, dwMinorVersion, dwBuildNumber);
  if ( dword_433CBC )
  {
    CString::CString((CString *)v9, aPortable_0);
    LOBYTE(v11) = 1;
    CString::operator+=(&lpString, v9);
    LOBYTE(v11) = 0;
    CString::~CString((CString *)v9);
  }
  SetWindowTextW(this[8], lpString);
  v11 = -1;
  CString::~CString((CString *)&lpString);
  return 1;
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 433CBC: using guessed type int dword_433CBC;
// 40BCB3: using guessed type char var_14[4];

//----- (0040BD95) --------------------------------------------------------
void __thiscall sub_40BD95(int this, int a2)
{
  int v3; // ecx
  int v4; // eax

  *(double *)(a2 + 16) = *(double *)(this + 1264);
  *(double *)(a2 + 8) = *(double *)(this + 1256);
  *(_DWORD *)(a2 + 4) = *(_DWORD *)(this + 1252);
  v3 = *(_DWORD *)(this + 1352);
  if ( v3 )
    v4 = (*(_DWORD *)(this + 1356) - v3) >> 4;
  else
    v4 = 0;
  *(_DWORD *)(a2 + 32) = v4;
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 1312));
  *(_DWORD *)a2 = *(_DWORD *)(this + 1232);
  LeaveCriticalSection((LPCRITICAL_SECTION)(this + 1312));
}

//----- (0040BDF7) --------------------------------------------------------
int __thiscall sub_40BDF7(char *this, char *a2, const char *a3, unsigned int ThrdAddr)
{
  int v5; // ebx
  int i; // edi
  char **v7; // eax
  uintptr_t v8; // eax
  int v9; // eax
  int *v10; // eax
  char v12[16]; // [esp+Ch] [ebp-24h] BYREF
  int v13[2]; // [esp+1Ch] [ebp-14h] BYREF
  int v14; // [esp+2Ch] [ebp-4h]

  (*(void (__thiscall **)(char *, const char *, unsigned int))(*(_DWORD *)this + 4))(this, a3, ThrdAddr);
  v5 = *((_DWORD *)this + 339);
  for ( i = *((_DWORD *)this + 338); i != v5 && !(unsigned __int8)std::operator==(i); i += 16 )
    ;
  if ( i == *((_DWORD *)this + 339) )
  {
    v12[0] = HIBYTE(a3);
    std::string::_Tidy(v12, 0);
    std::string::assign(v12, a3, strlen(a3));
    v14 = 0;
    sub_40CBF4((_BYTE **)this + 337, v12);
    v14 = -1;
    std::string::_Tidy(v12, 1);
  }
  InterlockedIncrement((volatile LONG *)this + 313);
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 1288));
  v7 = (char **)operator new(8u);
  *v7 = this;
  v7[1] = a2;
  v8 = beginthreadex(0, 0, (_beginthreadex_proc_type)StartAddress, v7, 0, &ThrdAddr);
  if ( v8 )
  {
    v13[0] = v8;
    v9 = *((_DWORD *)this + 307);
    v13[1] = ThrdAddr;
    sub_40CC05((_DWORD *)this + 306, &a3, v9, v13);
  }
  else
  {
    v10 = errno();
    sub_40D045((int)this, aUmserverLog, aBeginthreadexF, aAddclient, *v10);
  }
  LeaveCriticalSection((LPCRITICAL_SECTION)(this + 1288));
  return 1;
}
// 41D460: using guessed type int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD);
// 41D464: using guessed type int __thiscall std::string::_Tidy(_DWORD, _DWORD);
// 41D468: using guessed type int __cdecl std::operator==(_DWORD);

//----- (0040BF31) --------------------------------------------------------
int __thiscall sub_40BF31(char *ArgList, int a2, int a3)
{
  HANDLE EventW; // eax
  uintptr_t v5; // eax
  uintptr_t v6; // eax
  int result; // eax
  int v8; // [esp-4h] [ebp-10h]
  int v9; // [esp-4h] [ebp-10h]

  if ( *((_DWORD *)ArgList + 336) )
    goto LABEL_2;
  *((_DWORD *)ArgList + 334) = a2;
  *((_DWORD *)ArgList + 335) = a3;
  InitializeCriticalSection((LPCRITICAL_SECTION)(ArgList + 1288));
  InitializeCriticalSection((LPCRITICAL_SECTION)(ArgList + 1312));
  sub_40C1B2((int)ArgList);
  EventW = CreateEventW(0, 0, 1, 0);
  *((_DWORD *)ArgList + 304) = EventW;
  ResetEvent(EventW);
  v5 = beginthreadex(0, 0, (_beginthreadex_proc_type)sub_40C2E0, ArgList, 0, (unsigned int *)ArgList + 300);
  *((_DWORD *)ArgList + 299) = v5;
  if ( !v5 )
  {
LABEL_2:
    v8 = *errno();
    sub_40D045((int)ArgList, aUmserverLog, aBeginthreadexF_0, aRun, v8);
    return 0;
  }
  if ( WaitForSingleObject(*((HANDLE *)ArgList + 304), 0x7530u) )
  {
    sub_40D045((int)ArgList, aUmserverLog, aUnableToGetRes, aRun, 30000);
LABEL_11:
    CloseHandle(*((HANDLE *)ArgList + 304));
    return 0;
  }
  ResetEvent(*((HANDLE *)ArgList + 304));
  v6 = beginthreadex(0, 0, (_beginthreadex_proc_type)sub_40CAEF, ArgList, 0, (unsigned int *)ArgList + 302);
  *((_DWORD *)ArgList + 301) = v6;
  if ( !v6 )
  {
    v9 = *errno();
    sub_40D045((int)ArgList, aUmserverLog, aBeginthreadexF_1, aRun, v9);
    return 0;
  }
  if ( WaitForSingleObject(*((HANDLE *)ArgList + 304), 0x7530u) )
  {
    sub_40D045((int)ArgList, aUmserverLog, aUnableToGetRes_0, aRun, 30000);
    goto LABEL_11;
  }
  CloseHandle(*((HANDLE *)ArgList + 304));
  result = 1;
  *((_DWORD *)ArgList + 336) = 1;
  return result;
}

//----- (0040C097) --------------------------------------------------------
int __thiscall sub_40C097(int this)
{
  int result; // eax
  int v3; // ebp
  DWORD v4; // eax
  int LastError; // eax
  int v6; // eax
  void *v7; // [esp-Ch] [ebp-1Ch]
  HANDLE Handles[2]; // [esp+8h] [ebp-8h] BYREF

  if ( !*(_DWORD *)(this + 1344) )
    return 0;
  v3 = 1;
  Handles[0] = *(HANDLE *)(this + 1196);
  v7 = *(void **)(this + 1212);
  Handles[1] = *(HANDLE *)(this + 1204);
  SetEvent(v7);
  v4 = WaitForMultipleObjects(2u, Handles, 1, 0x3E8u);
  if ( v4 == 258 || v4 == -1 )
  {
    sub_40D045(this, aUmserverLog, aWaitformultipl_0, aShutdown, 0);
    if ( !TerminateThread(*(HANDLE *)(this + 1196), 0x1234u) )
    {
      LastError = GetLastError();
      sub_40D045(this, aUmserverLog, aTerminatethrea_0, aShutdown, LastError);
    }
    if ( !TerminateThread(*(HANDLE *)(this + 1204), 0x1234u) )
    {
      v6 = GetLastError();
      sub_40D045(this, aUmserverLog, aTerminatethrea_1, aShutdown, v6);
    }
    v3 = 0;
  }
  CloseHandle(*(HANDLE *)(this + 1196));
  CloseHandle(*(HANDLE *)(this + 1204));
  while ( *(_DWORD *)(this + 1232) )
    Sleep(0x64u);
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 1288));
  DeleteCriticalSection((LPCRITICAL_SECTION)(this + 1312));
  result = v3;
  *(_DWORD *)(this + 1344) = 0;
  return result;
}

//----- (0040C1B2) --------------------------------------------------------
int __thiscall sub_40C1B2(int this)
{
  int result; // eax

  result = 0;
  *(double *)(this + 1272) = 0.0;
  *(_DWORD *)(this + 1248) = 0;
  *(_DWORD *)(this + 1252) = 0;
  *(double *)(this + 1256) = 0.0;
  *(_DWORD *)(this + 1280) = 0;
  *(double *)(this + 1264) = 0.0;
  return result;
}

//----- (0040C1DF) --------------------------------------------------------
void __thiscall sub_40C1DF(int this, HANDLE hEvent, SOCKET s, void *a4, int a5)
{
  _DWORD **v6; // eax
  _DWORD *i; // esi

  if ( hEvent )
    WSACloseEvent(hEvent);
  closesocket(s);
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 1288));
  operator delete(a4);
  LeaveCriticalSection((LPCRITICAL_SECTION)(this + 1288));
  v6 = *(_DWORD ***)(this + 1228);
  for ( i = *v6; i != v6; i = (_DWORD *)*i )
  {
    if ( i[3] == a5 )
    {
      if ( i != v6 )
      {
        EnterCriticalSection((LPCRITICAL_SECTION)(this + 1312));
        sub_40CC67((_DWORD *)(this + 1236), &s, *(_DWORD *)(this + 1240), i + 2);
        *(_DWORD *)i[1] = *i;
        *(_DWORD *)(*i + 4) = i[1];
        operator delete(i);
        --*(_DWORD *)(this + 1232);
        LeaveCriticalSection((LPCRITICAL_SECTION)(this + 1312));
        return;
      }
      break;
    }
  }
  sub_40D045(this, aUmserverLog, aThreadNotFound, aClientthread, 0);
}

//----- (0040C2A6) --------------------------------------------------------
int __stdcall sub_40C2A6(HANDLE hEvent, HANDLE a2, SOCKET s)
{
  if ( hEvent )
    WSACloseEvent(hEvent);
  if ( a2 )
    WSACloseEvent(a2);
  if ( s )
    closesocket(s);
  return WSACleanup();
}

//----- (0040C2E0) --------------------------------------------------------
unsigned int __stdcall sub_40C2E0(signed int s)
{
  u_short v2; // ax
  int v3; // eax
  SOCKET v4; // edi
  HANDLE v5; // eax
  int v6; // eax
  HANDLE v7; // edi
  int v8; // eax
  DWORD v9; // eax
  void *v11; // [esp-8h] [ebp-248h]
  int Error; // [esp-4h] [ebp-244h]
  int v13; // [esp-4h] [ebp-244h]
  int v14; // [esp-4h] [ebp-244h]
  SOCKET v15; // [esp-4h] [ebp-244h]
  int v16; // [esp-4h] [ebp-244h]
  int v17; // [esp-4h] [ebp-244h]
  int LastError; // [esp-4h] [ebp-244h]
  int v19; // [esp-4h] [ebp-244h]
  struct WSAData WSAData; // [esp+Ch] [ebp-234h] BYREF
  char Buffer[52]; // [esp+19Ch] [ebp-A4h] BYREF
  struct _WSANETWORKEVENTS NetworkEvents; // [esp+1D0h] [ebp-70h] BYREF
  struct sockaddr addr; // [esp+1FCh] [ebp-44h] BYREF
  struct sockaddr name; // [esp+20Ch] [ebp-34h] BYREF
  char v25[2]; // [esp+21Ch] [ebp-24h] BYREF
  unsigned __int16 v26; // [esp+21Eh] [ebp-22h]
  unsigned __int8 v27; // [esp+220h] [ebp-20h]
  unsigned __int8 v28; // [esp+221h] [ebp-1Fh]
  unsigned __int8 v29; // [esp+222h] [ebp-1Eh]
  unsigned __int8 v30; // [esp+223h] [ebp-1Dh]
  HANDLE hEvents[2]; // [esp+22Ch] [ebp-14h] BYREF
  int addrlen; // [esp+234h] [ebp-Ch] BYREF
  HANDLE v33; // [esp+238h] [ebp-8h]
  int v34; // [esp+23Ch] [ebp-4h]
  SOCKET sa; // [esp+248h] [ebp+8h]

  v2 = *(_WORD *)(s + 1336);
  addrlen = 16;
  name.sa_family = 2;
  *(_WORD *)name.sa_data = htons(v2);
  *(_DWORD *)&name.sa_data[2] = dword_432D14;
  v3 = WSAStartup(0x202u, &WSAData);
  if ( v3 )
  {
    sub_40D045(s, aUmserverLog, aWsastartupFail, aAcceptthread, v3);
    return 4660;
  }
  if ( WSAData.wVersion != 514 )
  {
    sub_40D045(s, aUmserverLog, aRequestedSocke, aAcceptthread, 0);
    goto LABEL_30;
  }
  v4 = WSASocketW(2, 1, 0, 0, 0, 1u);
  sa = v4;
  if ( v4 == -1 )
  {
    Error = WSAGetLastError();
    sub_40D045(s, aUmserverLog, aWsasocketFailu, aAcceptthread, Error);
LABEL_30:
    v15 = 0;
    goto LABEL_31;
  }
  if ( bind(v4, &name, 16) == -1 )
  {
    v13 = WSAGetLastError();
    sub_40D045(s, aUmserverLog, aBindFailure, aAcceptthread, v13);
LABEL_10:
    v15 = v4;
LABEL_31:
    v11 = 0;
    goto LABEL_32;
  }
  if ( listen(v4, 0x7FFFFFFF) == -1 )
  {
    v14 = WSAGetLastError();
    sub_40D045(s, aUmserverLog, aListenFailure, aAcceptthread, v14);
    goto LABEL_10;
  }
  v5 = WSACreateEvent();
  *(_DWORD *)(s + 1212) = v5;
  if ( !v5 )
  {
    v6 = WSAGetLastError();
    sub_40D045(s, aUmserverLog, aWsacreateevent, aAcceptthread, v6);
    sub_40C1DF(s, 0, 0, 0, v4);
    return 4660;
  }
  v7 = WSACreateEvent();
  v33 = v7;
  if ( !v7 )
  {
    v8 = WSAGetLastError();
    sub_40D045(s, aUmserverLog, aWsacreateevent_0, aAcceptthread, v8);
    v15 = sa;
    v11 = *(void **)(s + 1212);
LABEL_32:
    sub_40C2A6(0, v11, v15);
    return 4660;
  }
  hEvents[0] = *(HANDLE *)(s + 1212);
  hEvents[1] = v7;
  if ( WSAEventSelect(sa, v7, 8) == -1 )
  {
    v16 = WSAGetLastError();
    sub_40D045(s, aUmserverLog, aWsaeventselect, aAcceptthread, v16);
  }
  else
  {
    SetEvent(*(HANDLE *)(s + 1216));
    v9 = WSAWaitForMultipleEvents(2u, hEvents, 0, 0xFFFFFFFF, 0);
    if ( v9 == -1 )
    {
LABEL_26:
      LastError = GetLastError();
      sub_40D045(s, aUmserverLog, aWaitformultipl, aAcceptthread, LastError);
    }
    else
    {
      while ( v9 )
      {
        if ( WSAEnumNetworkEvents(sa, v7, &NetworkEvents) == -1 )
        {
          v19 = WSAGetLastError();
          sub_40D045(s, aUmserverLog, aWsaenumnetwork, aAcceptthread, v19);
          break;
        }
        if ( NetworkEvents.lNetworkEvents == 8 )
        {
          v34 = WSAAccept(sa, &addr, &addrlen, 0, 0);
          qmemcpy(v25, &addr, addrlen);
          sprintf(Buffer, "%d.%d.%d.%d", v27, v28, v29, v30);
          if ( v34 == -1 )
          {
            v17 = WSAGetLastError();
            sub_40D045(s, aUmserverLog, aWsaacceptFailu, aAcceptthread, v17);
          }
          else if ( !sub_40BDF7((char *)s, (char *)v34, Buffer, v26) )
          {
            sub_40D045(s, aUmserverLog, aAddclientFailu, aAcceptthread, 0);
          }
        }
        v9 = WSAWaitForMultipleEvents(2u, hEvents, 0, 0xFFFFFFFF, 0);
        v7 = v33;
        if ( v9 == -1 )
          goto LABEL_26;
      }
    }
  }
  sub_40C2A6(v7, *(HANDLE *)(s + 1212), sa);
  return 4660;
}
// 432D14: using guessed type int dword_432D14;
// 40C2E0: using guessed type char var_24[2];

//----- (0040C60E) --------------------------------------------------------
unsigned int __stdcall StartAddress(double **a1)
{
  double *v1; // esi
  HANDLE v2; // eax
  int Error; // eax
  int v4; // eax
  DWORD v5; // eax
  DWORD v6; // eax
  int v7; // eax
  DWORD v8; // edi
  unsigned int v9; // edi
  int v10; // eax
  int v11; // eax
  int v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  int v17; // eax
  int v18; // eax
  _DWORD v20[2]; // [esp-18h] [ebp-18780h] BYREF
  HANDLE v21; // [esp-10h] [ebp-18778h] BYREF
  SOCKET v22; // [esp-Ch] [ebp-18774h]
  char *v23; // [esp-8h] [ebp-18770h]
  int *CurrentThreadId; // [esp-4h] [ebp-1876Ch]
  char v25[100000]; // [esp+Ch] [ebp-1875Ch] BYREF
  struct _WSANETWORKEVENTS NetworkEvents; // [esp+186ACh] [ebp-BCh] BYREF
  char v27[16]; // [esp+186D8h] [ebp-90h] BYREF
  HANDLE hEvents[2]; // [esp+186E8h] [ebp-80h] BYREF
  struct _WSABUF Buffers; // [esp+186F0h] [ebp-78h] BYREF
  __int64 v30; // [esp+186F8h] [ebp-70h]
  __int64 v31; // [esp+18700h] [ebp-68h]
  __int64 v32; // [esp+18708h] [ebp-60h]
  DWORD NumberOfBytesRecvd; // [esp+18710h] [ebp-58h] BYREF
  DWORD Flags; // [esp+18714h] [ebp-54h] BYREF
  char v35[16]; // [esp+18718h] [ebp-50h] BYREF
  struct _WSABUF v36; // [esp+18728h] [ebp-40h] BYREF
  char v37[4]; // [esp+18730h] [ebp-38h] BYREF
  int v38; // [esp+18734h] [ebp-34h]
  unsigned int v39; // [esp+18738h] [ebp-30h]
  int v40; // [esp+18740h] [ebp-28h]
  unsigned int v41; // [esp+18744h] [ebp-24h]
  DWORD NumberOfBytesSent; // [esp+18748h] [ebp-20h] BYREF
  HANDLE *v43; // [esp+1874Ch] [ebp-1Ch]
  int v44; // [esp+18750h] [ebp-18h] BYREF
  HANDLE hEventObject; // [esp+18754h] [ebp-14h]
  SOCKET s; // [esp+18758h] [ebp-10h]
  int v47; // [esp+18764h] [ebp-4h]

  v1 = *a1;
  s = (SOCKET)a1[1];
  v40 = 0;
  v44 = 0;
  v35[0] = HIBYTE(a1);
  std::string::_Tidy(v35, 0);
  v47 = 0;
  v37[0] = HIBYTE(a1);
  std::string::_Tidy(v37, 0);
  LOBYTE(v47) = 1;
  v2 = WSACreateEvent();
  hEventObject = v2;
  if ( !v2 )
  {
    Error = WSAGetLastError();
    sub_40D045((int)v1, aUmserverLog, aWsacreateevent_1, aClientthread, Error);
    CurrentThreadId = (int *)GetCurrentThreadId();
    v23 = (char *)a1;
    v22 = s;
    v21 = 0;
    goto LABEL_59;
  }
  if ( WSAEventSelect(s, v2, 35) == -1 )
  {
    v4 = WSAGetLastError();
    sub_40D045((int)v1, aUmserverLog, aWsaeventselect, aClientthread, v4);
    CurrentThreadId = (int *)GetCurrentThreadId();
    v23 = (char *)a1;
    goto LABEL_58;
  }
  hEvents[0] = hEventObject;
  hEvents[1] = *((HANDLE *)v1 + 303);
  do
  {
    while ( 1 )
    {
      do
      {
        do
        {
          while ( 1 )
          {
            v5 = *((_DWORD *)v1 + 335);
            if ( !v5 )
              v5 = -1;
            v6 = WSAWaitForMultipleEvents(2u, hEvents, 0, v5, 0);
            if ( v6 == -1 )
            {
              v17 = WSAGetLastError();
              sub_40D045((int)v1, aUmserverLog, aWsawaitformult, aClientthread, v17);
LABEL_55:
              v18 = GetCurrentThreadId();
              sub_40C1DF((int)v1, hEventObject, s, a1, v18);
              LOBYTE(v47) = 0;
              std::string::_Tidy(v37, 1);
              v47 = -1;
              goto LABEL_56;
            }
            if ( v6 == 1 || v6 == 258 )
              goto LABEL_55;
            if ( WSAEnumNetworkEvents(s, hEventObject, &NetworkEvents) != -1 )
              break;
            v7 = WSAGetLastError();
            sub_40D045((int)v1, aUmserverLog, aWsaenumnetwork, aClientthread, v7);
          }
        }
        while ( !NetworkEvents.lNetworkEvents );
        if ( (NetworkEvents.lNetworkEvents & 1) == 0 )
          goto LABEL_34;
        Buffers.buf = v25;
        Flags = 0;
        Buffers.len = 100000;
        if ( WSARecv(s, &Buffers, 1u, &NumberOfBytesRecvd, &Flags, 0, 0) == -1 )
        {
          v13 = WSAGetLastError();
          sub_40D045((int)v1, aUmserverLog, aWsarecvFailure, aClientthread, v13);
LABEL_34:
          v9 = v41;
          goto LABEL_35;
        }
        v31 = NumberOfBytesRecvd;
        v8 = NumberOfBytesRecvd;
        CurrentThreadId = 0;
        v1[158] = (double)NumberOfBytesRecvd * 0.0009765625 + v1[158];
        v27[0] = HIBYTE(a1);
        std::string::_Tidy(v27, CurrentThreadId);
        std::string::assign(v27, v25, v8);
        LOBYTE(v47) = 2;
        std::string::append(v35, v27, 0, std::string::npos);
        LOBYTE(v47) = 1;
        std::string::_Tidy(v27, 1);
        v43 = &v21;
        LOBYTE(v21) = v35[0];
        std::string::_Tidy(&v21, 0);
        std::string::assign(&v21, v35, 0, std::string::npos);
      }
      while ( !(*(int (__thiscall **)(double *, HANDLE, SOCKET, char *, int *))(*(_DWORD *)v1 + 12))(
                 v1,
                 v21,
                 v22,
                 v23,
                 CurrentThreadId) );
      CurrentThreadId = &v44;
      v23 = v37;
      v43 = (HANDLE *)v20;
      std::string::string(v20, v35);
      if ( !(*(int (__thiscall **)(double *, _DWORD, _DWORD, HANDLE, SOCKET, char *, int *))(*(_DWORD *)v1 + 16))(
              v1,
              v20[0],
              v20[1],
              v21,
              v22,
              v23,
              CurrentThreadId) )
        goto LABEL_57;
      v9 = 0;
      NumberOfBytesSent = 0;
      v41 = 0;
      do
      {
        v36.len = 200000;
        if ( v39 - v9 < 0x30D40 )
          v36.len = v39 - v9;
        v10 = v38;
        if ( !v38 )
          v10 = `std::string::_Nullstr'::`2'::_C;
        v36.buf = (CHAR *)(v9 + v10);
        v11 = WSASend(s, &v36, 1u, &NumberOfBytesSent, 0, 0, 0);
        v43 = (HANDLE *)v11;
        if ( v11 != -1 )
        {
          v9 += NumberOfBytesSent;
          v41 = v9;
        }
      }
      while ( v9 < v39 && v11 != -1 );
      if ( WSAGetLastError() != 10035 )
        break;
LABEL_46:
      v40 = 1;
    }
    if ( v43 == (HANDLE *)-1 )
    {
      v12 = WSAGetLastError();
      sub_40D045((int)v1, aUmserverLog, aWsasendFailure, aClientthreadPr, v12);
      v44 = 0;
    }
    else
    {
      v30 = v9;
      CurrentThreadId = (int *)v9;
      v1[157] = (double)v9 * 0.0009765625 + v1[157];
      (*(void (__thiscall **)(double *, int *))(*(_DWORD *)v1 + 8))(v1, CurrentThreadId);
    }
    if ( !v44 )
      break;
    std::string::erase(v35, 0, std::string::npos);
LABEL_35:
    if ( (NetworkEvents.lNetworkEvents & 2) != 0 && v40 )
    {
      do
      {
        v36.len = 200000;
        if ( v39 - v9 < 0x30D40 )
          v36.len = v39 - v9;
        v14 = v38;
        if ( !v38 )
          v14 = `std::string::_Nullstr'::`2'::_C;
        v36.buf = (CHAR *)(v9 + v14);
        v15 = WSASend(s, &v36, 1u, &NumberOfBytesSent, 0, 0, 0);
        v43 = (HANDLE *)v15;
        if ( v15 != -1 )
        {
          v9 += NumberOfBytesSent;
          v41 = v9;
        }
      }
      while ( v9 < v39 && v15 != -1 );
      if ( WSAGetLastError() == 10035 )
        goto LABEL_46;
      if ( v43 == (HANDLE *)-1 )
      {
        v16 = WSAGetLastError();
        sub_40D045((int)v1, aUmserverLog, aWsasendFailure, aClientthreadPr, v16);
        v44 = 0;
      }
      else
      {
        v32 = v9;
        CurrentThreadId = (int *)v9;
        v1[157] = (double)v9 * 0.0009765625 + v1[157];
        (*(void (__thiscall **)(double *, int *))(*(_DWORD *)v1 + 8))(v1, CurrentThreadId);
      }
      if ( !v44 )
        break;
      v40 = 0;
      std::string::erase(v35, 0, std::string::npos);
    }
  }
  while ( (NetworkEvents.lNetworkEvents & 0x20) == 0 );
LABEL_57:
  CurrentThreadId = (int *)GetCurrentThreadId();
  v23 = (char *)a1;
LABEL_58:
  v22 = s;
  v21 = hEventObject;
LABEL_59:
  sub_40C1DF((int)v1, v21, v22, v23, (int)CurrentThreadId);
  LOBYTE(v47) = 0;
  std::string::_Tidy(v37, 1);
  v47 = -1;
LABEL_56:
  std::string::_Tidy(v35, 1);
  return 4660;
}
// 41D460: using guessed type int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD);
// 41D464: using guessed type int __thiscall std::string::_Tidy(_DWORD, _DWORD);
// 41D46C: using guessed type int __thiscall std::string::erase(_DWORD, _DWORD, _DWORD);
// 41D474: using guessed type int __thiscall std::string::string(_DWORD, _DWORD);
// 41D478: using guessed type int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD, _DWORD);
// 41D47C: using guessed type int __thiscall std::string::append(_DWORD, _DWORD, _DWORD, _DWORD);
// 40C60E: using guessed type char var_38[4];

//----- (0040CAEF) --------------------------------------------------------
unsigned int __stdcall sub_40CAEF(char *a1)
{
  struct _RTL_CRITICAL_SECTION *v1; // edi
  void *v2; // edi
  int LastError; // eax

  SetEvent(*((HANDLE *)a1 + 304));
  if ( WaitForSingleObject(*((HANDLE *)a1 + 303), 0x64u) == 258 )
  {
    v1 = (struct _RTL_CRITICAL_SECTION *)(a1 + 1312);
    do
    {
      EnterCriticalSection(v1);
      while ( *((_DWORD *)a1 + 311) )
      {
        v2 = *(void **)(**((_DWORD **)a1 + 310) + 8);
        if ( WaitForSingleObject(v2, 0x3E8u) == 258 )
        {
          sub_40D045((int)a1, aUmserverLog, aWaitforsingleo, aHelperthread, 0);
          if ( !TerminateThread(v2, 0x1234u) )
          {
            LastError = GetLastError();
            sub_40D045((int)a1, aUmserverLog, aTerminatethrea, aHelperthread, LastError);
          }
        }
        CloseHandle(v2);
        sub_40CBD1((int)(a1 + 1236));
      }
      v1 = (struct _RTL_CRITICAL_SECTION *)(a1 + 1312);
      LeaveCriticalSection((LPCRITICAL_SECTION)(a1 + 1312));
    }
    while ( WaitForSingleObject(*((HANDLE *)a1 + 303), 0x64u) == 258 );
  }
  return 4660;
}

//----- (0040CBD1) --------------------------------------------------------
void __thiscall sub_40CBD1(int this)
{
  _DWORD **v2; // [esp-4h] [ebp-8h]

  v2 = **(_DWORD ****)(this + 4);
  *v2[1] = *v2;
  (*v2)[1] = v2[1];
  operator delete(v2);
  --*(_DWORD *)(this + 8);
}

//----- (0040CBF4) --------------------------------------------------------
unsigned int __thiscall sub_40CBF4(_BYTE **this, _BYTE *a2)
{
  return sub_40CCC3((int)this, this[2], 1u, a2);
}

//----- (0040CC05) --------------------------------------------------------
_DWORD *__thiscall sub_40CC05(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4)
{
  _DWORD *v5; // eax

  v5 = sub_40CC43((_DWORD *)a3, *(_DWORD **)(a3 + 4));
  *(_DWORD *)(a3 + 4) = v5;
  *(_DWORD *)v5[1] = v5;
  if ( v5 != (_DWORD *)-8 )
  {
    v5[2] = *a4;
    v5[3] = a4[1];
  }
  ++this[2];
  *a2 = v5;
  return a2;
}

//----- (0040CC43) --------------------------------------------------------
_DWORD *__stdcall sub_40CC43(_DWORD *a1, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx

  result = operator new(0x10u);
  v3 = a1;
  if ( !a1 )
    v3 = result;
  *result = v3;
  v4 = a2;
  if ( !a2 )
    v4 = result;
  result[1] = v4;
  return result;
}

//----- (0040CC67) --------------------------------------------------------
_DWORD *__thiscall sub_40CC67(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4)
{
  _DWORD *v5; // eax

  v5 = sub_40CC9F((_DWORD *)a3, *(_DWORD **)(a3 + 4));
  *(_DWORD *)(a3 + 4) = v5;
  *(_DWORD *)v5[1] = v5;
  if ( v5 != (_DWORD *)-8 )
    v5[2] = *a4;
  ++this[2];
  *a2 = v5;
  return a2;
}

//----- (0040CC9F) --------------------------------------------------------
_DWORD *__stdcall sub_40CC9F(_DWORD *a1, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD *v3; // ecx
  _DWORD *v4; // ecx

  result = operator new(0xCu);
  v3 = a1;
  if ( !a1 )
    v3 = result;
  *result = v3;
  v4 = a2;
  if ( !a2 )
    v4 = result;
  result[1] = v4;
  return result;
}

//----- (0040CCC3) --------------------------------------------------------
unsigned int __thiscall sub_40CCC3(int this, _BYTE *a2, unsigned int a3, _BYTE *a4)
{
  _BYTE *v6; // ebx
  int v7; // ecx
  unsigned int v8; // eax
  int v9; // ebx
  int v10; // eax
  _BYTE *v11; // eax
  _BYTE *v12; // ebx
  _BYTE *v13; // ebx
  _BYTE *v14; // ebx
  int v15; // ebx
  int v16; // ecx
  int v17; // eax
  unsigned int result; // eax
  _BYTE *v19; // edx
  _BYTE *v20; // ebx
  unsigned int v21; // edi
  _BYTE *v22; // edi
  _BYTE *v23; // ebx
  _BYTE *v24; // edi
  int v25; // ebx
  _BYTE *v26; // edi
  _BYTE *v27; // ebx
  _BYTE *i; // edi
  _BYTE *v29; // [esp+Ch] [ebp-Ch]
  unsigned int v30; // [esp+10h] [ebp-8h]
  _BYTE *v31; // [esp+10h] [ebp-8h]
  _BYTE *v32; // [esp+10h] [ebp-8h]
  int v33; // [esp+14h] [ebp-4h]
  _BYTE *v34; // [esp+14h] [ebp-4h]
  int j; // [esp+20h] [ebp+8h]
  _BYTE *v36; // [esp+24h] [ebp+Ch]
  int v37; // [esp+24h] [ebp+Ch]
  _BYTE *v38; // [esp+28h] [ebp+10h]

  v6 = *(_BYTE **)(this + 8);
  if ( (*(_DWORD *)(this + 12) - (int)v6) >> 4 >= a3 )
  {
    v19 = a2;
    result = (v6 - a2) >> 4;
    if ( result >= a3 )
    {
      if ( !a3 )
        return result;
      v37 = 16 * a3;
      v24 = &v6[-16 * a3];
      v32 = *(_BYTE **)(this + 8);
      if ( v24 != v6 )
      {
        do
        {
          sub_40CF12(v32, v24);
          v32 += 16;
          v24 += 16;
        }
        while ( v24 != v6 );
        v19 = a2;
      }
      v25 = *(_DWORD *)(this + 8);
      v26 = (_BYTE *)(v25 - v37);
      if ( v19 != (_BYTE *)(v25 - v37) )
      {
        do
        {
          v26 -= 16;
          v25 -= 16;
          std::string::assign(v25, v26, 0, std::string::npos);
        }
        while ( v26 != a2 );
        v19 = a2;
      }
      v27 = v19;
      for ( i = &v19[v37]; v27 != i; v27 += 16 )
        std::string::assign(v27, a4, 0, std::string::npos);
    }
    else
    {
      v34 = a2;
      result = 16 * a3;
      v37 = 16 * a3;
      if ( a2 != v6 )
      {
        v31 = &a2[16 * a3];
        do
        {
          sub_40CF12(v31, v34);
          v34 += 16;
          v31 += 16;
        }
        while ( v34 != v6 );
        result = v37;
      }
      v20 = *(_BYTE **)(this + 8);
      v21 = a3 - ((v20 - a2) >> 4);
      if ( v21 )
      {
        do
        {
          sub_40CF12(v20, a4);
          v20 += 16;
          --v21;
        }
        while ( v21 );
        result = v37;
      }
      v22 = *(_BYTE **)(this + 8);
      v23 = a2;
      if ( a2 == v22 )
        goto LABEL_46;
      do
      {
        std::string::assign(v23, a4, 0, std::string::npos);
        v23 += 16;
      }
      while ( v23 != v22 );
    }
    result = v37;
LABEL_46:
    *(_DWORD *)(this + 8) += result;
    return result;
  }
  v7 = *(_DWORD *)(this + 4);
  if ( !v7 || (v8 = (int)&v6[-v7] >> 4, a3 >= v8) )
    v8 = a3;
  if ( v7 )
    v9 = (int)&v6[-v7] >> 4;
  else
    v9 = 0;
  v10 = v9 + v8;
  v33 = v10;
  if ( v10 < 0 )
    v10 = 0;
  v11 = operator new(16 * v10);
  v12 = *(_BYTE **)(this + 4);
  v29 = v11;
  v36 = v11;
  while ( v12 != a2 )
  {
    sub_40CF12(v36, v12);
    v36 += 16;
    v12 += 16;
  }
  v13 = v36;
  if ( a3 )
  {
    v30 = a3;
    do
    {
      sub_40CF12(v13, a4);
      v13 += 16;
      --v30;
    }
    while ( v30 );
  }
  v14 = *(_BYTE **)(this + 8);
  if ( a2 != v14 )
  {
    v38 = &v36[16 * a3];
    do
    {
      sub_40CF12(v38, a2);
      a2 += 16;
      v38 += 16;
    }
    while ( a2 != v14 );
  }
  v15 = *(_DWORD *)(this + 4);
  for ( j = *(_DWORD *)(this + 8); v15 != j; v15 += 16 )
    std::string::_Tidy(v15, 1);
  operator delete(*(void **)(this + 4));
  v16 = *(_DWORD *)(this + 4);
  *(_DWORD *)(this + 12) = &v29[16 * v33];
  if ( v16 )
    v17 = (*(_DWORD *)(this + 8) - v16) >> 4;
  else
    v17 = 0;
  *(_DWORD *)(this + 4) = v29;
  result = (unsigned int)&v29[16 * a3 + 16 * v17];
  *(_DWORD *)(this + 8) = result;
  return result;
}
// 41D464: using guessed type int __thiscall std::string::_Tidy(_DWORD, _DWORD);
// 41D478: using guessed type int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040CF12) --------------------------------------------------------
void *__cdecl sub_40CF12(_BYTE *a1, _BYTE *a2)
{
  void *result; // eax

  result = &loc_41B84E;
  if ( a1 )
  {
    *a1 = *a2;
    std::string::_Tidy(a1, 0);
    return (void *)std::string::assign(a1, a2, 0, std::string::npos);
  }
  return result;
}
// 41D464: using guessed type int __thiscall std::string::_Tidy(_DWORD, _DWORD);
// 41D478: using guessed type int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040CF5F) --------------------------------------------------------
int __thiscall sub_40CF5F(int this, char a2, int a3, int a4, int a5, char a6, int a7, int a8, int a9, int a10, int a11)
{
  int v12; // ebx
  int v13; // eax
  int v14; // eax
  int v15; // esi
  char v17[19]; // [esp+Ch] [ebp-20h] BYREF
  char v18; // [esp+1Fh] [ebp-Dh]
  int v19; // [esp+28h] [ebp-4h]

  v12 = this + 1388;
  v19 = 1;
  std::string::assign(this + 1388, &a2, 0, std::string::npos);
  std::string::assign(this + 1404, &a6, 0, std::string::npos);
  v13 = std::string::substr(v12, v17, *(_DWORD *)(this + 1396) - 1, 1);
  LOBYTE(v19) = 2;
  v18 = std::operator!=(v13);
  LOBYTE(v19) = 1;
  std::string::_Tidy(v17, 1);
  if ( v18 )
    std::string::append(this + 1388, asc_4245C4, strlen(asc_4245C4));
  v14 = sub_40BF31((char *)this, a10, a11);
  LOBYTE(v19) = 0;
  v15 = v14;
  std::string::_Tidy(&a2, 1);
  v19 = -1;
  std::string::_Tidy(&a6, 1);
  return v15;
}
// 41D464: using guessed type int __thiscall std::string::_Tidy(_DWORD, _DWORD);
// 41D478: using guessed type int __thiscall std::string::assign(_DWORD, _DWORD, _DWORD, _DWORD);
// 41D488: using guessed type int __thiscall std::string::append(_DWORD, _DWORD, _DWORD);
// 41D48C: using guessed type int __cdecl std::operator!=(_DWORD);
// 41D490: using guessed type int __thiscall std::string::substr(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0040D045) --------------------------------------------------------
int __thiscall sub_40D045(int this, char *a2, const char *a3, const char *a4, int a5)
{
  CString *v6; // ebx
  int v7; // eax
  FILE *v8; // eax
  struct tm *v9; // eax
  int v10; // esi
  char v12[4]; // [esp+10h] [ebp-20h] BYREF
  char v13[4]; // [esp+14h] [ebp-1Ch] BYREF
  wchar_t *FileName; // [esp+18h] [ebp-18h] BYREF
  LPCRITICAL_SECTION lpCriticalSection; // [esp+1Ch] [ebp-14h]
  char v16[4]; // [esp+20h] [ebp-10h] BYREF
  int v17; // [esp+2Ch] [ebp-4h]

  lpCriticalSection = (LPCRITICAL_SECTION)(this + 1172);
  EnterCriticalSection((LPCRITICAL_SECTION)(this + 1172));
  time((__time32_t *const)(this + 1168));
  CString::CString((CString *)v16, asc_4245C4);
  v17 = 0;
  v6 = CString::CString((CString *)v12, a2);
  LOBYTE(v17) = 1;
  v7 = operator+(v13, this + 8, v16);
  LOBYTE(v17) = 2;
  operator+(&FileName, v7, v6);
  LOBYTE(v17) = 6;
  CString::~CString((CString *)v13);
  LOBYTE(v17) = 5;
  CString::~CString((CString *)v12);
  LOBYTE(v17) = 4;
  CString::~CString((CString *)v16);
  v8 = wfopen(FileName, aA);
  *(_DWORD *)(this + 4) = v8;
  if ( !v8 )
  {
    v10 = 0;
    goto LABEL_9;
  }
  v9 = localtime((const __time32_t *const)(this + 1168));
  *(_DWORD *)(this + 1164) = v9;
  strftime((char *)(this + 1036), 0x80u, Format, v9);
  if ( a4 )
    sprintf((char *const)(this + 12), "%s - %s.\t[%s]\t[%d]\n", (const char *)(this + 1036), a3, a4, a5);
  else
    sprintf((char *const)(this + 12), "%s - %s.\t[%d]\n", (const char *)(this + 1036), a3, a5);
  if ( fwrite((const void *)(this + 12), 1u, strlen((const char *)(this + 12)), *(FILE **)(this + 4)) == strlen((const char *)(this + 12)) )
  {
    fclose(*(FILE **)(this + 4));
    v10 = 1;
LABEL_9:
    LeaveCriticalSection(lpCriticalSection);
    goto LABEL_10;
  }
  LeaveCriticalSection(lpCriticalSection);
  fclose(*(FILE **)(this + 4));
  v10 = 0;
LABEL_10:
  v17 = -1;
  CString::~CString((CString *)&FileName);
  return v10;
}
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 40D045: using guessed type char var_10[4];
// 40D045: using guessed type char var_20[4];
// 40D045: using guessed type char var_1C[4];

//----- (0040D1D4) --------------------------------------------------------
int __thiscall sub_40D1D4(int this)
{
  int v2; // ecx
  char v4; // [esp+Bh] [ebp-Dh]

  *(_BYTE *)(this + 24) = 0;
  v2 = this + 16;
  *(_BYTE *)v2 = v4;
  *(_BYTE *)(v2 + 1) = v4;
  sub_40DF50((_DWORD *)v2);
  *(_BYTE *)(this + 40) = 0;
  *(_BYTE *)(this + 32) = v4;
  *(_BYTE *)(this + 33) = v4;
  sub_40E346((_DWORD *)(this + 32));
  *(_BYTE *)(this + 56) = 0;
  *(_BYTE *)(this + 48) = v4;
  *(_BYTE *)(this + 49) = v4;
  sub_40E346((_DWORD *)(this + 48));
  *(_DWORD *)(this + 64) = -1;
  *(_DWORD *)this = &off_41E690;
  *(double *)(this + 8) = 0.0;
  *(_DWORD *)(this + 68) = 388;
  sub_40D603((_DWORD *)this);
  return this;
}
// 40D1F0: variable 'v4' is possibly undefined
// 41E690: using guessed type int (__thiscall *off_41E690)(void *, char);

//----- (0040D263) --------------------------------------------------------
_DWORD *__thiscall sub_40D263(_DWORD *this, char a2)
{
  sub_40D289(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040D289) --------------------------------------------------------
void __thiscall sub_40D289(_DWORD *this)
{
  *this = &off_41E690;
  sub_40D9D5((int)(this + 12));
  sub_40D9D5((int)(this + 8));
  sub_40D94B((int)(this + 4));
}
// 41E690: using guessed type int (__thiscall *off_41E690)(void *, char);

//----- (0040D2D4) --------------------------------------------------------
int __cdecl sub_40D2D4(int a1)
{
  return a1 + *(_DWORD *)(a1 + 24);
}

//----- (0040D2DE) --------------------------------------------------------
int __cdecl sub_40D2DE(int a1)
{
  return a1 + *(_DWORD *)(a1 + 8);
}

//----- (0040D2E8) --------------------------------------------------------
char *__cdecl sub_40D2E8(_DWORD *a1)
{
  return (char *)a1 + *a1;
}

//----- (0040D2F1) --------------------------------------------------------
int __cdecl sub_40D2F1(int a1)
{
  return a1 + *(_DWORD *)(a1 + 4);
}

//----- (0040D2FB) --------------------------------------------------------
char *__cdecl sub_40D2FB(_DWORD *a1)
{
  return (char *)a1 + *a1 + *(_DWORD *)sub_40D2E8(a1);
}

//----- (0040D30F) --------------------------------------------------------
LPSTR __cdecl sub_40D30F(LPCWCH lpWideCharStr, LPSTR lpMultiByteStr, int cbMultiByte)
{
  WideCharToMultiByte(0, 0, lpWideCharStr, -1, lpMultiByteStr, cbMultiByte, 0, 0);
  return lpMultiByteStr;
}

//----- (0040D32E) --------------------------------------------------------
void __thiscall sub_40D32E(_DWORD *this, int a2)
{
  _DWORD *v2; // edi
  int v3; // eax
  LPBYTE v4; // ebx
  LSTATUS v5; // eax
  int v6; // eax
  char *v7; // esi
  char *v8; // eax
  int i; // ebx
  int j; // ebx
  const WCHAR *v11; // esi
  char *v12; // edi
  LPSTR v13; // esi
  _DWORD *v15; // eax
  int v16; // eax
  char *v19; // eax
  int v20; // [esp+0h] [ebp-158h] BYREF
  CHAR MultiByteStr[256]; // [esp+Ch] [ebp-14Ch] BYREF
  DWORD Type; // [esp+10Ch] [ebp-4Ch] BYREF
  int v23; // [esp+110h] [ebp-48h] BYREF
  int v24; // [esp+114h] [ebp-44h] BYREF
  _DWORD *v25; // [esp+118h] [ebp-40h]
  _DWORD *v26; // [esp+11Ch] [ebp-3Ch]
  int v27; // [esp+120h] [ebp-38h]
  int v28; // [esp+124h] [ebp-34h]
  wchar_t *String2; // [esp+128h] [ebp-30h] BYREF
  double v30; // [esp+12Ch] [ebp-2Ch] BYREF
  DWORD cbData; // [esp+134h] [ebp-24h] BYREF
  char *v32; // [esp+138h] [ebp-20h] BYREF
  LPBYTE lpData; // [esp+13Ch] [ebp-1Ch]
  LPCWSTR lpValueName; // [esp+140h] [ebp-18h] BYREF
  wchar_t *String1[2]; // [esp+144h] [ebp-14h] BYREF
  int v36; // [esp+154h] [ebp-4h]

  v36 = 0;
  v2 = this;
  String1[1] = (wchar_t *)&v20;
  v25 = this;
  CString::CString((CString *)String1);
  LOBYTE(v36) = 1;
  sub_40DAC9(v2 + 4, (int *)&v32, &a2);
  if ( (char *)v2[5] != v32 )
  {
    v3 = sub_40D8DE(v2 + 4, &a2);
    CString::operator=(String1, v3);
    lpData = (LPBYTE)operator new(0xA000u);
    cbData = 40960;
    CString::CString((CString *)&lpValueName);
    LOBYTE(v36) = 2;
    CString::Format((CString *)&lpValueName, aD, 510);
    while ( 1 )
    {
      v4 = lpData;
      v5 = RegQueryValueExW(HKEY_PERFORMANCE_DATA, lpValueName, 0, &Type, lpData, &cbData);
      if ( !v5 )
        break;
      if ( v5 != 234 )
      {
LABEL_16:
        LOBYTE(v36) = 1;
        CString::~CString((CString *)&lpValueName);
        LOBYTE(v36) = 0;
        CString::~CString((CString *)String1);
        __asm { fld     ds:dbl_41E2F0 }
        return;
      }
      cbData += 40960;
      operator delete(v4);
      lpData = (LPBYTE)operator new(cbData);
    }
    v6 = sub_40D2D4((int)v4);
    v27 = 0;
    v7 = (char *)v6;
    v32 = (char *)v6;
    while ( v27 < *((_DWORD *)v4 + 7) )
    {
      if ( *((_DWORD *)v7 + 3) == 510 )
      {
        v28 = -1;
        v8 = (char *)sub_40D2DE((int)v7);
        for ( i = 0; i < *((_DWORD *)v7 + 8); ++i )
        {
          if ( *((_DWORD *)v8 + 1) == v2[17] )
            v28 = *((_DWORD *)v8 + 9);
          v8 = sub_40D2E8(v8);
        }
        if ( v28 == -1 )
        {
          operator delete(lpData);
          goto LABEL_16;
        }
        v26 = (_DWORD *)sub_40D2F1((int)v7);
        for ( j = 0; j < *((_DWORD *)v7 + 10); ++j )
        {
          v11 = (const WCHAR *)((char *)v26 + v26[4]);
          v12 = sub_40D2E8(v26);
          v13 = sub_40D30F(v11, MultiByteStr, 255);
          CString::CString((CString *)&String2);
          LOBYTE(v36) = 3;
          CString::Format((CString *)&String2, aS_0, v13);
          _ESI = (int)v25;
          HIDWORD(v30) = j;
          sub_40DB9A(v25 + 12, &v24, (_DWORD *)&v30 + 1);
          if ( v24 != *(_DWORD *)(_ESI + 52) )
          {
            v23 = j;
            HIDWORD(v30) = *(_DWORD *)&v12[v28];
            v15 = (_DWORD *)sub_40D9AC((void *)(_ESI + 48), &v23);
            *v15 = HIDWORD(v30);
          }
          if ( !wcscmp(String1[0], String2) )
          {
            *(_QWORD *)&v30 = *(unsigned int *)&v12[v28];
            v16 = a2;
            __asm { fild    [ebp+var_2C] }
            if ( *(_DWORD *)(_ESI + 64) == a2 )
            {
              __asm
              {
                fld     st
                fsub    qword ptr [esi+8]
                fstp    [ebp+var_2C]
                fstp    qword ptr [esi+8]
              }
              *(double *)(_ESI + 8) = _RT1;
            }
            else
            {
              __asm { fstp    qword ptr [esi+8] }
              *(double *)(_ESI + 8) = _RT1;
              __asm { fldz }
              *(_DWORD *)(_ESI + 64) = v16;
              __asm { fstp    [ebp+var_2C] }
            }
            operator delete(lpData);
            LOBYTE(v36) = 2;
            CString::~CString((CString *)&String2);
            LOBYTE(v36) = 1;
            CString::~CString((CString *)&lpValueName);
            LOBYTE(v36) = 0;
            CString::~CString((CString *)String1);
            __asm { fld     [ebp+var_2C] }
            return;
          }
          v26 = sub_40D2FB(v26);
          LOBYTE(v36) = 2;
          CString::~CString((CString *)&String2);
          v2 = v25;
          v7 = v32;
        }
      }
      v19 = sub_40D2E8(v7);
      ++v27;
      v4 = lpData;
      v32 = v19;
      v7 = v19;
    }
    operator delete(v4);
    LOBYTE(v36) = 1;
    CString::~CString((CString *)&lpValueName);
  }
  LOBYTE(v36) = 0;
  CString::~CString((CString *)String1);
  __asm { fld     ds:dbl_41E2D0 }
}
// 40D478: inconsistent fpu stack
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 40D32E: using guessed type CHAR MultiByteStr[256];

//----- (0040D603) --------------------------------------------------------
int __thiscall sub_40D603(_DWORD *this)
{
  LSTATUS v2; // edi
  int v4; // eax
  char *v5; // esi
  char *v6; // eax
  int i; // edi
  int v8; // eax
  _DWORD *v9; // edi
  const WCHAR *v10; // esi
  int v11; // esi
  int v12; // eax
  char *v13; // eax
  char *v14; // eax
  int v15; // [esp+0h] [ebp-1C8h] BYREF
  CHAR MultiByteStr[256]; // [esp+Ch] [ebp-1BCh] BYREF
  WCHAR ValueName[64]; // [esp+10Ch] [ebp-BCh] BYREF
  DWORD Type; // [esp+18Ch] [ebp-3Ch] BYREF
  int v19; // [esp+190h] [ebp-38h] BYREF
  int v20; // [esp+194h] [ebp-34h] BYREF
  char *v21; // [esp+198h] [ebp-30h]
  int v22; // [esp+19Ch] [ebp-2Ch]
  LPSTR v23; // [esp+1A0h] [ebp-28h] BYREF
  char *v24; // [esp+1A4h] [ebp-24h]
  int v25; // [esp+1A8h] [ebp-20h]
  int v26; // [esp+1ACh] [ebp-1Ch]
  DWORD cbData; // [esp+1B0h] [ebp-18h] BYREF
  LPBYTE lpData; // [esp+1B4h] [ebp-14h]
  int *v29; // [esp+1B8h] [ebp-10h]
  int v30; // [esp+1C4h] [ebp-4h]

  v30 = 0;
  v29 = &v15;
  sub_40DAB5((int)(this + 4));
  lpData = (LPBYTE)malloc(0xA000u);
  wcscpy(ValueName, (const wchar_t *)&dword_42EF08);
  cbData = 40960;
  memset(&ValueName[4], 0, 0x78u);
  v2 = RegQueryValueExW(HKEY_PERFORMANCE_DATA, ValueName, 0, &Type, lpData, &cbData);
  if ( v2 )
  {
    while ( v2 == 234 )
    {
      cbData += 40960;
      lpData = (LPBYTE)realloc(lpData, cbData);
    }
    return 0;
  }
  else
  {
    v4 = sub_40D2D4((int)lpData);
    v25 = 0;
    v5 = (char *)v4;
    v24 = (char *)v4;
    while ( v25 < *((_DWORD *)lpData + 7) )
    {
      if ( *((_DWORD *)v5 + 3) == 510 )
      {
        v22 = -1;
        v6 = (char *)sub_40D2DE((int)v5);
        for ( i = 0; i < *((_DWORD *)v5 + 8); ++i )
        {
          if ( *((_DWORD *)v6 + 1) == 520 )
            v22 = *((_DWORD *)v6 + 9);
          v6 = sub_40D2E8(v6);
        }
        if ( v22 == -1 )
          break;
        v8 = sub_40D2F1((int)v5);
        v26 = 0;
        v9 = (_DWORD *)v8;
        while ( v26 < *((_DWORD *)v5 + 10) )
        {
          v10 = (const WCHAR *)((char *)v9 + v9[4]);
          v21 = sub_40D2E8(v9);
          v23 = sub_40D30F(v10, MultiByteStr, 255);
          v11 = *(_DWORD *)&v21[v22];
          v20 = this[7];
          v12 = sub_40D8DE(this + 4, &v20);
          CString::operator=(v12, v23);
          v23 = (LPSTR)this[11];
          *(_DWORD *)sub_40D9AC(this + 8, (int *)&v23) = v11;
          v19 = this[15];
          *(_DWORD *)sub_40D9AC(this + 12, &v19) = 0;
          v13 = sub_40D2FB(v9);
          ++v26;
          v5 = v24;
          v9 = v13;
        }
      }
      v14 = sub_40D2E8(v5);
      ++v25;
      v24 = v14;
      v5 = v14;
    }
    free(lpData);
    return 1;
  }
}
// 40D6A2: conditional instruction was optimized away because edi.4 is in (1..E9|>=EBu)
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 42EF08: using guessed type int dword_42EF08;
// 40D603: using guessed type CHAR MultiByteStr[256];

//----- (0040D7E7) --------------------------------------------------------
int __thiscall sub_40D7E7(_DWORD *this)
{
  return this[7] - 1;
}

//----- (0040D7EC) --------------------------------------------------------
int __thiscall sub_40D7EC(_DWORD *this, CString *a2, int a3)
{
  void *v4; // edi
  _DWORD *v6; // eax
  int v7; // [esp+8h] [ebp-4h] BYREF

  v4 = this + 4;
  sub_40DAC9(this + 4, &v7, &a3);
  if ( this[5] == v7 )
    return 0;
  v6 = (_DWORD *)sub_40D8DE(v4, &a3);
  CString::Format(a2, aS_0, *v6);
  return 1;
}

//----- (0040D838) --------------------------------------------------------
unsigned int __thiscall sub_40D838(_DWORD *this, int a2)
{
  unsigned int v4; // ebx
  __int64 v6; // [esp+Ch] [ebp-Ch] BYREF
  int v7; // [esp+14h] [ebp-4h] BYREF
  _DWORD *v8; // [esp+20h] [ebp+8h]

  v4 = 0;
  v7 = a2;
  v8 = this + 12;
  sub_40DB9A(this + 12, (int *)&v6 + 1, &v7);
  v7 = a2;
  sub_40DB9A(v8, (int *)&v6 + 1, &v7);
  if ( this[13] != HIDWORD(v6) )
  {
    HIDWORD(v6) = a2;
    v4 = *(_DWORD *)sub_40D9AC(v8, (int *)&v6 + 1);
    v6 = v4;
    if ( (double)v6 == 0.0 )
    {
      sub_40D32E(this, a2);
      HIDWORD(v6) = a2;
      sub_40DB9A(v8, &v7, (_DWORD *)&v6 + 1);
      if ( this[13] != v7 )
      {
        HIDWORD(v6) = a2;
        return *(_DWORD *)sub_40D9AC(v8, (int *)&v6 + 1);
      }
    }
  }
  return v4;
}

//----- (0040D8DE) --------------------------------------------------------
int __thiscall sub_40D8DE(void *this, int *a2)
{
  const struct CString *v3; // eax
  int v5; // [esp+4h] [ebp-20h] BYREF
  int v6; // [esp+Ch] [ebp-18h] BYREF
  char v7[4]; // [esp+10h] [ebp-14h] BYREF
  char v8[4]; // [esp+14h] [ebp-10h] BYREF
  int v9; // [esp+20h] [ebp-4h]

  v3 = CString::CString((CString *)v8);
  v9 = 0;
  v6 = *a2;
  CString::CString((CString *)v7, v3);
  LOBYTE(v9) = 1;
  sub_40DBD4((int)this, (int)&v5, &v6);
  LOBYTE(v9) = 0;
  CString::~CString((CString *)v7);
  v9 = -1;
  CString::~CString((CString *)v8);
  return v5 + 16;
}
// 40D8DE: using guessed type char var_10[4];
// 40D8DE: using guessed type char var_14[4];

//----- (0040D94B) --------------------------------------------------------
void __thiscall sub_40D94B(int this)
{
  void *v2; // esi
  int v3; // [esp+4h] [ebp-4h] BYREF

  sub_40DA3E((_DWORD *)this, &v3, **(_DWORD ***)(this + 4), *(_DWORD **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 12) = 0;
  v2 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  if ( !--dword_432F2C )
  {
    v2 = (void *)dword_432F28;
    dword_432F28 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v2 )
    operator delete(v2);
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432F28: using guessed type int dword_432F28;
// 432F2C: using guessed type int dword_432F2C;

//----- (0040D9AC) --------------------------------------------------------
int __thiscall sub_40D9AC(void *this, int *a2)
{
  int v3; // [esp+0h] [ebp-10h] BYREF
  int v4[2]; // [esp+8h] [ebp-8h] BYREF

  v4[1] = 0;
  v4[0] = *a2;
  sub_40DFDB((int)this, (int)&v3, v4);
  return v3 + 16;
}

//----- (0040D9D5) --------------------------------------------------------
void __thiscall sub_40D9D5(int this)
{
  void *v2; // esi
  int v3; // [esp+4h] [ebp-4h] BYREF

  sub_40DB03((_DWORD *)this, &v3, **(_DWORD ***)(this + 4), *(_DWORD **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 12) = 0;
  v2 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  if ( !--dword_432F34 )
  {
    v2 = (void *)dword_432F30;
    dword_432F30 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v2 )
    operator delete(v2);
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432F30: using guessed type int dword_432F30;
// 432F34: using guessed type int dword_432F34;

//----- (0040DA36) --------------------------------------------------------
void __thiscall sub_40DA36(int this)
{
  CString::~CString((CString *)(this + 4));
}

//----- (0040DA3E) --------------------------------------------------------
_DWORD *__thiscall sub_40DA3E(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v5; // ecx
  int v6; // eax
  _DWORD *v7; // eax
  _DWORD *v8; // edi
  _DWORD *result; // eax
  int v10; // [esp+4h] [ebp-4h] BYREF

  v5 = a3;
  if ( this[3] && (v6 = this[1], a3 == *(_DWORD **)v6) && a4 == (_DWORD *)v6 )
  {
    sub_40DF12(*(void ***)(v6 + 4));
    *(_DWORD *)(this[1] + 4) = dword_432F28;
    v7 = (_DWORD *)this[1];
    this[3] = 0;
    *v7 = v7;
    *(_DWORD *)(this[1] + 8) = this[1];
    v5 = *(_DWORD **)this[1];
  }
  else
  {
    for ( ; a3 != a4; v5 = a3 )
    {
      v8 = v5;
      sub_40E81D(&a3);
      sub_40DC72(this, &v10, v8);
    }
  }
  result = a2;
  *a2 = v5;
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040DAB5) --------------------------------------------------------
_DWORD *__thiscall sub_40DAB5(int this)
{
  int v2; // [esp+0h] [ebp-4h] BYREF

  v2 = this;
  return sub_40DA3E((_DWORD *)this, &v2, **(_DWORD ***)(this + 4), *(_DWORD **)(this + 4));
}

//----- (0040DAC9) --------------------------------------------------------
int *__thiscall sub_40DAC9(_DWORD *this, int *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  _DWORD *v5; // eax
  int v6; // esi
  int *v7; // eax
  int v8; // ecx
  int *result; // eax
  int v10; // [esp+8h] [ebp-4h] BYREF

  v3 = a3;
  v5 = sub_40E522(this, a3);
  v6 = this[1];
  a3 = v5;
  if ( v5 == (_DWORD *)v6 || *v3 < v5[3] )
  {
    v10 = v6;
    v7 = &v10;
  }
  else
  {
    v7 = (int *)&a3;
  }
  v8 = *v7;
  result = a2;
  *a2 = v8;
  return result;
}

//----- (0040DB03) --------------------------------------------------------
_DWORD *__thiscall sub_40DB03(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v5; // ecx
  _DWORD *v6; // eax
  void ***v7; // ebx
  int v8; // eax
  void ***i; // edi
  _DWORD *v10; // eax
  _DWORD *result; // eax
  _DWORD *v12; // edi
  int v13; // [esp+8h] [ebp-4h] BYREF

  v5 = a3;
  if ( this[3] && (v6 = (_DWORD *)this[1], a3 == (_DWORD *)*v6) && a4 == v6 )
  {
    v7 = (void ***)v6[1];
    v8 = dword_432F30;
    for ( i = v7; i != (void ***)dword_432F30; v7 = i )
    {
      sub_40E310(i[2]);
      i = (void ***)*i;
      operator delete(v7);
      v8 = dword_432F30;
    }
    *(_DWORD *)(this[1] + 4) = v8;
    v10 = (_DWORD *)this[1];
    this[3] = 0;
    *v10 = v10;
    *(_DWORD *)(this[1] + 8) = this[1];
    result = a2;
    *a2 = *(_DWORD *)this[1];
  }
  else
  {
    while ( v5 != a4 )
    {
      v12 = v5;
      sub_40E88F(&a3);
      sub_40E079(this, &v13, v12);
      v5 = a3;
    }
    result = a2;
    *a2 = v5;
  }
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040DB9A) --------------------------------------------------------
int *__thiscall sub_40DB9A(_DWORD *this, int *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  _DWORD *v5; // eax
  int v6; // esi
  int *v7; // eax
  int v8; // ecx
  int *result; // eax
  int v10; // [esp+8h] [ebp-4h] BYREF

  v3 = a3;
  v5 = sub_40E72A(this, a3);
  v6 = this[1];
  a3 = v5;
  if ( v5 == (_DWORD *)v6 || *v3 < v5[3] )
  {
    v10 = v6;
    v7 = &v10;
  }
  else
  {
    v7 = (int *)&a3;
  }
  v8 = *v7;
  result = a2;
  *a2 = v8;
  return result;
}

//----- (0040DBD4) --------------------------------------------------------
int __thiscall sub_40DBD4(int this, int a2, _DWORD *a3)
{
  bool v4; // dl
  _DWORD *v5; // eax
  _DWORD *v6; // ebx
  _DWORD *v7; // esi
  int *v8; // eax
  int v9; // ecx
  int v10; // ecx
  int result; // eax
  _DWORD *v12; // [esp+Ch] [ebp-4h] BYREF

  v4 = 1;
  v5 = *(_DWORD **)(this + 4);
  v6 = v5;
  v7 = (_DWORD *)v5[1];
  while ( v7 != (_DWORD *)dword_432F28 )
  {
    v6 = v7;
    v4 = *a3 < v7[3];
    if ( *a3 >= v7[3] )
      v7 = (_DWORD *)v7[2];
    else
      v7 = (_DWORD *)*v7;
  }
  if ( *(_BYTE *)(this + 8) )
    goto LABEL_7;
  v9 = (int)v6;
  v12 = v6;
  if ( v4 )
  {
    if ( v6 == (_DWORD *)*v5 )
    {
LABEL_7:
      v8 = sub_40E3D1((_DWORD *)this, &a3, (int)v7, v6, a3);
LABEL_13:
      v10 = *v8;
      result = a2;
      *(_DWORD *)a2 = v10;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_40E7E1(&v12);
    v9 = (int)v12;
  }
  if ( *(_DWORD *)(v9 + 12) < *a3 )
  {
    v8 = sub_40E3D1((_DWORD *)this, &a3, (int)v7, v6, a3);
    goto LABEL_13;
  }
  result = a2;
  *(_BYTE *)(a2 + 4) = 0;
  *(_DWORD *)a2 = v9;
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040DC72) --------------------------------------------------------
_DWORD *__thiscall sub_40DC72(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  _DWORD *v4; // esi
  _DWORD *v5; // ebx
  bool v6; // zf
  _DWORD *v7; // ecx
  _DWORD *v8; // eax
  _DWORD *v9; // edx
  _DWORD *v10; // ebx
  int v11; // ecx
  _DWORD *v12; // ecx
  int v13; // ecx
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  _DWORD *v17; // ecx
  _DWORD *v18; // edx
  _DWORD *v19; // edx
  _DWORD *v20; // ebx
  int v21; // edx
  _DWORD *v22; // ebx
  _DWORD *v23; // edi
  int v24; // eax
  _DWORD *v25; // eax
  void *v26; // esi
  _DWORD *result; // eax
  char v28[4]; // [esp+Ch] [ebp-1Ch] BYREF
  _DWORD *v29; // [esp+10h] [ebp-18h]
  void *v30; // [esp+14h] [ebp-14h]
  _DWORD *v31; // [esp+18h] [ebp-10h]
  int v32; // [esp+24h] [ebp-4h]

  v31 = this;
  v3 = a3;
  sub_40E81D(&a3);
  v4 = (_DWORD *)*v3;
  v5 = v3 + 2;
  v6 = *v3 == dword_432F28;
  v30 = v3;
  v29 = v3 + 2;
  if ( v6 )
  {
    v4 = (_DWORD *)*v5;
  }
  else
  {
    v7 = (_DWORD *)*v5;
    if ( *v5 != dword_432F28 )
    {
      while ( *v7 != dword_432F28 )
        v7 = (_DWORD *)*v7;
      v4 = (_DWORD *)v7[2];
      v30 = v7;
      v29 = v7 + 2;
    }
  }
  std::_Lockit::_Lockit((std::_Lockit *)v28);
  v8 = v30;
  v32 = 0;
  if ( v30 == v3 )
  {
    v15 = (int)v31;
    v4[1] = *((_DWORD *)v30 + 1);
    v16 = *(_DWORD *)(v15 + 4);
    if ( *(_DWORD **)(v16 + 4) == v3 )
    {
      *(_DWORD *)(v16 + 4) = v4;
    }
    else
    {
      v17 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v17 == v3 )
        *v17 = v4;
      else
        v17[2] = v4;
    }
    v18 = *(_DWORD **)(v15 + 4);
    v29 = v18;
    if ( (_DWORD *)*v18 == v3 )
    {
      if ( *v5 == dword_432F28 )
      {
        *v18 = v3[1];
      }
      else
      {
        v19 = (_DWORD *)*v4;
        v20 = v4;
        while ( v19 != (_DWORD *)dword_432F28 )
        {
          v20 = v19;
          v19 = (_DWORD *)*v19;
        }
        *v29 = v20;
      }
    }
    v21 = v31[1];
    if ( *(_DWORD **)(v21 + 8) == v3 )
    {
      if ( *v3 == dword_432F28 )
      {
        *(_DWORD *)(v21 + 8) = v3[1];
      }
      else
      {
        v22 = (_DWORD *)v4[2];
        v23 = v4;
        while ( v22 != (_DWORD *)dword_432F28 )
        {
          v23 = v22;
          v22 = (_DWORD *)v22[2];
        }
        *(_DWORD *)(v21 + 8) = v23;
      }
    }
    v10 = v31;
  }
  else
  {
    *(_DWORD *)(*v3 + 4) = v30;
    *v8 = *v3;
    if ( v8 == (_DWORD *)*v5 )
    {
      v4[1] = v8;
    }
    else
    {
      v9 = v29;
      v4[1] = v8[1];
      *(_DWORD *)v8[1] = v4;
      *v9 = *v5;
      *(_DWORD *)(*v5 + 4) = v8;
    }
    v10 = v31;
    v11 = v31[1];
    if ( *(_DWORD **)(v11 + 4) == v3 )
    {
      *(_DWORD *)(v11 + 4) = v8;
    }
    else
    {
      v12 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v12 == v3 )
        *v12 = v8;
      else
        v12[2] = v8;
    }
    v13 = v3[1];
    v30 = v3;
    v8[1] = v13;
    v14 = v8[5];
    v8[5] = v3[5];
    v3[5] = v14;
    v8 = v3;
  }
  if ( v8[5] == 1 )
  {
    while ( v4 != *(_DWORD **)(v10[1] + 4) && v4[5] == 1 )
    {
      v24 = v4[1];
      if ( v4 == *(_DWORD **)v24 )
      {
        v25 = *(_DWORD **)(v24 + 8);
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_40E54F(v10, v4[1]);
          v25 = *(_DWORD **)(v4[1] + 8);
        }
        if ( *(_DWORD *)(*v25 + 20) != 1 || *(_DWORD *)(v25[2] + 20) != 1 )
        {
          if ( *(_DWORD *)(v25[2] + 20) == 1 )
          {
            *(_DWORD *)(*v25 + 20) = 1;
            v25[5] = 0;
            sub_40E593(v10, v25);
            v25 = *(_DWORD **)(v4[1] + 8);
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(v25[2] + 20) = 1;
          sub_40E54F(v10, v4[1]);
          break;
        }
      }
      else
      {
        v25 = *(_DWORD **)v24;
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_40E593(v10, (_DWORD *)v4[1]);
          v25 = *(_DWORD **)v4[1];
        }
        if ( *(_DWORD *)(v25[2] + 20) != 1 || *(_DWORD *)(*v25 + 20) != 1 )
        {
          if ( *(_DWORD *)(*v25 + 20) == 1 )
          {
            *(_DWORD *)(v25[2] + 20) = 1;
            v25[5] = 0;
            sub_40E54F(v10, (int)v25);
            v25 = *(_DWORD **)v4[1];
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(*v25 + 20) = 1;
          sub_40E593(v10, (_DWORD *)v4[1]);
          break;
        }
      }
      v25[5] = 0;
      v4 = (_DWORD *)v4[1];
    }
    v4[5] = 1;
  }
  v32 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)v28);
  v26 = v30;
  CString::~CString((CString *)((char *)v30 + 16));
  operator delete(v26);
  result = a2;
  --v10[3];
  *a2 = a3;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432F28: using guessed type int dword_432F28;
// 40DC72: using guessed type char var_1C[4];

//----- (0040DF12) --------------------------------------------------------
void __stdcall sub_40DF12(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; i != (void **)dword_432F28; v1 = i )
  {
    sub_40DF12(i[2]);
    i = (void **)*i;
    sub_40DA36((int)(v1 + 3));
    operator delete(v1);
  }
}
// 432F28: using guessed type int dword_432F28;

//----- (0040DF50) --------------------------------------------------------
int __thiscall sub_40DF50(_DWORD *this)
{
  _DWORD *v2; // esi
  int v3; // esi
  _DWORD *v4; // eax
  int result; // eax
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  void *v7; // [esp+10h] [ebp-4h]

  v2 = operator new(0x18u);
  v2[1] = 0;
  v2[5] = 1;
  v7 = v2;
  std::_Lockit::_Lockit((std::_Lockit *)v6);
  if ( !dword_432F28 )
  {
    dword_432F28 = (int)v2;
    *v2 = 0;
    v7 = 0;
    *(_DWORD *)(dword_432F28 + 8) = 0;
  }
  ++dword_432F2C;
  std::_Lockit::~_Lockit((std::_Lockit *)v6);
  if ( v7 )
    operator delete(v7);
  v3 = dword_432F28;
  v4 = operator new(0x18u);
  v4[1] = v3;
  v4[5] = 0;
  this[1] = v4;
  this[3] = 0;
  *v4 = v4;
  result = this[1];
  *(_DWORD *)(result + 8) = result;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432F28: using guessed type int dword_432F28;
// 432F2C: using guessed type int dword_432F2C;
// 40DF50: using guessed type char var_8[4];

//----- (0040DFDB) --------------------------------------------------------
int __thiscall sub_40DFDB(int this, int a2, _DWORD *a3)
{
  bool v4; // dl
  _DWORD *v5; // eax
  _DWORD *v6; // ebx
  _DWORD *v7; // esi
  int *v8; // eax
  int v9; // ecx
  int v10; // ecx
  int result; // eax
  _DWORD *v12; // [esp+Ch] [ebp-4h] BYREF

  v4 = 1;
  v5 = *(_DWORD **)(this + 4);
  v6 = v5;
  v7 = (_DWORD *)v5[1];
  while ( v7 != (_DWORD *)dword_432F30 )
  {
    v6 = v7;
    v4 = *a3 < v7[3];
    if ( *a3 >= v7[3] )
      v7 = (_DWORD *)v7[2];
    else
      v7 = (_DWORD *)*v7;
  }
  if ( *(_BYTE *)(this + 8) )
    goto LABEL_7;
  v9 = (int)v6;
  v12 = v6;
  if ( v4 )
  {
    if ( v6 == (_DWORD *)*v5 )
    {
LABEL_7:
      v8 = sub_40E5D9((_DWORD *)this, &a3, (int)v7, v6, a3);
LABEL_13:
      v10 = *v8;
      result = a2;
      *(_DWORD *)a2 = v10;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_40E853(&v12);
    v9 = (int)v12;
  }
  if ( *(_DWORD *)(v9 + 12) < *a3 )
  {
    v8 = sub_40E5D9((_DWORD *)this, &a3, (int)v7, v6, a3);
    goto LABEL_13;
  }
  result = a2;
  *(_BYTE *)(a2 + 4) = 0;
  *(_DWORD *)a2 = v9;
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E079) --------------------------------------------------------
_DWORD *__thiscall sub_40E079(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  _DWORD *v4; // esi
  _DWORD *v5; // ebx
  bool v6; // zf
  _DWORD *v7; // ecx
  _DWORD *v8; // eax
  _DWORD *v9; // edx
  _DWORD *v10; // ebx
  int v11; // ecx
  _DWORD *v12; // ecx
  int v13; // ecx
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  _DWORD *v17; // ecx
  _DWORD *v18; // edx
  _DWORD *v19; // edx
  _DWORD *v20; // ebx
  int v21; // edx
  _DWORD *v22; // ebx
  _DWORD *v23; // edi
  int v24; // eax
  _DWORD *v25; // eax
  _DWORD *result; // eax
  char v27[4]; // [esp+Ch] [ebp-1Ch] BYREF
  _DWORD *v28; // [esp+10h] [ebp-18h]
  void *v29; // [esp+14h] [ebp-14h]
  _DWORD *v30; // [esp+18h] [ebp-10h]
  int v31; // [esp+24h] [ebp-4h]

  v30 = this;
  v3 = a3;
  sub_40E88F(&a3);
  v4 = (_DWORD *)*v3;
  v5 = v3 + 2;
  v6 = *v3 == dword_432F30;
  v29 = v3;
  v28 = v3 + 2;
  if ( v6 )
  {
    v4 = (_DWORD *)*v5;
  }
  else
  {
    v7 = (_DWORD *)*v5;
    if ( *v5 != dword_432F30 )
    {
      while ( *v7 != dword_432F30 )
        v7 = (_DWORD *)*v7;
      v4 = (_DWORD *)v7[2];
      v29 = v7;
      v28 = v7 + 2;
    }
  }
  std::_Lockit::_Lockit((std::_Lockit *)v27);
  v8 = v29;
  v31 = 0;
  if ( v29 == v3 )
  {
    v15 = (int)v30;
    v4[1] = *((_DWORD *)v29 + 1);
    v16 = *(_DWORD *)(v15 + 4);
    if ( *(_DWORD **)(v16 + 4) == v3 )
    {
      *(_DWORD *)(v16 + 4) = v4;
    }
    else
    {
      v17 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v17 == v3 )
        *v17 = v4;
      else
        v17[2] = v4;
    }
    v18 = *(_DWORD **)(v15 + 4);
    v28 = v18;
    if ( (_DWORD *)*v18 == v3 )
    {
      if ( *v5 == dword_432F30 )
      {
        *v18 = v3[1];
      }
      else
      {
        v19 = (_DWORD *)*v4;
        v20 = v4;
        while ( v19 != (_DWORD *)dword_432F30 )
        {
          v20 = v19;
          v19 = (_DWORD *)*v19;
        }
        *v28 = v20;
      }
    }
    v21 = v30[1];
    if ( *(_DWORD **)(v21 + 8) == v3 )
    {
      if ( *v3 == dword_432F30 )
      {
        *(_DWORD *)(v21 + 8) = v3[1];
      }
      else
      {
        v22 = (_DWORD *)v4[2];
        v23 = v4;
        while ( v22 != (_DWORD *)dword_432F30 )
        {
          v23 = v22;
          v22 = (_DWORD *)v22[2];
        }
        *(_DWORD *)(v21 + 8) = v23;
      }
    }
    v10 = v30;
  }
  else
  {
    *(_DWORD *)(*v3 + 4) = v29;
    *v8 = *v3;
    if ( v8 == (_DWORD *)*v5 )
    {
      v4[1] = v8;
    }
    else
    {
      v9 = v28;
      v4[1] = v8[1];
      *(_DWORD *)v8[1] = v4;
      *v9 = *v5;
      *(_DWORD *)(*v5 + 4) = v8;
    }
    v10 = v30;
    v11 = v30[1];
    if ( *(_DWORD **)(v11 + 4) == v3 )
    {
      *(_DWORD *)(v11 + 4) = v8;
    }
    else
    {
      v12 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v12 == v3 )
        *v12 = v8;
      else
        v12[2] = v8;
    }
    v13 = v3[1];
    v29 = v3;
    v8[1] = v13;
    v14 = v8[5];
    v8[5] = v3[5];
    v3[5] = v14;
    v8 = v3;
  }
  if ( v8[5] == 1 )
  {
    while ( v4 != *(_DWORD **)(v10[1] + 4) && v4[5] == 1 )
    {
      v24 = v4[1];
      if ( v4 == *(_DWORD **)v24 )
      {
        v25 = *(_DWORD **)(v24 + 8);
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_40E757(v10, v4[1]);
          v25 = *(_DWORD **)(v4[1] + 8);
        }
        if ( *(_DWORD *)(*v25 + 20) != 1 || *(_DWORD *)(v25[2] + 20) != 1 )
        {
          if ( *(_DWORD *)(v25[2] + 20) == 1 )
          {
            *(_DWORD *)(*v25 + 20) = 1;
            v25[5] = 0;
            sub_40E79B(v10, v25);
            v25 = *(_DWORD **)(v4[1] + 8);
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(v25[2] + 20) = 1;
          sub_40E757(v10, v4[1]);
          break;
        }
      }
      else
      {
        v25 = *(_DWORD **)v24;
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_40E79B(v10, (_DWORD *)v4[1]);
          v25 = *(_DWORD **)v4[1];
        }
        if ( *(_DWORD *)(v25[2] + 20) != 1 || *(_DWORD *)(*v25 + 20) != 1 )
        {
          if ( *(_DWORD *)(*v25 + 20) == 1 )
          {
            *(_DWORD *)(v25[2] + 20) = 1;
            v25[5] = 0;
            sub_40E757(v10, (int)v25);
            v25 = *(_DWORD **)v4[1];
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(*v25 + 20) = 1;
          sub_40E79B(v10, (_DWORD *)v4[1]);
          break;
        }
      }
      v25[5] = 0;
      v4 = (_DWORD *)v4[1];
    }
    v4[5] = 1;
  }
  v31 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)v27);
  operator delete(v29);
  result = a2;
  --v10[3];
  *a2 = a3;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432F30: using guessed type int dword_432F30;
// 40E079: using guessed type char var_1C[4];

//----- (0040E310) --------------------------------------------------------
void __stdcall sub_40E310(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; i != (void **)dword_432F30; v1 = i )
  {
    sub_40E310(i[2]);
    i = (void **)*i;
    operator delete(v1);
  }
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E346) --------------------------------------------------------
int __thiscall sub_40E346(_DWORD *this)
{
  _DWORD *v2; // esi
  int v3; // esi
  _DWORD *v4; // eax
  int result; // eax
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  void *v7; // [esp+10h] [ebp-4h]

  v2 = operator new(0x18u);
  v2[1] = 0;
  v2[5] = 1;
  v7 = v2;
  std::_Lockit::_Lockit((std::_Lockit *)v6);
  if ( !dword_432F30 )
  {
    dword_432F30 = (int)v2;
    *v2 = 0;
    v7 = 0;
    *(_DWORD *)(dword_432F30 + 8) = 0;
  }
  ++dword_432F34;
  std::_Lockit::~_Lockit((std::_Lockit *)v6);
  if ( v7 )
    operator delete(v7);
  v3 = dword_432F30;
  v4 = operator new(0x18u);
  v4[1] = v3;
  v4[5] = 0;
  this[1] = v4;
  this[3] = 0;
  *v4 = v4;
  result = this[1];
  *(_DWORD *)(result + 8) = result;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432F30: using guessed type int dword_432F30;
// 432F34: using guessed type int dword_432F34;
// 40E346: using guessed type char var_8[4];

//----- (0040E3D1) --------------------------------------------------------
_DWORD *__thiscall sub_40E3D1(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5)
{
  _DWORD *v6; // edi
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  _DWORD *v10; // eax
  _DWORD *v11; // edx
  _DWORD *v12; // ecx
  _DWORD *result; // eax

  v6 = operator new(0x18u);
  v6[5] = 0;
  v6[1] = a4;
  *v6 = dword_432F28;
  v6[2] = dword_432F28;
  sub_40E8C5(v6 + 3, a5);
  ++this[3];
  if ( a4 != (_DWORD *)this[1] && a3 == dword_432F28 && *a5 >= a4[3] )
  {
    a4[2] = v6;
    v7 = this[1];
    if ( a4 != *(_DWORD **)(v7 + 8) )
      goto LABEL_10;
    goto LABEL_5;
  }
  *a4 = v6;
  v8 = (_DWORD *)this[1];
  if ( a4 == v8 )
  {
    v8[1] = v6;
    v7 = this[1];
LABEL_5:
    *(_DWORD *)(v7 + 8) = v6;
    goto LABEL_10;
  }
  if ( a4 == (_DWORD *)*v8 )
    *v8 = v6;
LABEL_10:
  v9 = v6;
  while ( v9 != *(_DWORD **)(this[1] + 4) )
  {
    v10 = (_DWORD *)v9[1];
    if ( v10[5] )
      break;
    v11 = (_DWORD *)v10[1];
    v12 = (_DWORD *)*v11;
    if ( v10 == (_DWORD *)*v11 )
    {
      v12 = (_DWORD *)v11[2];
      if ( v12[5] )
      {
        if ( v9 == (_DWORD *)v10[2] )
        {
          v9 = (_DWORD *)v9[1];
          sub_40E54F(this, (int)v10);
        }
        *(_DWORD *)(v9[1] + 20) = 1;
        *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
        sub_40E593(this, *(_DWORD **)(v9[1] + 4));
        continue;
      }
    }
    else if ( v12[5] )
    {
      if ( v9 == (_DWORD *)*v10 )
      {
        v9 = (_DWORD *)v9[1];
        sub_40E593(this, v10);
      }
      *(_DWORD *)(v9[1] + 20) = 1;
      *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
      sub_40E54F(this, *(_DWORD *)(v9[1] + 4));
      continue;
    }
    v10[5] = 1;
    v12[5] = 1;
    *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
    v9 = *(_DWORD **)(v9[1] + 4);
  }
  *(_DWORD *)(*(_DWORD *)(this[1] + 4) + 20) = 1;
  result = a2;
  *a2 = v6;
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040E522) --------------------------------------------------------
_DWORD *__thiscall sub_40E522(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD *v3; // ecx

  result = (_DWORD *)this[1];
  v3 = (_DWORD *)result[1];
  while ( v3 != (_DWORD *)dword_432F28 )
  {
    if ( v3[3] >= *a2 )
    {
      result = v3;
      v3 = (_DWORD *)*v3;
    }
    else
    {
      v3 = (_DWORD *)v3[2];
    }
  }
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040E54F) --------------------------------------------------------
_DWORD *__thiscall sub_40E54F(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( *result != dword_432F28 )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = this[1];
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
  }
  *result = a2;
  *(_DWORD *)(a2 + 4) = result;
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040E593) --------------------------------------------------------
int __thiscall sub_40E593(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( v3 != dword_432F28 )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = this[1];
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
  }
  *(_DWORD *)(result + 8) = a2;
  a2[1] = result;
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040E5D9) --------------------------------------------------------
_DWORD *__thiscall sub_40E5D9(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5)
{
  _DWORD *v6; // edi
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  _DWORD *v10; // eax
  _DWORD *v11; // edx
  _DWORD *v12; // ecx
  _DWORD *result; // eax

  v6 = operator new(0x18u);
  v6[5] = 0;
  v6[1] = a4;
  *v6 = dword_432F30;
  v6[2] = dword_432F30;
  sub_40770E(v6 + 3, a5);
  ++this[3];
  if ( a4 != (_DWORD *)this[1] && a3 == dword_432F30 && *a5 >= a4[3] )
  {
    a4[2] = v6;
    v7 = this[1];
    if ( a4 != *(_DWORD **)(v7 + 8) )
      goto LABEL_10;
    goto LABEL_5;
  }
  *a4 = v6;
  v8 = (_DWORD *)this[1];
  if ( a4 == v8 )
  {
    v8[1] = v6;
    v7 = this[1];
LABEL_5:
    *(_DWORD *)(v7 + 8) = v6;
    goto LABEL_10;
  }
  if ( a4 == (_DWORD *)*v8 )
    *v8 = v6;
LABEL_10:
  v9 = v6;
  while ( v9 != *(_DWORD **)(this[1] + 4) )
  {
    v10 = (_DWORD *)v9[1];
    if ( v10[5] )
      break;
    v11 = (_DWORD *)v10[1];
    v12 = (_DWORD *)*v11;
    if ( v10 == (_DWORD *)*v11 )
    {
      v12 = (_DWORD *)v11[2];
      if ( v12[5] )
      {
        if ( v9 == (_DWORD *)v10[2] )
        {
          v9 = (_DWORD *)v9[1];
          sub_40E757(this, (int)v10);
        }
        *(_DWORD *)(v9[1] + 20) = 1;
        *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
        sub_40E79B(this, *(_DWORD **)(v9[1] + 4));
        continue;
      }
    }
    else if ( v12[5] )
    {
      if ( v9 == (_DWORD *)*v10 )
      {
        v9 = (_DWORD *)v9[1];
        sub_40E79B(this, v10);
      }
      *(_DWORD *)(v9[1] + 20) = 1;
      *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
      sub_40E757(this, *(_DWORD *)(v9[1] + 4));
      continue;
    }
    v10[5] = 1;
    v12[5] = 1;
    *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 20) = 0;
    v9 = *(_DWORD **)(v9[1] + 4);
  }
  *(_DWORD *)(*(_DWORD *)(this[1] + 4) + 20) = 1;
  result = a2;
  *a2 = v6;
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E72A) --------------------------------------------------------
_DWORD *__thiscall sub_40E72A(_DWORD *this, _DWORD *a2)
{
  _DWORD *result; // eax
  _DWORD *v3; // ecx

  result = (_DWORD *)this[1];
  v3 = (_DWORD *)result[1];
  while ( v3 != (_DWORD *)dword_432F30 )
  {
    if ( v3[3] >= *a2 )
    {
      result = v3;
      v3 = (_DWORD *)*v3;
    }
    else
    {
      v3 = (_DWORD *)v3[2];
    }
  }
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E757) --------------------------------------------------------
_DWORD *__thiscall sub_40E757(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( *result != dword_432F30 )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = this[1];
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
  }
  *result = a2;
  *(_DWORD *)(a2 + 4) = result;
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E79B) --------------------------------------------------------
int __thiscall sub_40E79B(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( v3 != dword_432F30 )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = this[1];
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
  }
  *(_DWORD *)(result + 8) = a2;
  a2[1] = result;
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E7E1) --------------------------------------------------------
_DWORD *__thiscall sub_40E7E1(void *this)
{
  _DWORD *result; // eax
  _DWORD *v2; // edx

  result = *(_DWORD **)this;
  if ( *(_DWORD *)(*(_DWORD *)this + 20) || *(_DWORD **)(result[1] + 4) != result )
  {
    v2 = (_DWORD *)*result;
    if ( *result == dword_432F28 )
    {
      while ( 1 )
      {
        result = (_DWORD *)result[1];
        if ( *(_DWORD *)this != *result )
          break;
        *(_DWORD *)this = result;
      }
    }
    else
    {
      do
      {
        result = v2;
        v2 = (_DWORD *)v2[2];
      }
      while ( v2 != (_DWORD *)dword_432F28 );
    }
  }
  else
  {
    result = (_DWORD *)result[2];
  }
  *(_DWORD *)this = result;
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040E81D) --------------------------------------------------------
_DWORD *__thiscall sub_40E81D(void *this)
{
  _DWORD *result; // eax

  result = *(_DWORD **)(*(_DWORD *)this + 8);
  if ( result != (_DWORD *)dword_432F28 )
  {
    while ( *result != dword_432F28 )
      result = (_DWORD *)*result;
LABEL_8:
    *(_DWORD *)this = result;
    return result;
  }
  for ( result = *(_DWORD **)(*(_DWORD *)this + 4); *(_DWORD *)this == result[2]; result = (_DWORD *)result[1] )
    *(_DWORD *)this = result;
  if ( *(_DWORD **)(*(_DWORD *)this + 8) != result )
    goto LABEL_8;
  return result;
}
// 432F28: using guessed type int dword_432F28;

//----- (0040E853) --------------------------------------------------------
_DWORD *__thiscall sub_40E853(void *this)
{
  _DWORD *result; // eax
  _DWORD *v2; // edx

  result = *(_DWORD **)this;
  if ( *(_DWORD *)(*(_DWORD *)this + 20) || *(_DWORD **)(result[1] + 4) != result )
  {
    v2 = (_DWORD *)*result;
    if ( *result == dword_432F30 )
    {
      while ( 1 )
      {
        result = (_DWORD *)result[1];
        if ( *(_DWORD *)this != *result )
          break;
        *(_DWORD *)this = result;
      }
    }
    else
    {
      do
      {
        result = v2;
        v2 = (_DWORD *)v2[2];
      }
      while ( v2 != (_DWORD *)dword_432F30 );
    }
  }
  else
  {
    result = (_DWORD *)result[2];
  }
  *(_DWORD *)this = result;
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E88F) --------------------------------------------------------
_DWORD *__thiscall sub_40E88F(void *this)
{
  _DWORD *result; // eax

  result = *(_DWORD **)(*(_DWORD *)this + 8);
  if ( result != (_DWORD *)dword_432F30 )
  {
    while ( *result != dword_432F30 )
      result = (_DWORD *)*result;
LABEL_8:
    *(_DWORD *)this = result;
    return result;
  }
  for ( result = *(_DWORD **)(*(_DWORD *)this + 4); *(_DWORD *)this == result[2]; result = (_DWORD *)result[1] )
    *(_DWORD *)this = result;
  if ( *(_DWORD **)(*(_DWORD *)this + 8) != result )
    goto LABEL_8;
  return result;
}
// 432F30: using guessed type int dword_432F30;

//----- (0040E8C5) --------------------------------------------------------
CString *__cdecl sub_40E8C5(_DWORD *a1, _DWORD *a2)
{
  CString *result; // eax

  result = (CString *)a1;
  if ( a1 )
  {
    *a1 = *a2;
    return CString::CString((CString *)(a1 + 1), (const struct CString *)(a2 + 1));
  }
  return result;
}

//----- (0040E8FD) --------------------------------------------------------
int __thiscall sub_40E8FD(int this, struct CWnd *a2)
{
  CDialog::CDialog((CDialog *)this, 0xA6u, a2);
  CString::CString((CString *)(this + 192));
  CString::CString((CString *)(this + 196));
  CString::CString((CString *)(this + 200));
  CString::CString((CString *)(this + 216));
  sub_40D1D4(this + 224);
  *(_BYTE *)(this + 308) = 0;
  *(_BYTE *)(this + 300) = HIBYTE(a2);
  *(_BYTE *)(this + 301) = HIBYTE(a2);
  sub_40F978((_DWORD *)(this + 300));
  CWnd::CWnd((CWnd *)(this + 316));
  *(_DWORD *)(this + 316) = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 380));
  *(_DWORD *)(this + 380) = &off_41D8C8;
  CWnd::CWnd((CWnd *)(this + 444));
  *(_DWORD *)(this + 444) = &off_41DA5C;
  CWnd::CWnd((CWnd *)(this + 508));
  *(_DWORD *)(this + 508) = &off_41D8C8;
  CWnd::CWnd((CWnd *)(this + 572));
  *(_DWORD *)(this + 572) = &off_41D8C8;
  CWnd::CWnd((CWnd *)(this + 636));
  *(_DWORD *)(this + 636) = &off_41D8C8;
  *(_DWORD *)this = &off_41E748;
  return this;
}
// 41D8C8: using guessed type struct CRuntimeClass *(__thiscall *off_41D8C8)(CComboBox *__hidden this);
// 41D998: using guessed type struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this);
// 41DA5C: using guessed type struct CRuntimeClass *(__thiscall *off_41DA5C)(CEdit *__hidden this);
// 41E748: using guessed type struct CRuntimeClass *(__thiscall *off_41E748)(CDialog *__hidden this);

//----- (0040EA21) --------------------------------------------------------
_DWORD *__thiscall sub_40EA21(_DWORD *this, char a2)
{
  sub_40873C(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0040EA3D) --------------------------------------------------------
void __thiscall sub_40EA3D(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 2105, (struct CWnd *)(this + 316));
  DDX_Control(a2, 5012, (struct CWnd *)(this + 380));
  DDX_Control(a2, 1000, (struct CWnd *)(this + 444));
  DDX_Control(a2, 1014, (struct CWnd *)(this + 508));
  DDX_Control(a2, 5011, (struct CWnd *)(this + 572));
  DDX_Control(a2, 1061, (struct CWnd *)(this + 636));
}

//----- (0040EAB6) --------------------------------------------------------
int (**sub_40EAB6())()
{
  return &off_41E698;
}
// 41E698: using guessed type int (*off_41E698)();

//----- (0040EABC) --------------------------------------------------------
int __thiscall sub_40EABC(_DWORD *this, int a2)
{
  this[175] = a2;
  return sub_40F324(this);
}

//----- (0040EACE) --------------------------------------------------------
int __thiscall sub_40EACE(HWND *this)
{
  struct tagRECT Rect; // [esp+Ch] [ebp-28h] BYREF
  LPARAM lParam; // [esp+1Ch] [ebp-18h] BYREF
  int v5; // [esp+20h] [ebp-14h]
  int v6; // [esp+24h] [ebp-10h]
  int v7; // [esp+30h] [ebp-4h]

  CDialog::OnInitDialog((CDialog *)this);
  dword_4319F8 = sub_4141D6(&word_4319FC, dword_4319F8);
  dword_431B90 = sub_4141D6(&word_431B94, dword_431B90);
  if ( dword_4319F8 < 10 )
    dword_4319F8 = 10;
  if ( dword_4319F8 > 1000 )
    dword_4319F8 = 1000;
  dword_431B08 = sub_4141D6(&word_431B0C, dword_431B08);
  CString::CString((CString *)&lParam);
  v7 = 0;
  v6 = 10;
  v5 = 1;
  do
  {
    CString::Format((CString *)&lParam, aDKb, v6);
    SendMessageW(this[167], 0x14Au, v5 - 1, lParam);
    v6 += 10;
    ++v5;
  }
  while ( v6 <= 1000 );
  SendMessageW(this[167], 0x14Eu, 0x15u, 0);
  SendMessageW(this[167], 0x14Eu, (dword_4319F8 - 1) / 10, 0);
  SendMessageW(this[87], 0xF1u, dword_431A80, 0);
  GetWindowRect(this[167], &Rect);
  v5 = Rect.right - Rect.left;
  SendMessageW(this[167], 0x160u, (__int64)((double)(Rect.right - Rect.left) * 1.33), 0);
  sub_40ED7C((int)this);
  v7 = -1;
  CString::~CString((CString *)&lParam);
  return 1;
}

//----- (0040EC74) --------------------------------------------------------
UINT_PTR __thiscall sub_40EC74(HWND *this)
{
  int v2; // eax

  v2 = SendMessageW(this[151], 0x147u, 0, 0);
  if ( v2 != dword_431B08 )
  {
    dword_431B08 = v2;
    sub_4141BE(&word_431B0C, v2);
  }
  sub_40F324(this);
  KillTimer(this[8], 0x7D0u);
  KillTimer(this[8], 0x7D0u);
  return SetTimer(this[8], 0x7D0u, 0x64u, 0);
}

//----- (0040ED70) --------------------------------------------------------
int __thiscall sub_40ED70(int this)
{
  int result; // eax

  if ( *(_DWORD *)(this + 32) )
    return sub_40ED7C(this);
  return result;
}

//----- (0040ED7C) --------------------------------------------------------
int __thiscall sub_40ED7C(int this)
{
  HWND DlgItem; // eax
  unsigned __int16 *v3; // eax
  _DWORD *v4; // eax
  int v5; // ecx
  int v6; // eax
  CString *v7; // eax
  HWND v8; // eax
  CString *v9; // eax
  CString *v10; // eax
  int v12; // [esp+4h] [ebp-50h]
  double v13; // [esp+14h] [ebp-40h]
  signed int v14; // [esp+20h] [ebp-34h]
  double v15; // [esp+24h] [ebp-30h] BYREF
  unsigned __int16 *v16; // [esp+2Ch] [ebp-28h] BYREF
  WPARAM v17[2]; // [esp+30h] [ebp-24h] BYREF
  int v18; // [esp+38h] [ebp-1Ch] BYREF
  LPARAM v19; // [esp+3Ch] [ebp-18h] BYREF
  LPARAM lParam; // [esp+40h] [ebp-14h] BYREF
  WPARAM wParam; // [esp+44h] [ebp-10h] BYREF
  int v22; // [esp+50h] [ebp-4h]

  SendMessageW(*(HWND *)(this + 604), 0x14Bu, 0, 0);
  SendMessageW(*(HWND *)(this + 540), 0x14Bu, 0, 0);
  SendMessageW(*(HWND *)(this + 412), 0x14Bu, 0, 0);
  CString::CString((CString *)&v19);
  v22 = 0;
  DlgItem = GetDlgItem(*(HWND *)(this + 32), 1073);
  SendMessageW(DlgItem, 0x401u, 0, 6553600);
  v3 = sub_414BE2(67);
  CWnd::SetWindowTextW((CWnd *)(this + 316), v3);
  CString::CString((CString *)&v18);
  LOBYTE(v22) = 1;
  CString::CString((CString *)&lParam);
  v12 = *(_DWORD *)(this + 108);
  LOBYTE(v22) = 2;
  v13 = (double)sub_40D838((_DWORD *)(this + 224), v12) * 0.00000095367431640625;
  sub_40D7EC((_DWORD *)(this + 224), (CString *)&v18, *(_DWORD *)(this + 108));
  CString::Format((CString *)&lParam, aS1fMb, v18, v13);
  v4 = (_DWORD *)(this + 152);
  v5 = 10;
  do
  {
    *(v4 - 10) = -1;
    *v4++ = -1;
    --v5;
  }
  while ( v5 );
  wParam = 0;
  v15 = 0.0;
  if ( sub_40D7E7((_DWORD *)(this + 224)) >= 0 )
  {
    do
    {
      *(double *)v17 = (double)sub_40D838((_DWORD *)(this + 224), wParam) * 0.00000095367431640625;
      sub_40D7EC((_DWORD *)(this + 224), (CString *)&v18, wParam);
      CString::Format((CString *)&lParam, aS_0, v18);
      v15 = *(double *)v17 + v15;
      SendMessageW(*(HWND *)(this + 412), 0x14Au, wParam++, lParam);
      v6 = sub_40D7E7((_DWORD *)(this + 224));
    }
    while ( (int)wParam <= v6 );
  }
  v7 = sub_4063B4((CString *)&v17[1], 167);
  LOBYTE(v22) = 3;
  CString::Format((CString *)&lParam, aS_0, *(_DWORD *)v7, v13);
  LOBYTE(v22) = 2;
  CString::~CString((CString *)&v17[1]);
  SendMessageW(*(HWND *)(this + 412), 0x14Au, 0, lParam);
  SendMessageW(*(HWND *)(this + 412), 0x14Eu, 0, 0);
  v8 = (HWND)(this + 508);
  if ( this != -508 )
    v8 = *(HWND *)(this + 540);
  sub_412397(v8);
  v9 = sub_4063B4((CString *)&v17[1], 105);
  LOBYTE(v22) = 4;
  CString::operator=(&v19, v9);
  LOBYTE(v22) = 2;
  CString::~CString((CString *)&v17[1]);
  if ( dword_4319F8 < 10 )
    dword_4319F8 = 10;
  if ( dword_4319F8 > 1000 )
    dword_4319F8 = 1000;
  CString::CString((CString *)&v16);
  LOBYTE(v22) = 5;
  CString::Format((CString *)&v16, aDKb, dword_4319F8);
  v17[1] = 0;
  do
  {
    v10 = sub_4063B4((CString *)((char *)&v15 + 4), 165);
    LOBYTE(v22) = 6;
    CString::operator=(&v19, v10);
    LOBYTE(v22) = 5;
    CString::~CString((CString *)((char *)&v15 + 4));
    CString::CString((CString *)&wParam);
    LOBYTE(v22) = 7;
    v14 = v17[1] + 1;
    CString::Format((CString *)&wParam, aD, v17[1] + 1);
    CString::Replace((CString *)&v19, aMin, (const unsigned __int16 *)wParam);
    CString::Replace((CString *)&v19, aPr_0, v16);
    SendMessageW(*(HWND *)(this + 604), 0x14Au, v17[1], v19);
    LOBYTE(v22) = 5;
    CString::~CString((CString *)&wParam);
    v17[1] = v14;
  }
  while ( v14 < 4 );
  SendMessageW(*(HWND *)(this + 604), 0x14Eu, 4u, 0);
  SendMessageW(*(HWND *)(this + 540), 0x14Eu, 6u, 0);
  SendMessageW(*(HWND *)(this + 540), 0x14Eu, dword_431B90, 0);
  SendMessageW(*(HWND *)(this + 604), 0x14Eu, dword_431B08, 0);
  KillTimer(*(HWND *)(this + 32), 0x7D0u);
  SetTimer(*(HWND *)(this + 32), 0x7D0u, 0x64u, 0);
  LOBYTE(v22) = 2;
  CString::~CString((CString *)&v16);
  LOBYTE(v22) = 1;
  CString::~CString((CString *)&lParam);
  LOBYTE(v22) = 0;
  CString::~CString((CString *)&v18);
  v22 = -1;
  CString::~CString((CString *)&v19);
  return 1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (0040F127) --------------------------------------------------------
CString *__cdecl sub_40F127(CString *a1, LPCWSTR lpValue, int a3, int a4)
{
  UINT v4; // edi
  int v5; // eax
  size_t v6; // edi
  WCHAR *v7; // ebx
  NUMBERFMTW Format; // [esp+Ch] [ebp-68h] BYREF
  WCHAR v10[2]; // [esp+24h] [ebp-50h] BYREF
  int v11; // [esp+28h] [ebp-4Ch]
  int v12; // [esp+2Ch] [ebp-48h]
  int v13; // [esp+30h] [ebp-44h]
  int v14; // [esp+34h] [ebp-40h]
  WCHAR LCData[2]; // [esp+38h] [ebp-3Ch] BYREF
  int v16; // [esp+3Ch] [ebp-38h]
  int v17; // [esp+40h] [ebp-34h]
  int v18; // [esp+44h] [ebp-30h]
  int v19; // [esp+48h] [ebp-2Ch]
  WCHAR String[10]; // [esp+4Ch] [ebp-28h] BYREF
  int v21; // [esp+60h] [ebp-14h]
  int v22; // [esp+64h] [ebp-10h] BYREF
  int v23; // [esp+70h] [ebp-4h]

  v21 = 0;
  CString::CString((CString *)&v22, lpValue);
  memset(&Format, 0, sizeof(Format));
  wcscpy(LCData, (const wchar_t *)&dword_42EF48);
  v16 = 0;
  v17 = 0;
  v18 = 0;
  v19 = 0;
  wcscpy(v10, (const wchar_t *)&dword_42EF44);
  v11 = 0;
  v12 = 0;
  v13 = 0;
  v14 = 0;
  v23 = 1;
  GetLocaleInfoW(0x400u, 0xEu, LCData, 19);
  Format.lpDecimalSep = LCData;
  Format.lpThousandSep = (LPWSTR)&dword_43151C;
  if ( a4 )
  {
    GetLocaleInfoW(0x400u, 0xFu, v10, 19);
    Format.lpThousandSep = v10;
  }
  GetLocaleInfoW(0x400u, 0x12u, String, 19);
  Format.LeadingZero = wtoi(String);
  GetLocaleInfoW(0x400u, 0x10u, String, 19);
  Format.Grouping = wtoi(String);
  GetLocaleInfoW(0x400u, 0x1010u, String, 19);
  v4 = a3;
  Format.NegativeOrder = wtoi(String);
  if ( a3 == -1 )
  {
    CString::CString((CString *)&a4, LCData);
    LOBYTE(v23) = 2;
    v5 = CString::Find((CString *)&v22, LCData);
    if ( v5 == -1 )
      v4 = 0;
    else
      v4 = *(_DWORD *)(v22 - 8) - *(_DWORD *)(a4 - 8) - v5;
    LOBYTE(v23) = 1;
    CString::~CString((CString *)&a4);
  }
  Format.NumDigits = v4;
  v6 = 3 * wcslen(lpValue) + 100;
  v7 = (WCHAR *)operator new(2 * v6);
  if ( GetNumberFormatW(0x400u, 0, lpValue, &Format, v7, v6 - 1) )
    CString::operator=(&v22, v7);
  if ( v7 )
    operator delete(v7);
  CString::CString(a1, (const struct CString *)&v22);
  v21 = 1;
  LOBYTE(v23) = 0;
  CString::~CString((CString *)&v22);
  return a1;
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 42EF44: using guessed type int dword_42EF44;
// 42EF48: using guessed type int dword_42EF48;
// 43151C: using guessed type int dword_43151C;

//----- (0040F2BC) --------------------------------------------------------
CString *__cdecl sub_40F2BC(CString *a1, double a2, int a3, int a4)
{
  LPCWSTR lpValue; // [esp+10h] [ebp-10h] BYREF
  int v6; // [esp+1Ch] [ebp-4h]

  CString::CString((CString *)&lpValue);
  v6 = 1;
  CString::Format((CString *)&lpValue, asc_42EF4C, a2);
  sub_40F127(a1, lpValue, a3, a4);
  LOBYTE(v6) = 0;
  CString::~CString((CString *)&lpValue);
  return a1;
}

//----- (0040F324) --------------------------------------------------------
int __thiscall sub_40F324(void *this)
{
  int v1; // edi
  __time32_t v2; // esi
  int v3; // ebx
  int result; // eax
  __time32_t v5[2]; // [esp+Ch] [ebp-20h] BYREF
  double v6; // [esp+14h] [ebp-18h]
  int v7; // [esp+1Ch] [ebp-10h] BYREF
  double v8; // [esp+24h] [ebp-8h]

  v1 = (int)this + 300;
  v8 = -1.0;
  v2 = time(0);
  v3 = 1800;
  do
  {
    v6 = v8;
    v5[0] = v2;
    sub_40F8DA(v1, (int)&v7, v5);
    result = v7;
    --v2;
    --v3;
    *(double *)(v7 + 24) = -1.0;
  }
  while ( v3 );
  return result;
}
// 40F324: using guessed type __time32_t var_20[2];

//----- (0040F381) --------------------------------------------------------
void __thiscall sub_40F381(int this)
{
  CString *v2; // eax
  CString *v3; // ecx
  unsigned __int16 *v4; // eax
  __time32_t v5; // eax
  bool v6; // zf
  int v7; // eax
  int v8; // ecx
  unsigned int *v9; // edi
  int v10; // eax
  unsigned int v11; // eax
  double *v12; // eax
  WPARAM v13; // eax
  int v14; // ebx
  double v15; // st7
  const unsigned __int16 *v16; // ebx
  const unsigned __int16 *v17; // eax
  const unsigned __int16 *v18; // ebx
  const unsigned __int16 *v19; // eax
  const unsigned __int16 *v20; // ebx
  const unsigned __int16 *v21; // eax
  CWnd *v22; // esi
  unsigned __int16 *v23; // eax
  int v24; // ecx
  int CurSel; // eax
  int v26; // [esp+8h] [ebp-A8h] BYREF
  const unsigned __int16 *v27[4]; // [esp+Ch] [ebp-A4h] BYREF
  int v28; // [esp+1Ch] [ebp-94h] BYREF
  double v29; // [esp+24h] [ebp-8Ch]
  int v30; // [esp+2Ch] [ebp-84h] BYREF
  int v31; // [esp+34h] [ebp-7Ch] BYREF
  double v32; // [esp+3Ch] [ebp-74h]
  __time32_t v33[2]; // [esp+44h] [ebp-6Ch] BYREF
  double v34; // [esp+4Ch] [ebp-64h]
  double v35; // [esp+54h] [ebp-5Ch] BYREF
  double v36; // [esp+5Ch] [ebp-54h]
  int v37; // [esp+64h] [ebp-4Ch] BYREF
  int v38; // [esp+68h] [ebp-48h] BYREF
  int v39; // [esp+6Ch] [ebp-44h] BYREF
  int v40; // [esp+70h] [ebp-40h] BYREF
  double v41; // [esp+74h] [ebp-3Ch] BYREF
  double v42; // [esp+7Ch] [ebp-34h]
  __int64 v43; // [esp+84h] [ebp-2Ch] BYREF
  __time32_t v44; // [esp+8Ch] [ebp-24h] BYREF
  double v45; // [esp+90h] [ebp-20h] BYREF
  double v46; // [esp+98h] [ebp-18h] BYREF
  int v47; // [esp+A0h] [ebp-10h] BYREF
  int v48; // [esp+ACh] [ebp-4h]

  if ( !*(_DWORD *)(this + 700) )
  {
    CString::CString((CString *)((char *)&v43 + 4), byte_431514);
    v48 = 0;
    v2 = sub_4063B4((CString *)((char *)&v46 + 4), 30);
    LOBYTE(v48) = 1;
    v27[0] = *(const unsigned __int16 **)operator+((char *)&v45 + 4, v2, (char *)&v43 + 4);
    LOBYTE(v48) = 2;
    CWnd::SetWindowTextW((CWnd *)(this + 444), v27[0]);
    LOBYTE(v48) = 1;
    CString::~CString((CString *)((char *)&v45 + 4));
    LOBYTE(v48) = 0;
    CString::~CString((CString *)((char *)&v46 + 4));
    v48 = -1;
    v3 = (CString *)((char *)&v43 + 4);
LABEL_28:
    CString::~CString(v3);
    return;
  }
  if ( (int)dword_431A80 <= 0 )
  {
    v4 = sub_414BE2(30);
    CWnd::SetWindowTextW((CWnd *)(this + 444), v4);
    sub_40F324((void *)this);
    return;
  }
  v5 = time(0);
  v6 = v5 == *(_DWORD *)(this + 104);
  v44 = v5;
  if ( !v6 )
  {
    *(_DWORD *)(this + 104) = v5;
    v7 = sub_40D7E7((_DWORD *)(this + 224));
    v8 = 0;
    v36 = 0.0;
    HIDWORD(v46) = v7;
    v47 = 0;
    v45 = 0.0;
    if ( v7 >= 0 )
    {
      v9 = (unsigned int *)(this + 112);
      do
      {
        v10 = *(_DWORD *)(this + 296);
        if ( !v10 || v10 == v8 + 1 )
        {
          sub_40D32E((_DWORD *)(this + 224), v8);
          v11 = sub_40D838((_DWORD *)(this + 224), v47);
          if ( *v9 != -1 )
          {
            v43 = v11 - *v9;
            v45 = (double)v43 + v45;
          }
          *(_QWORD *)&v42 = v11;
          *v9 = v11;
          v36 = (double)v11 + v36;
        }
        ++v9;
        v8 = ++v47;
      }
      while ( v47 <= SHIDWORD(v46) );
    }
    v46 = -1.0;
    if ( -1.0 == *(double *)sub_40F8A0((void *)(this + 300), &v44) )
    {
      v42 = -1.0;
      v33[0] = v44;
      v34 = -1.0;
      sub_40F8DA(this + 300, (int)&v41, v33);
      *(double *)(LODWORD(v41) + 24) = 0.0;
    }
    v12 = (double *)sub_40F8A0((void *)(this + 300), &v44);
    *v12 = v45;
    v13 = dword_431B08 + 1;
    v34 = (double)dword_4319F8;
    if ( (int)(dword_431B08 + 1) < 1 )
      v13 = 1;
    v47 = 0;
    HIDWORD(v43) = 60 * v13;
    if ( (int)(60 * v13) > 0 )
    {
      v42 = -1.0;
      do
      {
        v31 = v44 - v47;
        v32 = v42;
        sub_40F8DA(this + 300, (int)&v30, &v31);
        if ( -1.0 == *(double *)(v30 + 24) )
          break;
        v14 = v47;
        v41 = -1.0;
        v28 = v44 - v47;
        v29 = -1.0;
        sub_40F8DA(this + 300, (int)&v35, &v28);
        v15 = v46 + *(double *)(LODWORD(v35) + 24);
        v47 = v14 + 1;
        v46 = v15;
      }
      while ( v14 + 1 < SHIDWORD(v43) );
    }
    v35 = v46 / (double)v47;
    CString::CString((CString *)&v40);
    v48 = 3;
    v41 = v35 * 0.0009765625;
    sub_40F2BC((CString *)&v39, v41, 2, 1);
    LOBYTE(v48) = 4;
    CString::Format((CString *)&v40, &word_42EFC4, v47, v39);
    sub_40F2BC((CString *)&v38, v45 * 0.0009765625, 2, 1);
    LOBYTE(v48) = 5;
    sub_40F2BC((CString *)&v37, v36 * 0.00000095367431640625, 2, 1);
    LOBYTE(v48) = 6;
    CString::Format((CString *)(this + 200), aCurrentSKbSecS, v38, v40, v37);
    v16 = *(const unsigned __int16 **)sub_4063B4((CString *)((char *)&v45 + 4), 168);
    LOBYTE(v48) = 7;
    v17 = *(const unsigned __int16 **)CString::CString((CString *)((char *)&v46 + 4), aCurrent);
    LOBYTE(v48) = 8;
    CString::Replace((CString *)(this + 200), v17, v16);
    LOBYTE(v48) = 7;
    CString::~CString((CString *)((char *)&v46 + 4));
    LOBYTE(v48) = 6;
    CString::~CString((CString *)((char *)&v45 + 4));
    v18 = *(const unsigned __int16 **)sub_4063B4((CString *)((char *)&v45 + 4), 169);
    LOBYTE(v48) = 9;
    v19 = *(const unsigned __int16 **)CString::CString((CString *)((char *)&v46 + 4), aTotal_0);
    LOBYTE(v48) = 10;
    CString::Replace((CString *)(this + 200), v19, v18);
    LOBYTE(v48) = 9;
    CString::~CString((CString *)((char *)&v46 + 4));
    LOBYTE(v48) = 6;
    CString::~CString((CString *)((char *)&v45 + 4));
    v20 = *(const unsigned __int16 **)sub_4063B4((CString *)((char *)&v45 + 4), 48);
    LOBYTE(v48) = 11;
    v21 = *(const unsigned __int16 **)CString::CString((CString *)((char *)&v46 + 4), aSec);
    LOBYTE(v48) = 12;
    CString::Replace((CString *)(this + 200), v21, v20);
    LOBYTE(v48) = 11;
    CString::~CString((CString *)((char *)&v46 + 4));
    LOBYTE(v48) = 6;
    CString::~CString((CString *)((char *)&v45 + 4));
    CWnd::SetWindowTextW((CWnd *)(this + 444), *(const unsigned __int16 **)(this + 200));
    if ( v47 >= SHIDWORD(v43) && v34 > v41 )
    {
      *(_DWORD *)(this + 100) = 10;
      if ( dword_431A80 )
      {
        dword_431A80 = 0;
        sub_4141BE(&word_431A84, 0);
      }
      SendMessageW(*(HWND *)(this + 348), 0xF1u, 0, 0);
      KillTimer(*(HWND *)(this + 32), 0x7D0u);
      KillTimer(*(HWND *)(this + 32), 0x7D1u);
      CString::CString((CString *)&v47);
      v22 = (CWnd *)(this + 508);
      LOBYTE(v48) = 13;
      CWnd::GetWindowTextW(v22, (struct CString *)&v47);
      v23 = sub_414BE2(166);
      HIDWORD(v46) = v27;
      CString::CString((CString *)v27, v23);
      v26 = v24;
      HIDWORD(v45) = &v26;
      LOBYTE(v48) = 14;
      CString::CString((CString *)&v26, (const struct CString *)&v47);
      LOBYTE(v48) = 13;
      CurSel = CComboBox::GetCurSel(v22);
      sub_410C56(CurSel);
      LOBYTE(v48) = 6;
      CString::~CString((CString *)&v47);
    }
    LOBYTE(v48) = 5;
    CString::~CString((CString *)&v37);
    LOBYTE(v48) = 4;
    CString::~CString((CString *)&v38);
    LOBYTE(v48) = 3;
    CString::~CString((CString *)&v39);
    v48 = -1;
    v3 = (CString *)&v40;
    goto LABEL_28;
  }
}
// 40F82E: variable 'v24' is possibly undefined
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 40F381: using guessed type __time32_t var_6C[2];

//----- (0040F8A0) --------------------------------------------------------
int __thiscall sub_40F8A0(void *this, int *a2)
{
  int v2; // eax
  int v4; // [esp+0h] [ebp-18h] BYREF
  double v5; // [esp+8h] [ebp-10h]
  double v6; // [esp+10h] [ebp-8h] BYREF

  v2 = *a2;
  v6 = -1.0;
  v4 = v2;
  v5 = -1.0;
  sub_40F8DA((int)this, (int)&v6, &v4);
  return LODWORD(v6) + 24;
}

//----- (0040F8DA) --------------------------------------------------------
int __thiscall sub_40F8DA(int this, int a2, _DWORD *a3)
{
  bool v4; // dl
  _DWORD *v5; // eax
  _DWORD *v6; // ebx
  _DWORD *v7; // esi
  int *v8; // eax
  int v9; // ecx
  int v10; // ecx
  int result; // eax
  _DWORD *v12; // [esp+Ch] [ebp-4h] BYREF

  v4 = 1;
  v5 = *(_DWORD **)(this + 4);
  v6 = v5;
  v7 = (_DWORD *)v5[1];
  while ( v7 != (_DWORD *)dword_432D0C )
  {
    v6 = v7;
    v4 = *a3 < v7[4];
    if ( *a3 >= v7[4] )
      v7 = (_DWORD *)v7[2];
    else
      v7 = (_DWORD *)*v7;
  }
  if ( *(_BYTE *)(this + 8) )
    goto LABEL_7;
  v9 = (int)v6;
  v12 = v6;
  if ( v4 )
  {
    if ( v6 == (_DWORD *)*v5 )
    {
LABEL_7:
      v8 = sub_40FA03((_DWORD *)this, &a3, (int)v7, v6, a3);
LABEL_13:
      v10 = *v8;
      result = a2;
      *(_DWORD *)a2 = v10;
      *(_BYTE *)(a2 + 4) = 1;
      return result;
    }
    sub_40FB54(&v12);
    v9 = (int)v12;
  }
  if ( *(_DWORD *)(v9 + 16) < *a3 )
  {
    v8 = sub_40FA03((_DWORD *)this, &a3, (int)v7, v6, a3);
    goto LABEL_13;
  }
  result = a2;
  *(_BYTE *)(a2 + 4) = 0;
  *(_DWORD *)a2 = v9;
  return result;
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040F978) --------------------------------------------------------
int __thiscall sub_40F978(_DWORD *this)
{
  _DWORD *v2; // esi
  int v3; // esi
  _DWORD *v4; // eax
  int result; // eax
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  void *v7; // [esp+10h] [ebp-4h]

  v2 = operator new(0x28u);
  v2[1] = 0;
  v2[8] = 1;
  v7 = v2;
  std::_Lockit::_Lockit((std::_Lockit *)v6);
  if ( !dword_432D0C )
  {
    dword_432D0C = (int)v2;
    *v2 = 0;
    v7 = 0;
    *(_DWORD *)(dword_432D0C + 8) = 0;
  }
  ++dword_432D10;
  std::_Lockit::~_Lockit((std::_Lockit *)v6);
  if ( v7 )
    operator delete(v7);
  v3 = dword_432D0C;
  v4 = operator new(0x28u);
  v4[1] = v3;
  v4[8] = 0;
  this[1] = v4;
  this[3] = 0;
  *v4 = v4;
  result = this[1];
  *(_DWORD *)(result + 8) = result;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 432D0C: using guessed type int dword_432D0C;
// 432D10: using guessed type int dword_432D10;
// 40F978: using guessed type char var_8[4];

//----- (0040FA03) --------------------------------------------------------
_DWORD *__thiscall sub_40FA03(_DWORD *this, _DWORD *a2, int a3, _DWORD *a4, _DWORD *a5)
{
  _DWORD *v6; // edi
  int v7; // eax
  _DWORD *v8; // eax
  _DWORD *v9; // esi
  _DWORD *v10; // eax
  _DWORD *v11; // edx
  _DWORD *v12; // ecx
  _DWORD *result; // eax

  v6 = operator new(0x28u);
  v6[8] = 0;
  v6[1] = a4;
  *v6 = dword_432D0C;
  v6[2] = dword_432D0C;
  sub_40FB90(v6 + 4, a5);
  ++this[3];
  if ( a4 != (_DWORD *)this[1] && a3 == dword_432D0C && *a5 >= a4[4] )
  {
    a4[2] = v6;
    v7 = this[1];
    if ( a4 != *(_DWORD **)(v7 + 8) )
      goto LABEL_10;
    goto LABEL_5;
  }
  *a4 = v6;
  v8 = (_DWORD *)this[1];
  if ( a4 == v8 )
  {
    v8[1] = v6;
    v7 = this[1];
LABEL_5:
    *(_DWORD *)(v7 + 8) = v6;
    goto LABEL_10;
  }
  if ( a4 == (_DWORD *)*v8 )
    *v8 = v6;
LABEL_10:
  v9 = v6;
  while ( v9 != *(_DWORD **)(this[1] + 4) )
  {
    v10 = (_DWORD *)v9[1];
    if ( v10[8] )
      break;
    v11 = (_DWORD *)v10[1];
    v12 = (_DWORD *)*v11;
    if ( v10 == (_DWORD *)*v11 )
    {
      v12 = (_DWORD *)v11[2];
      if ( v12[8] )
      {
        if ( v9 == (_DWORD *)v10[2] )
        {
          v9 = (_DWORD *)v9[1];
          sub_40BBB1(this, (int)v10);
        }
        *(_DWORD *)(v9[1] + 32) = 1;
        *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 32) = 0;
        sub_40BBF5(this, *(_DWORD **)(v9[1] + 4));
        continue;
      }
    }
    else if ( v12[8] )
    {
      if ( v9 == (_DWORD *)*v10 )
      {
        v9 = (_DWORD *)v9[1];
        sub_40BBF5(this, v10);
      }
      *(_DWORD *)(v9[1] + 32) = 1;
      *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 32) = 0;
      sub_40BBB1(this, *(_DWORD *)(v9[1] + 4));
      continue;
    }
    v10[8] = 1;
    v12[8] = 1;
    *(_DWORD *)(*(_DWORD *)(v9[1] + 4) + 32) = 0;
    v9 = *(_DWORD **)(v9[1] + 4);
  }
  *(_DWORD *)(*(_DWORD *)(this[1] + 4) + 32) = 1;
  result = a2;
  *a2 = v6;
  return result;
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040FB54) --------------------------------------------------------
_DWORD *__thiscall sub_40FB54(void *this)
{
  _DWORD *result; // eax
  _DWORD *v2; // edx

  result = *(_DWORD **)this;
  if ( *(_DWORD *)(*(_DWORD *)this + 32) || *(_DWORD **)(result[1] + 4) != result )
  {
    v2 = (_DWORD *)*result;
    if ( *result == dword_432D0C )
    {
      while ( 1 )
      {
        result = (_DWORD *)result[1];
        if ( *(_DWORD *)this != *result )
          break;
        *(_DWORD *)this = result;
      }
    }
    else
    {
      do
      {
        result = v2;
        v2 = (_DWORD *)v2[2];
      }
      while ( v2 != (_DWORD *)dword_432D0C );
    }
  }
  else
  {
    result = (_DWORD *)result[2];
  }
  *(_DWORD *)this = result;
  return result;
}
// 432D0C: using guessed type int dword_432D0C;

//----- (0040FB90) --------------------------------------------------------
void __cdecl sub_40FB90(_DWORD *a1, _DWORD *a2)
{
  if ( a1 )
  {
    *a1 = *a2;
    a1[1] = a2[1];
    a1[2] = a2[2];
    a1[3] = a2[3];
  }
}

//----- (0040FBAA) --------------------------------------------------------
WCHAR *__thiscall sub_40FBAA(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aBlockScreensav_0);
  return sub_403F67((WCHAR *)&dword_433158, 1, v2[0]);
}
// 433158: using guessed type int dword_433158;

//----- (0040FBCF) --------------------------------------------------------
WCHAR *__thiscall sub_40FBCF(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aByEnable);
  return sub_403F67((WCHAR *)&dword_4330D0, 1, v2[0]);
}
// 4330D0: using guessed type int dword_4330D0;

//----- (0040FBF4) --------------------------------------------------------
WCHAR *__thiscall sub_40FBF4(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aBlockLogof);
  return sub_403F67((WCHAR *)&dword_433048, 1, v2[0]);
}
// 433048: using guessed type int dword_433048;

//----- (0040FC19) --------------------------------------------------------
WCHAR *__thiscall sub_40FC19(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aBlockStandby);
  return sub_403F67((WCHAR *)&dword_432FC0, 1, v2[0]);
}

//----- (0040FC3E) --------------------------------------------------------
WCHAR *__thiscall sub_40FC3E(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aBlockShutdown);
  return sub_403F67((WCHAR *)&dword_432F38, 1, v2[0]);
}
// 432F38: using guessed type int dword_432F38;

//----- (0040FC5E) --------------------------------------------------------
BOOL __cdecl sub_40FC5E(int a1)
{
  int SystemMetrics; // edi
  int v2; // eax

  if ( !a1 )
    return ShowWindow(dword_4331DC, 0);
  SystemMetrics = GetSystemMetrics(76);
  v2 = GetSystemMetrics(77);
  return SetWindowPos(dword_4331DC, HWND_MESSAGE|0x2, SystemMetrics - 150, v2 - 150, 100, 100, 0x50u);
}

//----- (0040FCAA) --------------------------------------------------------
void sub_40FCAA()
{
  EXECUTION_STATE v0; // edi
  EXECUTION_STATE v1; // eax
  UINT v2[33]; // [esp-84h] [ebp-A0h] BYREF
  LPCWSTR lpOutputString; // [esp+Ch] [ebp-10h] BYREF
  int v4; // [esp+18h] [ebp-4h]

  if ( dword_4330D0 && dword_4331E0 )
  {
    CString::CString((CString *)&lpOutputString);
    v4 = 0;
    qmemcpy(v2, &dword_4330D0, sizeof(v2));
    CString::Format((CString *)&lpOutputString, aBlockbyexecuti, dword_42EFE8, dword_4331E0);
    OutputDebugStringW(lpOutputString);
    if ( !IsWindowVisible(dword_4331DC) )
      sub_40FC5E(1);
    if ( !SetProcessShutdownParameters(0x4FFu, 0)
      && !SetProcessShutdownParameters(0x4F0u, 0)
      && !SetProcessShutdownParameters(0x3FFu, 0)
      && !SetProcessShutdownParameters(0x3F0u, 0) )
    {
      SetProcessShutdownParameters(0x300u, 0);
    }
    if ( VersionInformation.dwMajorVersion == 6 && !VersionInformation.dwMinorVersion && dword_433158 )
    {
      v2[32] = sub_40FDF9() != 0;
      sub_40FE15(v2[32]);
    }
    v0 = 0x80000000;
    SetThreadExecutionState(0x80000000);
    if ( dword_433158 )
      v0 = -2147483646;
    if ( dword_432FC0 )
      v0 |= 1u;
    SetThreadExecutionState(v0);
    v1 = v0;
    LOBYTE(v1) = v0 | 0x40;
    if ( !SetThreadExecutionState(v1) )
      SetThreadExecutionState(v0);
    ++dword_42EFE8;
    v4 = -1;
    CString::~CString((CString *)&lpOutputString);
  }
  else
  {
    SetThreadExecutionState(0x80000000);
  }
}
// 42EFE8: using guessed type int dword_42EFE8;
// 4330D0: using guessed type int dword_4330D0;
// 433158: using guessed type int dword_433158;
// 4331E0: using guessed type int dword_4331E0;

//----- (0040FDF9) --------------------------------------------------------
int sub_40FDF9()
{
  int pvParam; // [esp+0h] [ebp-4h] BYREF

  pvParam = 0;
  SystemParametersInfoW(0x10u, 0, &pvParam, 0);
  return pvParam;
}

//----- (0040FE15) --------------------------------------------------------
BOOL __cdecl sub_40FE15(UINT uiParam)
{
  return SystemParametersInfoW(0x11u, uiParam, 0, 2u);
}

//----- (0040FE26) --------------------------------------------------------
int sub_40FE26()
{
  sub_40FE30();
  return atexit(unknown_libname_7);
}

//----- (0040FE30) --------------------------------------------------------
CString *sub_40FE30()
{
  return CString::CString((CString *)&unk_433448, aPcShutDownIn);
}

//----- (0040FE67) --------------------------------------------------------
int sub_40FE67()
{
  sub_40FE71();
  return atexit(unknown_libname_8);
}

//----- (0040FE71) --------------------------------------------------------
CString *sub_40FE71()
{
  return CString::CString((CString *)&unk_433440, aSec);
}

//----- (0040FEA8) --------------------------------------------------------
int sub_40FEA8()
{
  sub_40FEB2();
  return atexit(unknown_libname_9);
}

//----- (0040FEB2) --------------------------------------------------------
CString *sub_40FEB2()
{
  return CString::CString((CString *)&unk_43343C, aShutDown);
}

//----- (0040FEE9) --------------------------------------------------------
int sub_40FEE9()
{
  sub_40FEF3();
  return atexit(unknown_libname_10);
}

//----- (0040FEF3) --------------------------------------------------------
CString *sub_40FEF3()
{
  return CString::CString((CString *)&unk_433438, aOk_0);
}

//----- (0040FF2A) --------------------------------------------------------
int sub_40FF2A()
{
  sub_40FF34();
  return atexit(sub_40FF50);
}

//----- (0040FF34) --------------------------------------------------------
CString *sub_40FF34()
{
  return CString::CString((CString *)&unk_433434, aAbbrechen);
}

//----- (0040FF50) --------------------------------------------------------
void __cdecl sub_40FF50()
{
  if ( (byte_433444 & 0x10) == 0 )
  {
    byte_433444 |= 0x10u;
    CString::~CString((CString *)&unk_433434);
  }
}
// 433444: using guessed type char byte_433444;

//----- (0040FF6B) --------------------------------------------------------
CDialog *__thiscall sub_40FF6B(CDialog *this, struct CWnd *a2)
{
  CDialog::CDialog(this, 0x8Eu, a2);
  *(_DWORD *)this = &off_41E858;
  return this;
}
// 41E858: using guessed type struct CRuntimeClass *(__thiscall *off_41E858)(CDialog *__hidden this);

//----- (0040FF88) --------------------------------------------------------
int (**sub_40FF88())()
{
  return &off_41E838;
}
// 41E838: using guessed type int (*off_41E838)();

//----- (0040FF8F) --------------------------------------------------------
int __thiscall sub_40FF8F(int this)
{
  HMODULE LibraryW; // ebx

  `eh vector constructor iterator'(
    (void *)(this + 12),
    0x20u,
    32,
    loc_410056,
    (void (__thiscall *)(void *))CString::~CString);
  *(_DWORD *)this = &off_41E930;
  if ( !EnumPwrSchemes )
  {
    LibraryW = LoadLibraryW(LibFileName);
    EnumPwrSchemes = (BOOLEAN (__stdcall *)(PWRSCHEMESENUMPROC, LPARAM))GetProcAddress(LibraryW, aEnumpwrschemes);
    PowerEnumerate = (DWORD (__stdcall *)(HKEY, const GUID *, const GUID *, POWER_DATA_ACCESSOR, ULONG, UCHAR *, DWORD *))GetProcAddress(LibraryW, aPowerenumerate);
    PowerReadFriendlyName = (DWORD (__stdcall *)(HKEY, const GUID *, const GUID *, const GUID *, PUCHAR, LPDWORD))GetProcAddress(LibraryW, aPowerreadfrien);
    PowerGetActiveScheme = (DWORD (__stdcall *)(HKEY, GUID **))GetProcAddress(LibraryW, aPowergetactive);
    GetActivePwrScheme = (BOOLEAN (__stdcall *)(PUINT))GetProcAddress(LibraryW, aGetactivepwrsc);
    SetActivePwrScheme = (BOOLEAN (__stdcall *)(UINT, PGLOBAL_POWER_POLICY, PPOWER_POLICY))GetProcAddress(
                                                                                             LibraryW,
                                                                                             aSetactivepwrsc);
    PowerSetActiveScheme = (DWORD (__stdcall *)(HKEY, const GUID *))GetProcAddress(LibraryW, aPowersetactive);
  }
  *(_DWORD *)(this + 4) = -1;
  sub_4100D2((char *)this, this);
  return this;
}
// 41E930: using guessed type int (__thiscall *off_41E930)(void *, char);

//----- (00410066) --------------------------------------------------------
_DWORD *__thiscall sub_410066(_DWORD *this, char a2)
{
  sub_410087(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00410087) --------------------------------------------------------
void __thiscall sub_410087(_DWORD *this)
{
  *this = &off_41E930;
  `eh vector destructor iterator'(this + 3, 0x20u, 32, (void (__thiscall *)(void *))CString::~CString);
}
// 41E930: using guessed type int (__thiscall *off_41E930)(void *, char);

//----- (004100A0) --------------------------------------------------------
int (__stdcall *__thiscall sub_4100A0(char *this, int a2))(_DWORD, _DWORD, _DWORD)
{
  int (__stdcall *result)(_DWORD, _DWORD, _DWORD); // eax

  if ( dword_433474 )
    return (int (__stdcall *)(_DWORD, _DWORD, _DWORD))dword_433474(0, &this[32 * a2 + 20]);
  result = dword_433470;
  if ( dword_433470 )
    return (int (__stdcall *)(_DWORD, _DWORD, _DWORD))dword_433470(a2, 0, 0);
  return result;
}
// 433470: using guessed type int (__stdcall *dword_433470)(_DWORD, _DWORD, _DWORD);
// 433474: using guessed type int (__stdcall *dword_433474)(_DWORD, _DWORD);

//----- (004100D2) --------------------------------------------------------
int __usercall sub_4100D2@<eax>(char *a1@<ecx>, int a2@<edi>)
{
  int result; // eax
  char *v4; // edi
  int v5; // eax
  int v6; // [esp-4h] [ebp-424h]
  char v7[1024]; // [esp+8h] [ebp-418h] BYREF
  int v8; // [esp+408h] [ebp-18h] BYREF
  const void *v9; // [esp+40Ch] [ebp-14h] BYREF
  _DWORD *v10; // [esp+410h] [ebp-10h]
  int v11; // [esp+414h] [ebp-Ch]
  _DWORD *v12; // [esp+418h] [ebp-8h]
  int v13; // [esp+41Ch] [ebp-4h] BYREF

  *((_DWORD *)a1 + 2) = 0;
  if ( dword_433464 )
  {
    dword_433468(0, &v9);
    v11 = 0;
    v13 = 16;
    result = dword_433460(0, 0, 0, 16, 0, a1 + 20, &v13);
    if ( !result )
    {
      v6 = a2;
      v4 = a1;
      v10 = a1 + 20;
      v12 = a1 + 20;
      do
      {
        v5 = v11;
        ++*((_DWORD *)a1 + 2);
        v8 = 1024;
        v11 = v5 + 1;
        CString::Format((CString *)(v4 + 12), aPowerShemeD, v5 + 1);
        if ( !dword_433464(0, v10, 0, 0, v7, &v8, v6) )
        {
          if ( !memcmp(v12, v9, 0x10u) )
            *(v12 - 1) = 1;
          CString::operator=(v12 - 2, v7);
        }
        v12 += 8;
        v13 = 16;
        v4 = (char *)(v12 - 5);
        v10 = v12;
        result = dword_433460(0, 0, 0, 16, v11, v12, &v13);
      }
      while ( !result );
    }
  }
  else
  {
    dword_43345C(sub_4101F8, a1);
    v13 = 0;
    dword_43346C(&v13);
    result = 32 * v13;
    *(_DWORD *)&a1[32 * v13 + 16] = 1;
  }
  return result;
}
// 433464: invalid function type '?' has been ignored
// 4100D2: could not find valid save-restore pair for edi
// 410187: variable 'v6' is possibly undefined
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 43345C: using guessed type int (__stdcall *dword_43345C)(_DWORD, _DWORD);
// 433460: using guessed type int (__stdcall *dword_433460)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 433464: using guessed type int (__stdcall *dword_433464)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 433468: using guessed type int (__stdcall *dword_433468)(_DWORD, _DWORD);
// 43346C: using guessed type int (__stdcall *dword_43346C)(_DWORD);

//----- (004101F8) --------------------------------------------------------
char __stdcall sub_4101F8(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // eax
  char v9[4]; // [esp+4h] [ebp-14h] BYREF
  char v10[4]; // [esp+8h] [ebp-10h] BYREF
  int v11; // [esp+14h] [ebp-4h]

  CString::CString((CString *)v10);
  v11 = 0;
  CString::operator+=(v10, a3);
  CString::CString((CString *)v9, asc_42F210);
  LOBYTE(v11) = 1;
  CString::operator+=(v10, v9);
  LOBYTE(v11) = 0;
  CString::~CString((CString *)v9);
  CString::CString((CString *)v9, asc_42F210);
  LOBYTE(v11) = 2;
  CString::operator+=(v10, v9);
  LOBYTE(v11) = 0;
  CString::~CString((CString *)v9);
  CString::operator+=(v10, a5);
  CString::operator=(32 * *(_DWORD *)(a7 + 8) + a7 + 12, a3);
  v7 = 32 * *(_DWORD *)(a7 + 8);
  v11 = -1;
  *(_DWORD *)(v7 + a7 + 36) = a6;
  *(_DWORD *)(32 * (*(_DWORD *)(a7 + 8))++ + a7 + 40) = a1;
  CString::~CString((CString *)v10);
  return 1;
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A200: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 4101F8: using guessed type char var_10[4];
// 4101F8: using guessed type char var_14[4];

//----- (004102C5) --------------------------------------------------------
int __thiscall sub_4102C5(int this, int a2, int a3)
{
  bool v4; // cc
  _DWORD *v5; // eax
  bool v6; // zf
  const void *v8; // [esp+8h] [ebp-10h] BYREF
  int v9; // [esp+Ch] [ebp-Ch] BYREF
  int v10; // [esp+10h] [ebp-8h]
  _DWORD *v11; // [esp+14h] [ebp-4h]

  v9 = 33;
  if ( dword_433464 )
  {
    v4 = *(_DWORD *)(this + 8) <= 0;
    v10 = 0;
    if ( !v4 )
    {
      v11 = (_DWORD *)(this + 16);
      do
      {
        dword_433468(0, &v8);
        if ( !memcmp(v11 + 1, v8, 0x10u) )
        {
          *v11 = 1;
          v9 = v10;
        }
        v5 = v11;
        v11 += 8;
        *v5 = 0;
        ++v10;
      }
      while ( v10 < *(_DWORD *)(this + 8) );
    }
  }
  else if ( dword_43346C )
  {
    dword_43346C(&v9);
  }
  if ( !a2 )
    return 0;
  v6 = a3 == v9;
  *(_DWORD *)(this + 4) = v9;
  if ( v6 )
    return 0;
  sub_4100A0((char *)this, a3);
  *(_DWORD *)(this + 4) = a3;
  return 1;
}
// 433464: using guessed type int (__stdcall *dword_433464)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);
// 433468: using guessed type int (__stdcall *dword_433468)(_DWORD, _DWORD);
// 43346C: using guessed type int (__stdcall *dword_43346C)(_DWORD);

//----- (0041036E) --------------------------------------------------------
int __thiscall sub_41036E(_DWORD *this)
{
  bool v1; // cc
  _DWORD *v2; // ebx
  int v3; // eax
  const void *v6; // [esp+4h] [ebp-Ch] BYREF
  int v7; // [esp+8h] [ebp-8h]
  int v8; // [esp+Ch] [ebp-4h] BYREF

  if ( dword_433464 )
  {
    v1 = this[2] <= 0;
    v8 = 0;
    if ( !v1 )
    {
      v2 = this + 4;
      do
      {
        dword_433468(0, &v6);
        if ( !memcmp(v2 + 1, v6, 0x10u) )
        {
          v3 = v8;
          *v2 = 1;
          v7 = v3;
        }
        *v2 = 0;
        ++v8;
        v2 += 8;
      }
      while ( v8 < this[2] );
    }
  }
  else
  {
    v8 = 0;
    if ( dword_43346C )
      dword_43346C(&v8);
    return v8;
  }
  return v7;
}
// 433464: using guessed type int dword_433464;
// 433468: using guessed type int (__stdcall *dword_433468)(_DWORD, _DWORD);
// 43346C: using guessed type int (__stdcall *dword_43346C)(_DWORD);

//----- (004103EF) --------------------------------------------------------
void *__thiscall sub_4103EF(void *this)
{
  sub_410499(1);
  return this;
}

//----- (004103FD) --------------------------------------------------------
char sub_4103FD()
{
  return sub_410499(0);
}

//----- (00410405) --------------------------------------------------------
bool __stdcall sub_410405(BOOL fForce)
{
  return SetSystemPowerState(1, fForce);
}

//----- (00410418) --------------------------------------------------------
bool __stdcall sub_410418(BOOL fForce)
{
  return SetSystemPowerState(0, fForce);
}

//----- (0041042B) --------------------------------------------------------
BOOL __thiscall sub_41042B(UINT *this, int a2)
{
  *this = 0;
  if ( a2 )
    *this = 4;
  return ExitWindowsEx(*this, 0);
}

//----- (0041044D) --------------------------------------------------------
BOOL __thiscall sub_41044D(UINT *this, int a2)
{
  *this = 2;
  if ( a2 )
    *this = 6;
  return ExitWindowsEx(*this, 0);
}

//----- (00410473) --------------------------------------------------------
BOOL __thiscall sub_410473(UINT *this, int a2)
{
  *this = 1;
  if ( a2 )
    *this = 5;
  return ExitWindowsEx(*this, 0);
}

//----- (00410499) --------------------------------------------------------
char __stdcall sub_410499(char a1)
{
  HANDLE CurrentProcess; // eax
  BOOL v2; // esi
  DWORD v3; // eax
  int v5; // [esp+0h] [ebp-44Ch] BYREF
  struct _TOKEN_PRIVILEGES NewState; // [esp+410h] [ebp-3Ch] BYREF
  struct _LUID Luid; // [esp+420h] [ebp-2Ch] BYREF
  DWORD LastError; // [esp+428h] [ebp-24h] BYREF
  DWORD pExceptionObject; // [esp+42Ch] [ebp-20h] BYREF
  DWORD v10; // [esp+430h] [ebp-1Ch] BYREF
  HANDLE TokenHandle; // [esp+434h] [ebp-18h] BYREF
  char v12; // [esp+43Bh] [ebp-11h]
  int *v13; // [esp+43Ch] [ebp-10h]
  int v14; // [esp+448h] [ebp-4h]

  v13 = &v5;
  v12 = 0;
  TokenHandle = 0;
  v14 = 0;
  CurrentProcess = GetCurrentProcess();
  if ( !OpenProcessToken(CurrentProcess, 0x20u, &TokenHandle) )
  {
    pExceptionObject = GetLastError();
    CxxThrowException(&pExceptionObject, (_ThrowInfo *)&_TI1K);
  }
  if ( !LookupPrivilegeValueW(0, Name, &Luid) )
  {
    LastError = GetLastError();
    CxxThrowException(&LastError, (_ThrowInfo *)&_TI1K);
  }
  NewState.Privileges[0].Luid = Luid;
  NewState.Privileges[0].Attributes = a1 != 0 ? 2 : 0;
  NewState.PrivilegeCount = 1;
  v2 = AdjustTokenPrivileges(TokenHandle, 0, &NewState, 0x10u, 0, 0);
  v3 = GetLastError();
  if ( !v2 || v3 )
  {
    v10 = v3;
    CxxThrowException(&v10, (_ThrowInfo *)&_TI1K);
  }
  v12 = 1;
  if ( TokenHandle )
    CloseHandle(TokenHandle);
  return v12;
}

//----- (004105AE) --------------------------------------------------------
bool sub_4105AE()
{
  return ShellExecuteW(0, Operation, aRundll32Exe, aUser32DllLockw, 0, 5) != 0;
}

//----- (004105CF) --------------------------------------------------------
LRESULT sub_4105CF()
{
  return SendMessageW(HWND_BROADCAST, 0x112u, 0xF170u, 2);
}

//----- (004105E7) --------------------------------------------------------
LRESULT sub_4105E7()
{
  return SendMessageW(HWND_BROADCAST, 0x112u, 0xF170u, -1);
}

//----- (004105FF) --------------------------------------------------------
int sub_4105FF()
{
  HMODULE LibraryW; // eax
  BOOLEAN (__stdcall *IsPwrSuspendAllowed)(); // eax

  LibraryW = LoadLibraryW(LibFileName);
  if ( LibraryW && (IsPwrSuspendAllowed = (BOOLEAN (__stdcall *)())GetProcAddress(LibraryW, ProcName)) != 0 )
    return ((int (*)(void))IsPwrSuspendAllowed)();
  else
    return 0;
}

//----- (00410623) --------------------------------------------------------
HINSTANCE sub_410623()
{
  HINSTANCE result; // eax

  result = ShellExecuteW(0, Operation, File, Parameters, 0, 5);
  if ( VersionInformation.dwMajorVersion < 5 )
    return (HINSTANCE)ExitWindowsEx(1u, 0);
  return result;
}

//----- (00410652) --------------------------------------------------------
HINSTANCE sub_410652()
{
  HINSTANCE result; // eax

  result = ShellExecuteW(0, Operation, File, aSFT0, 0, 5);
  if ( VersionInformation.dwMajorVersion < 5 )
    return (HINSTANCE)ExitWindowsEx(1u, 4u);
  return result;
}

//----- (00410681) --------------------------------------------------------
HINSTANCE sub_410681()
{
  return ShellExecuteW(0, Operation, aRundll32Exe, aPowrprofDllSet, 0, 5);
}

//----- (0041069D) --------------------------------------------------------
int __thiscall sub_41069D(int this, struct CWnd *a2)
{
  CDialog::CDialog((CDialog *)this, 0x89u, a2);
  sub_4103EF((void *)(this + 96));
  CString::CString((CString *)(this + 108));
  CString::CString((CString *)(this + 112));
  CWnd::CWnd((CWnd *)(this + 120));
  *(_DWORD *)(this + 120) = &off_41DD80;
  *(_DWORD *)this = &off_41E970;
  return this;
}
// 41DD80: using guessed type struct CRuntimeClass *(__thiscall *off_41DD80)(CStatic *__hidden this);
// 41E970: using guessed type struct CRuntimeClass *(__thiscall *off_41E970)(CDialog *__hidden this);

//----- (0041070C) --------------------------------------------------------
void *__thiscall sub_41070C(void *this, char a2)
{
  sub_410728((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00410728) --------------------------------------------------------
void __thiscall sub_410728(int this)
{
  CStatic::~CStatic((CStatic *)(this + 120));
  CString::~CString((CString *)(this + 112));
  CString::~CString((CString *)(this + 108));
  sub_4103FD();
  CDialog::~CDialog((CDialog *)this);
}

//----- (00410784) --------------------------------------------------------
void __thiscall sub_410784(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 1011, (struct CWnd *)(this + 120));
}

//----- (00410799) --------------------------------------------------------
int (**sub_410799())()
{
  return &off_41E938;
}
// 41E938: using guessed type int (*off_41E938)();

//----- (0041079F) --------------------------------------------------------
void __thiscall sub_41079F(HWND *this)
{
  KillTimer(this[8], 0x3E8u);
  sub_410B02(this);
  CDialog::EndDialog((CDialog *)this, 0);
  CDialog::OnOK((CDialog *)this);
}

//----- (004107C9) --------------------------------------------------------
void __thiscall sub_4107C9(HWND *this)
{
  KillTimer(this[8], 0x3E8u);
  CDialog::EndDialog((CDialog *)this, 0);
  CDialog::OnCancel((CDialog *)this);
}

//----- (004107EC) --------------------------------------------------------
int __thiscall sub_4107EC(int this, LPCWSTR lpString)
{
  const unsigned __int16 **v3; // eax
  const unsigned __int16 *v4; // edi
  unsigned __int16 *v5; // eax
  int v7; // [esp-8h] [ebp-1Ch]
  char v8[4]; // [esp+4h] [ebp-10h] BYREF
  int v9; // [esp+10h] [ebp-4h]

  if ( lpString == (LPCWSTR)1000 )
  {
    --*(_DWORD *)(this + 100);
    CString::CString((CString *)&lpString);
    v9 = 0;
    v3 = (const unsigned __int16 **)CString::CString((CString *)v8, aSD_0);
    v7 = *(_DWORD *)(this + 100);
    v4 = *v3;
    LOBYTE(v9) = 1;
    v5 = sub_414BE2(112);
    CString::Format((CString *)&lpString, v4, v5, v7);
    LOBYTE(v9) = 0;
    CString::~CString((CString *)v8);
    SetDlgItemTextW(*(HWND *)(this + 32), 1, lpString);
    if ( !*(_DWORD *)(this + 100) )
    {
      CDialog::EndDialog((CDialog *)this, 0);
      KillTimer(*(HWND *)(this + 32), 0x3E8u);
      sub_410B02((_DWORD *)this);
    }
    v9 = -1;
    CString::~CString((CString *)&lpString);
  }
  return CWnd::Default((CWnd *)this);
}
// 4107EC: using guessed type char var_10[4];

//----- (004108A4) --------------------------------------------------------
int __thiscall sub_4108A4(int this, int a2, int a3)
{
  int v4; // ebx
  int v5; // edi
  const unsigned __int16 **v6; // eax
  const unsigned __int16 *v7; // eax
  const unsigned __int16 **v8; // eax
  const unsigned __int16 *v9; // edi
  unsigned __int16 *v10; // eax
  int v12; // [esp-4h] [ebp-20h]
  int v13; // [esp-4h] [ebp-20h]
  LPCWSTR lpString; // [esp+Ch] [ebp-10h] BYREF
  int v15; // [esp+18h] [ebp-4h]

  v4 = 0;
  v15 = 0;
  OutputDebugStringA(aShowinfoIntTyp);
  if ( *(_DWORD *)(this + 32) )
    CWnd::ShowWindow((CWnd *)this, 0);
  v5 = a2;
  if ( a2 == 7 )
  {
    sub_410B02((_DWORD *)this);
    v4 = 1;
  }
  else
  {
    if ( !*(_DWORD *)(this + 32) )
      CDialog::Create((CDialog *)this, (const unsigned __int16 *)0x89, 0);
    CWnd::ShowWindow((CWnd *)this, 5);
    *(_DWORD *)(this + 104) = v5;
    *(_DWORD *)(this + 100) = 10;
    CString::operator=(this + 112, &a3);
    *(_DWORD *)(this + 116) = v5;
    CString::CString((CString *)&lpString);
    LOBYTE(v15) = 1;
    v6 = (const unsigned __int16 **)CString::CString((CString *)&a2, aS_1);
    v12 = *(_DWORD *)(this + 100);
    v7 = *v6;
    LOBYTE(v15) = 2;
    CString::Format((CString *)&lpString, v7, a3, v12);
    LOBYTE(v15) = 1;
    CString::~CString((CString *)&a2);
    CWnd::SetWindowTextW((CWnd *)(this + 120), lpString);
    v8 = (const unsigned __int16 **)CString::CString((CString *)&a2, aSD_0);
    v13 = *(_DWORD *)(this + 100);
    v9 = *v8;
    LOBYTE(v15) = 3;
    v10 = sub_414BE2(112);
    CString::Format((CString *)&lpString, v9, v10, v13);
    LOBYTE(v15) = 1;
    CString::~CString((CString *)&a2);
    SetDlgItemTextW(*(HWND *)(this + 32), 1, lpString);
    KillTimer(*(HWND *)(this + 32), 0x3E8u);
    SetTimer(*(HWND *)(this + 32), 0x3E8u, 0x3E8u, 0);
    LOBYTE(v15) = 0;
    CString::~CString((CString *)&lpString);
  }
  v15 = -1;
  CString::~CString((CString *)&a3);
  return v4;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (004109F0) --------------------------------------------------------
int __thiscall sub_4109F0(int this)
{
  HICON IconW; // ebx
  HFONT v4; // ebx
  HWND DlgItem; // eax
  HWND v6; // eax
  HWND v7; // eax
  unsigned __int16 *v8; // eax
  unsigned __int16 *v9; // eax
  struct CFont *Font; // [esp+4h] [ebp-60h]
  LOGFONTW pv; // [esp+8h] [ebp-5Ch] BYREF

  CDialog::OnInitDialog((CDialog *)this);
  Font = CWnd::GetFont((CWnd *)(this + 120));
  if ( Font )
  {
    IconW = LoadIconW(0, (LPCWSTR)0x7F04);
    SendMessageW(*(HWND *)(this + 32), 0x80u, 1u, (LPARAM)IconW);
    SendMessageW(*(HWND *)(this + 32), 0x80u, 0, (LPARAM)IconW);
    memset(&pv, 0, sizeof(pv));
    GetObjectW(*((HANDLE *)Font + 1), 92, &pv);
    CreateFontIndirectW(&pv);
    pv.lfItalic = 0;
    pv.lfHeight = (__int64)((double)pv.lfHeight * 1.5);
    v4 = CreateFontIndirectW(&pv);
    DlgItem = GetDlgItem(*(HWND *)(this + 32), 1011);
    SendMessageW(DlgItem, 0x30u, (WPARAM)v4, 0);
    v6 = GetDlgItem(*(HWND *)(this + 32), 1);
    SendMessageW(v6, 0x30u, (WPARAM)v4, 0);
    v7 = GetDlgItem(*(HWND *)(this + 32), 2);
    SendMessageW(v7, 0x30u, (WPARAM)v4, 0);
    SetWindowTextW(*(HWND *)(this + 32), *(LPCWSTR *)(this + 108));
    v8 = sub_414BE2(112);
    SetDlgItemTextW(*(HWND *)(this + 32), 1, v8);
    v9 = sub_414BE2(66);
    SetDlgItemTextW(*(HWND *)(this + 32), 2, v9);
  }
  return 1;
}

//----- (00410B02) --------------------------------------------------------
void __thiscall sub_410B02(_DWORD *this)
{
  int v2; // esi

  v2 = this[29];
  if ( v2 )
  {
    if ( v2 == 1 )
      sub_410623();
    if ( v2 == 2 )
      sub_410652();
    if ( v2 == 3 )
      sub_410681();
    if ( v2 == 4 || v2 == 5 || v2 == 6 || v2 == 7 )
    {
      SetThreadExecutionState(0x80000000);
      if ( v2 != 7 && dword_4330D0 )
      {
        dword_4330D0 = 0;
        sub_4141BE(&word_4330D4, 0);
      }
      if ( v2 == 5 )
        sub_410405(1);
      if ( v2 == 6 )
        sub_410681();
      if ( v2 == 7 )
      {
        dword_431F48 = 1;
        sub_4089F5(1);
        sub_4141BE(&word_431F4C, dword_431F48);
      }
    }
    else
    {
      if ( this[29] == 8 )
        ShellExecuteW(0, Operation, File, aRFT0, 0, 5);
      if ( this[29] == 9 )
        ShellExecuteW(0, Operation, File, aRT0, 0, 5);
      if ( this[29] == 10 )
        ShellExecuteW(0, Operation, File, aLFT0, 0, 5);
      if ( this[29] == 11 )
        ShellExecuteW(0, Operation, File, aLT0, 0, 5);
      PostQuitMessage(0);
    }
  }
  else
  {
    PostQuitMessage(0);
  }
}
// 4330D0: using guessed type int dword_4330D0;

//----- (00410C29) --------------------------------------------------------
int sub_410C29()
{
  sub_410C33();
  return atexit(sub_410C4C);
}

//----- (00410C33) --------------------------------------------------------
int sub_410C33()
{
  return sub_41069D((int)&unk_433478, 0);
}

//----- (00410C4C) --------------------------------------------------------
void __cdecl sub_410C4C()
{
  sub_410728((int)&unk_433478);
}

//----- (00410C56) --------------------------------------------------------
void sub_410C56(int a1, ...)
{
  int v1; // ecx
  int v2; // [esp-4h] [ebp-14h] BYREF
  int v3; // [esp+Ch] [ebp-4h]
  int v4; // [esp+1Ch] [ebp+Ch] BYREF
  va_list va; // [esp+1Ch] [ebp+Ch]
  va_list va1; // [esp+20h] [ebp+10h] BYREF

  va_start(va1, a1);
  va_start(va, a1);
  v4 = va_arg(va1, _DWORD);
  v3 = 1;
  CString::operator=(&unk_4334E4, va1);
  v2 = v1;
  dword_4334E0 = a1;
  dword_4334EC = a1;
  CString::CString((CString *)&v2, (const struct CString *)va);
  sub_4108A4((int)&unk_433478, a1, v2);
  LOBYTE(v3) = 0;
  CString::~CString((CString *)va);
  v3 = -1;
  CString::~CString((CString *)va1);
}
// 410C79: variable 'v1' is possibly undefined
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 4334E0: using guessed type int dword_4334E0;
// 4334EC: using guessed type int dword_4334EC;

//----- (00410CC9) --------------------------------------------------------
WCHAR *__thiscall sub_410CC9(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMSelTab2);
  return sub_403F67((WCHAR *)&dword_4338C0, 0, v2[0]);
}

//----- (00410CEE) --------------------------------------------------------
WCHAR *__thiscall sub_410CEE(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aStartTimer);
  return sub_403F67((WCHAR *)&dword_433838, 0, v2[0]);
}

//----- (00410D13) --------------------------------------------------------
WCHAR *__thiscall sub_410D13(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aMUseAllRuleNoS);
  return sub_403F67((WCHAR *)&dword_4337B0, 0, v2[0]);
}
// 4337B0: using guessed type int dword_4337B0;

//----- (00410D38) --------------------------------------------------------
WCHAR *__thiscall sub_410D38(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aFromStandbyTim);
  return sub_403F67((WCHAR *)&dword_433728, 0, v2[0]);
}

//----- (00410D5D) --------------------------------------------------------
WCHAR *__thiscall sub_410D5D(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aStartTimer1H);
  return sub_403F67((WCHAR *)&dword_4336A0, 0, v2[0]);
}

//----- (00410D82) --------------------------------------------------------
WCHAR *__thiscall sub_410D82(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aStartTimer1M);
  return sub_403F67((WCHAR *)&dword_433618, 0, v2[0]);
}

//----- (00410DA7) --------------------------------------------------------
WCHAR *__thiscall sub_410DA7(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aStartTimer1S);
  return sub_403F67((WCHAR *)&dword_433590, 0, v2[0]);
}

//----- (00410DC7) --------------------------------------------------------
_DWORD *__thiscall sub_410DC7(_DWORD *this, struct CWnd *a2)
{
  _DWORD *v3; // eax
  int v4; // ecx

  CDialog::CDialog((CDialog *)this, 0x68u, a2);
  sub_4064B7((int)(this + 24), 0);
  sub_40E8FD((int)(this + 160), 0);
  sub_40102A(this + 340, 0);
  sub_41201A(this + 431, 0);
  v3 = this + 524;
  v4 = 10;
  do
  {
    *v3 = 0;
    *((_WORD *)v3 + 2) = 0;
    v3 += 33;
    --v4;
  }
  while ( v4 );
  sub_413697((CWnd *)(this + 854));
  CWnd::CWnd((CWnd *)(this + 870));
  this[870] = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 886));
  this[886] = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 902));
  this[902] = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 918));
  this[918] = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 934));
  this[934] = &off_41D998;
  this[336] = -1;
  this[338] = 0;
  this[337] = -1;
  *this = &off_41EB10;
  return this;
}
// 41D998: using guessed type struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this);
// 41EB10: using guessed type struct CRuntimeClass *(__thiscall *off_41EB10)(CDialog *__hidden this);

//----- (00410EDA) --------------------------------------------------------
_DWORD *__thiscall sub_410EDA(_DWORD *this, char a2)
{
  sub_40867D(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00410EF6) --------------------------------------------------------
void __thiscall sub_410EF6(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 6, (struct CWnd *)(this + 3480));
  DDX_Control(a2, 1024, (struct CWnd *)(this + 3544));
  DDX_Control(a2, 1022, (struct CWnd *)(this + 3608));
  DDX_Control(a2, 1021, (struct CWnd *)(this + 3672));
  DDX_Control(a2, 2105, (struct CWnd *)(this + 3736));
}

//----- (00410F5A) --------------------------------------------------------
int (**sub_410F5A())()
{
  return &off_41EA48;
}
// 41EA48: using guessed type int (*off_41EA48)();

//----- (00410F60) --------------------------------------------------------
void __thiscall sub_410F60(HWND *this)
{
  HWND DlgItem; // eax
  HWND v3; // eax
  HWND v4; // eax
  HWND v5; // eax
  HWND v6; // eax
  unsigned __int16 *v7; // eax
  HWND v8; // eax
  HWND v9; // eax
  unsigned __int16 *v10; // eax
  const WCHAR *v11; // ecx
  unsigned __int16 *v12; // eax
  unsigned __int16 *v13; // eax
  unsigned __int16 *v14; // eax
  LPCWSTR v15[4]; // [esp-4h] [ebp-24h] BYREF
  HWND hWnd; // [esp+Ch] [ebp-14h]
  char v17[4]; // [esp+10h] [ebp-10h] BYREF
  int v18; // [esp+1Ch] [ebp-4h]

  if ( this[8] )
  {
    v15[0] = sub_414BE2(20);
    DlgItem = GetDlgItem(this[8], 2105);
    SetWindowTextW(DlgItem, v15[0]);
    v15[0] = sub_414BE2(21);
    v3 = GetDlgItem(this[8], 1021);
    SetWindowTextW(v3, v15[0]);
    v15[0] = sub_414BE2(22);
    v4 = GetDlgItem(this[8], 1022);
    SetWindowTextW(v4, v15[0]);
    v15[0] = sub_414BE2(23);
    v5 = GetDlgItem(this[8], 1024);
    SetWindowTextW(v5, v15[0]);
    v15[0] = sub_414BE2(10);
    v6 = GetDlgItem(this[8], 1029);
    SetWindowTextW(v6, v15[0]);
    hWnd = GetDlgItem(this[8], 1016);
    v7 = sub_414BE2(12);
    SetWindowTextW(hWnd, v7);
    v8 = GetDlgItem(this[8], 1074);
    SetWindowTextW(v8, &word_42FB18);
    v15[0] = sub_414BE2(40);
    v9 = GetDlgItem(this[8], 6);
    SetWindowTextW(v9, v15[0]);
    v10 = sub_414BE2(13);
    CString::CString((CString *)v17, v10);
    v18 = 0;
    v15[0] = v11;
    hWnd = (HWND)v15;
    CString::CString((CString *)v15, (const struct CString *)v17);
    sub_41379E(this + 854, 0, (int)v15[0]);
    v12 = sub_414BE2(151);
    hWnd = (HWND)v15;
    CString::CString((CString *)v15, v12);
    sub_41379E(this + 854, 1u, (int)v15[0]);
    v13 = sub_414BE2(161);
    hWnd = (HWND)v15;
    CString::CString((CString *)v15, v13);
    sub_41379E(this + 854, 2u, (int)v15[0]);
    v14 = sub_414BE2(166);
    hWnd = (HWND)v15;
    CString::CString((CString *)v15, v14);
    sub_41379E(this + 854, 3u, (int)v15[0]);
    sub_4123A2((int)(this + 431));
    sub_40143A(this + 340);
    sub_4066E8(this + 24);
    sub_40ED70((int)(this + 160));
    v18 = -1;
    CString::~CString((CString *)v17);
  }
}
// 41104A: variable 'v11' is possibly undefined
// 410F60: using guessed type char var_10[4];

//----- (00411106) --------------------------------------------------------
int sub_411106()
{
  sub_411110();
  return atexit(sub_411129);
}

//----- (00411110) --------------------------------------------------------
CDialog *sub_411110()
{
  return sub_40BC71((CDialog *)&unk_433530, 0);
}

//----- (00411129) --------------------------------------------------------
void __cdecl sub_411129()
{
  CDialog::~CDialog((CDialog *)&unk_433530);
}

//----- (00411133) --------------------------------------------------------
int __thiscall sub_411133(HWND *this)
{
  HWND DlgItem; // eax
  int *v3; // ebx
  WPARAM v4; // ebx
  HWND v5; // eax
  HWND v6; // eax
  HWND v7; // eax
  HWND v8; // eax
  HWND v9; // edi
  HWND v10; // edi
  int **wParam; // [esp+10h] [ebp-30h]
  int wParamb; // [esp+10h] [ebp-30h]
  int wParamc; // [esp+10h] [ebp-30h]
  int wParamd; // [esp+10h] [ebp-30h]
  HWND wParama; // [esp+10h] [ebp-30h]
  struct tagRECT Rect; // [esp+14h] [ebp-2Ch] BYREF
  int v18[7]; // [esp+24h] [ebp-1Ch] BYREF

  CDialog::OnInitDialog((CDialog *)this);
  DlgItem = GetDlgItem(this[8], 1100);
  CWnd::Attach((CWnd *)(this + 854), DlgItem);
  CWnd::ShowWindow((CWnd *)(this + 854), 5);
  CWnd::ModifyStyleEx((CWnd *)(this + 854), 0, 0x10000u, 0);
  v18[2] = (int)&dword_432FC0;
  v18[3] = (int)&dword_432FC0;
  v18[0] = (int)&dword_433158;
  wParam = (int **)v18;
  v18[1] = (int)&dword_433048;
  v18[4] = (int)&dword_432F38;
  v18[5] = (int)&dword_4338C0;
  v18[6] = 0;
  if ( &dword_433158 )
  {
    v3 = &dword_433158;
    do
    {
      ++wParam;
      *v3 = sub_4141D6((LPCWSTR)v3 + 2, *v3);
      v3 = *wParam;
    }
    while ( *wParam );
  }
  v4 = dword_432FC0;
  v5 = GetDlgItem(this[8], 2105);
  SendMessageW(v5, 0xF1u, v4, 0);
  wParamb = dword_432F38;
  v6 = GetDlgItem(this[8], 1021);
  SendMessageW(v6, 0xF1u, wParamb, 0);
  wParamc = dword_433048;
  v7 = GetDlgItem(this[8], 1022);
  SendMessageW(v7, 0xF1u, wParamc, 0);
  wParamd = dword_433158;
  v8 = GetDlgItem(this[8], 1024);
  SendMessageW(v8, 0xF1u, wParamd, 0);
  CDialog::Create((CDialog *)&unk_433530, (const unsigned __int16 *)0x88, 0);
  CWnd::ModifyStyleEx((CWnd *)&unk_433530, 0, 0x80u, 0);
  dword_4331DC = (HWND)dword_433550;
  wParama = GetDlgItem(this[8], 1100);
  v9 = GetDlgItem(this[8], 2020);
  ShowWindow(v9, 0);
  GetWindowRect(v9, &Rect);
  v10 = this[8];
  if ( ScreenToClient(v10, (LPPOINT)&Rect) )
    ScreenToClient(v10, (LPPOINT)&Rect.right);
  SetWindowPos(wParama, 0, Rect.left, Rect.top, Rect.right - Rect.left, Rect.bottom - Rect.top, 0);
  CTabCtrl::InsertItem((CTabCtrl *)(this + 854), 3u, 0, &word_42FB18, 1, 0);
  CTabCtrl::InsertItem((CTabCtrl *)(this + 854), 3u, 1, &word_42FB18, 3, 0);
  CTabCtrl::InsertItem((CTabCtrl *)(this + 854), 3u, 2, &word_42FB18, 5, 0);
  CTabCtrl::InsertItem((CTabCtrl *)(this + 854), 3u, 3, &word_42FB18, 7, 0);
  CWnd::ModifyStyleEx((CWnd *)(this + 854), 0, 0x10000u, 0);
  SendMessageW(this[862], 0x130Cu, dword_4338C0, 0);
  sub_4116D4(this);
  sub_410F60(this);
  SetTimer(this[8], 0x3E8u, 0x1F4u, 0);
  sub_41139E(this);
  return 1;
}
// 432F38: using guessed type int dword_432F38;
// 433048: using guessed type int dword_433048;
// 433158: using guessed type int dword_433158;
// 433550: using guessed type int dword_433550;

//----- (0041139E) --------------------------------------------------------
void __thiscall sub_41139E(HWND *this)
{
  HICON v1; // eax
  HICON v2; // eax
  HICON v3; // eax
  HICON ImageW; // edi
  HICON v5; // eax
  HWND DlgItem; // eax
  HICON hIcon; // [esp+0h] [ebp-8h]
  HICON hIcona; // [esp+0h] [ebp-8h]
  HICON hIconb; // [esp+0h] [ebp-8h]

  if ( !dword_433944 )
  {
    dword_433944 = ImageList_Create(16, 16, 0x21u, 1, 1);
    hIcon = (HICON)LoadImageW(hInstance, (LPCWSTR)0xA4, 1u, 16, 16, 0);
    ImageList_ReplaceIcon(dword_433944, -1, hIcon);
    v1 = sub_4175DC(hIcon);
    ImageList_ReplaceIcon(dword_433944, -1, v1);
    hIcona = (HICON)LoadImageW(hInstance, (LPCWSTR)0xA6, 1u, 16, 16, 0);
    ImageList_ReplaceIcon(dword_433944, -1, hIcona);
    v2 = sub_4175DC(hIcona);
    ImageList_ReplaceIcon(dword_433944, -1, v2);
    hIconb = (HICON)LoadImageW(hInstance, (LPCWSTR)0xA9, 1u, 16, 16, 0);
    ImageList_ReplaceIcon(dword_433944, -1, hIconb);
    v3 = sub_4175DC(hIconb);
    ImageList_ReplaceIcon(dword_433944, -1, v3);
    ImageW = (HICON)LoadImageW(hInstance, (LPCWSTR)0xAA, 1u, 16, 16, 0);
    ImageList_ReplaceIcon(dword_433944, -1, ImageW);
    v5 = sub_4175DC(ImageW);
    ImageList_ReplaceIcon(dword_433944, -1, v5);
    DlgItem = GetDlgItem(this[8], 1100);
    SendMessageW(DlgItem, 0x1303u, 0, (LPARAM)dword_433944);
  }
}

//----- (00411606) --------------------------------------------------------
void __thiscall sub_411606(HWND *this)
{
  HWND *v2; // edi

  if ( dword_4337B0 )
  {
    v2 = this + 348;
    if ( !this[348] )
    {
      CDialog::Create((CDialog *)(this + 340), (const unsigned __int16 *)0xA4, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, *v2);
    }
    if ( !this[439] )
    {
      CDialog::Create((CDialog *)(this + 431), (const unsigned __int16 *)0xA3, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, this[439]);
    }
    if ( !this[32] )
    {
      CDialog::Create((CDialog *)(this + 24), (const unsigned __int16 *)0xA5, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, this[32]);
    }
    if ( !this[168] )
    {
      CDialog::Create((CDialog *)(this + 160), (const unsigned __int16 *)0xA6, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, this[168]);
    }
  }
}
// 4337B0: using guessed type int dword_4337B0;

//----- (004116D4) --------------------------------------------------------
int __thiscall sub_4116D4(HWND *this)
{
  WPARAM v1; // ebx
  HWND *v3; // edi
  HWND *v4; // edi
  HWND *v5; // edi
  HWND *v6; // edi
  int result; // eax

  v1 = dword_4338C0;
  switch ( dword_4338C0 )
  {
    case 0u:
      v3 = this + 439;
      if ( !this[439] )
        CDialog::Create((CDialog *)(this + 431), (const unsigned __int16 *)0xA3, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, *v3);
      CWnd::ShowWindow((CWnd *)(this + 431), 5);
LABEL_18:
      result = CWnd::ShowWindow((CWnd *)(this + 340), 0);
      goto LABEL_19;
    case 1u:
      v4 = this + 348;
      if ( !this[348] )
        CDialog::Create((CDialog *)(this + 340), (const unsigned __int16 *)0xA4, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, *v4);
      CWnd::ShowWindow((CWnd *)(this + 340), 5);
      break;
    case 2u:
      v5 = this + 32;
      if ( !this[32] )
        CDialog::Create((CDialog *)(this + 24), (const unsigned __int16 *)0xA5, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, *v5);
      CWnd::ShowWindow((CWnd *)(this + 24), 5);
      break;
    case 3u:
      v6 = this + 168;
      if ( !this[168] )
        CDialog::Create((CDialog *)(this + 160), (const unsigned __int16 *)0xA6, (struct CWnd *)(this + 854));
      sub_4136DC(this + 854, *v6);
      CWnd::ShowWindow((CWnd *)(this + 160), 5);
      break;
  }
  result = CWnd::ShowWindow((CWnd *)(this + 431), 0);
  if ( v1 != 1 )
    goto LABEL_18;
LABEL_19:
  if ( v1 != 2 )
    result = CWnd::ShowWindow((CWnd *)(this + 24), 0);
  if ( v1 != 3 )
    return CWnd::ShowWindow((CWnd *)(this + 160), 0);
  return result;
}

//----- (00411867) --------------------------------------------------------
int __thiscall sub_411867(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[338] = a2;
  return result;
}

//----- (00411874) --------------------------------------------------------
LRESULT __thiscall sub_411874(HWND *this)
{
  LRESULT result; // eax

  if ( dword_433728 > 4 )
  {
    dword_4338C0 = 0;
    SendMessageW(this[862], 0x130Cu, 0, 0);
    sub_4116D4(this);
    return sub_412E3B(this + 431);
  }
  return result;
}

//----- (004118AE) --------------------------------------------------------
LRESULT __thiscall sub_4118AE(HWND *this, int a2)
{
  WPARAM v3; // ecx
  LRESULT result; // eax
  int v5; // edi
  int v6; // edx
  int v7; // ebx
  HWND *v8; // esi
  int v9; // [esp+4h] [ebp-4h]
  int v10; // [esp+10h] [ebp+8h]

  v3 = dword_4338C0;
  result = (LRESULT)this[338];
  if ( this[336] != (HWND)result || this[337] != (HWND)dword_431F48 || this[339] != (HWND)dword_4338C0 || a2 )
  {
    this[336] = (HWND)result;
    this[337] = (HWND)dword_431F48;
    this[339] = (HWND)v3;
    if ( dword_4337B0 && result )
    {
      v5 = 1;
      v6 = 1;
    }
    else
    {
      v6 = 0;
      v5 = 1;
    }
    v10 = !v3 && result || v6;
    v9 = v3 == 1 && result || v6;
    v7 = v3 == 2 && result || v6;
    if ( (v3 != 3 || !result) && !v6 )
      v5 = 0;
    sub_412E2E(this + 431, v10);
    sub_40142D(this + 340, v9);
    sub_406FA8(this + 24, v7);
    sub_40EABC(this + 160, v5);
    CWnd::EnableWindow((CWnd *)(this + 934), (int)this[338]);
    CWnd::EnableWindow((CWnd *)(this + 918), (int)this[338]);
    CWnd::EnableWindow((CWnd *)(this + 902), (int)this[338]);
    CWnd::EnableWindow((CWnd *)(this + 886), (int)this[338]);
    v8 = this + 854;
    sub_4137EE(v8, 0, v10 == 0);
    sub_4137EE(v8, 1u, 3 - (v9 != 0));
    sub_4137EE(v8, 2u, 5 - (v7 != 0));
    return sub_4137EE(v8, 3u, 7 - (v5 != 0));
  }
  return result;
}
// 4337B0: using guessed type int dword_4337B0;

//----- (00411A30) --------------------------------------------------------
HMENU __cdecl sub_411A30(int a1, int a2, UINT_PTR a3)
{
  HMENU PopupMenu; // edi
  unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  UINT_PTR v7; // edi
  unsigned __int16 *v8; // eax
  UINT_PTR v9; // edi
  UINT_PTR v10; // edi
  WCHAR NewItem[64]; // [esp+Ch] [ebp-8Ch] BYREF
  UINT_PTR uIDNewItem; // [esp+8Ch] [ebp-Ch]
  HMENU hMenu; // [esp+90h] [ebp-8h]
  int v15; // [esp+94h] [ebp-4h]
  int v16; // [esp+A4h] [ebp+Ch]
  int v17; // [esp+A4h] [ebp+Ch]
  int i; // [esp+A4h] [ebp+Ch]
  int v19; // [esp+A8h] [ebp+10h]

  PopupMenu = CreatePopupMenu();
  hMenu = PopupMenu;
  uIDNewItem = (UINT_PTR)CreatePopupMenu();
  v4 = sub_414BE2(41);
  AppendMenuW(PopupMenu, 0x403u, 0, v4);
  if ( a2 )
  {
    v5 = sub_414BE2(42);
    AppendMenuW(PopupMenu, 0x400u, a3 + 20000, v5);
  }
  AppendMenuW(PopupMenu, 0xC00u, 0, 0);
  v15 = 0;
  v6 = sub_414BE2(43);
  AppendMenuW(PopupMenu, 0x410u, uIDNewItem, v6);
  v16 = 5;
  v7 = a3 + 105;
  do
  {
    v8 = sub_414BE2(44);
    wsprintfW(NewItem, aDS, v16, v8);
    AppendMenuW((HMENU)uIDNewItem, 0x400u, v7, NewItem);
    if ( a1 == v16 )
      CheckMenuItem(hMenu, v7, 8u);
    v17 = v16 + 4;
    v9 = v7 + 4;
    if ( v17 > 40 )
    {
      v17 += 5;
      v9 += 5;
    }
    v16 = v17 + 1;
    v7 = v9 + 1;
  }
  while ( v16 < 200 );
  v10 = a3;
  v19 = 0;
  for ( i = 1; i < 20; ++i )
  {
    if ( i > 4 )
    {
      ++v15;
      v19 += 60;
      ++v10;
    }
    if ( i > 12 )
    {
      v15 += 2;
      v19 += 120;
      v10 += 2;
    }
    ++v15;
    v19 += 60;
    ++v10;
    wsprintfW(NewItem, aDH, v15);
    AppendMenuW(hMenu, 0x400u, v10, NewItem);
    if ( a1 == v19 )
      CheckMenuItem(hMenu, v10, 8u);
  }
  return hMenu;
}

//----- (00411B9C) --------------------------------------------------------
void __thiscall sub_411B9C(HWND *this, HWND hWnd)
{
  HMENU v2; // edi
  unsigned __int16 *v3; // eax
  unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  unsigned __int16 *v7; // eax
  int v8; // esi
  int v9; // eax
  int v10; // eax
  HWND v11; // eax
  int v12; // [esp-Ch] [ebp-3E8h]
  int v13; // [esp-8h] [ebp-3E4h]
  int v14; // [esp-4h] [ebp-3E0h]
  WCHAR NewItem[256]; // [esp+Ch] [ebp-3D0h] BYREF
  int v16[33]; // [esp+20Ch] [ebp-1D0h] BYREF
  int v17[33]; // [esp+290h] [ebp-14Ch] BYREF
  int v18[33]; // [esp+314h] [ebp-C8h] BYREF
  struct tagRECT Rect; // [esp+398h] [ebp-44h] BYREF
  int v20; // [esp+3A8h] [ebp-34h] BYREF
  unsigned __int16 v21; // [esp+3B0h] [ebp-2Ch]
  unsigned __int16 v22; // [esp+3B2h] [ebp-2Ah]
  unsigned __int16 v23; // [esp+3B4h] [ebp-28h]
  int x; // [esp+3B8h] [ebp-24h]
  int y; // [esp+3BCh] [ebp-20h]
  UINT_PTR uIDNewItem; // [esp+3C0h] [ebp-1Ch]
  LPCWSTR lpNewItem; // [esp+3C4h] [ebp-18h] BYREF
  HWND *v28; // [esp+3C8h] [ebp-14h]
  HMENU hMenu; // [esp+3CCh] [ebp-10h]
  int v30; // [esp+3D8h] [ebp-4h]

  v28 = this;
  GetWindowRect(this[878], &Rect);
  x = Rect.left;
  y = Rect.bottom;
  uIDNewItem = (UINT_PTR)sub_411A30(dword_433838, 1, 0);
  v2 = sub_411A30(dword_433728, 1, 0xEA60u);
  hMenu = CreatePopupMenu();
  v3 = sub_414BE2(26);
  AppendMenuW(hMenu, 0x410u, uIDNewItem, v3);
  v4 = sub_414BE2(39);
  AppendMenuW(hMenu, 0x410u, (UINT_PTR)v2, v4);
  qmemcpy(v17, &dword_4336A0, sizeof(v17));
  qmemcpy(v18, &dword_433618, sizeof(v18));
  qmemcpy(v16, &dword_433590, sizeof(v16));
  v17[0] = sub_4141D6((LPCWSTR)&v17[1], v17[0]);
  v18[0] = sub_4141D6((LPCWSTR)&v18[1], v18[0]);
  v16[0] = sub_4141D6((LPCWSTR)&v16[1], v16[0]);
  v14 = v16[0];
  v13 = v18[0];
  v12 = v17[0];
  v5 = sub_414BE2(73);
  wsprintfW(NewItem, aS02d02d02d, v5, v12, v13, v14);
  AppendMenuW((HMENU)uIDNewItem, 0x400u, 0x13881u, NewItem);
  AppendMenuW(hMenu, 0xC00u, 0, 0);
  v6 = sub_414BE2(175);
  AppendMenuW(hMenu, 0x400u, 0x7530u, v6);
  v7 = sub_414BE2(176);
  CString::CString((CString *)&lpNewItem, v7);
  v30 = 0;
  CString::Replace((CString *)&lpNewItem, aS_0, a4);
  AppendMenuW(hMenu, 0x400u, 0x7531u, lpNewItem);
  if ( !dword_433838 )
    CheckMenuItem(hMenu, 0x4E20u, 8u);
  if ( !dword_4337B0 )
    CheckMenuItem(hMenu, 0x7530u, 8u);
  if ( dword_4337B0 == 1 )
    CheckMenuItem(hMenu, 0x7531u, 8u);
  if ( !dword_433728 )
    CheckMenuItem(hMenu, 0x13880u, 8u);
  if ( dword_433838 == -1 )
    CheckMenuItem(hMenu, 0x13881u, 8u);
  v8 = TrackPopupMenu(hMenu, 0x100u, x, y, 0, hWnd, 0);
  if ( v8 )
  {
    switch ( v8 )
    {
      case 20000:
        if ( dword_433838 )
        {
          dword_433838 = 0;
          sub_4141BE(&word_43383C, 0);
        }
        goto LABEL_45;
      case 30000:
        if ( dword_4337B0 )
        {
          dword_4337B0 = 0;
          sub_4141BE(&word_4337B4, 0);
        }
LABEL_22:
        sub_411606(v28);
        sub_4118AE(v28, 1);
        goto LABEL_45;
      case 30001:
        if ( dword_4337B0 != 1 )
        {
          dword_4337B0 = 1;
          sub_4141BE(&word_4337B4, 1);
        }
        goto LABEL_22;
      case 80000:
        if ( dword_433728 )
        {
          dword_433728 = 0;
          sub_4141BE(word_43372C, 0);
        }
        goto LABEL_45;
    }
    if ( v8 < 60000 )
    {
      if ( v8 <= 100 )
        v10 = 60 * v8;
      else
        v10 = v8 - 100;
      if ( v10 != dword_433838 )
      {
        dword_433838 = v10;
        sub_4141BE(&word_43383C, v10);
      }
    }
    else
    {
      if ( v8 <= 60100 )
        v9 = 60 * (v8 - 60000);
      else
        v9 = v8 - 60100;
      dword_433728 = v9;
      sub_4141BE(word_43372C, v9);
    }
  }
  if ( v8 == 80001 )
  {
    dword_433838 = -1;
    sub_4141BE(&word_43383C, -1);
    v11 = (HWND)(v28 + 431);
    if ( v28 != (HWND *)-1724 )
      v11 = v28[439];
    sub_4128F4(v11, 204, 205, (int)&v20);
    if ( v21 != v17[0] )
    {
      v17[0] = v21;
      sub_4141BE((LPCWSTR)&v17[1], v21);
    }
    if ( v22 != v18[0] )
    {
      v18[0] = v22;
      sub_4141BE((LPCWSTR)&v18[1], v22);
    }
    if ( v23 != v16[0] )
    {
      v16[0] = v23;
      sub_4141BE((LPCWSTR)&v16[1], v23);
    }
  }
LABEL_45:
  v30 = -1;
  CString::~CString((CString *)&lpNewItem);
}
// 43372C: using guessed type WCHAR word_43372C[66];
// 4337B0: using guessed type int dword_4337B0;

//----- (00411FA6) --------------------------------------------------------
int sub_411FA6()
{
  sub_411FB0();
  return atexit(sub_411FC6);
}

//----- (00411FB0) --------------------------------------------------------
void *sub_411FB0()
{
  return sub_4103EF(&unk_433A54);
}

//----- (00411FC6) --------------------------------------------------------
void __cdecl sub_411FC6()
{
  sub_4103FD();
}

//----- (00411FD5) --------------------------------------------------------
WCHAR *__thiscall sub_411FD5(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aUseTimer);
  return sub_403F67((WCHAR *)dword_4339D0, 0, v2[0]);
}
// 4339D0: using guessed type int dword_4339D0[33];

//----- (00411FFA) --------------------------------------------------------
WCHAR *__thiscall sub_411FFA(void *this)
{
  _DWORD v2[2]; // [esp-4h] [ebp-8h] BYREF

  v2[0] = this;
  v2[1] = v2;
  CString::CString((CString *)v2, aTimeoutMode);
  return sub_403F67((WCHAR *)&dword_433948, 0, v2[0]);
}

//----- (0041201A) --------------------------------------------------------
_DWORD *__thiscall sub_41201A(_DWORD *this, struct CWnd *a2)
{
  CDialog::CDialog((CDialog *)this, 0xA3u, a2);
  CWnd::CWnd((CWnd *)(this + 27));
  this[27] = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 43));
  this[43] = &off_41D8C8;
  CWnd::CWnd((CWnd *)(this + 59));
  this[59] = &off_41D998;
  CWnd::CWnd((CWnd *)(this + 75));
  this[75] = &off_41D998;
  *this = &off_41EC68;
  this[24] = -12;
  this[91] = 0;
  return this;
}
// 41D8C8: using guessed type struct CRuntimeClass *(__thiscall *off_41D8C8)(CComboBox *__hidden this);
// 41D998: using guessed type struct CRuntimeClass *(__thiscall *off_41D998)(CButton *__hidden this);
// 41EC68: using guessed type struct CRuntimeClass *(__thiscall *off_41EC68)(CDialog *__hidden this);

//----- (004120B3) --------------------------------------------------------
void *__thiscall sub_4120B3(void *this, char a2)
{
  sub_40881C((int)this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004120CF) --------------------------------------------------------
void __thiscall sub_4120CF(int this, struct CDataExchange *a2)
{
  DDX_Control(a2, 1013, (struct CWnd *)(this + 108));
  DDX_Control(a2, 1014, (struct CWnd *)(this + 172));
  DDX_Control(a2, 2041, (struct CWnd *)(this + 300));
  DDX_DateTimeCtrl(a2, 204, (struct CTime *)(this + 364));
}

//----- (00412121) --------------------------------------------------------
int (**sub_412121())()
{
  return &off_41EBE8;
}
// 41EBE8: using guessed type int (*off_41EBE8)();

//----- (00412127) --------------------------------------------------------
void __thiscall sub_412127(HWND *this)
{
  HWND DlgItem; // eax

  DlgItem = GetDlgItem(this[8], 1013);
  dword_4339D0[0] = SendMessageW(DlgItem, 0xF0u, 0, 0);
  if ( dword_4339D0[0] )
  {
    if ( sub_412A75(this[8]) < 180 )
      sub_412B35(this[8], 0, 30, 0);
    KillTimer(this[8], 0x3E8u);
    SetTimer(this[8], 0x3E8u, 0x32u, 0);
  }
  else
  {
    KillTimer(this[8], 0x3E8u);
    KillTimer(this[8], 0x3E8u);
    sub_4126BC((int)this, this[8]);
  }
}
// 4339D0: using guessed type int dword_4339D0[33];

//----- (004121BC) --------------------------------------------------------
void __cdecl sub_4121BC(HWND hWnd)
{
  unsigned __int16 *v1; // eax
  unsigned __int16 *v2; // eax
  unsigned __int16 *v3; // eax
  unsigned __int16 *v4; // eax
  const unsigned __int16 *v5; // eax
  unsigned __int16 **v6; // edi
  unsigned __int16 *Buffer; // eax
  unsigned __int16 *v8[14]; // [esp+Ch] [ebp-54h] BYREF
  char v9[4]; // [esp+44h] [ebp-1Ch] BYREF
  WPARAM wParam; // [esp+48h] [ebp-18h]
  char v11[4]; // [esp+4Ch] [ebp-14h] BYREF
  char v12[4]; // [esp+50h] [ebp-10h] BYREF
  int v13; // [esp+5Ch] [ebp-4h]

  v1 = sub_414BE2(37);
  CString::CString((CString *)v11, v1);
  v13 = 0;
  CString::CString((CString *)v9, asc_42F40C);
  LOBYTE(v13) = 1;
  CString::operator+=(v11, v9);
  LOBYTE(v13) = 0;
  CString::~CString((CString *)v9);
  v2 = sub_414BE2(85);
  CString::operator+=(v11, v2);
  v3 = sub_414BE2(37);
  CString::CString((CString *)v12, v3);
  LOBYTE(v13) = 2;
  CString::CString((CString *)v9, asc_42F40C);
  LOBYTE(v13) = 3;
  CString::operator+=(v12, v9);
  LOBYTE(v13) = 2;
  CString::~CString((CString *)v9);
  v4 = sub_414BE2(84);
  CString::operator+=(v12, v4);
  v8[0] = sub_414BE2(14);
  v8[1] = sub_414BE2(15);
  v8[2] = sub_414BE2(16);
  v8[3] = sub_414BE2(17);
  v8[4] = sub_414BE2(37);
  v8[5] = CString::GetBuffer((CString *)v11, 255);
  v8[6] = CString::GetBuffer((CString *)v12, 255);
  v8[7] = sub_414BE2(97);
  v8[8] = sub_414BE2(121);
  v8[9] = sub_414BE2(122);
  v8[10] = sub_414BE2(123);
  v8[11] = sub_414BE2(124);
  v8[12] = 0;
  v8[13] = 0;
  SendMessageW(hWnd, 0x14Bu, 0, 0);
  v5 = v8[0];
  wParam = 0;
  if ( v8[0] )
  {
    v6 = v8;
    do
    {
      CString::CString((CString *)v9, v5);
      LOBYTE(v13) = 4;
      CString::Replace((CString *)v9, &word_424150, &word_42FB18);
      Buffer = CString::GetBuffer((CString *)v9, 0);
      SendMessageW(hWnd, 0x14Au, wParam++, (LPARAM)Buffer);
      ++v6;
      LOBYTE(v13) = 2;
      CString::~CString((CString *)v9);
      v5 = *v6;
    }
    while ( *v6 );
  }
  SendMessageW(hWnd, 0x14Eu, 7u, 0);
  LOBYTE(v13) = 0;
  CString::~CString((CString *)v12);
  v13 = -1;
  CString::~CString((CString *)v11);
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A200: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 4121BC: using guessed type char var_14[4];
// 4121BC: using guessed type char var_1C[4];
// 4121BC: using guessed type char var_10[4];

//----- (00412397) --------------------------------------------------------
void __cdecl sub_412397(HWND hWnd)
{
  sub_4121BC(hWnd);
}

//----- (004123A2) --------------------------------------------------------
void __thiscall sub_4123A2(int this)
{
  HWND DlgItem; // eax
  HWND v3; // eax
  HWND v4; // eax
  unsigned __int16 *v5; // [esp-8h] [ebp-Ch]

  if ( *(_DWORD *)(this + 32) && dword_444FD0 != *(_DWORD *)(this + 96) )
  {
    *(_DWORD *)(this + 96) = dword_444FD0;
    v5 = sub_414BE2(11);
    DlgItem = GetDlgItem(*(HWND *)(this + 32), 1013);
    SetWindowTextW(DlgItem, v5);
    v3 = GetDlgItem(*(HWND *)(this + 32), 1014);
    sub_4121BC(v3);
    v4 = (HWND)(this + 172);
    if ( this != -172 )
      v4 = *(HWND *)(this + 204);
    SendMessageW(v4, 0x14Eu, dword_433948, 0);
  }
}

//----- (0041240E) --------------------------------------------------------
LRESULT __cdecl sub_41240E(HWND hDlg, __int16 a2, __int16 a3, __int16 a4)
{
  __int64 v4; // kr00_8
  struct _SYSTEMTIME SystemTime; // [esp+Ch] [ebp-30h] BYREF
  SYSTEMTIME v7; // [esp+1Ch] [ebp-20h] BYREF
  struct _FILETIME FileTime; // [esp+2Ch] [ebp-10h] BYREF
  FILETIME v9; // [esp+34h] [ebp-8h] BYREF

  GetLocalTime(&SystemTime);
  SystemTimeToFileTime(&SystemTime, &FileTime);
  v9 = FileTime;
  sub_4124FA(*(_QWORD *)&FileTime);
  FileTimeToSystemTime(&v9, &v7);
  v7.wHour = a2;
  v7.wMinute = a3;
  v7.wSecond = a4;
  SystemTimeToFileTime(&v7, &v9);
  v4 = sub_4124FA(*(_QWORD *)&v9);
  if ( v4 - sub_4124FA(*(_QWORD *)&FileTime) <= 0 )
  {
    v9 = (FILETIME)(v4 + 864000000000i64);
    FileTimeToSystemTime(&v9, &v7);
  }
  SendDlgItemMessageW(hDlg, 204, 0x1002u, 0, (LPARAM)&v7);
  return SendDlgItemMessageW(hDlg, 205, 0x1002u, 0, (LPARAM)&v7);
}

//----- (004124FA) --------------------------------------------------------
__int64 __cdecl sub_4124FA(__int64 a1)
{
  return a1;
}

//----- (0041250D) --------------------------------------------------------
int __thiscall sub_41250D(int this)
{
  int v2; // eax
  __int16 v4[66]; // [esp+Ch] [ebp-18Ch] BYREF
  __int16 v5[66]; // [esp+90h] [ebp-108h] BYREF
  __int16 v6[66]; // [esp+114h] [ebp-84h] BYREF

  CDialog::OnInitDialog((CDialog *)this);
  dword_433948 = sub_4141D6(&word_43394C, dword_433948);
  sub_412B35(*(HWND *)(this + 32), 0, 0, 0);
  *(_DWORD *)(this + 100) = 0;
  *(_DWORD *)(this + 104) = 10;
  sub_4123A2(this);
  if ( dword_433838 > 0 )
  {
    sub_412B35(*(HWND *)(this + 32), 0, dword_433838, 0);
    dword_4339D0[0] = 1;
    SendMessageW(*(HWND *)(this + 268), 0xF1u, 1u, 0);
  }
  if ( dword_433838 == -1 )
  {
    dword_4336A0 = sub_4141D6(&word_4336A4, dword_4336A0);
    dword_433618 = sub_4141D6(&word_43361C, dword_433618);
    v2 = sub_4141D6(&word_433594, dword_433590);
    qmemcpy(v6, &dword_4336A0, sizeof(v6));
    qmemcpy(v4, &dword_433618, sizeof(v4));
    dword_433590 = v2;
    dword_4339D0[0] = 1;
    qmemcpy(v5, &dword_433590, sizeof(v5));
    sub_41240E(*(HWND *)(this + 32), v6[0], v4[0], v5[0]);
    SendMessageW(*(HWND *)(this + 268), 0xF1u, 1u, 0);
  }
  SetTimer(*(HWND *)(this + 32), 0x3E8u, 0x32u, 0);
  return 1;
}
// 4339D0: using guessed type int dword_4339D0[33];

//----- (0041265A) --------------------------------------------------------
LPWSTR __cdecl sub_41265A(double a1, LPWSTR a2)
{
  wsprintfW(
    a2,
    a02d02d02d,
    (unsigned int)(__int64)(a1 * 0.0002777777777777778),
    (unsigned int)(__int64)fmod((double)(int)(__int64)(a1 * 0.01666666666666667), 60.0),
    (unsigned int)(__int64)(a1 * 0.01666666666666667));
  return a2;
}

//----- (004126BC) --------------------------------------------------------
void __thiscall sub_4126BC(int this, HWND hDlg)
{
  HWND v3; // edi
  WCHAR *Buffer; // eax
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  HWND DlgItem; // eax
  HWND v8; // eax
  CWnd *v9; // ebx
  unsigned __int16 *v10; // eax
  int v11; // ecx
  int CurSel; // eax
  HWND v13; // eax
  HWND v14; // eax
  double v15; // [esp+0h] [ebp-238h] BYREF
  LPARAM v16[4]; // [esp+8h] [ebp-230h] BYREF
  WCHAR String[2]; // [esp+18h] [ebp-220h] BYREF
  char v18[508]; // [esp+1Ch] [ebp-21Ch] BYREF
  CString *v19; // [esp+218h] [ebp-20h]
  CString *v20; // [esp+21Ch] [ebp-1Ch]
  char v21[4]; // [esp+220h] [ebp-18h] BYREF
  __int64 v22; // [esp+224h] [ebp-14h]
  int v23; // [esp+234h] [ebp-4h]

  if ( dword_4339D0[0] )
  {
    if ( *(_DWORD *)(this + 368) )
    {
      v22 = sub_412A75(hDlg);
      if ( v22 < 10 && !*(_DWORD *)(this + 100) )
      {
        *(_DWORD *)(this + 100) = 1;
        v16[0] = 2000;
        *(_DWORD *)(this + 104) = 10;
        KillTimer(hDlg, v16[0]);
        SetTimer(hDlg, 0x7D0u, 0x3E8u, 0);
      }
      *(_DWORD *)String = dword_43151C;
      memset(v18, 0, sizeof(v18));
      sub_41265A((double)v22, String);
      DlgItem = GetDlgItem(hDlg, 1002);
      SetWindowTextW(DlgItem, String);
      if ( !v22 )
      {
        if ( dword_4339D0[0] )
        {
          v8 = GetDlgItem(hDlg, 1013);
          SendMessageW(v8, 0xF1u, 0, 0);
          CString::CString((CString *)v21);
          v9 = (CWnd *)(this + 172);
          v23 = 1;
          CWnd::GetWindowTextW(v9, (struct CString *)v21);
          v10 = sub_414BE2(13);
          v19 = (CString *)v16;
          CString::CString((CString *)v16, v10);
          HIDWORD(v15) = v11;
          v20 = (CString *)((char *)&v15 + 4);
          LOBYTE(v23) = 2;
          CString::CString((CString *)((char *)&v15 + 4), (const struct CString *)v21);
          LOBYTE(v23) = 1;
          CurSel = CComboBox::GetCurSel(v9);
          sub_410C56(CurSel);
          v23 = -1;
          CString::~CString((CString *)v21);
        }
        v16[0] = 0;
        HIDWORD(v15) = 0;
        dword_4339D0[0] = 0;
        v13 = GetDlgItem(hDlg, 1013);
        SendMessageW(v13, 0xF1u, HIDWORD(v15), v16[0]);
      }
      if ( v22 < 0 )
      {
        v16[0] = 0;
        HIDWORD(v15) = 0;
        dword_4339D0[0] = 0;
        v14 = GetDlgItem(hDlg, 1013);
        SendMessageW(v14, 0xF1u, HIDWORD(v15), v16[0]);
      }
    }
    else
    {
      SendMessageW(*(HWND *)(this + 140), 0xF1u, 0, 0);
      dword_4339D0[0] = 0;
    }
  }
  else
  {
    v3 = GetDlgItem(hDlg, 1002);
    CString::CString((CString *)&hDlg);
    v23 = 0;
    Buffer = CString::GetBuffer((CString *)&hDlg, 64);
    GetWindowTextW(v3, Buffer, 64);
    CString::ReleaseBuffer((CString *)&hDlg, -1);
    v5 = sub_414BE2(24);
    if ( wcscmp((const wchar_t *)hDlg, v5) )
    {
      v6 = sub_414BE2(24);
      SetWindowTextW(v3, v6);
    }
    v23 = -1;
    CString::~CString((CString *)&hDlg);
  }
}
// 41286E: variable 'v11' is possibly undefined
// 43151C: using guessed type int dword_43151C;
// 4339D0: using guessed type int dword_4339D0[33];
// 4126BC: using guessed type char var_18[4];

//----- (004128F4) --------------------------------------------------------
int __cdecl sub_4128F4(HWND hDlg, int nIDDlgItem, int a3, int a4)
{
  int result; // eax
  char v5[6]; // [esp+Ch] [ebp-20h] BYREF
  int v6; // [esp+12h] [ebp-1Ah]
  int v7; // [esp+16h] [ebp-16h]
  __int16 v8; // [esp+1Ah] [ebp-12h]
  _WORD lParam[3]; // [esp+1Ch] [ebp-10h] BYREF
  int v10; // [esp+22h] [ebp-Ah]
  int v11; // [esp+26h] [ebp-6h]
  __int16 v12; // [esp+2Ah] [ebp-2h]

  memset(lParam, 0, sizeof(lParam));
  memset(v5, 0, sizeof(v5));
  v10 = 0;
  v11 = 0;
  v12 = 0;
  v6 = 0;
  v7 = 0;
  v8 = 0;
  SendDlgItemMessageW(hDlg, nIDDlgItem, 0x1001u, 0, (LPARAM)lParam);
  if ( a3 )
    SendDlgItemMessageW(hDlg, a3, 0x1001u, 0, (LPARAM)v5);
  result = a4;
  *(_WORD *)(a4 + 2) = lParam[1];
  *(_WORD *)(a4 + 6) = v10;
  *(_WORD *)a4 = lParam[0];
  *(_WORD *)(a4 + 8) = HIWORD(v6);
  *(_DWORD *)(a4 + 10) = v7;
  return result;
}

//----- (0041297E) --------------------------------------------------------
BOOL __cdecl sub_41297E(HWND hDlg, int nIDDlgItem, int a3, LPFILETIME lpFileTime)
{
  char v5[6]; // [esp+Ch] [ebp-38h] BYREF
  int v6; // [esp+12h] [ebp-32h]
  int v7; // [esp+16h] [ebp-2Eh]
  __int16 v8; // [esp+1Ah] [ebp-2Ah]
  char lParam[6]; // [esp+1Ch] [ebp-28h] BYREF
  int v10; // [esp+22h] [ebp-22h]
  int v11; // [esp+26h] [ebp-1Eh]
  __int16 v12; // [esp+2Ah] [ebp-1Ah]
  SYSTEMTIME SystemTime; // [esp+2Ch] [ebp-18h] BYREF
  struct _FILETIME FileTime; // [esp+3Ch] [ebp-8h] BYREF

  memset(&SystemTime, 0, sizeof(SystemTime));
  memset(lParam, 0, sizeof(lParam));
  v10 = 0;
  v11 = 0;
  v12 = 0;
  memset(v5, 0, sizeof(v5));
  v6 = 0;
  v7 = 0;
  v8 = 0;
  SendDlgItemMessageW(hDlg, nIDDlgItem, 0x1001u, 0, (LPARAM)lParam);
  if ( a3 )
    SendDlgItemMessageW(hDlg, a3, 0x1001u, 0, (LPARAM)v5);
  SystemTime.wDay = v10;
  *(_DWORD *)&SystemTime.wYear = *(_DWORD *)lParam;
  SystemTime.wHour = HIWORD(v6);
  *(_DWORD *)&SystemTime.wMinute = v7;
  SystemTimeToFileTime(&SystemTime, &FileTime);
  return LocalFileTimeToFileTime(&FileTime, lpFileTime);
}

//----- (00412A2F) --------------------------------------------------------
__int64 __cdecl sub_412A2F(__int64 *a1, __int64 *a2)
{
  __int64 v2; // rax
  __int64 v3; // kr00_8

  v2 = sub_4124FA(*a1);
  v3 = v2 - sub_4124FA(*a2);
  if ( v3 )
    return v3 / 10000000;
  else
    return 0i64;
}

//----- (00412A75) --------------------------------------------------------
__int64 __stdcall sub_412A75(HWND hDlg)
{
  int v2[4]; // [esp+8h] [ebp-38h] BYREF
  struct _SYSTEMTIME SystemTime; // [esp+18h] [ebp-28h] BYREF
  struct _FILETIME v4; // [esp+28h] [ebp-18h] BYREF
  struct _FILETIME v5; // [esp+30h] [ebp-10h] BYREF
  struct _FILETIME FileTime; // [esp+38h] [ebp-8h] BYREF

  GetLocalTime(&SystemTime);
  sub_4128F4(hDlg, 204, 205, (int)v2);
  sub_41297E(hDlg, 204, 205, &v4);
  SystemTimeToFileTime(&SystemTime, &FileTime);
  LocalFileTimeToFileTime(&FileTime, &v5);
  return sub_412A2F((__int64 *)&v4, (__int64 *)&v5);
}
// 412A75: using guessed type int var_38[4];

//----- (00412B35) --------------------------------------------------------
LRESULT __cdecl sub_412B35(HWND hDlg, int a2, int a3, int a4)
{
  struct _SYSTEMTIME SystemTime; // [esp+8h] [ebp-28h] BYREF
  struct _SYSTEMTIME v6; // [esp+18h] [ebp-18h] BYREF
  struct _FILETIME FileTime; // [esp+28h] [ebp-8h] BYREF

  GetLocalTime(&SystemTime);
  SystemTimeToFileTime(&SystemTime, &FileTime);
  FileTime = (struct _FILETIME)(10000000i64 * (a4 + 60 * (a3 + 60 * a2)) + sub_4124FA(*(_QWORD *)&FileTime));
  FileTimeToSystemTime(&FileTime, &v6);
  SendDlgItemMessageW(hDlg, 204, 0x1002u, 0, (LPARAM)&v6);
  return SendDlgItemMessageW(hDlg, 205, 0x1002u, 0, (LPARAM)&v6);
}

//----- (00412BD2) --------------------------------------------------------
HMENU __stdcall sub_412BD2(int a1, int a2, UINT_PTR a3)
{
  HMENU PopupMenu; // edi
  unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  unsigned __int16 *v6; // eax
  UINT_PTR v7; // edi
  unsigned __int16 *v8; // eax
  UINT_PTR v9; // edi
  UINT_PTR v10; // edi
  WCHAR NewItem[64]; // [esp+Ch] [ebp-8Ch] BYREF
  UINT_PTR uIDNewItem; // [esp+8Ch] [ebp-Ch]
  HMENU hMenu; // [esp+90h] [ebp-8h]
  int v15; // [esp+94h] [ebp-4h]
  int v16; // [esp+A4h] [ebp+Ch]
  int v17; // [esp+A4h] [ebp+Ch]
  int i; // [esp+A4h] [ebp+Ch]
  int v19; // [esp+A8h] [ebp+10h]

  PopupMenu = CreatePopupMenu();
  hMenu = PopupMenu;
  uIDNewItem = (UINT_PTR)CreatePopupMenu();
  v4 = sub_414BE2(41);
  AppendMenuW(PopupMenu, 0x403u, 0, v4);
  if ( a2 )
  {
    v5 = sub_414BE2(42);
    AppendMenuW(PopupMenu, 0x400u, a3 + 20000, v5);
  }
  AppendMenuW(PopupMenu, 0xC00u, 0, 0);
  v15 = 0;
  v6 = sub_414BE2(43);
  AppendMenuW(PopupMenu, 0x410u, uIDNewItem, v6);
  v16 = 5;
  v7 = a3 + 105;
  do
  {
    v8 = sub_414BE2(44);
    wsprintfW(NewItem, aDS, v16, v8);
    AppendMenuW((HMENU)uIDNewItem, 0x400u, v7, NewItem);
    if ( a1 == v16 )
      CheckMenuItem(hMenu, v7, 8u);
    v17 = v16 + 4;
    v9 = v7 + 4;
    if ( v17 > 40 )
    {
      v17 += 5;
      v9 += 5;
    }
    v16 = v17 + 1;
    v7 = v9 + 1;
  }
  while ( v16 < 200 );
  v10 = a3;
  v19 = 0;
  for ( i = 1; i < 20; ++i )
  {
    if ( i > 4 )
    {
      ++v15;
      v19 += 60;
      ++v10;
    }
    if ( i > 12 )
    {
      v15 += 2;
      v19 += 120;
      v10 += 2;
    }
    ++v15;
    v19 += 60;
    ++v10;
    wsprintfW(NewItem, aDH, v15);
    AppendMenuW(hMenu, 0x400u, v10, NewItem);
    if ( a1 == v19 )
      CheckMenuItem(hMenu, v10, 8u);
  }
  return hMenu;
}

//----- (00412D40) --------------------------------------------------------
int __thiscall sub_412D40(HWND *this, HWND hWnd)
{
  int left; // ebx
  int result; // eax
  HWND DlgItem; // eax
  struct tagRECT Rect; // [esp+Ch] [ebp-1Ch] BYREF
  int y; // [esp+20h] [ebp-8h]
  HMENU hMenu; // [esp+24h] [ebp-4h]

  hMenu = sub_412BD2(0, 0, 0);
  GetWindowRect(this[83], &Rect);
  left = Rect.left;
  y = Rect.bottom;
  CWnd::ClientToScreen((CWnd *)(this + 75), &Rect);
  result = TrackPopupMenu(hMenu, 0x100u, left, y, 0, hWnd, 0);
  if ( result )
  {
    if ( result <= 100 )
      sub_412B35(hWnd, result, 0, 0);
    else
      sub_412B35(hWnd, 0, result - 100, 0);
    if ( !dword_4339D0[0] )
    {
      dword_4339D0[0] = 1;
      DlgItem = GetDlgItem(hWnd, 1013);
      SendMessageW(DlgItem, 0xF1u, 1u, 0);
      dword_4330D0 = 1;
    }
    KillTimer(this[8], 0x3E8u);
    return SetTimer(this[8], 0x3E8u, 0x32u, 0);
  }
  return result;
}
// 4330D0: using guessed type int dword_4330D0;
// 4339D0: using guessed type int dword_4339D0[33];

//----- (00412E2E) --------------------------------------------------------
int __thiscall sub_412E2E(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[92] = a2;
  return result;
}

//----- (00412E3B) --------------------------------------------------------
LRESULT __thiscall sub_412E3B(HWND *this)
{
  LRESULT result; // eax

  if ( this[8] )
  {
    if ( dword_433728 > 4 )
    {
      dword_4339D0 = 1;
      SendMessageW(this[67], 0xF1u, 1u, 0);
      result = sub_412B35(this[8], 0, dword_433728, 0);
      dword_4330D0 = 1;
    }
  }
  return result;
}
// 4330D0: using guessed type int dword_4330D0;
// 4339D0: using guessed type int dword_4339D0;

//----- (00412E89) --------------------------------------------------------
CWnd *sub_412E89()
{
  CWnd *v0; // esi
  CWnd *result; // eax

  v0 = (CWnd *)operator new(0x40u);
  result = 0;
  if ( v0 )
  {
    CWnd::CWnd(v0);
    *(_DWORD *)v0 = &off_41DFD0;
    return v0;
  }
  return result;
}
// 41DFD0: using guessed type int (*off_41DFD0)();

//----- (00412EC7) --------------------------------------------------------
int sub_412EC7()
{
  return CWnd::classCWnd;
}

//----- (00412ECD) --------------------------------------------------------
char **sub_412ECD()
{
  return &off_41ED48;
}
// 41ED48: using guessed type char *off_41ED48;

//----- (00412ED3) --------------------------------------------------------
void __thiscall sub_412ED3(CWnd *this, int a2, int a3, int a4, int a5, int a6)
{
  CWnd::InvokeHelper(this, 104, 1u, 0, 0, aLlll, a2, a3, a4, a5, a6);
}

//----- (00412EFF) --------------------------------------------------------
CWnd *__thiscall sub_412EFF(CWnd *this)
{
  CWnd *v2; // [esp+0h] [ebp-4h] BYREF

  v2 = this;
  CWnd::InvokeHelper(this, 203, 2u, 9u, &v2, 0);
  return v2;
}

//----- (00412F20) --------------------------------------------------------
void __thiscall sub_412F20(CWnd *this, int a2, int a3, int a4, int a5, int a6)
{
  CWnd::InvokeHelper(this, 500, 1u, 0, 0, aLllll, a2, a3, a4, a5, a6);
}

//----- (00412F4F) --------------------------------------------------------
int sub_412F4F()
{
  return CDialog::messageMap;
}

//----- (00412FF8) --------------------------------------------------------
int __thiscall sub_412FF8(_DWORD *this)
{
  return this[127];
}

//----- (00412FFF) --------------------------------------------------------
void __fastcall sub_412FFF(int a1)
{
  CHAR *v2; // eax
  CHAR *v3; // eax
  int v4; // eax
  char v5; // [esp-28h] [ebp-54h] BYREF
  int v6; // [esp-24h] [ebp-50h]
  int v7; // [esp-20h] [ebp-4Ch]
  int v8; // [esp-1Ch] [ebp-48h]
  char v9; // [esp-18h] [ebp-44h] BYREF
  int v10; // [esp-14h] [ebp-40h]
  int v11; // [esp-10h] [ebp-3Ch]
  int v12; // [esp-Ch] [ebp-38h]
  int v13; // [esp-8h] [ebp-34h]
  LPCWSTR v14[6]; // [esp-4h] [ebp-30h] BYREF
  LPCWSTR *v15; // [esp+14h] [ebp-18h] BYREF
  char v16[6]; // [esp+18h] [ebp-14h] BYREF
  char v17; // [esp+1Eh] [ebp-Eh] BYREF
  char v18; // [esp+1Fh] [ebp-Dh] BYREF
  int v19; // [esp+28h] [ebp-4h]

  if ( *(_DWORD *)(a1 + 100) )
  {
    v14[0] = (LPCWSTR)a1;
    v15 = v14;
    CString::CString((CString *)v14, aServerAlreadyL);
    sub_414379(v14[0]);
  }
  else
  {
    CWnd::UpdateData((CWnd *)a1, 1);
    dword_432D14 = htonl(0);
    dword_432D14 = inet_addr(cp);
    CString::CString((CString *)&v15, (const struct CString *)(a1 + 488));
    v19 = 0;
    CString::CString((CString *)v16, (const struct CString *)(a1 + 492));
    v14[0] = (LPCWSTR)(1000 * *(_DWORD *)(a1 + 500));
    v13 = 0x1FFF;
    *(_DWORD *)(a1 + 496) = 0x1FFF;
    v14[5] = (LPCWSTR)&v9;
    LOBYTE(v19) = 1;
    v2 = sub_41473E((CString *)v16);
    std::string::string(&v9, v2, &v18);
    v14[4] = (LPCWSTR)&v5;
    LOBYTE(v19) = 2;
    v3 = sub_41473E((CString *)&v15);
    std::string::string(&v5, v3, &v17);
    LOBYTE(v19) = 1;
    v4 = sub_40CF5F(a1 + 512, v5, v6, v7, v8, v9, v10, v11, v12, v13, (int)v14[0]);
    *(_DWORD *)(a1 + 100) = v4;
    if ( v4 )
      *(_DWORD *)(a1 + 96) = SetTimer(*(HWND *)(a1 + 32), 1u, 0x1F4u, 0);
    CString::operator=(a1 + 504, aWorking);
    CWnd::UpdateData((CWnd *)a1, 0);
    htonl(0);
    LOBYTE(v19) = 0;
    CString::~CString((CString *)v16);
    v19 = -1;
    CString::~CString((CString *)&v15);
  }
}
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41D484: using guessed type int __thiscall std::string::string(_DWORD, _DWORD, _DWORD);
// 432D14: using guessed type int dword_432D14;

//----- (00413147) --------------------------------------------------------
int __thiscall sub_413147(WCHAR *lpText)
{
  LPCWSTR v3[3]; // [esp-4h] [ebp-Ch] BYREF

  if ( *((_DWORD *)lpText + 25) )
  {
    sub_40C097((int)(lpText + 256));
    KillTimer(*((HWND *)lpText + 8), *((_DWORD *)lpText + 24));
    *((_DWORD *)lpText + 25) = 0;
    CString::operator=(lpText + 252, aStopped);
    return CWnd::UpdateData((CWnd *)lpText, 0);
  }
  else
  {
    v3[0] = lpText;
    v3[2] = (LPCWSTR)v3;
    CString::CString((CString *)v3, aServerNotLaunc);
    return sub_414379(v3[0]);
  }
}
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);

//----- (004131B9) --------------------------------------------------------
void __thiscall sub_4131B9(int this, int a2)
{
  const unsigned __int16 *v3; // eax
  const unsigned __int16 *v4; // eax
  const unsigned __int16 *v5; // eax
  const unsigned __int16 *v6; // eax
  const unsigned __int16 *v7; // eax
  int v8[2]; // [esp+14h] [ebp-3Ch] BYREF
  double v9; // [esp+1Ch] [ebp-34h]
  double v10; // [esp+24h] [ebp-2Ch]
  int v11; // [esp+34h] [ebp-1Ch]
  char v12[4]; // [esp+3Ch] [ebp-14h] BYREF
  unsigned __int16 *v13; // [esp+40h] [ebp-10h] BYREF
  int v14; // [esp+4Ch] [ebp-4h]

  CString::CString((CString *)&v13);
  v14 = 0;
  sub_40BD95(this + 512, (int)v8);
  v3 = *(const unsigned __int16 **)CString::CString((CString *)v12, aD_2);
  LOBYTE(v14) = 1;
  CString::Format((CString *)&v13, v3, v8[0]);
  LOBYTE(v14) = 0;
  CString::~CString((CString *)v12);
  CWnd::SetWindowTextW((CWnd *)(this + 424), v13);
  v4 = *(const unsigned __int16 **)CString::CString((CString *)v12, a1f);
  LOBYTE(v14) = 2;
  CString::Format((CString *)&v13, v4, v10);
  LOBYTE(v14) = 0;
  CString::~CString((CString *)v12);
  CWnd::SetWindowTextW((CWnd *)(this + 232), v13);
  v5 = *(const unsigned __int16 **)CString::CString((CString *)v12, a1f);
  LOBYTE(v14) = 3;
  CString::Format((CString *)&v13, v5, v9);
  LOBYTE(v14) = 0;
  CString::~CString((CString *)v12);
  CWnd::SetWindowTextW((CWnd *)(this + 296), v13);
  v6 = *(const unsigned __int16 **)CString::CString((CString *)v12, aD_2);
  LOBYTE(v14) = 4;
  CString::Format((CString *)&v13, v6, v8[1]);
  LOBYTE(v14) = 0;
  CString::~CString((CString *)v12);
  CWnd::SetWindowTextW((CWnd *)(this + 360), v13);
  v7 = *(const unsigned __int16 **)CString::CString((CString *)v12, aD_2);
  LOBYTE(v14) = 5;
  CString::Format((CString *)&v13, v7, v11);
  LOBYTE(v14) = 0;
  CString::~CString((CString *)v12);
  CWnd::SetWindowTextW((CWnd *)(this + 168), v13);
  CWnd::Default((CWnd *)this);
  v14 = -1;
  CString::~CString((CString *)&v13);
}
// 4131B9: using guessed type char var_14[4];

//----- (00413408) --------------------------------------------------------
void __thiscall sub_413408(int this)
{
  CWinApp *v2; // ebx
  unsigned __int16 *v3; // eax
  const unsigned __int16 *v4; // eax
  unsigned __int16 *v5; // eax
  const unsigned __int16 *v6; // eax
  unsigned __int16 *v7; // eax
  const unsigned __int16 **v8; // eax
  const unsigned __int16 *v9; // eax
  unsigned __int16 *v10; // eax
  const unsigned __int16 **v11; // eax
  const unsigned __int16 *v12; // eax
  int v13; // [esp-4h] [ebp-34h]
  int v14; // [esp-4h] [ebp-34h]
  char v15[4]; // [esp+Ch] [ebp-24h] BYREF
  char v16[4]; // [esp+10h] [ebp-20h] BYREF
  unsigned __int16 *v17; // [esp+14h] [ebp-1Ch] BYREF
  unsigned __int16 *v18; // [esp+18h] [ebp-18h] BYREF
  unsigned __int16 *v19; // [esp+1Ch] [ebp-14h] BYREF
  unsigned __int16 *v20; // [esp+20h] [ebp-10h] BYREF
  int v21; // [esp+2Ch] [ebp-4h]

  v2 = (CWinApp *)*((_DWORD *)AfxGetModuleState() + 1);
  CWnd::UpdateData((CWnd *)this, 1);
  v20 = *(unsigned __int16 **)(this + 488);
  v3 = *(unsigned __int16 **)CString::CString((CString *)&v17, aServerRoot);
  v21 = 0;
  v19 = v3;
  v4 = *(const unsigned __int16 **)CString::CString((CString *)&v18, aSettings);
  LOBYTE(v21) = 1;
  CWinApp::WriteProfileStringW(v2, v4, v19, v20);
  LOBYTE(v21) = 0;
  CString::~CString((CString *)&v18);
  v21 = -1;
  CString::~CString((CString *)&v17);
  v17 = *(unsigned __int16 **)(this + 492);
  v5 = *(unsigned __int16 **)CString::CString((CString *)&v20, aDefindex);
  v21 = 2;
  v18 = v5;
  v6 = *(const unsigned __int16 **)CString::CString((CString *)&v19, aSettings);
  LOBYTE(v21) = 3;
  CWinApp::WriteProfileStringW(v2, v6, v18, v17);
  LOBYTE(v21) = 2;
  CString::~CString((CString *)&v19);
  v21 = -1;
  CString::~CString((CString *)&v20);
  v7 = *(unsigned __int16 **)CString::CString((CString *)&v19, aPort_0);
  v21 = 4;
  v17 = v7;
  v8 = (const unsigned __int16 **)CString::CString((CString *)&v18, aSettings);
  v13 = *(_DWORD *)(this + 496);
  v9 = *v8;
  LOBYTE(v21) = 5;
  CWinApp::WriteProfileInt(v2, v9, v17, v13);
  LOBYTE(v21) = 4;
  CString::~CString((CString *)&v18);
  v21 = -1;
  CString::~CString((CString *)&v19);
  v10 = *(unsigned __int16 **)CString::CString((CString *)v15, aPto);
  v21 = 6;
  v17 = v10;
  v11 = (const unsigned __int16 **)CString::CString((CString *)v16, aSettings);
  v14 = *(_DWORD *)(this + 500);
  v12 = *v11;
  LOBYTE(v21) = 7;
  CWinApp::WriteProfileInt(v2, v12, v17, v14);
  LOBYTE(v21) = 6;
  CString::~CString((CString *)v16);
  v21 = -1;
  CString::~CString((CString *)v15);
}
// 413408: using guessed type char var_24[4];
// 413408: using guessed type char var_20[4];

//----- (0041358C) --------------------------------------------------------
void sub_41358C()
{
  const WCHAR *v0; // ecx
  LPCWSTR v1[2]; // [esp-4h] [ebp-18h] BYREF
  LPCWSTR lpFile; // [esp+4h] [ebp-10h] BYREF
  int v3; // [esp+10h] [ebp-4h]

  CString::CString((CString *)&lpFile, aHttpLocalhost8);
  v3 = 0;
  v1[0] = v0;
  v1[1] = (LPCWSTR)v1;
  CString::CString((CString *)v1, (const struct CString *)&lpFile);
  sub_414379(v1[0]);
  ShellExecuteW(0, Operation, lpFile, 0, 0, 5);
  v3 = -1;
  CString::~CString((CString *)&lpFile);
}
// 4135A9: variable 'v0' is possibly undefined

//----- (004135F5) --------------------------------------------------------
_DWORD *__thiscall sub_4135F5(_DWORD *this, char a2)
{
  sub_413611(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00413611) --------------------------------------------------------
void __thiscall sub_413611(_DWORD *this)
{
  *this = &off_41EE70;
}
// 41EE70: using guessed type int (__thiscall *off_41EE70)(void *, char);

//----- (00413618) --------------------------------------------------------
BOOL __stdcall sub_413618(struct _SYSTEM_POWER_STATUS *a1)
{
  HMODULE LibraryW; // ecx
  BOOL (__stdcall *GetSystemPowerStatus)(LPSYSTEM_POWER_STATUS); // eax

  LibraryW = hModule;
  if ( (hModule || (LibraryW = LoadLibraryW(aKernel32Dll_0), (hModule = LibraryW) != 0))
    && ((GetSystemPowerStatus = (BOOL (__stdcall *)(LPSYSTEM_POWER_STATUS))dword_433A5C) != 0
     || (GetSystemPowerStatus = (BOOL (__stdcall *)(LPSYSTEM_POWER_STATUS))GetProcAddress(LibraryW, aGetsystempower),
         (dword_433A5C = (int)GetSystemPowerStatus) != 0)) )
  {
    return GetSystemPowerStatus(a1);
  }
  else
  {
    return 0;
  }
}
// 433A5C: using guessed type int dword_433A5C;

//----- (00413664) --------------------------------------------------------
HMODULE __cdecl sub_413664(HWND a1)
{
  HMODULE result; // eax
  HMODULE v2; // esi
  HRESULT (__stdcall *EnableThemeDialogTexture)(HWND, DWORD); // eax

  result = LoadLibraryW(aUxthemeDll);
  v2 = result;
  if ( result )
  {
    EnableThemeDialogTexture = (HRESULT (__stdcall *)(HWND, DWORD))GetProcAddress(result, aEnablethemedia);
    if ( EnableThemeDialogTexture )
      EnableThemeDialogTexture(a1, 6);
    return (HMODULE)FreeLibrary(v2);
  }
  return result;
}

//----- (00413697) --------------------------------------------------------
CWnd *__thiscall sub_413697(CWnd *this)
{
  CWnd::CWnd(this);
  *(_DWORD *)this = &off_41EE98;
  return this;
}
// 41EE98: using guessed type struct CRuntimeClass *(__thiscall *off_41EE98)(CTabCtrl *__hidden this);

//----- (004136A9) --------------------------------------------------------
CTabCtrl *__thiscall sub_4136A9(CTabCtrl *this, char a2)
{
  sub_4136C5(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004136C5) --------------------------------------------------------
void __thiscall sub_4136C5(CTabCtrl *this)
{
  *(_DWORD *)this = &off_41EE98;
  CTabCtrl::~CTabCtrl(this);
}
// 41EE98: using guessed type struct CRuntimeClass *(__thiscall *off_41EE98)(CTabCtrl *__hidden this);

//----- (004136D0) --------------------------------------------------------
int sub_4136D0()
{
  return CTabCtrl::messageMap;
}

//----- (004136D6) --------------------------------------------------------
int (**sub_4136D6())()
{
  return &off_41EE78;
}
// 41EE78: using guessed type int (*off_41EE78)();

//----- (004136DC) --------------------------------------------------------
void __thiscall sub_4136DC(HWND *this, HWND a2)
{
  struct tagRECT Rect; // [esp+Ch] [ebp-38h] BYREF
  struct tagRECT lParam; // [esp+1Ch] [ebp-28h] BYREF
  HWND v5[3]; // [esp+2Ch] [ebp-18h] BYREF
  int v6; // [esp+40h] [ebp-4h]

  GetClientRect(this[8], &Rect);
  SendMessageW(this[8], 0x132Cu, 0, 0);
  lParam = Rect;
  SendMessageW(this[8], 0x1328u, 0, (LPARAM)&lParam);
  ++lParam.top;
  v5[0] = (HWND)&off_41EF5C;
  v5[2] = 0;
  v6 = 0;
  v5[1] = a2;
  sub_4191C4(v5, 0, lParam.left, lParam.top, lParam.right, lParam.bottom, 0);
  sub_413664(a2);
  v6 = -1;
  sub_4191BD(v5);
}
// 41EF5C: using guessed type void *off_41EF5C;

//----- (0041377D) --------------------------------------------------------
int __stdcall sub_41377D(int a1, int a2, int a3, int a4)
{
  return 0;
}

//----- (0041379E) --------------------------------------------------------
LRESULT __thiscall sub_41379E(HWND *this, WPARAM wParam, int a3)
{
  LRESULT v3; // esi
  LPARAM lParam[7]; // [esp+8h] [ebp-1Ch] BYREF

  memset(lParam, 0, sizeof(lParam));
  lParam[0] = 1;
  lParam[3] = a3;
  v3 = SendMessageW(this[8], 0x133Du, wParam, (LPARAM)lParam);
  CString::~CString((CString *)&a3);
  return v3;
}

//----- (004137EE) --------------------------------------------------------
LRESULT __thiscall sub_4137EE(HWND *this, WPARAM wParam, int a3)
{
  LPARAM lParam[7]; // [esp+4h] [ebp-1Ch] BYREF

  memset(&lParam[1], 0, 0x18u);
  lParam[0] = 2;
  lParam[5] = a3;
  return SendMessageW(this[8], 0x133Du, wParam, (LPARAM)lParam);
}

//----- (00413828) --------------------------------------------------------
LRESULT __thiscall sub_413828(HWND *this, WPARAM wParam, LPARAM lParam)
{
  HWND Parent; // eax
  struct CWnd *v4; // eax

  Parent = GetParent(this[8]);
  v4 = CWnd::FromHandle(Parent);
  return SendMessageW(*((HWND *)v4 + 8), 0x111u, wParam, lParam);
}

//----- (00413850) --------------------------------------------------------
int sub_413850()
{
  sub_41385A();
  return atexit(sub_413876);
}

//----- (0041385A) --------------------------------------------------------
CString *sub_41385A()
{
  return CString::CString((CString *)&lpValueName, byte_431514);
}

//----- (00413876) --------------------------------------------------------
void __cdecl sub_413876()
{
  CString::~CString((CString *)&lpValueName);
}

//----- (00413880) --------------------------------------------------------
int sub_413880()
{
  sub_41388A();
  return atexit(sub_4138A0);
}

//----- (0041388A) --------------------------------------------------------
CString *sub_41388A()
{
  return CString::CString((CString *)&lpFile);
}

//----- (004138A0) --------------------------------------------------------
void __cdecl sub_4138A0()
{
  CString::~CString((CString *)&lpFile);
}

//----- (004138AA) --------------------------------------------------------
int sub_4138AA()
{
  sub_4138B4();
  return atexit(sub_4138D0);
}

//----- (004138B4) --------------------------------------------------------
CString *sub_4138B4()
{
  return CString::CString((CString *)&unk_433CB0, (const struct CString *)&lpValueName);
}

//----- (004138D0) --------------------------------------------------------
void __cdecl sub_4138D0()
{
  CString::~CString((CString *)&unk_433CB0);
}

//----- (004138DA) --------------------------------------------------------
int sub_4138DA()
{
  sub_4138E4();
  return atexit(sub_4138FA);
}

//----- (004138E4) --------------------------------------------------------
CString *sub_4138E4()
{
  return CString::CString((CString *)&unk_433CAC);
}

//----- (004138FA) --------------------------------------------------------
void __cdecl sub_4138FA()
{
  CString::~CString((CString *)&unk_433CAC);
}

//----- (00413904) --------------------------------------------------------
CString *__cdecl sub_413904(CString *a1)
{
  WCHAR *Buffer; // eax
  int v3; // [esp+4h] [ebp-10h] BYREF
  int v4; // [esp+10h] [ebp-4h]

  v3 = 0;
  if ( (byte_433CA8 & 1) == 0 )
  {
    byte_433CA8 |= 1u;
    CString::CString((CString *)&dword_433CA4);
    atexit(loc_4139A4);
  }
  if ( !*(_DWORD *)(dword_433CA4 - 8) )
  {
    CString::CString((CString *)&v3);
    v4 = 0;
    Buffer = CString::GetBuffer((CString *)&v3, 260);
    GetModuleFileNameW(0, Buffer, 0x104u);
    CString::ReleaseBuffer((CString *)&v3, -1);
    CString::operator=(&dword_433CA4, &v3);
    v4 = -1;
    CString::~CString((CString *)&v3);
  }
  CString::CString(a1, (const struct CString *)&dword_433CA4);
  return a1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 433CA8: using guessed type char byte_433CA8;

//----- (004139AE) --------------------------------------------------------
CString *__cdecl sub_4139AE(CString *a1)
{
  WCHAR *Buffer; // eax
  int v2; // eax
  int v3; // eax
  int v5; // [esp+8h] [ebp-14h] BYREF
  char v6[4]; // [esp+Ch] [ebp-10h] BYREF
  int v7; // [esp+18h] [ebp-4h]

  v5 = 0;
  if ( (byte_433CA0 & 1) == 0 )
  {
    byte_433CA0 |= 1u;
    CString::CString((CString *)&dword_433C9C);
    atexit(loc_413A80);
  }
  if ( !*(_DWORD *)(dword_433C9C - 8) )
  {
    CString::CString((CString *)v6);
    v7 = 0;
    Buffer = CString::GetBuffer((CString *)v6, 260);
    GetModuleFileNameW(0, Buffer, 0x104u);
    CString::ReleaseBuffer((CString *)v6, -1);
    v2 = CString::ReverseFind((CString *)v6, 0x5Cu);
    if ( v2 != -1 )
    {
      v3 = CString::Left(v6, &v5, v2);
      LOBYTE(v7) = 1;
      CString::operator=(&dword_433C9C, v3);
      LOBYTE(v7) = 0;
      CString::~CString((CString *)&v5);
      CString::operator=(v6, &dword_433C9C);
    }
    v7 = -1;
    CString::~CString((CString *)v6);
  }
  CString::CString(a1, (const struct CString *)&dword_433C9C);
  return a1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A104: using guessed type int __thiscall CString::Left(_DWORD, _DWORD, _DWORD);
// 433CA0: using guessed type char byte_433CA0;
// 4139AE: using guessed type char var_10[4];

//----- (00413A8A) --------------------------------------------------------
int __cdecl sub_413A8A(LPCWSTR lpFileName)
{
  DWORD FileAttributesW; // eax
  int v2; // esi
  int v4; // [esp-4h] [ebp-14h]

  FileAttributesW = GetFileAttributesW(lpFileName);
  if ( FileAttributesW == -1 )
  {
    if ( GetLastError() == 2 || GetLastError() == 3 )
      v2 = 0;
    else
      v2 = -1;
  }
  else
  {
    if ( (FileAttributesW & 0x10) != 0 )
      v4 = 2;
    else
      v4 = 1;
    v2 = v4;
  }
  CString::~CString((CString *)&lpFileName);
  return v2;
}

//----- (00413AE6) --------------------------------------------------------
CString *__cdecl sub_413AE6(CString *a1)
{
  const wchar_t *Buffer; // eax
  wchar_t *v2; // eax
  char v4[4]; // [esp+8h] [ebp-10h] BYREF
  int v5; // [esp+14h] [ebp-4h]

  sub_413904((CString *)v4);
  v5 = 1;
  Buffer = CString::GetBuffer((CString *)v4, 0);
  v2 = wcsrchr(Buffer, 0x5Cu);
  if ( v2 )
    CString::CString(a1, v2 + 1);
  else
    CString::CString(a1, byte_431514);
  LOBYTE(v5) = 0;
  CString::~CString((CString *)v4);
  return a1;
}
// 413AE6: using guessed type char var_10[4];

//----- (00413B5D) --------------------------------------------------------
int sub_413B5D()
{
  const unsigned __int16 *v0; // ecx
  int v1; // eax
  int v2; // ebx
  CString *v3; // eax
  const struct CString *v4; // eax
  int v5; // eax
  int v6; // eax
  int v7; // eax
  const unsigned __int16 *v8; // ecx
  const WCHAR *v9; // eax
  WCHAR *v10; // eax
  int v11; // eax
  WCHAR *v12; // eax
  int v13; // eax
  int v14; // eax
  int v15; // eax
  int v16; // eax
  const WCHAR *v17; // eax
  WCHAR *v18; // eax
  const unsigned __int16 *v20[4]; // [esp-4h] [ebp-85Ch] BYREF
  WCHAR Buffer[2]; // [esp+Ch] [ebp-84Ch] BYREF
  char v22[2044]; // [esp+10h] [ebp-848h] BYREF
  char v23[4]; // [esp+80Ch] [ebp-4Ch] BYREF
  char v24[4]; // [esp+810h] [ebp-48h] BYREF
  char v25[4]; // [esp+814h] [ebp-44h] BYREF
  char v26[4]; // [esp+818h] [ebp-40h] BYREF
  char v27[4]; // [esp+81Ch] [ebp-3Ch] BYREF
  char v28[4]; // [esp+820h] [ebp-38h] BYREF
  const unsigned __int16 **v29; // [esp+824h] [ebp-34h] BYREF
  char v30[4]; // [esp+828h] [ebp-30h] BYREF
  char v31[4]; // [esp+82Ch] [ebp-2Ch] BYREF
  char v32[4]; // [esp+830h] [ebp-28h] BYREF
  char v33[4]; // [esp+834h] [ebp-24h] BYREF
  unsigned __int16 *v34; // [esp+838h] [ebp-20h] BYREF
  char v35[4]; // [esp+83Ch] [ebp-1Ch] BYREF
  char v36[4]; // [esp+840h] [ebp-18h] BYREF
  wchar_t *String1; // [esp+844h] [ebp-14h] BYREF
  bool v38; // [esp+84Bh] [ebp-Dh]
  int v39; // [esp+854h] [ebp-4h]

  CString::CString((CString *)v30, (const struct CString *)&lpValueName);
  v39 = 0;
  if ( *((int *)lpValueName - 2) < 3 )
  {
    v20[0] = v0;
    v29 = v20;
    CString::CString((CString *)v20, aIni);
    sub_414379(v20[0]);
  }
  *(_DWORD *)Buffer = dword_43151C;
  memset(v22, 0, sizeof(v22));
  GetTempPathW(0x400u, Buffer);
  CString::CString((CString *)&v34, Buffer);
  LOBYTE(v39) = 1;
  sub_4139AE((CString *)v35);
  LOBYTE(v39) = 2;
  CString::CString((CString *)&String1, asc_4245C4);
  LOBYTE(v39) = 3;
  CString::operator+=(&v34, &String1);
  LOBYTE(v39) = 2;
  CString::~CString((CString *)&String1);
  CString::CString((CString *)&String1, asc_4245C4);
  LOBYTE(v39) = 4;
  CString::operator+=(v35, &String1);
  LOBYTE(v39) = 2;
  CString::~CString((CString *)&String1);
  CString::Replace((CString *)&v34, asc_42EEBC, asc_42EEC4);
  CString::Replace((CString *)v35, asc_42EEBC, asc_42EEC4);
  CString::MakeLower((CString *)&v34);
  CString::MakeLower((CString *)v35);
  CString::CString((CString *)v27, aIni_0);
  LOBYTE(v39) = 5;
  v1 = operator+(v25, asc_42EEC4, v30);
  LOBYTE(v39) = 6;
  v2 = operator+(v24, v1, v27);
  LOBYTE(v39) = 7;
  v3 = sub_4139AE((CString *)v23);
  LOBYTE(v39) = 8;
  v4 = (const struct CString *)CString::operator+=(v3, v2);
  CString::CString((CString *)v33, v4);
  LOBYTE(v39) = 13;
  CString::~CString((CString *)v23);
  LOBYTE(v39) = 12;
  CString::~CString((CString *)v24);
  LOBYTE(v39) = 11;
  CString::~CString((CString *)v25);
  LOBYTE(v39) = 10;
  CString::~CString((CString *)v27);
  CString::operator=(&lpFile, v33);
  sub_413AE6((CString *)v32);
  LOBYTE(v39) = 14;
  CString::MakeLower((CString *)v32);
  v20[0] = *(const unsigned __int16 **)CString::CString((CString *)v36, aP);
  LOBYTE(v39) = 15;
  v5 = CString::Find((CString *)v32, v20[0]);
  LOBYTE(v39) = 14;
  v38 = v5 > 0;
  CString::~CString((CString *)v36);
  if ( v38 )
    dword_433CBC = 1;
  v20[0] = *(const unsigned __int16 **)CString::CString((CString *)v36, aPortable);
  LOBYTE(v39) = 16;
  v6 = CString::Find((CString *)v32, v20[0]);
  LOBYTE(v39) = 14;
  v38 = v6 > 0;
  CString::~CString((CString *)v36);
  if ( v38 )
    dword_433CBC = 1;
  v20[0] = *(const unsigned __int16 **)CString::CString((CString *)v36, aPort);
  LOBYTE(v39) = 17;
  v7 = CString::Find((CString *)v32, v20[0]);
  LOBYTE(v39) = 14;
  v38 = v7 > 0;
  CString::~CString((CString *)v36);
  if ( v38 )
    dword_433CBC = 1;
  if ( dword_433CBC )
    sub_414211(aTestini, aM);
  if ( CString::Find((CString *)v35, v34) )
  {
    v20[0] = v8;
    v29 = v20;
    CString::CString((CString *)v20, (const struct CString *)v33);
    if ( sub_413A8A(v20[0]) == 1 )
    {
      CString::CString((CString *)&String1, L"eeee");
      LOBYTE(v39) = 18;
      v9 = CString::GetBuffer((CString *)&String1, 0);
      sub_414211(aTestini, v9);
      CString::operator=(&String1, byte_431514);
      v10 = CString::GetBuffer((CString *)&String1, 111);
      sub_4141F0(aTestini, v10);
      CString::ReleaseBuffer((CString *)&String1, -1);
      v11 = wcscmp(String1, L"eeee");
      LOBYTE(v39) = 14;
      if ( !v11 )
      {
        CString::~CString((CString *)&String1);
        goto LABEL_17;
      }
      CString::~CString((CString *)&String1);
    }
  }
  CString::CString((CString *)&String1);
  v20[0] = 0;
  LOBYTE(v39) = 19;
  v12 = CString::GetBuffer((CString *)&String1, 1024);
  SHGetSpecialFolderPathW(0, v12, 26, (BOOL)v20[0]);
  CString::ReleaseBuffer((CString *)&String1, -1);
  CString::CString((CString *)v36, asc_4245C4);
  LOBYTE(v39) = 20;
  v13 = operator+(v28, v36, v30);
  LOBYTE(v39) = 21;
  CString::operator+=(&String1, v13);
  LOBYTE(v39) = 20;
  CString::~CString((CString *)v28);
  LOBYTE(v39) = 19;
  CString::~CString((CString *)v36);
  CreateDirectoryW(String1, 0);
  CString::CString((CString *)v36, aIni_0);
  LOBYTE(v39) = 22;
  v14 = operator+(&v29, &String1, asc_42EEC4);
  LOBYTE(v39) = 23;
  v15 = operator+(v26, v14, v30);
  LOBYTE(v39) = 24;
  v16 = operator+(v28, v15, v36);
  LOBYTE(v39) = 25;
  CString::operator=(v33, v16);
  LOBYTE(v39) = 24;
  CString::~CString((CString *)v28);
  LOBYTE(v39) = 23;
  CString::~CString((CString *)v26);
  LOBYTE(v39) = 22;
  CString::~CString((CString *)&v29);
  LOBYTE(v39) = 19;
  CString::~CString((CString *)v36);
  LOBYTE(v39) = 14;
  CString::~CString((CString *)&String1);
  CString::operator=(&lpFile, v33);
  if ( lstrlenW(&String) > 3 )
    CString::operator=(&lpFile, &String);
LABEL_17:
  CString::CString((CString *)v31, L"eeee");
  LOBYTE(v39) = 26;
  v17 = CString::GetBuffer((CString *)v31, 0);
  sub_414211(aTestini, v17);
  CString::operator=(v31, byte_431514);
  v18 = CString::GetBuffer((CString *)v31, 111);
  sub_4141F0(aTestini, v18);
  CString::ReleaseBuffer((CString *)v31, -1);
  LOBYTE(v39) = 14;
  CString::~CString((CString *)v31);
  LOBYTE(v39) = 10;
  CString::~CString((CString *)v32);
  LOBYTE(v39) = 2;
  CString::~CString((CString *)v33);
  LOBYTE(v39) = 1;
  CString::~CString((CString *)v35);
  LOBYTE(v39) = 0;
  CString::~CString((CString *)&v34);
  v39 = -1;
  CString::~CString((CString *)v30);
  return 1;
}
// 413B8E: variable 'v0' is possibly undefined
// 413DFE: variable 'v8' is possibly undefined
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A074: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A09E: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0CE: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 43151C: using guessed type int dword_43151C;
// 433CBC: using guessed type int dword_433CBC;
// 413B5D: using guessed type char var_30[4];
// 413B5D: using guessed type char var_1C[4];
// 413B5D: using guessed type char var_3C[4];
// 413B5D: using guessed type char var_44[4];
// 413B5D: using guessed type char var_48[4];
// 413B5D: using guessed type char var_4C[4];
// 413B5D: using guessed type char var_24[4];
// 413B5D: using guessed type char var_28[4];
// 413B5D: using guessed type char var_18[4];
// 413B5D: using guessed type char var_38[4];
// 413B5D: using guessed type char var_40[4];
// 413B5D: using guessed type char var_2C[4];

//----- (00414077) --------------------------------------------------------
BOOL __cdecl sub_414077(LPCWSTR lpAppName, LPCWSTR lpKeyName, LPCWSTR lpString, LPCWSTR lpFileName)
{
  const WCHAR *v4; // eax

  v4 = lpFileName;
  if ( !lpFileName )
    v4 = lpFile;
  return WritePrivateProfileStringW(lpAppName, lpKeyName, lpString, v4);
}

//----- (00414098) --------------------------------------------------------
BOOL __cdecl sub_414098(LPCWSTR lpAppName, LPCWSTR lpKeyName, int a3, LPCWSTR lpFileName)
{
  WCHAR String[2]; // [esp+4h] [ebp-800h] BYREF
  char v6[2044]; // [esp+8h] [ebp-7FCh] BYREF

  *(_DWORD *)String = dword_43151C;
  memset(v6, 0, sizeof(v6));
  wsprintfW(String, aD, a3);
  return sub_414077(lpAppName, lpKeyName, String, lpFileName);
}
// 43151C: using guessed type int dword_43151C;

//----- (004140EC) --------------------------------------------------------
DWORD __cdecl sub_4140EC(
        LPCWSTR lpAppName,
        LPCWSTR lpKeyName,
        int a3,
        WCHAR *lpDefault,
        LPCWSTR lpFileName,
        DWORD nSize)
{
  const WCHAR *v6; // eax

  v6 = lpFileName;
  if ( !lpFileName )
    v6 = lpFile;
  return GetPrivateProfileStringW(lpAppName, lpKeyName, lpDefault, lpDefault, nSize, v6);
}

//----- (00414113) --------------------------------------------------------
int __cdecl sub_414113(LPCWSTR lpAppName, LPCWSTR lpKeyName, int a3, int a4, int a5)
{
  int v5; // esi
  wchar_t String[2]; // [esp+8h] [ebp-1000h] BYREF
  char v8[2044]; // [esp+Ch] [ebp-FFCh] BYREF
  WCHAR v9[2]; // [esp+808h] [ebp-800h] BYREF
  char v10[2044]; // [esp+80Ch] [ebp-7FCh] BYREF

  *(_DWORD *)String = dword_43151C;
  memset(v8, 0, sizeof(v8));
  v5 = a3;
  *(_DWORD *)v9 = dword_43151C;
  memset(v10, 0, sizeof(v10));
  wsprintfW(v9, aD, a3);
  if ( sub_4140EC(lpAppName, lpKeyName, (int)v9, String, 0, 0x400u) )
    v5 = wtoi(String);
  if ( a5 != -1 && a4 != -1 )
  {
    if ( v5 > a5 )
      v5 = a5;
    if ( v5 < a4 )
      return a4;
  }
  return v5;
}
// 43151C: using guessed type int dword_43151C;

//----- (004141BE) --------------------------------------------------------
BOOL __cdecl sub_4141BE(LPCWSTR lpKeyName, int a2)
{
  return sub_414098(AppName, lpKeyName, a2, 0);
}

//----- (004141D6) --------------------------------------------------------
int __cdecl sub_4141D6(LPCWSTR lpKeyName, int a2)
{
  return sub_414113(AppName, lpKeyName, a2, -1, -1);
}

//----- (004141F0) --------------------------------------------------------
DWORD __cdecl sub_4141F0(LPCWSTR lpKeyName, WCHAR *lpDefault)
{
  return sub_4140EC(AppName, lpKeyName, (int)lpDefault, lpDefault, 0, 0x400u);
}

//----- (00414211) --------------------------------------------------------
BOOL __cdecl sub_414211(LPCWSTR lpKeyName, LPCWSTR lpString)
{
  return sub_414077(AppName, lpKeyName, lpString, 0);
}

//----- (00414229) --------------------------------------------------------
void sub_414229()
{
  HMODULE LibraryW; // eax
  FARPROC ProcAddress; // eax
  DWORD dwMajorVersion; // eax
  CHAR ProcName[16]; // [esp+Ch] [ebp-24h] BYREF
  char v4[4]; // [esp+1Ch] [ebp-14h] BYREF
  LPCWSTR lpLibFileName; // [esp+20h] [ebp-10h] BYREF
  int v6; // [esp+2Ch] [ebp-4h]

  memset(&VersionInformation, 0, sizeof(VersionInformation));
  VersionInformation.dwOSVersionInfoSize = 276;
  GetVersionExW(&VersionInformation);
  CString::CString((CString *)v4);
  v6 = 0;
  if ( VersionInformation.dwMajorVersion >= 5 )
  {
    memset(&stru_433B80, 0, 0x11Cu);
    stru_433B80.dwOSVersionInfoSize = 284;
    CString::CString((CString *)&lpLibFileName);
    LOBYTE(v6) = 1;
    strcpy(&ProcName[4], "ntdll.dll");
    CString::operator=(&lpLibFileName, &ProcName[4]);
    LibraryW = LoadLibraryW(lpLibFileName);
    if ( !LibraryW
      || (strcpy(ProcName, "RtlGetVersion"), (ProcAddress = GetProcAddress(LibraryW, ProcName)) == 0)
      || (((void (__stdcall *)(struct _OSVERSIONINFOW *))ProcAddress)(&stru_433B80),
          (dwMajorVersion = stru_433B80.dwMajorVersion) == 0) )
    {
      GetVersionExW(&stru_433B80);
      dwMajorVersion = stru_433B80.dwMajorVersion;
    }
    VersionInformation.dwMajorVersion = dwMajorVersion;
    VersionInformation.dwMinorVersion = stru_433B80.dwMinorVersion;
    VersionInformation.dwBuildNumber = stru_433B80.dwBuildNumber;
    LOBYTE(v6) = 0;
    CString::~CString((CString *)&lpLibFileName);
  }
  v6 = -1;
  CString::~CString((CString *)v4);
}
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 414229: using guessed type char var_14[4];

//----- (00414379) --------------------------------------------------------
int __cdecl sub_414379(LPCWSTR lpText)
{
  HWND ActiveWindow; // eax
  int v2; // esi
  const WCHAR *v4; // [esp-Ch] [ebp-20h]
  const WCHAR *v5; // [esp-8h] [ebp-1Ch]
  char v6[4]; // [esp+4h] [ebp-10h] BYREF
  int v7; // [esp+10h] [ebp-4h]

  v7 = 0;
  v5 = *(const WCHAR **)CString::CString((CString *)v6, aString);
  v4 = lpText;
  ActiveWindow = GetActiveWindow();
  v2 = MessageBoxW(ActiveWindow, v4, v5, 0);
  CString::~CString((CString *)v6);
  v7 = -1;
  CString::~CString((CString *)&lpText);
  return v2;
}
// 414379: using guessed type char var_10[4];

//----- (004143D0) --------------------------------------------------------
CString *sub_4143D0(CString *a1, ...)
{
  int v1; // esi
  unsigned __int16 *Buffer; // eax
  char v4[4]; // [esp+Ch] [ebp-10h] BYREF
  int v5; // [esp+18h] [ebp-4h]
  va_list va; // [esp+28h] [ebp+Ch] BYREF

  va_start(va, a1);
  v5 = 1;
  v1 = CString::ReverseFind((CString *)va, 0x5Cu);
  if ( v1 < 0 )
  {
    CString::CString(a1, (const struct CString *)va);
  }
  else
  {
    CString::CString((CString *)v4);
    LOBYTE(v5) = 2;
    Buffer = CString::GetBuffer((CString *)va, 0);
    CString::operator=(v4, &Buffer[v1 + 1]);
    CString::CString(a1, (const struct CString *)v4);
    LOBYTE(v5) = 1;
    CString::~CString((CString *)v4);
  }
  LOBYTE(v5) = 0;
  CString::~CString((CString *)va);
  return a1;
}
// 41A050: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 4143D0: using guessed type char var_10[4];

//----- (00414463) --------------------------------------------------------
CString *sub_414463(CString *a1, ...)
{
  int v1; // eax
  char v3[4]; // [esp+8h] [ebp-10h] BYREF
  int v4; // [esp+14h] [ebp-4h]
  va_list va; // [esp+24h] [ebp+Ch] BYREF

  va_start(va, a1);
  v4 = 1;
  v1 = CString::ReverseFind((CString *)va, 0x5Cu);
  if ( v1 != -1 )
  {
    CString::Left(va, v3, v1);
    LOBYTE(v4) = 2;
    CString::operator=(va, v3);
    LOBYTE(v4) = 1;
    CString::~CString((CString *)v3);
  }
  CString::CString(a1, (const struct CString *)va);
  LOBYTE(v4) = 0;
  CString::~CString((CString *)va);
  return a1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A104: using guessed type int __thiscall CString::Left(_DWORD, _DWORD, _DWORD);
// 414463: using guessed type char var_10[4];

//----- (004144DC) --------------------------------------------------------
CString *__cdecl sub_4144DC(CString *a1)
{
  WCHAR *Buffer; // eax
  int v2; // eax
  int v3; // eax
  int v5; // [esp+8h] [ebp-14h] BYREF
  char v6[4]; // [esp+Ch] [ebp-10h] BYREF
  int v7; // [esp+18h] [ebp-4h]

  v5 = 0;
  if ( (byte_433A64 & 1) == 0 )
  {
    byte_433A64 |= 1u;
    CString::CString((CString *)&dword_433A60);
    atexit(loc_4145AE);
  }
  if ( !*(_DWORD *)(dword_433A60 - 8) )
  {
    CString::CString((CString *)v6);
    v7 = 0;
    Buffer = CString::GetBuffer((CString *)v6, 260);
    GetModuleFileNameW(0, Buffer, 0x104u);
    CString::ReleaseBuffer((CString *)v6, -1);
    v2 = CString::ReverseFind((CString *)v6, 0x5Cu);
    if ( v2 != -1 )
    {
      v3 = CString::Left(v6, &v5, v2);
      LOBYTE(v7) = 1;
      CString::operator=(&dword_433A60, v3);
      LOBYTE(v7) = 0;
      CString::~CString((CString *)&v5);
      CString::operator=(v6, &dword_433A60);
    }
    v7 = -1;
    CString::~CString((CString *)v6);
  }
  CString::CString(a1, (const struct CString *)&dword_433A60);
  return a1;
}
// 41A06E: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41A104: using guessed type int __thiscall CString::Left(_DWORD, _DWORD, _DWORD);
// 433A64: using guessed type char byte_433A64;
// 4144DC: using guessed type char var_10[4];

//----- (004145B8) --------------------------------------------------------
CString *__cdecl sub_4145B8(CString *a1)
{
  struct _TIME_ZONE_INFORMATION TimeZoneInformation; // [esp+4h] [ebp-DCh] BYREF
  int v3; // [esp+B0h] [ebp-30h]
  char v4[24]; // [esp+B4h] [ebp-2Ch] BYREF
  char v5[4]; // [esp+CCh] [ebp-14h] BYREF
  char v6[4]; // [esp+D0h] [ebp-10h] BYREF
  int v7; // [esp+DCh] [ebp-4h]

  v3 = 0;
  CString::CString((CString *)v5);
  v7 = 1;
  strcpy(v4, "https://www.softwareok.");
  CString::operator=(v5, v4);
  if ( dword_444FD0 )
  {
    if ( GetTimeZoneInformation(&TimeZoneInformation) )
    {
      if ( TimeZoneInformation.Bias < -240 || TimeZoneInformation.Bias > 240 )
      {
        CString::CString((CString *)v6, aCom);
        LOBYTE(v7) = 4;
        CString::operator+=(v5, v6);
        LOBYTE(v7) = 1;
      }
      else
      {
        CString::CString((CString *)v6, aEu);
        LOBYTE(v7) = 3;
        CString::operator+=(v5, v6);
        LOBYTE(v7) = 1;
      }
    }
    else
    {
      CString::CString((CString *)v6, aCom);
      LOBYTE(v7) = 5;
      CString::operator+=(v5, v6);
      LOBYTE(v7) = 1;
    }
  }
  else
  {
    CString::CString((CString *)v6, aDe);
    LOBYTE(v7) = 2;
    CString::operator+=(v5, v6);
    LOBYTE(v7) = 1;
  }
  CString::~CString((CString *)v6);
  CString::CString(a1, (const struct CString *)v5);
  v3 = 1;
  LOBYTE(v7) = 0;
  CString::~CString((CString *)v5);
  return a1;
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 4145B8: using guessed type char var_14[4];
// 4145B8: using guessed type char var_10[4];

//----- (0041473E) --------------------------------------------------------
CHAR *__cdecl sub_41473E(CString *a1)
{
  const WCHAR *Buffer; // eax

  Buffer = CString::GetBuffer(a1, 1024);
  WideCharToMultiByte(0, 0, Buffer, -1, MultiByteStr, 1024, 0, 0);
  return MultiByteStr;
}

//----- (0041476A) --------------------------------------------------------
int sub_41476A()
{
  sub_414774();
  return atexit(unknown_libname_11);
}

//----- (00414774) --------------------------------------------------------
CString *sub_414774()
{
  return CString::CString((CString *)&unk_433ECC);
}

//----- (004147A5) --------------------------------------------------------
int sub_4147A5()
{
  HWND ActiveWindow; // eax
  _WORD *v1; // esi
  HWND v2; // eax
  int v3; // ebx
  _BYTE *v4; // eax
  int i; // eax
  int v6; // ecx
  int v7; // edx
  _WORD *v8; // edi
  int v9; // ebx
  LPCWSTR *v10; // esi
  LPCWSTR *v11; // edi
  int v12; // ebx
  int v13; // esi
  LPCWSTR *v14; // edi
  int *v15; // ecx
  const wchar_t *v16; // ebx
  LPCWSTR v17; // edi
  bool v18; // cc
  wchar_t *v19; // esi
  wchar_t *v20; // edi
  wchar_t *v21; // edx
  int v22; // ebx
  wchar_t *v23; // eax
  _DWORD v25[133]; // [esp+Ch] [ebp-9E6Ch] BYREF
  UINT uType; // [esp+220h] [ebp-9C58h]
  unsigned int v27; // [esp+9E5Ch] [ebp-1Ch]
  LPCWSTR v28; // [esp+9E60h] [ebp-18h]
  int *v29; // [esp+9E64h] [ebp-14h]
  int *v30; // [esp+9E68h] [ebp-10h]
  int v31; // [esp+9E74h] [ebp-4h]

  dword_448C78 = 0;
  dword_448C7C = 0;
  if ( !dword_448AF8 )
  {
    ActiveWindow = GetActiveWindow();
    MessageBoxW(ActiveWindow, &Text, aError, 0);
  }
  dword_448C78 = 400000;
  sub_419721(v25);
  v31 = 0;
  dword_448C7C = 400000;
  v1 = malloc(0x61A80u);
  sub_419E12((int)v25, dword_448AF8, (int)v1);
  v30 = (int *)uType;
  if ( !uType )
  {
    v2 = GetActiveWindow();
    MessageBoxW(v2, aStrings, aError, 0);
  }
  v3 = 0;
  v4 = (char *)v30 + (_DWORD)v1;
  *v4 = 0;
  v4[1] = 0;
  dword_4453D4 = 0;
  memset(dword_444AD0, 0, 0x100u);
  memset(dword_434AD0, 0, 0x10000u);
  for ( i = 0; i < (int)v30; ++i )
  {
    if ( v1[i] == 35 && v1[i + 1] == 35 )
    {
      v1[i] = 0;
      if ( !v3 )
        Str = &v1[i + 4];
      if ( v3 == 1 )
        dword_4453D8 = (int)&v1[i + 4];
      if ( v3 == 2 )
        dword_4453E0 = (int)&v1[i + 4];
      if ( v3 >= 3 )
      {
        v6 = dword_4453D4;
        if ( dword_4453D4 < 64 )
        {
          if ( v1[i + 2] == 61 )
          {
            v7 = (int)&v1[i + 3];
            if ( i < (int)v30 )
            {
              v8 = &v1[i + 3];
              while ( *v8 != 13 )
              {
                ++i;
                ++v8;
                if ( i >= (int)v30 )
                  goto LABEL_23;
              }
              v1[i + 3] = 0;
              v6 = dword_4453D4;
              dword_4346D0[dword_4453D4] = v7;
            }
          }
LABEL_23:
          dword_444AD0[v6] = (int)&v1[i + 4];
          dword_4453D4 = v6 + 1;
        }
      }
      ++v3;
      ++i;
    }
  }
  String1 = 0;
  lstrcatW(&String1, lpString2);
  v9 = 0;
  if ( dword_4453D4 > 0 )
  {
    v10 = (LPCWSTR *)dword_444AD0;
    v11 = dword_434AD0;
    do
    {
      sub_414B21(*v10, v11);
      ++v9;
      v11 += 256;
      ++v10;
    }
    while ( v9 < dword_4453D4 );
  }
  v12 = 0;
  v28 = 0;
  if ( dword_4453D4 > 0 )
  {
    v29 = &dword_433ED0;
    do
    {
      v13 = 0;
      v14 = lpString;
      v27 = 0;
      v30 = 0;
      do
      {
        if ( lstrlenW(*v14) )
        {
          ++v27;
          if ( lstrlenW((&dword_434AD0[v12])[v13]) )
            v30 = (int *)((char *)v30 + 1);
        }
        ++v14;
        ++v13;
      }
      while ( (int)v14 < (int)&unk_4352D0 );
      v15 = v29;
      v28 = (LPCWSTR)((char *)v28 + 1);
      ++v29;
      v12 += 256;
      *v15 = (__int64)((double)(int)v30 / (double)(int)v27 * 100.0);
    }
    while ( (int)v28 < dword_4453D4 );
  }
  if ( Str )
  {
    v29 = (int *)lstrlenW(Str);
    v16 = Str;
    v30 = 0;
    memset(dword_444BD0, 0, 0x200u);
    if ( (int)v29 > 0 )
    {
      v17 = Str - 1;
      v28 = Str - 1;
      do
      {
        if ( v17[1] == 10 )
        {
          v18 = (int)v30 <= 0;
          *((_WORD *)v17 + 1) = 0;
          if ( !v18 && *v17 == 13 )
            *v17 = 0;
          v19 = wcsstr(v16, SubStr);
          if ( v19 )
          {
            v27 = wtoi(v16);
            if ( v27 <= 0x7F )
            {
              v20 = v19;
              v21 = &v19[lstrlenW(v19)];
              v22 = 0;
              if ( v19 < v21 )
              {
                v23 = v19;
                do
                {
                  if ( *v20 == 92 )
                  {
                    if ( v20[1] == 114 )
                    {
                      *v23 = 13;
                      ++v20;
                    }
                    if ( v20[1] == 110 )
                    {
                      *v23 = 10;
                      ++v20;
                    }
                  }
                  else
                  {
                    *v23 = *v20;
                  }
                  ++v22;
                  ++v23;
                  ++v20;
                }
                while ( v20 < v21 );
              }
              v19[v22] = 0;
              v17 = v28;
              dword_444BD0[v27] = (int)(v19 + 1);
            }
          }
          v16 = v17 + 2;
        }
        v30 = (int *)((char *)v30 + 1);
        v28 = ++v17;
      }
      while ( (int)v30 < (int)v29 );
    }
  }
  v31 = -1;
  sub_419795(v25);
  return 1;
}
// 433ED0: using guessed type int dword_433ED0;
// 4346D0: using guessed type int dword_4346D0[];
// 434AD0: using guessed type LPCWSTR dword_434AD0[256];
// 434ED0: using guessed type LPCWSTR lpString[256];
// 444AD0: using guessed type int dword_444AD0[];
// 444BD0: using guessed type int dword_444BD0[256];
// 4453D4: using guessed type int dword_4453D4;
// 4453D8: using guessed type int dword_4453D8;
// 4453E0: using guessed type int dword_4453E0;
// 448AF8: using guessed type int dword_448AF8;
// 448C78: using guessed type int dword_448C78;
// 448C7C: using guessed type int dword_448C7C;
// 4147A5: using guessed type _DWORD var_9E6C[133];

//----- (00414B21) --------------------------------------------------------
wchar_t *__cdecl sub_414B21(LPCWSTR lpString, void *a2)
{
  wchar_t *result; // eax
  int v4; // ebp
  const wchar_t *v5; // ebx
  LPCWSTR v6; // esi
  wchar_t *v7; // edi
  LPCWSTR lpStringa; // [esp+14h] [ebp+4h]

  result = 0;
  memset(a2, 0, 0x400u);
  if ( lpString )
  {
    result = (wchar_t *)lstrlenW(lpString);
    v4 = 0;
    lpStringa = result;
    v5 = lpString;
    if ( (int)result > 0 )
    {
      v6 = lpString - 1;
      do
      {
        if ( v6[1] == 10 )
        {
          *((_WORD *)v6 + 1) = 0;
          if ( v4 > 0 && *v6 == 13 )
            *v6 = 0;
          result = wcsstr(v5, SubStr);
          v7 = result;
          if ( result )
          {
            result = (wchar_t *)wtoi(v5);
            if ( (unsigned int)result <= 0xFF )
              *((_DWORD *)a2 + (_DWORD)result) = v7 + 1;
          }
          v5 = v6 + 2;
        }
        ++v4;
        ++v6;
      }
      while ( v4 < (int)lpStringa );
    }
  }
  return result;
}

//----- (00414BAC) --------------------------------------------------------
int __cdecl sub_414BAC(int a1)
{
  return dword_444BD0[a1];
}
// 444BD0: using guessed type int dword_444BD0[256];

//----- (00414BB8) --------------------------------------------------------
int sub_414BB8()
{
  sub_414BC2();
  return atexit(sub_414BD8);
}

//----- (00414BC2) --------------------------------------------------------
CString *sub_414BC2()
{
  return CString::CString((CString *)&unk_433EC4);
}

//----- (00414BD8) --------------------------------------------------------
void __cdecl sub_414BD8()
{
  CString::~CString((CString *)&unk_433EC4);
}

//----- (00414BE2) --------------------------------------------------------
unsigned __int16 *__cdecl sub_414BE2(int a1)
{
  unsigned __int16 *result; // eax
  const unsigned __int16 *v2; // [esp-8h] [ebp-Ch]
  int v3; // [esp-4h] [ebp-8h]

  if ( a1 >= 256 )
  {
LABEL_6:
    v3 = a1;
    v2 = aStrD;
    goto LABEL_7;
  }
  if ( dword_444FD0 >= 64 )
  {
    v3 = a1;
    v2 = aLidStrD;
LABEL_7:
    CString::Format((CString *)&unk_433EC4, v2, v3);
    return CString::GetBuffer((CString *)&unk_433EC4, 0);
  }
  if ( dword_4453DC )
  {
    result = (unsigned __int16 *)dword_4342D0[a1];
    if ( result )
      return result;
    goto LABEL_6;
  }
  if ( dword_444FD0 < 0 )
    return (unsigned __int16 *)lpString[a1];
  if ( dword_444FD0 >= dword_4453D4 )
    return (unsigned __int16 *)lpString[a1];
  result = (unsigned __int16 *)(&dword_434AD0[256 * dword_444FD0])[a1];
  if ( !result )
    return (unsigned __int16 *)lpString[a1];
  return result;
}
// 42F6E8: using guessed type wchar_t aLidStrD[12];
// 4342D0: using guessed type LPCWSTR dword_4342D0[256];
// 434AD0: using guessed type LPCWSTR dword_434AD0[256];
// 434ED0: using guessed type LPCWSTR lpString[256];
// 4453D4: using guessed type int dword_4453D4;
// 4453DC: using guessed type int dword_4453DC;

//----- (00414C59) --------------------------------------------------------
void sub_414C59()
{
  WCHAR *v0; // eax
  const unsigned __int16 *v1; // eax
  const unsigned __int16 *v2; // esi
  int v3; // eax
  int v4; // eax
  int v5; // eax
  HANDLE FileW; // esi
  size_t v7; // eax
  const unsigned __int16 *v8; // [esp-8h] [ebp-34h]
  const wchar_t *lpBuffer; // [esp+8h] [ebp-24h]
  int Buffer; // [esp+Ch] [ebp-20h] BYREF
  char v11[4]; // [esp+10h] [ebp-1Ch] BYREF
  DWORD NumberOfBytesWritten; // [esp+14h] [ebp-18h] BYREF
  LPCWSTR lpFileName; // [esp+18h] [ebp-14h] BYREF
  char v14[4]; // [esp+1Ch] [ebp-10h] BYREF
  int v15; // [esp+28h] [ebp-4h]

  CString::CString((CString *)&lpFileName);
  v15 = 0;
  v0 = CString::GetBuffer((CString *)&lpFileName, 260);
  GetTempPathW(0x104u, v0);
  CString::ReleaseBuffer((CString *)&lpFileName, -1);
  v1 = (const unsigned __int16 *)sub_414BAC(19);
  CString::CString((CString *)v11, v1);
  LOBYTE(v15) = 1;
  v2 = *(const unsigned __int16 **)CString::CString((CString *)&Buffer, asc_424574);
  LOBYTE(v15) = 2;
  v8 = *(const unsigned __int16 **)CString::CString((CString *)&NumberOfBytesWritten, asc_42EEB8);
  LOBYTE(v15) = 3;
  CString::Replace((CString *)v11, v8, v2);
  LOBYTE(v15) = 2;
  CString::~CString((CString *)&NumberOfBytesWritten);
  LOBYTE(v15) = 1;
  CString::~CString((CString *)&Buffer);
  v3 = operator+(&Buffer, v11, aTranslateTxt);
  LOBYTE(v15) = 4;
  CString::operator+=(&lpFileName, v3);
  LOBYTE(v15) = 1;
  CString::~CString((CString *)&Buffer);
  DeleteFileW(lpFileName);
  CString::CString((CString *)v14);
  LOBYTE(v15) = 5;
  CString::CString((CString *)&NumberOfBytesWritten, aPleaseDonTForg);
  LOBYTE(v15) = 6;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  v4 = sub_414BAC(19);
  CString::operator+=(v14, v4);
  CString::CString((CString *)&NumberOfBytesWritten, aAndLanguageNam);
  LOBYTE(v15) = 7;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 8;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 9;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  v5 = sub_414BAC(25);
  CString::operator+=(v14, v5);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 10;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 11;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F700);
  LOBYTE(v15) = 12;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::operator+=(v14, dword_4346D4);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 13;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 14;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 15;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::operator+=(v14, &String1);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 16;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  CString::CString((CString *)&NumberOfBytesWritten, asc_42F210);
  LOBYTE(v15) = 17;
  CString::operator+=(v14, &NumberOfBytesWritten);
  LOBYTE(v15) = 5;
  CString::~CString((CString *)&NumberOfBytesWritten);
  FileW = CreateFileW(lpFileName, 0x40000000u, 1u, 0, 4u, 0x80u, 0);
  if ( FileW != (HANDLE)-1 )
  {
    NumberOfBytesWritten = 0;
    Buffer = 65279;
    WriteFile(FileW, &Buffer, 2u, &NumberOfBytesWritten, 0);
    lpBuffer = CString::AllocSysString((CString *)v14);
    NumberOfBytesWritten = 0;
    v7 = wcslen(lpBuffer);
    WriteFile(FileW, lpBuffer, 2 * v7, &NumberOfBytesWritten, 0);
    CloseHandle(FileW);
  }
  ShellExecuteW(0, Operation, lpFileName, 0, 0, 5);
  LOBYTE(v15) = 1;
  CString::~CString((CString *)v14);
  LOBYTE(v15) = 0;
  CString::~CString((CString *)v11);
  v15 = -1;
  CString::~CString((CString *)&lpFileName);
}
// 41A09E: using guessed type int __stdcall operator+(_DWORD, _DWORD, _DWORD);
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A200: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 42F770: using guessed type wchar_t aTranslateTxt[15];
// 4346D4: using guessed type int dword_4346D4;
// 414C59: using guessed type char var_1C[4];
// 414C59: using guessed type char var_10[4];

//----- (00414FEB) --------------------------------------------------------
int __cdecl sub_414FEB(wchar_t *FileName, CString *a2)
{
  FILE *v2; // eax
  int v3; // esi
  FILE *v4; // ebx
  size_t v5; // eax
  char v7[1032]; // [esp+8h] [ebp-41Ch] BYREF
  int Buffer; // [esp+410h] [ebp-14h] BYREF
  FILE *Stream; // [esp+414h] [ebp-10h] BYREF
  int v10; // [esp+420h] [ebp-4h]

  v10 = 0;
  v2 = wfopen(FileName, L"rb");
  Stream = v2;
  if ( v2 )
  {
    Buffer = 0;
    fread(&Buffer, 2u, 1u, v2);
    fclose(Stream);
    dword_448AFC = (_WORD)Buffer == 0xFEFF;
    v4 = wfopen(FileName, L"rb");
    CString::GetBuffer(a2, 1024);
    while ( 1 )
    {
      v7[0] = 0;
      v5 = fread(v7, 1u, 0x400u, v4);
      if ( !v5 )
        break;
      if ( (_WORD)Buffer == 0xFEFF )
      {
        v7[v5] = 0;
        v7[v5 + 1] = 0;
        CString::operator+=(a2, v7);
      }
      else
      {
        v7[v5] = 0;
        CString::CString((CString *)&Stream, v7);
        LOBYTE(v10) = 1;
        CString::operator+=(a2, &Stream);
        LOBYTE(v10) = 0;
        CString::~CString((CString *)&Stream);
      }
    }
    fclose(v4);
    v3 = 1;
  }
  else
  {
    v3 = 0;
  }
  v10 = -1;
  CString::~CString((CString *)&FileName);
  return v3;
}
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 41A200: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 448AFC: using guessed type int dword_448AFC;

//----- (00415116) --------------------------------------------------------
void __cdecl sub_415116(unsigned __int16 *a1)
{
  int v1; // edi
  wchar_t *v2; // ecx
  const WCHAR *Buffer; // eax
  int v4; // ebx
  bool v5; // cc
  CString *v6; // ecx
  int v7; // esi
  HWND ActiveWindow; // eax
  const WCHAR *v9; // [esp-Ch] [ebp-40h]
  wchar_t *v10; // [esp-8h] [ebp-3Ch] BYREF
  WCHAR *v11; // [esp-4h] [ebp-38h]
  wchar_t **v12; // [esp+Ch] [ebp-28h] BYREF
  char v13[4]; // [esp+10h] [ebp-24h] BYREF
  int v14; // [esp+14h] [ebp-20h]
  int v15; // [esp+18h] [ebp-1Ch]
  char v16[4]; // [esp+1Ch] [ebp-18h] BYREF
  LPCWSTR lpText; // [esp+20h] [ebp-14h] BYREF
  char v18[4]; // [esp+24h] [ebp-10h] BYREF
  int v19; // [esp+30h] [ebp-4h]

  CString::CString((CString *)v13);
  v1 = 0;
  v11 = (WCHAR *)v13;
  v10 = v2;
  v12 = &v10;
  v19 = 0;
  CString::CString((CString *)&v10, a1);
  sub_414FEB(v10, (CString *)v11);
  v11 = (WCHAR *)dword_4342D0;
  Buffer = CString::GetBuffer((CString *)v13, 0);
  sub_414B21(Buffer, v11);
  dword_4453DC = 1;
  v4 = 0;
  CString::CString((CString *)v18, aMiss);
  LOBYTE(v19) = 1;
  v14 = 0;
  v15 = 0;
  do
  {
    if ( lstrlenW(lpString[v1]) )
    {
      v11 = (WCHAR *)dword_4342D0[v1];
      ++v14;
      if ( lstrlenW(v11) )
      {
        ++v15;
      }
      else
      {
        v5 = ++v4 < 10;
        if ( v4 == 10 )
        {
          CString::CString((CString *)&v12, asc_42F7A8);
          LOBYTE(v19) = 2;
          CString::operator+=(v18, &v12);
          LOBYTE(v19) = 1;
          CString::~CString((CString *)&v12);
          v5 = 0;
        }
        if ( v5 )
        {
          CString::CString((CString *)&a1);
          v11 = (WCHAR *)lpString[v1];
          LOBYTE(v19) = 3;
          CString::Format((CString *)&a1, aDS_0, v1, v11);
          CString::operator+=(v18, &a1);
          LOBYTE(v19) = 1;
          v6 = (CString *)&a1;
        }
        else
        {
          CString::CString((CString *)v16);
          LOBYTE(v19) = 4;
          CString::Format((CString *)v16, aD_0, v1);
          CString::operator+=(v18, v16);
          LOBYTE(v19) = 1;
          v6 = (CString *)v16;
        }
        CString::~CString(v6);
      }
    }
    ++v1;
  }
  while ( v1 < 256 );
  v7 = (__int64)((double)v15 / (double)v14 * 100.0);
  CString::CString((CString *)&lpText);
  LOBYTE(v19) = 5;
  CString::Format((CString *)&lpText, aD_1, v7);
  if ( v4 )
    CString::operator+=(&lpText, v18);
  v11 = 0;
  v10 = aTranslate;
  v9 = lpText;
  ActiveWindow = GetActiveWindow();
  MessageBoxW(ActiveWindow, v9, v10, (UINT)v11);
  LOBYTE(v19) = 1;
  CString::~CString((CString *)&lpText);
  LOBYTE(v19) = 0;
  CString::~CString((CString *)v18);
  v19 = -1;
  CString::~CString((CString *)v13);
}
// 415134: variable 'v2' is possibly undefined
// 41A0E6: using guessed type int __thiscall CString::operator+=(_DWORD, _DWORD);
// 4342D0: using guessed type LPCWSTR dword_4342D0[256];
// 434ED0: using guessed type LPCWSTR lpString[256];
// 4453DC: using guessed type int dword_4453DC;
// 415116: using guessed type char var_24[4];
// 415116: using guessed type char var_10[4];
// 415116: using guessed type char var_18[4];

//----- (004152EF) --------------------------------------------------------
void sub_4152EF()
{
  WCHAR String1[2]; // [esp+4h] [ebp-A54h] BYREF
  char v1[2044]; // [esp+8h] [ebp-A50h] BYREF
  int v2[130]; // [esp+804h] [ebp-254h] BYREF
  int v3[19]; // [esp+A0Ch] [ebp-4Ch] BYREF

  memset(v3, 0, sizeof(v3));
  *(_DWORD *)String1 = dword_43151C;
  memset(v1, 0, sizeof(v1));
  v2[0] = dword_43151C;
  memset(&v2[1], 0, 0x204u);
  lstrcatW(String1, &word_42FB18);
  v3[13] = 0;
  v3[0] = 76;
  v3[2] = (int)GetModuleHandleW(0);
  v3[11] = 0;
  v3[8] = 260;
  v3[10] = 260;
  v3[7] = (int)String1;
  v3[9] = (int)v2;
  if ( GetOpenFileNameW((LPOPENFILENAMEW)v3) )
    sub_415116(String1);
}
// 43151C: using guessed type int dword_43151C;

//----- (0041539A) --------------------------------------------------------
_DWORD *__thiscall sub_41539A(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[2] = 0;
  this[3] = 0;
  this[4] = 0;
  this[1] = 0;
  *this = 0;
  return result;
}

//----- (004153B2) --------------------------------------------------------
char __cdecl sub_4153B2(int *a1)
{
  __int16 *v1; // eax
  int v2; // ecx
  __int16 v3; // dx
  __int16 v4; // dx

  if ( *((_WORD *)a1 + 1) == 0xFFFF )
  {
    v1 = (__int16 *)a1 + 13;
    v2 = a1[3];
  }
  else
  {
    v1 = (__int16 *)a1 + 9;
    v2 = *a1;
  }
  v3 = *v1;
  if ( *v1 == -1 )
  {
    v1 += 2;
  }
  else
  {
    while ( 1 )
    {
      ++v1;
      if ( !v3 )
        break;
      v3 = *v1;
    }
  }
  v4 = *v1;
  if ( *v1 == -1 )
  {
    v1 += 2;
  }
  else
  {
    while ( 1 )
    {
      ++v1;
      if ( !v4 )
        break;
      v4 = *v1;
    }
  }
  while ( *v1++ )
    ;
  if ( (v2 & 0x40) != 0 )
  {
    if ( *((_WORD *)a1 + 1) == 0xFFFF )
      v1 += 3;
    else
      ++v1;
    while ( *v1++ )
      ;
  }
  return ((_BYTE)v1 + 3) & 0xFC;
}

//----- (00415439) --------------------------------------------------------
char __cdecl sub_415439(int a1, int a2)
{
  __int16 *v2; // eax
  __int16 v3; // cx
  __int16 v4; // cx
  __int16 v5; // cx
  char v6; // al

  if ( a2 )
    v2 = (__int16 *)(a1 + 24);
  else
    v2 = (__int16 *)(a1 + 18);
  v3 = *v2;
  if ( *v2 == -1 )
  {
    v2 += 2;
  }
  else
  {
    while ( 1 )
    {
      ++v2;
      if ( !v3 )
        break;
      v3 = *v2;
    }
  }
  v4 = *v2;
  if ( *v2 == -1 )
  {
    v2 += 2;
  }
  else
  {
    while ( 1 )
    {
      ++v2;
      if ( !v4 )
        break;
      v4 = *v2;
    }
  }
  v5 = *v2;
  v6 = (_BYTE)v2 + 2;
  if ( v5 && !a2 )
    LOBYTE(v5) = v5 - 2;
  return (v5 + v6 + 3) & 0xFC;
}

//----- (004154A4) --------------------------------------------------------
HWND __thiscall sub_4154A4(unsigned __int16 *this)
{
  HWND result; // eax
  HRSRC ResourceW; // eax
  HGLOBAL Resource; // eax
  int v5; // eax
  HWND Window; // edi
  int i; // ebp
  unsigned __int16 *v8; // eax
  HWND v9; // eax
  int v10; // eax
  int v11; // [esp+4h] [ebp-8h]
  HWND hWnd; // [esp+8h] [ebp-4h]

  result = (HWND)*((_DWORD *)this + 2);
  if ( result )
  {
    SendMessageW(result, 0x30u, *((_DWORD *)this + 4), 1);
    ResourceW = FindResourceW(*((HMODULE *)this + 1), (LPCWSTR)*this, (LPCWSTR)5);
    Resource = LoadResource(*((HMODULE *)this + 1), ResourceW);
    hWnd = (HWND)LockResource(Resource);
    LOBYTE(v5) = sub_4153B2((int *)hWnd);
    v11 = 0;
    Window = hWnd;
    for ( i = v5; ; i = v10 )
    {
      v8 = (unsigned __int16 *)(*((_WORD *)hWnd + 1) == 0xFFFF ? hWnd + 4 : hWnd + 2);
      if ( v11 >= *v8 )
        break;
      v9 = v11 ? GetWindow(Window, 2u) : GetWindow(*((HWND *)this + 2), 5u);
      Window = v9;
      if ( !v9 )
        break;
      do
      {
        if ( GetDlgCtrlID(Window) == *(_DWORD *)(i + 20) )
          break;
        Window = GetWindow(Window, 2u);
      }
      while ( Window );
      if ( !Window )
        break;
      SendMessageW(Window, 0x30u, *((_DWORD *)this + 4), 1);
      LOBYTE(v10) = sub_415439(i, 1);
      ++v11;
    }
    DeleteObject(*((HGDIOBJ *)this + 3));
    result = 0;
    *((_DWORD *)this + 2) = 0;
    *((_DWORD *)this + 3) = 0;
    *((_DWORD *)this + 4) = 0;
  }
  return result;
}
// 4154FB: variable 'v5' is possibly undefined
// 41556E: variable 'v10' is possibly undefined

//----- (0041558D) --------------------------------------------------------
_DWORD *__thiscall sub_41558D(_DWORD *this)
{
  *this = &off_41EF68;
  this[1] = sub_415749(this);
  return this;
}
// 41EF68: using guessed type int (__thiscall *off_41EF68)(void *, char);

//----- (004155A2) --------------------------------------------------------
_DWORD *__thiscall sub_4155A2(_DWORD *this, char a2)
{
  sub_4155BE(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004155BE) --------------------------------------------------------
void __thiscall sub_4155BE(_DWORD *this)
{
  *this = &off_41EF68;
}
// 41EF68: using guessed type int (__thiscall *off_41EF68)(void *, char);

//----- (004155C5) --------------------------------------------------------
int __cdecl sub_4155C5(LPCWSTR lpFileName)
{
  DWORD FileAttributesW; // eax

  FileAttributesW = GetFileAttributesW(lpFileName);
  if ( FileAttributesW != -1 )
    return ((FileAttributesW & 0x10) != 0) + 1;
  if ( GetLastError() == 2 || GetLastError() == 3 )
    return 0;
  return -1;
}

//----- (004155FD) --------------------------------------------------------
int __cdecl sub_4155FD(WCHAR *lpString)
{
  WCHAR *v1; // esi
  const WCHAR *v2; // edx
  int v3; // eax
  WCHAR String1[2]; // [esp+Ch] [ebp-1218h] BYREF
  char v6[4092]; // [esp+10h] [ebp-1214h] BYREF
  WCHAR Buffer[2]; // [esp+100Ch] [ebp-218h] BYREF
  char v8[516]; // [esp+1010h] [ebp-214h] BYREF
  WCHAR *v9; // [esp+1214h] [ebp-10h]
  LPCWSTR lpName; // [esp+1218h] [ebp-Ch]
  int v11; // [esp+121Ch] [ebp-8h]
  unsigned int v12; // [esp+1220h] [ebp-4h]

  v11 = 0;
  v1 = lpString;
  v2 = &lpString[lstrlenW(lpString)];
  *(_DWORD *)String1 = dword_43151C;
  v12 = (unsigned int)v2;
  memset(v6, 0, sizeof(v6));
  if ( lpString < v2 )
  {
    do
    {
      if ( *v1 == 37 )
      {
        v9 = v1++;
        lpName = v1;
        if ( v1 >= v2 )
          goto LABEL_11;
        while ( 1 )
        {
          if ( *v1 == 37 )
          {
            *v1 = 0;
            *(_DWORD *)Buffer = dword_43151C;
            memset(v8, 0, sizeof(v8));
            if ( GetEnvironmentVariableW(lpName, Buffer, 0x208u) )
            {
              *v9 = 37;
              lstrcatW(String1, Buffer);
              v11 = 1;
              *v1 = 37;
              goto LABEL_11;
            }
            *v1 = 37;
          }
          if ( (unsigned int)++v1 >= v12 )
            goto LABEL_11;
        }
      }
      v3 = lstrlenW(String1);
      String1[v3] = *v1;
      String1[v3 + 1] = 0;
LABEL_11:
      v2 = (const WCHAR *)v12;
      ++v1;
    }
    while ( (unsigned int)v1 < v12 );
    if ( v11 )
      lstrcpyW(lpString, String1);
  }
  return 0;
}
// 43151C: using guessed type int dword_43151C;

//----- (0041571D) --------------------------------------------------------
BOOL __thiscall sub_41571D(_DWORD *this, int a2, WCHAR *lpString2)
{
  BOOL v4; // edi

  sub_415786(this, 0);
  v4 = sub_4158A5(a2, lpString2);
  sub_415786(this, 1);
  return v4;
}

//----- (00415749) --------------------------------------------------------
int __thiscall sub_415749(_DWORD *this)
{
  HMODULE ModuleHandleW; // eax
  BOOL (__stdcall *IsWow64Process)(HANDLE, PBOOL); // eax
  HANDLE CurrentProcess; // eax
  int v6; // [esp+4h] [ebp-4h] BYREF

  v6 = 0;
  ModuleHandleW = GetModuleHandleW(ModuleName);
  IsWow64Process = (BOOL (__stdcall *)(HANDLE, PBOOL))GetProcAddress(ModuleHandleW, aIswow64process);
  this[2] = IsWow64Process;
  if ( IsWow64Process )
  {
    CurrentProcess = GetCurrentProcess();
    ((void (__stdcall *)(HANDLE, int *))this[2])(CurrentProcess, &v6);
  }
  return v6;
}

//----- (00415786) --------------------------------------------------------
int __thiscall sub_415786(_DWORD *this, int a2)
{
  HMODULE ModuleHandleW; // eax
  BOOLEAN (__stdcall *Wow64EnableWow64FsRedirection)(BOOLEAN); // eax

  if ( !this[1] )
    return 0;
  ModuleHandleW = GetModuleHandleW(ModuleName);
  Wow64EnableWow64FsRedirection = (BOOLEAN (__stdcall *)(BOOLEAN))GetProcAddress(ModuleHandleW, aWow64enablewow);
  if ( Wow64EnableWow64FsRedirection )
    Wow64EnableWow64FsRedirection(a2);
  return 1;
}

//----- (004157B7) --------------------------------------------------------
LPCWSTR __stdcall sub_4157B7(WCHAR *lpString)
{
  WCHAR v2; // ax
  const WCHAR *i; // eax

  while ( 1 )
  {
    v2 = *lpString;
    if ( !*lpString || v2 != 32 && v2 != 9 )
      break;
    ++lpString;
  }
  for ( i = &lpString[lstrlenW(lpString) - 1]; i > lpString && (*i == 32 || *i == 9); --i )
    *i = 0;
  return lpString;
}

//----- (00415800) --------------------------------------------------------
BOOL __cdecl sub_415800(LPCWSTR lpString2, const WCHAR *a2, const WCHAR *a3, int a4)
{
  ULONG v4; // eax
  WCHAR String1[2]; // [esp+4h] [ebp-83Ch] BYREF
  char v7[2044]; // [esp+8h] [ebp-838h] BYREF
  SHELLEXECUTEINFOW pExecInfo; // [esp+804h] [ebp-3Ch] BYREF

  memset(&pExecInfo, 0, sizeof(pExecInfo));
  v4 = a4;
  BYTE1(v4) = BYTE1(a4) | 2;
  pExecInfo.fMask = v4;
  *(_DWORD *)String1 = dword_43151C;
  memset(v7, 0, sizeof(v7));
  pExecInfo.cbSize = 60;
  pExecInfo.lpFile = lpString2;
  pExecInfo.lpDirectory = aUserprofile;
  lstrcpyW(String1, lpString2);
  if ( wcsrchr(String1, 0x2Eu) )
    pExecInfo.lpDirectory = String1;
  pExecInfo.lpClass = 0;
  pExecInfo.hwnd = 0;
  pExecInfo.lpParameters = a2;
  pExecInfo.nShow = 1;
  pExecInfo.lpVerb = a3;
  return ShellExecuteExW(&pExecInfo);
}
// 42F804: using guessed type wchar_t aUserprofile[14];
// 43151C: using guessed type int dword_43151C;

//----- (004158A5) --------------------------------------------------------
BOOL __stdcall sub_4158A5(int a1, WCHAR *lpString2)
{
  const WCHAR *v2; // ebx
  unsigned int v4; // eax
  int v5; // eax
  int v6; // eax
  unsigned int v7; // esi
  bool v8; // zf
  int v9; // ecx
  _WORD *v10; // edx
  int v11; // ecx
  const WCHAR *v12; // edx
  int v13; // esi
  BOOL v14; // esi
  BOOL v15; // eax
  WCHAR v16[2]; // [esp+Ch] [ebp-4018h] BYREF
  char v17[4092]; // [esp+10h] [ebp-4014h] BYREF
  WCHAR String1[2]; // [esp+100Ch] [ebp-3018h] BYREF
  char v19[4092]; // [esp+1010h] [ebp-3014h] BYREF
  WCHAR FileName[2]; // [esp+200Ch] [ebp-2018h] BYREF
  char v21[4092]; // [esp+2010h] [ebp-2014h] BYREF
  WCHAR String[2]; // [esp+300Ch] [ebp-1018h] BYREF
  char v23[4092]; // [esp+3010h] [ebp-1014h] BYREF
  unsigned __int16 *v24; // [esp+400Ch] [ebp-18h] BYREF
  char v25[8]; // [esp+4010h] [ebp-14h] BYREF
  int v26; // [esp+4020h] [ebp-4h]

  *(_DWORD *)String1 = dword_43151C;
  *(_DWORD *)String = dword_43151C;
  memset(v19, 0, sizeof(v19));
  memset(v23, 0, sizeof(v23));
  *(_DWORD *)v16 = dword_43151C;
  memset(v17, 0, sizeof(v17));
  if ( lpString2 )
    lstrcpyW(String1, lpString2);
  v2 = sub_4157B7(String1);
  lstrcpyW(v16, v2);
  lstrcatW(String, v2);
  if ( lstrlenW(String) <= 0 )
    return 0;
  *(_DWORD *)FileName = dword_43151C;
  memset(v21, 0, sizeof(v21));
  lstrcpyW(FileName, String);
  sub_4155FD(FileName);
  if ( sub_4155C5(FileName) <= 0 )
  {
    v6 = lstrlenW(v2);
    HIWORD(v7) = 0;
    v8 = *v2 == 34;
    lpString2 = 0;
    if ( v8 && (v9 = 1, v6 > 1) )
    {
      v10 = v2 + 1;
      while ( *v10 != 34 )
      {
        ++v9;
        ++v10;
        if ( v9 >= v6 )
          goto LABEL_14;
      }
      v2[v9 + 1] = 0;
      lpString2 = (WCHAR *)&v2[v9 + 2];
    }
    else
    {
LABEL_14:
      v11 = 0;
      if ( v6 > 0 )
      {
        v12 = v2;
        while ( *v12 != 32 )
        {
          ++v11;
          ++v12;
          if ( v11 >= v6 )
            goto LABEL_21;
        }
        v2[v11] = 0;
        lpString2 = (WCHAR *)&v2[v11 + 1];
      }
    }
LABEL_21:
    LOWORD(v7) = GetKeyState(17);
    v13 = (v7 >> 15) & 1;
    if ( a1 )
      v13 = a1;
    sub_4155FD(lpString2);
    if ( GetFileAttributesW(String) != -1 )
      return sub_415800(String, 0, v13 != 0 ? aRunas : 0, 0);
    CString::CString((CString *)&v24);
    v26 = 0;
    strcpy(v25, "shell:");
    CString::operator=(&v24, v25);
    CString::CString((CString *)&a1, v2);
    LOBYTE(v26) = 1;
    CString::MakeLower((CString *)&a1);
    if ( CString::Find((CString *)&a1, v24) )
      v15 = sub_415800(v2, lpString2, v13 != 0 ? aRunas : 0, 0);
    else
      v15 = sub_415800(v16, 0, v13 != 0 ? aRunas : 0, 0);
    LOBYTE(v26) = 0;
    v14 = v15;
    CString::~CString((CString *)&a1);
    v26 = -1;
    CString::~CString((CString *)&v24);
    return v14;
  }
  else
  {
    LOWORD(v4) = GetKeyState(17);
    v5 = (v4 >> 15) & 1;
    if ( a1 )
      v5 = a1;
    return sub_415800(FileName, 0, v5 != 0 ? aRunas : 0, 0);
  }
}
// 4159A5: variable 'v4' is possibly undefined
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 424610: using guessed type wchar_t aRunas[6];
// 43151C: using guessed type int dword_43151C;

//----- (00415B38) --------------------------------------------------------
int sub_415B38()
{
  return CWnd::messageMap;
}

//----- (00415B3E) --------------------------------------------------------
LRESULT __cdecl sub_415B3E(HWND hWnd, int a2, LPARAM wParam, int a4, int a5)
{
  LPARAM lParam[2]; // [esp+Ch] [ebp-5Ch] BYREF
  char v7; // [esp+14h] [ebp-54h]
  char v8; // [esp+15h] [ebp-53h]
  int v9; // [esp+18h] [ebp-50h]
  int v10; // [esp+1Ch] [ebp-4Ch]
  LPARAM v11[8]; // [esp+48h] [ebp-20h] BYREF

  v9 = 0;
  v10 = 0;
  lParam[0] = a4;
  lParam[1] = wParam;
  memset(&v11[1], 0, 0x1Cu);
  v7 = 4;
  v8 = a5;
  v11[0] = 32;
  v11[6] = a2;
  v11[1] = 10;
  BYTE1(v11[4]) = 16;
  if ( a5 )
    BYTE1(v11[4]) = a5;
  if ( SendMessageW(hWnd, 0x414u, 1u, (LPARAM)lParam) )
    SendMessageW(hWnd, 0x440u, wParam, (LPARAM)v11);
  return SendMessageW(hWnd, 0x41Fu, 0, 1572888);
}

//----- (00415BCD) --------------------------------------------------------
HWND __cdecl sub_415BCD(DWORD dwExStyle, DWORD dwStyle, HWND hWndParent, int nIDDlgItem)
{
  HFONT v4; // eax
  HGDIOBJ StockObject; // esi
  HWND DlgItem; // esi
  const unsigned __int16 *v8; // [esp-Ch] [ebp-90h]
  LOGFONTW pv; // [esp+Ch] [ebp-78h] BYREF
  struct tagRECT Rect; // [esp+68h] [ebp-1Ch] BYREF
  int v11; // [esp+80h] [ebp-4h]
  HWND dwStylea; // [esp+90h] [ebp+Ch]

  dwStylea = CreateWindowExW(dwExStyle, ClassName, 0, dwStyle, 0, 0, 180, 20, hWndParent, 0, hInstance, 0);
  v4 = (HFONT)dword_448B08;
  if ( !dword_448B08 )
  {
    StockObject = GetStockObject(17);
    memset(&pv, 0, sizeof(pv));
    GetObjectW(StockObject, 92, &pv);
    pv.lfItalic = 0;
    pv.lfCharSet = 1;
    pv.lfQuality = 2;
    v4 = CreateFontIndirectW(&pv);
    dword_448B08 = (WPARAM)v4;
  }
  SendMessageW(dwStylea, 0x30u, (WPARAM)v4, 0);
  SendMessageW(dwStylea, 0x41Eu, 0x14u, 0);
  SendMessageW(dwStylea, 0x420u, 0, 0x100000);
  if ( nIDDlgItem )
  {
    DlgItem = GetDlgItem(hWndParent, nIDDlgItem);
    if ( DlgItem )
    {
      memset(&Rect, 0, sizeof(Rect));
      ShowWindow(DlgItem, 0);
      GetWindowRect(DlgItem, &Rect);
      ScreenToClient(hWndParent, (LPPOINT)&Rect);
      ScreenToClient(hWndParent, (LPPOINT)&Rect.right);
      SetWindowPos(dwStylea, 0, Rect.left, Rect.top, Rect.right - Rect.left, Rect.bottom - Rect.top, 0);
    }
    else
    {
      v8 = *(const unsigned __int16 **)CString::CString((CString *)&hWndParent, aPosCreatedumtb);
      v11 = 0;
      AfxMessageBox(v8, 0, 0);
      v11 = -1;
      CString::~CString((CString *)&hWndParent);
    }
  }
  return dwStylea;
}

//----- (00415D27) --------------------------------------------------------
_DWORD *__cdecl sub_415D27(_DWORD *a1, HWND hWnd, WPARAM wParam)
{
  LRESULT v3; // eax
  _DWORD *result; // eax
  LPARAM lParam[4]; // [esp+8h] [ebp-10h] BYREF

  v3 = SendMessageW(hWnd, 0x419u, wParam, 0);
  SendMessageW(hWnd, 0x41Du, v3, (LPARAM)lParam);
  result = a1;
  *a1 = lParam[0];
  a1[1] = lParam[1];
  a1[2] = lParam[2];
  a1[3] = lParam[3];
  return result;
}
// 415D27: using guessed type LPARAM lParam[4];

//----- (00415D63) --------------------------------------------------------
void __cdecl sub_415D63(HWND hWnd)
{
  BYTE KeyState[253]; // [esp+8h] [ebp-100h] BYREF
  __int16 v2; // [esp+105h] [ebp-3h]
  char v3; // [esp+107h] [ebp-1h]

  if ( IsWindow(hWnd) )
  {
    memset(KeyState, 0, sizeof(KeyState));
    v2 = 0;
    v3 = 0;
    if ( GetKeyboardState(KeyState) && (KeyState[18] & 0x80u) == 0 )
      keybd_event(0x12u, 0, 1u, 0);
    SetForegroundWindow(hWnd);
    if ( GetKeyboardState(KeyState) )
    {
      if ( (KeyState[18] & 0x80u) == 0 )
        keybd_event(0x12u, 0, 3u, 0);
    }
  }
}

//----- (00415DEA) --------------------------------------------------------
HRESULT __cdecl sub_415DEA(HWND a1, const WCHAR *a2, const WCHAR *a3)
{
  HMODULE LibraryW; // eax
  HRESULT (__stdcall *SetWindowTheme)(HWND, LPCWSTR, LPCWSTR); // eax

  LibraryW = dword_448B0C;
  if ( !dword_448B0C )
  {
    LibraryW = LoadLibraryW(aUxthemeDll);
    dword_448B0C = LibraryW;
    if ( !LibraryW )
      return 0;
  }
  SetWindowTheme = (HRESULT (__stdcall *)(HWND, LPCWSTR, LPCWSTR))GetProcAddress(LibraryW, aSetwindowtheme);
  return SetWindowTheme(a1, a2, a3);
}

//----- (00415E25) --------------------------------------------------------
int sub_415E25()
{
  HMODULE LibraryW; // eax
  BOOL (__stdcall *SetProcessDPIAware)(); // eax

  LibraryW = dword_448B10;
  if ( (dword_448B10 || (LibraryW = LoadLibraryW(aUser32Dll_0), (dword_448B10 = LibraryW) != 0))
    && (SetProcessDPIAware = GetProcAddress(LibraryW, aSetprocessdpia)) != 0 )
  {
    return SetProcessDPIAware();
  }
  else
  {
    return 0;
  }
}

//----- (00415E57) --------------------------------------------------------
_DWORD *__thiscall sub_415E57(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[1] = 0;
  this[2] = 0;
  this[3] = 0;
  this[4] = 0;
  *this = &off_41EF90;
  return result;
}
// 41EF90: using guessed type int (__thiscall *off_41EF90)(void *, char);

//----- (00415E6E) --------------------------------------------------------
_DWORD *__thiscall sub_415E6E(_DWORD *this, char a2)
{
  sub_415E8A(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00415E8A) --------------------------------------------------------
void __thiscall sub_415E8A(_DWORD *this)
{
  void *v2; // eax
  void *v3; // esi

  v2 = (void *)this[1];
  *this = &off_41EF90;
  if ( v2 )
    free(v2);
  v3 = (void *)this[2];
  if ( v3 )
    free(v3);
}
// 41EF90: using guessed type int (__thiscall *off_41EF90)(void *, char);

//----- (00415EB3) --------------------------------------------------------
int __thiscall sub_415EB3(_DWORD *this)
{
  return this[1];
}

//----- (00415EB7) --------------------------------------------------------
int __thiscall sub_415EB7(_DWORD *this)
{
  return this[2];
}

//----- (00415EBB) --------------------------------------------------------
void *__thiscall sub_415EBB(int this, unsigned int a2)
{
  void *result; // eax
  size_t v4; // [esp-4h] [ebp-Ch]

  if ( *(_DWORD *)(this + 16) < a2 )
  {
    if ( *(_DWORD *)(this + 8) )
      free(*(void **)(this + 8));
    v4 = ((a2 >> 12) + 1) << 12;
    *(_DWORD *)(this + 16) = v4;
    *(_DWORD *)(this + 8) = malloc(v4);
  }
  result = memset(*(void **)(this + 8), 0, *(_DWORD *)(this + 16));
  *(_DWORD *)(this + 24) = 0;
  return result;
}

//----- (00415F05) --------------------------------------------------------
void *__thiscall sub_415F05(int this, unsigned int a2)
{
  void *result; // eax
  size_t v4; // [esp-4h] [ebp-Ch]

  if ( *(_DWORD *)(this + 12) < a2 )
  {
    if ( *(_DWORD *)(this + 4) )
      free(*(void **)(this + 4));
    v4 = ((a2 >> 12) + 1) << 12;
    *(_DWORD *)(this + 12) = v4;
    *(_DWORD *)(this + 4) = malloc(v4);
  }
  result = memset(*(void **)(this + 4), 0, *(_DWORD *)(this + 12));
  *(_DWORD *)(this + 20) = 0;
  return result;
}

//----- (00415F4F) --------------------------------------------------------
int __thiscall sub_415F4F(_DWORD *this, int a2, unsigned int a3)
{
  unsigned int v4; // ebx
  int result; // eax
  int v6; // ecx

  v4 = 0;
  for ( result = (*(int (__thiscall **)(_DWORD *, unsigned int))(*this + 28))(this, a3); v4 < a3; ++v4 )
  {
    LOBYTE(v6) = *(_BYTE *)(v4 + a2);
    result = (*(int (__thiscall **)(_DWORD *, int))(*this + 60))(this, v6);
    if ( !result )
    {
      result = this[2];
      v6 = this[6];
      *(_BYTE *)(result + v6) = *(_BYTE *)(v4 + a2);
      ++this[6];
    }
  }
  return result;
}
// 415F74: variable 'v6' is possibly undefined

//----- (00415F96) --------------------------------------------------------
void *__thiscall sub_415F96(void **this, void *Src, size_t Size)
{
  void *result; // eax

  (*((void (__thiscall **)(void **, size_t))*this + 8))(this, Size);
  result = memcpy(this[1], Src, Size);
  this[5] = (void *)Size;
  return result;
}

//----- (00415FBC) --------------------------------------------------------
int __thiscall sub_415FBC(_DWORD *this, int a2, unsigned int a3)
{
  int result; // eax
  int v6; // eax
  int v7; // eax
  int v8; // ecx
  char v9[4]; // [esp+8h] [ebp-8h] BYREF
  char v10; // [esp+Ch] [ebp-4h]
  unsigned int v11; // [esp+1Ch] [ebp+Ch]

  (*(void (__thiscall **)(_DWORD *, int, unsigned int))(*this + 40))(this, a2, a3);
  result = (*(int (__thiscall **)(_DWORD *, unsigned int))(*this + 28))(this, 2 * a3);
  v11 = 0;
  if ( a3 >= 3 )
  {
    do
    {
      memset(v9, 0, sizeof(v9));
      v6 = this[1];
      v10 = 0;
      memcpy(v9, (const void *)(v11 + v6), 3u);
      v7 = *this;
      v8 = this[6] + this[2];
      v10 = 3;
      (*(void (__thiscall **)(_DWORD *, char *, int))(v7 + 44))(this, v9, v8);
      v11 += 3;
      this[6] += 4;
      result = v11 + 3;
    }
    while ( v11 + 3 <= a3 );
  }
  if ( a3 > v11 )
  {
    memset(v9, 0, sizeof(v9));
    v10 = a3 - v11;
    memcpy(v9, (const void *)(v11 + this[1]), a3 - v11);
    result = (*(int (__thiscall **)(_DWORD *, char *, int))(*this + 44))(this, v9, this[6] + this[2]);
    this[6] += 4;
  }
  return result;
}

//----- (00416080) --------------------------------------------------------
void __thiscall sub_416080(_DWORD *this, LPCSTR lpString)
{
  int v3; // eax

  if ( lpString )
  {
    v3 = lstrlenA(lpString);
    sub_415FBC(this, (int)lpString, v3);
  }
}

//----- (004160A1) --------------------------------------------------------
int __thiscall sub_4160A1(_DWORD *this, int a2, int a3)
{
  int result; // eax
  unsigned int v5; // edi
  int v6; // eax
  unsigned __int8 *v7; // eax
  char v8; // al
  int v9; // eax
  int v10; // ecx
  bool v11; // cf
  unsigned int v12; // ecx
  int v13; // edx
  char *v14; // eax
  char v15[4]; // [esp+Ch] [ebp-8h] BYREF
  char v16; // [esp+10h] [ebp-4h]

  if ( !dword_448C14 )
    sub_416311();
  (*(void (__thiscall **)(_DWORD *, int, int))(*this + 36))(this, a2, a3);
  result = (*(int (__thiscall **)(_DWORD *, int))(*this + 32))(this, a3);
  v5 = 0;
  if ( this[6] >= 4u )
  {
    do
    {
      memset(v15, 0, sizeof(v15));
      v6 = this[2];
      v16 = 0;
      v7 = (unsigned __int8 *)(v5 + v6);
      v15[0] = byte_448B14[*v7];
      v15[1] = byte_448B14[v7[1]];
      v15[2] = byte_448B14[v7[2]];
      v8 = byte_448B14[v7[3]];
      v15[3] = v8;
      if ( v15[2] == -1 )
        v15[2] = 0;
      if ( v8 == -1 )
        v15[3] = 0;
      v9 = *this;
      v10 = this[5] + this[1];
      v16 = 4;
      (*(void (__thiscall **)(_DWORD *, char *, int))(v9 + 48))(this, v15, v10);
      this[5] += 3;
      v5 += 4;
      result = v5 + 4;
    }
    while ( v5 + 4 <= this[6] );
  }
  if ( v5 < this[6] )
  {
    memset(v15, 0, sizeof(v15));
    v11 = v5 < this[6];
    v16 = 0;
    v12 = v5;
    if ( v11 )
    {
      v13 = this[2];
      do
      {
        v14 = &v15[v12 - v5];
        *v14 = byte_448B14[*(unsigned __int8 *)(v13 + v12)];
        ++v16;
        if ( *v14 == -1 )
          *v14 = 0;
        ++v12;
      }
      while ( v12 < this[6] );
    }
    (*(void (__thiscall **)(_DWORD *, char *, int))(*this + 48))(this, v15, this[5] + this[1]);
    result = this[6] - v5;
    this[5] += result;
  }
  return result;
}
// 448C14: using guessed type int dword_448C14;

//----- (004161BE) --------------------------------------------------------
void __thiscall sub_4161BE(_DWORD *this, LPCSTR lpString)
{
  int v3; // eax

  if ( lpString )
  {
    v3 = lstrlenA(lpString);
    sub_4160A1(this, (int)lpString, v3);
  }
}

//----- (004161DF) --------------------------------------------------------
int __thiscall sub_4161DF(void *this, int a2, char *a3)
{
  int v3; // edi
  char *v4; // ecx
  int v5; // esi
  char v6; // dl
  char v8[8]; // [esp+8h] [ebp-8h] BYREF

  v3 = 0;
  (*(void (__thiscall **)(void *, char *, int))(*(_DWORD *)this + 56))(this, v8, a2);
  v4 = a3;
  v5 = 3;
  do
  {
    v6 = v4[v8 - a3];
    *v4 = v6;
    if ( v6 != -1 )
      ++v3;
    ++v4;
    --v5;
  }
  while ( v5 );
  return v3;
}

//----- (00416216) --------------------------------------------------------
int __thiscall sub_416216(void *this, int a2, _BYTE *a3)
{
  _BYTE *v3; // ecx
  int v4; // edx
  int result; // eax
  char v6[8]; // [esp+Ch] [ebp-8h] BYREF

  (*(void (__thiscall **)(void *, char *, int))(*(_DWORD *)this + 52))(this, v6, a2);
  v3 = a3;
  v4 = 4;
  do
  {
    *v3 = BASE64_table_42F99C[(unsigned __int8)v3[v6 - a3]];
    ++v3;
    --v4;
  }
  while ( v4 );
  result = *(unsigned __int8 *)(a2 + 4) - 1;
  if ( *(_BYTE *)(a2 + 4) == 1 )
  {
    a3[2] = 61;
    goto LABEL_7;
  }
  result = *(unsigned __int8 *)(a2 + 4) - 2;
  if ( *(_BYTE *)(a2 + 4) == 2 )
LABEL_7:
    a3[3] = 61;
  return result;
}

//----- (00416263) --------------------------------------------------------
char __stdcall sub_416263(_BYTE *a1, _BYTE *a2)
{
  char v2; // cl
  char v3; // cl
  char v4; // cl
  char result; // al

  v2 = 4 * *a2;
  *a1 = v2;
  *a1 = v2 | (a2[1] >> 4) & 3;
  v3 = 16 * a2[1];
  a1[1] = v3;
  a1[1] = v3 | (a2[2] >> 2) & 0xF;
  v4 = a2[2] << 6;
  a1[2] = v4;
  result = v4 | a2[3] & 0x3F;
  a1[2] = result;
  return result;
}

//----- (004162AE) --------------------------------------------------------
char __stdcall sub_4162AE(_BYTE *a1, _BYTE *a2)
{
  char v2; // cl
  char v3; // cl
  char result; // al

  *a1 = *a2 >> 2;
  v2 = 16 * *a2;
  a1[1] = v2;
  a1[1] = v2 & 0x3F | (a2[1] >> 4);
  v3 = 4 * a2[1];
  a1[2] = v3;
  a1[2] = v3 & 0x3F | (a2[2] >> 6);
  result = a2[2] & 0x3F;
  a1[3] = result;
  return result;
}

//----- (004162F7) --------------------------------------------------------
BOOL __stdcall sub_4162F7(unsigned __int8 a1)
{
  return a1 >= 7u && (a1 <= 0xDu || a1 == 32);
}

//----- (00416311) --------------------------------------------------------
char sub_416311()
{
  int i; // ecx
  int v1; // eax

  memset(byte_448B14, 0xFEu, 0x100u);
  for ( i = 0; i < 64; ++i )
  {
    v1 = BASE64_table_42F99C[i];
    byte_448B14[v1] = i;
    LOBYTE(v1) = v1 | 0x80;
    byte_448B14[v1] = i;
  }
  byte_448B51 = -1;
  byte_448BD1 = -1;
  dword_448C14 = 1;
  return v1;
}
// 448B51: using guessed type char byte_448B51;
// 448BD1: using guessed type char byte_448BD1;
// 448C14: using guessed type int dword_448C14;

//----- (00416361) --------------------------------------------------------
_DWORD *__thiscall sub_416361(_DWORD *this, char a2)
{
  sub_41637D(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0041637D) --------------------------------------------------------
void __thiscall sub_41637D(_DWORD *this)
{
  *this = &off_41EFD0;
}
// 41EFD0: using guessed type int (__thiscall *off_41EFD0)(void *, char);

//----- (00416384) --------------------------------------------------------
HICON __stdcall sub_416384(unsigned __int16 a1, int a2)
{
  HMODULE ModuleHandleW; // eax
  int v3; // eax
  int SystemMetrics; // [esp-Ch] [ebp-Ch]

  ModuleHandleW = dword_448C24;
  if ( !dword_448C24 )
  {
    ModuleHandleW = GetModuleHandleW(aShell32);
    dword_448C24 = ModuleHandleW;
    if ( !ModuleHandleW )
      return 0;
  }
  if ( !a2 )
    return LoadIconW(ModuleHandleW, (LPCWSTR)a1);
  SystemMetrics = GetSystemMetrics(12);
  v3 = GetSystemMetrics(11);
  return (HICON)LoadImageW(dword_448C24, (LPCWSTR)a1, 1u, v3, SystemMetrics, 0);
}

//----- (004163E6) --------------------------------------------------------
_DWORD *__thiscall sub_4163E6(_DWORD *this)
{
  HGDIOBJ StockObject; // eax
  HFONT v3; // eax
  int pvParam[125]; // [esp+Ch] [ebp-250h] BYREF
  LOGFONTW lf; // [esp+200h] [ebp-5Ch] BYREF

  sub_41779B(this);
  *this = &off_41EFD4;
  this[52] = 0;
  this[21] = 0;
  StockObject = GetStockObject(17);
  GetObjectW(StockObject, 92, this + 22);
  memset(&pvParam[1], 0, 0x1F0u);
  pvParam[0] = 500;
  if ( SystemParametersInfoW(0x29u, 0x1F4u, pvParam, 0) )
    qmemcpy(this + 22, &pvParam[56], 0x5Cu);
  qmemcpy(&lf, this + 22, sizeof(lf));
  v3 = CreateFontIndirectW(&lf);
  lf.lfWeight += 200;
  this[20] = v3;
  lf.lfCharSet = 1;
  lf.lfQuality = 2;
  this[45] = CreateFontIndirectW(&lf);
  this[49] = 16;
  this[50] = 16;
  this[51] = 1;
  this[311] = 1;
  this[310] = 1;
  this[48] = 18;
  this[47] = 21;
  this[46] = 0;
  this[309] = 0;
  this[312] = 12632256;
  this[20] = 0;
  return this;
}
// 41EFD4: using guessed type int (__stdcall *off_41EFD4)(int, int, int, LPARAM, int);

//----- (004164E9) --------------------------------------------------------
_DWORD *__thiscall sub_4164E9(_DWORD *this, char a2)
{
  sub_41656B(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00416505) --------------------------------------------------------
HFONT __thiscall sub_416505(int this)
{
  HFONT result; // eax
  void *v3; // eax
  HFONT v4; // eax
  LOGFONTW lf; // [esp+4h] [ebp-5Ch] BYREF

  result = 0;
  if ( !*(_DWORD *)(this + 80) )
  {
    v3 = (void *)SendMessageW(*(HWND *)(this + 52), 0x31u, 0, 0);
    *(_DWORD *)(this + 80) = v3;
    GetObjectW(v3, 92, (LPVOID)(this + 88));
    qmemcpy(&lf, (const void *)(this + 88), sizeof(lf));
    v4 = CreateFontIndirectW(&lf);
    lf.lfWeight += 200;
    *(_DWORD *)(this + 80) = v4;
    lf.lfCharSet = 1;
    lf.lfQuality = 2;
    result = CreateFontIndirectW(&lf);
    *(_DWORD *)(this + 180) = result;
  }
  return result;
}

//----- (0041656B) --------------------------------------------------------
void __thiscall sub_41656B(_DWORD *this)
{
  *this = &off_41EFD4;
  sub_4177FB(this);
}
// 41EFD4: using guessed type int (__stdcall *off_41EFD4)(int, int, int, LPARAM, int);

//----- (00416576) --------------------------------------------------------
int __stdcall sub_416576(int a1, int a2, int a3, LPARAM a4, int a5)
{
  return sub_417944(a1, a2, a3, a4, a5);
}

//----- (00416591) --------------------------------------------------------
int __stdcall sub_416591(HGDIOBJ *a1, int a2, int a3, HMENU hMenu, _DWORD *item)
{
  _DWORD *v5; // esi
  _DWORD *v6; // eax
  _DWORD *v7; // ecx

  v5 = item;
  switch ( a3 )
  {
    case 44:
      if ( item )
      {
        v6 = (_DWORD *)item[5];
        if ( *item == 1 && v6 && *v6 == 4883 )
        {
          sub_41661E(a1, item);
          return 1;
        }
      }
      break;
    case 43:
      v7 = (_DWORD *)item[11];
      if ( *item == 1 && v7 && *v7 == 4883 )
        (*((void (__thiscall **)(HGDIOBJ *, _DWORD *))*a1 + 3))(a1, item);
      return 1;
    case 279:
      sub_416E0C(a1, 279, hMenu, (int)item, &item);
      break;
  }
  return sub_417973((int)a1, a2, a3, (WPARAM)hMenu, (LPARAM)v5);
}

//----- (0041661E) --------------------------------------------------------
int __thiscall sub_41661E(HGDIOBJ *this, _DWORD *a2)
{
  int result; // eax
  int v4; // ebx
  int SystemMetrics; // kr00_4
  HDC DC; // eax
  bool v7; // zf
  HFONT v8; // esi
  HGDIOBJ v9; // eax
  int v10; // ebx
  int v11; // eax
  LONG lfHeight; // ecx
  int v13; // ecx
  int v14; // esi
  int v15; // eax
  const WCHAR *v16; // [esp-10h] [ebp-98h]
  HDC v17; // [esp-4h] [ebp-8Ch]
  LOGFONTW lf; // [esp+Ch] [ebp-7Ch] BYREF
  struct tagRECT rc; // [esp+68h] [ebp-20h] BYREF
  HGDIOBJ *v20; // [esp+78h] [ebp-10h]
  HFONT v21; // [esp+7Ch] [ebp-Ch]
  HGDIOBJ h; // [esp+80h] [ebp-8h]
  HDC hdc; // [esp+84h] [ebp-4h]

  v20 = this;
  sub_416505((int)this);
  result = (int)a2;
  if ( a2 )
  {
    v4 = a2[5];
    if ( (*(_BYTE *)(v4 + 9) & 8) != 0 )
    {
      SystemMetrics = GetSystemMetrics(15);
      result = (int)a2;
      a2[4] = SystemMetrics / 2;
      a2[3] = 0;
    }
    else
    {
      DC = GetDC(0);
      v7 = (*(_BYTE *)(v4 + 13) & 0x10) == 0;
      hdc = DC;
      v21 = 0;
      if ( v7 )
      {
        v9 = SelectObject(DC, this[20]);
        v8 = v21;
        h = v9;
      }
      else
      {
        qmemcpy(&lf, this + 22, sizeof(lf));
        lf.lfWeight += 200;
        v8 = CreateFontIndirectW(&lf);
        h = SelectObject(hdc, v8);
      }
      v16 = *(const WCHAR **)(v4 + 4);
      memset(&rc, 0, sizeof(rc));
      DrawTextW(hdc, v16, -1, &rc, 0x424u);
      v10 = rc.right - rc.left;
      SelectObject(hdc, h);
      if ( v8 )
        DeleteObject(v8);
      v11 = (int)v20;
      qmemcpy(&lf, v20 + 22, sizeof(lf));
      lfHeight = lf.lfHeight;
      if ( lf.lfHeight < 0 )
        lfHeight = -lf.lfHeight;
      v13 = lfHeight + 8;
      if ( v13 <= (int)v20[48] )
        v13 = (int)v20[48];
      a2[4] = v13;
      v14 = v10 + 2 * *(_DWORD *)(v11 + 188) + 21;
      v15 = GetSystemMetrics(71);
      v17 = hdc;
      a2[3] = v14 - v15 + 1;
      return ReleaseDC(0, v17);
    }
  }
  return result;
}

//----- (0041674C) --------------------------------------------------------
BOOL __thiscall sub_41674C(_DWORD *this, int cInitial)
{
  HIMAGELIST v3; // eax

  v3 = ImageList_Create(this[49], this[50], 0x21u, cInitial, 1);
  this[46] = v3;
  return v3 != 0;
}

//----- (0041677C) --------------------------------------------------------
int __thiscall sub_41677C(int this, HICON hicon, int a3)
{
  int result; // eax

  if ( !*(_DWORD *)(this + 184) && !sub_41674C((_DWORD *)this, 1)
    || ImageList_ReplaceIcon(*(HIMAGELIST *)(this + 184), -1, hicon) == -1 )
  {
    return 0;
  }
  result = a3;
  *(_DWORD *)(this + 4 * (*(_DWORD *)(this + 1236))++ + 212) = a3;
  return result;
}

//----- (004167CB) --------------------------------------------------------
HGDIOBJ __thiscall sub_4167CB(_DWORD *this, int a2)
{
  int v2; // edx
  RECT *v4; // ecx
  int v5; // eax
  int v6; // esi
  int v7; // edi
  bool v8; // zf
  COLORREF v9; // eax
  COLORREF v11; // eax
  LONG top; // esi
  LONG v13; // edx
  LONG bottom; // eax
  __int64 v15; // rax
  int v16; // kr0C_4
  int v17; // esi
  int v18; // edi
  struct _IMAGELIST *v19; // eax
  HBRUSH v20; // eax
  HBRUSH SysColorBrush; // eax
  int v22; // eax
  int v23; // eax
  COLORREF v24; // eax
  struct tagMENUITEMINFOW mii; // [esp+Ch] [ebp-74h] BYREF
  struct tagRECT rc; // [esp+3Ch] [ebp-44h] BYREF
  struct tagRECT qrc; // [esp+4Ch] [ebp-34h] BYREF
  int v28; // [esp+5Ch] [ebp-24h]
  HBRUSH v29; // [esp+60h] [ebp-20h]
  int v30; // [esp+64h] [ebp-1Ch]
  int v31; // [esp+68h] [ebp-18h]
  int v32; // [esp+6Ch] [ebp-14h]
  int i; // [esp+70h] [ebp-10h]
  int v34; // [esp+74h] [ebp-Ch]
  RECT *lprect; // [esp+78h] [ebp-8h]
  HDC hdc; // [esp+7Ch] [ebp-4h]

  v2 = a2;
  v4 = (RECT *)(a2 + 28);
  v30 = *(_DWORD *)(a2 + 44);
  hdc = *(HDC *)(a2 + 24);
  v5 = *(_DWORD *)(a2 + 16);
  v31 = v5 & 2;
  v34 = v5 & 1;
  rc = *(struct tagRECT *)(a2 + 28);
  v6 = this[47];
  v7 = *(_DWORD *)(a2 + 28);
  v32 = v5 & 8;
  v8 = this[21] == 0;
  lprect = (RECT *)(a2 + 28);
  v28 = 0;
  rc.right = v6 + v7 - 1;
  if ( !v8 )
  {
    sub_416C17(hdc, rc.left, rc.top, rc.right, rc.bottom, 0xF6u, 0xF5u, 0, 0xD5u, 0xD1u, 0);
    v2 = a2;
    v4 = lprect;
  }
  if ( v34 )
  {
    sub_416F7A(this, hdc, *v4, 1);
  }
  else
  {
    if ( *(_DWORD *)(v2 + 12) != 2 )
      goto LABEL_8;
    v9 = sub_41707E(this, 4);
    sub_416B24(hdc, lprect, v9);
    if ( this[21] )
      sub_416C17(hdc, rc.left, rc.top, rc.right, rc.bottom, 0xF6u, 0xF5u, 0, 0xD5u, 0xD1u, 0);
  }
  v2 = a2;
  v4 = lprect;
LABEL_8:
  if ( (*(_BYTE *)(v30 + 9) & 8) != 0 )
  {
    if ( this[52] )
    {
      CopyRect(&qrc, v4);
      qrc.left += 10;
      qrc.right -= 10;
      qrc.top = (qrc.bottom + qrc.top) / 2;
      qrc.bottom = qrc.top + 1;
      v11 = sub_41707E(this, 17);
      return (HGDIOBJ)sub_416B24(hdc, &qrc, v11);
    }
    else
    {
      qrc = *v4;
      qrc.left += 4;
      qrc.right -= 4;
      qrc.top += (qrc.bottom - qrc.top) / 2;
      return (HGDIOBJ)DrawEdge(hdc, &qrc, 6u, 2u);
    }
  }
  if ( *(_WORD *)(v2 + 8) == 0xFFFF )
    v34 = 0;
  top = v4->top;
  v13 = v4->left + this[47];
  qrc.left = v4->left;
  bottom = v4->bottom;
  qrc.right = v13;
  qrc.bottom = top + this[48];
  qrc.top = top;
  OffsetRect(&qrc, 0, (bottom - qrc.bottom) / 2);
  i = *(_DWORD *)(v30 + 16);
  if ( i >= 0 )
  {
    v15 = qrc.right - this[49] - qrc.left;
    v16 = qrc.bottom - this[50] - qrc.top;
    v17 = (((int)v15 - HIDWORD(v15)) >> 1) + qrc.left;
    v18 = v16 / 2 + qrc.top;
    if ( v31 )
    {
      if ( !v34 || v32 )
        v20 = sub_416FB2(this, 4);
      else
        v20 = sub_416FB2(this, 29);
      v29 = v20;
      SysColorBrush = GetSysColorBrush(16);
      nullsub_2(hdc, i, v17, v18, v29, v29, SysColorBrush);
    }
    else
    {
      v19 = (struct _IMAGELIST *)this[46];
      if ( v19 )
        ImageList_Draw(v19, i, hdc, v17, v16 / 2 + qrc.top, 1u);
    }
  }
  memset(&mii, 0, sizeof(mii));
  mii.fMask = 24;
  GetMenuItemInfoW(*(HMENU *)(a2 + 20), *(_DWORD *)(a2 + 8), 0, &mii);
  if ( i < 0 )
    goto LABEL_27;
  if ( v32 )
  {
    qrc.left += 16;
    qrc.right += 16;
    v28 = 12;
LABEL_27:
    if ( v32 )
      sub_416BB2(this, hdc, &qrc, v34, v31, (mii.fType >> 9) & 1, (int)mii.hbmpChecked);
  }
  rc.left = lprect->left;
  rc.top = lprect->top;
  v22 = this[47];
  rc.right = lprect->right;
  rc.bottom = lprect->bottom;
  rc.right -= v22;
  rc.left += v22 + v28 + 3;
  SetBkMode(hdc, 1);
  if ( v31 )
    v23 = (v34 != 0) + 16;
  else
    v23 = v34 != 0 ? 14 : 7;
  v24 = sub_41707E(this, v23);
  return sub_416D0E((int)this, hdc, &rc, *(LPCWSTR *)(v30 + 4), v24);
}
// 416B5A: using guessed type _DWORD __stdcall nullsub_2(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD);

//----- (00416B24) --------------------------------------------------------
COLORREF __stdcall sub_416B24(HDC hdc, RECT *lprect, COLORREF color)
{
  COLORREF v3; // edi

  v3 = SetBkColor(hdc, color);
  ExtTextOutW(hdc, 0, 0, 2u, lprect, 0, 0, 0);
  return SetBkColor(hdc, v3);
}

//----- (00416B5D) --------------------------------------------------------
COLORREF __cdecl sub_416B5D(HDC hdc, int x, int a3, COLORREF color, int a5)
{
  COLORREF result; // eax
  int i; // ebx
  int v7; // [esp+8h] [ebp-8h]
  int y; // [esp+Ch] [ebp-4h]

  result = a3;
  v7 = 0;
  y = a3;
  if ( !__OFSUB__(a3, a3 + 9) )
  {
    do
    {
      for ( i = x; i < x + 9; ++i )
      {
        result = a5;
        if ( *(_BYTE *)(v7 + a5) )
          result = SetPixel(hdc, i, y, color);
        ++v7;
      }
      ++y;
    }
    while ( y < a3 + 9 );
  }
  return result;
}

//----- (00416BB2) --------------------------------------------------------
int __thiscall sub_416BB2(_DWORD *this, HDC hdc, _DWORD *a3, int a4, int a5, int a6, int a7)
{
  int v7; // esi
  int v8; // edi
  int v9; // eax
  COLORREF v10; // eax

  v7 = ((a3[2] - *a3) >> 1) + *a3 - 4;
  v8 = ((a3[3] - a3[1]) >> 1) + a3[1] - 4;
  if ( a5 )
    v9 = (a4 != 0) + 16;
  else
    v9 = a4 != 0 ? 14 : 7;
  v10 = sub_41707E(this, v9);
  sub_416B5D(hdc, v7, v8, v10, (int)&unk_42F9E0);
  return 1;
}

//----- (00416C17) --------------------------------------------------------
char __cdecl sub_416C17(
        HDC hdc,
        int a2,
        int a3,
        int a4,
        int a5,
        unsigned __int8 a6,
        unsigned __int8 a7,
        unsigned __int8 a8,
        COLORREF color,
        unsigned __int8 a10,
        unsigned __int8 a11)
{
  __int16 v11; // ax
  __int16 v12; // cx
  int v13; // esi
  __int16 v14; // cx
  double v15; // st7
  double v16; // st7
  unsigned __int16 v17; // cx
  float v19; // [esp+Ch] [ebp-Ch]
  float v20; // [esp+10h] [ebp-8h]
  float v21; // [esp+14h] [ebp-4h]
  int colora; // [esp+40h] [ebp+28h]
  int v23; // [esp+44h] [ebp+2Ch]
  int v24; // [esp+48h] [ebp+30h]

  v11 = (unsigned __int8)color - a6;
  v12 = a10;
  v23 = 0;
  v13 = a5 - a3;
  v14 = v12 - a7;
  if ( a4 - a2 > 0 )
  {
    v15 = (double)(a4 - a2);
    v21 = (double)v11 / v15;
    v20 = (double)v14 / v15;
    v19 = (double)(__int16)(a11 - a8) / v15;
    do
    {
      v16 = (double)v23;
      LOBYTE(v11) = a8 + (__int64)(v19 * v16);
      v24 = 0;
      if ( v13 > 0 )
      {
        HIBYTE(v17) = a8 + (__int64)(v19 * v16);
        LOBYTE(v17) = a7 + (__int64)(v20 * v16);
        colora = (unsigned __int8)(a6 + (__int64)(v16 * v21)) | (v17 << 8);
        do
          LOBYTE(v11) = SetPixel(hdc, v23 + a2, a3 + v24++, colora);
        while ( v24 < v13 );
      }
      ++v23;
    }
    while ( v23 < a4 - a2 );
  }
  return v11;
}

//----- (00416D0E) --------------------------------------------------------
HGDIOBJ __thiscall sub_416D0E(int this, HDC hdc, LPRECT lprc, LPCWSTR lpString, COLORREF color)
{
  int v6; // edi
  HGDIOBJ CurrentObject; // eax
  UINT v8; // eax
  int cchText; // [esp+Ch] [ebp-8h]
  LPCWSTR v11; // [esp+10h] [ebp-4h]
  HGDIOBJ colora; // [esp+28h] [ebp+14h]

  cchText = -1;
  v6 = 0;
  if ( lstrlenW(lpString) > 0 )
  {
    v11 = lpString;
    while ( *v11 != 9 )
    {
      ++v11;
      if ( ++v6 >= lstrlenW(lpString) )
        goto LABEL_7;
    }
    cchText = v6;
  }
LABEL_7:
  SetTextColor(hdc, color);
  if ( !*(_DWORD *)(this + 80) )
  {
    OutputDebugStringW(OutputString);
    CurrentObject = GetCurrentObject(hdc, 6u);
    if ( CurrentObject )
    {
      GetObjectW(CurrentObject, 92, (LPVOID)(this + 88));
      *(_DWORD *)(this + 80) = CreateFontIndirectW((const LOGFONTW *)(this + 88));
    }
  }
  colora = SelectObject(hdc, *(HGDIOBJ *)(this + 80));
  v8 = *(_DWORD *)(this + 1240) != 0 ? 0 : 0x100000;
  LOBYTE(v8) = 36;
  DrawTextW(hdc, lpString, cchText, lprc, v8);
  if ( cchText != -1 )
    DrawTextW(hdc, &lpString[cchText + 1], -1, lprc, (*(_DWORD *)(this + 1240) != 0 ? 0 : 0x100000) | 0x26);
  return SelectObject(hdc, colora);
}

//----- (00416E0C) --------------------------------------------------------
int __thiscall sub_416E0C(_DWORD *this, int a2, HMENU hMenu, int a4, _DWORD *item)
{
  int v5; // ebx
  _DWORD *v7; // eax
  _DWORD *v8; // esi
  int v9; // ecx
  int v10; // eax
  _DWORD *v11; // edx
  int v12; // eax
  WCHAR *v13; // eax
  WCHAR String[100]; // [esp+4h] [ebp-FCh] BYREF
  struct tagMENUITEMINFOW mii; // [esp+CCh] [ebp-34h] BYREF
  _DWORD *v16; // [esp+FCh] [ebp-4h]
  int itema; // [esp+114h] [ebp+14h]

  v5 = (int)this;
  v16 = this;
  if ( HIWORD(a4) )
  {
    *item = 0;
    return 1;
  }
  if ( !dword_448C38 )
  {
    *item = 0;
    return 1;
  }
  if ( this[51] )
  {
    for ( itema = 0; itema < GetMenuItemCount(hMenu); ++itema )
    {
      memset(&mii, 0, sizeof(mii));
      mii.dwTypeData = String;
      mii.cbSize = 48;
      mii.cch = 100;
      mii.fMask = 63;
      GetMenuItemInfoW(hMenu, itema, 1, &mii);
      if ( (mii.fType & 0x100) == 0 )
      {
        mii.fMask = 49;
        v7 = operator new(0x14u);
        if ( v7 )
        {
          *v7 = 4883;
          v8 = v7;
        }
        else
        {
          v8 = 0;
        }
        if ( v8 )
        {
          v9 = 0;
          v8[2] = mii.fType;
          v8[3] = mii.fState;
          mii.fType |= 0x100u;
          v8[4] = -1;
          v10 = *(_DWORD *)(v5 + 1236);
          if ( v10 > 0 )
          {
            v11 = (_DWORD *)(v5 + 212);
            while ( *v11 != mii.wID )
            {
              ++v9;
              ++v11;
              if ( v9 >= v10 )
                goto LABEL_19;
            }
            v8[4] = v9;
LABEL_19:
            v5 = (int)v16;
          }
          v8[1] = 0;
          v12 = lstrlenW(String);
          v13 = (WCHAR *)operator new(2 * v12 + 2);
          v8[1] = v13;
          if ( v13 )
            lstrcpyW(v13, String);
          mii.dwItemData = (ULONG_PTR)v8;
          SetMenuItemInfoW(hMenu, itema, 1, &mii);
        }
      }
    }
  }
  return 0;
}
// 448C38: using guessed type int dword_448C38;

//----- (00416F7A) --------------------------------------------------------
int __thiscall sub_416F7A(_DWORD *this, HDC hDC, RECT rc, int a4)
{
  COLORREF v5; // eax
  HBRUSH v6; // eax

  v5 = sub_41707E(this, 29);
  sub_416B24(hDC, &rc, v5);
  v6 = sub_416FB2(this, 13);
  return FrameRect(hDC, &rc, v6);
}

//----- (00416FB2) --------------------------------------------------------
HBRUSH __thiscall sub_416FB2(_DWORD *this, int nIndex)
{
  HBRUSH SolidBrush; // eax

  if ( !this[52] || nIndex != 13 )
    return GetSysColorBrush(nIndex);
  if ( (byte_448C30 & 1) == 0 )
  {
    byte_448C30 |= 1u;
    sub_4170E3(&unk_448C28);
    atexit(loc_417019);
  }
  SolidBrush = CreateSolidBrush(0x808080u);
  CGdiObject::Attach((CGdiObject *)&unk_448C28, SolidBrush);
  return &unk_448C28 != 0 ? (HBRUSH)dword_448C2C : 0;
}
// 448C2C: using guessed type int dword_448C2C;
// 448C30: using guessed type char byte_448C30;

//----- (00417023) --------------------------------------------------------
DWORD __thiscall sub_417023(_DWORD *this, int nIndex)
{
  if ( this[52] )
  {
    switch ( nIndex )
    {
      case 29:
        return 255;
      case 14:
        return 8257535;
      case 7:
        return 0;
      case 16:
        return 8421504;
      case 4:
        return 0xFFFFFF;
      case 17:
        return 8421504;
    }
  }
  return GetSysColor(nIndex);
}

//----- (0041707E) --------------------------------------------------------
DWORD __thiscall sub_41707E(_DWORD *this, int nIndex)
{
  int v2; // eax

  v2 = this[52];
  if ( v2 == 2 )
    return sub_417023(this, nIndex);
  if ( v2 )
  {
    switch ( nIndex )
    {
      case 29:
        return 8421504;
      case 14:
        return 8257535;
      case 7:
        return 0xFFFFFF;
      case 16:
        return 8421504;
      case 4:
        return 0;
      case 17:
        return 8421504;
    }
  }
  return GetSysColor(nIndex);
}

//----- (004170E3) --------------------------------------------------------
_DWORD *__thiscall sub_4170E3(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[1] = 0;
  *this = &off_41EFE4;
  return result;
}
// 41EFE4: using guessed type struct CRuntimeClass *(__thiscall *off_41EFE4)(CBrush *__hidden this);

//----- (004170F0) --------------------------------------------------------
CGdiObject *__thiscall sub_4170F0(CGdiObject *this, char a2)
{
  sub_41710C(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0041710C) --------------------------------------------------------
int __thiscall sub_41710C(CGdiObject *this)
{
  int result; // eax

  *(_DWORD *)this = &off_41F00C;
  result = CGdiObject::DeleteObject(this);
  *(_DWORD *)this = &off_41EFF8;
  return result;
}
// 41EFF8: using guessed type struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this);
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);

//----- (0041715C) --------------------------------------------------------
void __thiscall sub_41715C(_DWORD *this)
{
  *this = &off_41EFF8;
}
// 41EFF8: using guessed type struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this);

//----- (00417163) --------------------------------------------------------
CGdiObject *__thiscall sub_417163(CGdiObject *this, char a2)
{
  sub_41717F(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0041717F) --------------------------------------------------------
int __thiscall sub_41717F(CGdiObject *this)
{
  int result; // eax

  *(_DWORD *)this = &off_41F00C;
  result = CGdiObject::DeleteObject(this);
  *(_DWORD *)this = &off_41EFF8;
  return result;
}
// 41EFF8: using guessed type struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this);
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);

//----- (004171E5) --------------------------------------------------------
_DWORD *__thiscall sub_4171E5(_DWORD *this, char a2)
{
  sub_417201(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00417201) --------------------------------------------------------
BOOL __thiscall sub_417201(_DWORD *this)
{
  BOOL result; // eax
  void *v3; // esi
  int v4; // [esp-Ch] [ebp-10h]

  v4 = this[517];
  *this = &off_41F020;
  result = sub_41729B(this[520], 2u, 7, v4, 0, 0);
  v3 = (void *)this[3];
  if ( v3 )
    return TerminateThread(v3, 0x444u);
  return result;
}
// 41F020: using guessed type int (*off_41F020)();

//----- (00417238) --------------------------------------------------------
void *__thiscall sub_417238(_DWORD *this)
{
  void *result; // eax

  sub_41729B(this[520], 2u, 7, this[517], 0, 0);
  result = (void *)this[3];
  if ( result )
  {
    result = (void *)TerminateThread(result, 0x444u);
    this[3] = 0;
  }
  return result;
}

//----- (0041726D) --------------------------------------------------------
int __thiscall sub_41726D(_DWORD *this, int a2)
{
  int result; // eax

  result = a2;
  this[520] = a2;
  return result;
}

//----- (0041727A) --------------------------------------------------------
BOOL __thiscall sub_41727A(int *this, DWORD dwMessage, int a3, int a4, HICON hIcon, LPCWSTR lpString2)
{
  return sub_41729B(this[520], dwMessage, a3, a4, hIcon, lpString2);
}

//----- (0041729B) --------------------------------------------------------
BOOL __stdcall sub_41729B(int a1, DWORD dwMessage, int a3, int a4, HICON hIcon, LPCWSTR lpString2)
{
  BOOL v6; // edi
  int v8[6]; // [esp+8h] [ebp-3A8h] BYREF
  WCHAR String1[456]; // [esp+20h] [ebp-390h] BYREF

  v8[1] = a1;
  v8[2] = a4;
  v8[0] = 936;
  v8[3] = a3;
  v8[4] = 32868;
  v8[5] = (int)hIcon;
  if ( lpString2 )
    lstrcpynW(String1, lpString2, 256);
  else
    String1[0] = 0;
  v6 = Shell_NotifyIconW(dwMessage, (PNOTIFYICONDATAW)v8);
  if ( hIcon )
    DestroyIcon(hIcon);
  return v6;
}
// 41729B: using guessed type WCHAR String1[456];

//----- (00417328) --------------------------------------------------------
LPRECT __cdecl sub_417328(LPRECT lpRect)
{
  HWND Window; // eax
  HWND v2; // eax
  LPRECT result; // eax
  LONG right; // ecx
  LONG v5; // edx
  HWND v6; // eax
  LPRECT v7; // esi
  struct _AppBarData pData; // [esp+Ch] [ebp-24h] BYREF

  Window = FindWindowExW(0, 0, szClass, 0);
  if ( Window )
  {
    v2 = FindWindowExW(Window, 0, aTraynotifywnd, 0);
    if ( v2 )
      return (LPRECT)GetWindowRect(v2, lpRect);
  }
  pData.cbSize = 36;
  if ( SHAppBarMessage(5u, &pData) )
  {
    if ( pData.uEdge )
    {
      if ( pData.uEdge == 1 )
      {
LABEL_9:
        result = lpRect;
        lpRect->top = pData.rc.top;
        lpRect->bottom = pData.rc.bottom;
        right = pData.rc.right - 16;
        lpRect->left = pData.rc.right - 100;
LABEL_10:
        result->right = right;
        return result;
      }
      if ( pData.uEdge != 2 )
      {
        result = (LPRECT)(pData.uEdge - 3);
        if ( pData.uEdge != 3 )
          return result;
        goto LABEL_9;
      }
    }
    result = lpRect;
    v5 = pData.rc.bottom - 100;
    lpRect->bottom = pData.rc.bottom - 16;
    lpRect->left = pData.rc.left;
    right = pData.rc.right;
    lpRect->top = v5;
    goto LABEL_10;
  }
  v6 = FindWindowExW(0, 0, szClass, 0);
  if ( !v6 )
  {
    v7 = lpRect;
    SystemParametersInfoW(0x30u, 0, lpRect, 0);
    lpRect->left = lpRect->right - 150;
    result = (LPRECT)(lpRect->bottom - 30);
    goto LABEL_18;
  }
  v7 = lpRect;
  GetWindowRect(v6, lpRect);
  if ( v7->right - v7->left > 150 )
    lpRect->left = lpRect->right - 150;
  result = (LPRECT)lpRect->bottom;
  if ( (int)result - lpRect->top > 30 )
  {
    result = (LPRECT)((char *)result - 30);
LABEL_18:
    v7->top = (LONG)result;
  }
  return result;
}

//----- (0041742E) --------------------------------------------------------
BOOL sub_41742E()
{
  int pvParam[2]; // [esp+0h] [ebp-8h] BYREF

  pvParam[0] = 8;
  SystemParametersInfoW(0x48u, 8u, pvParam, 0);
  return pvParam[1] != 0;
}

//----- (00417452) --------------------------------------------------------
BOOL __thiscall sub_417452(HWND *this)
{
  return sub_417460(this[520], 1);
}

//----- (00417460) --------------------------------------------------------
BOOL __stdcall sub_417460(HWND hWnd, int a2)
{
  struct tagRECT Rect; // [esp+0h] [ebp-20h] BYREF
  RECT rcTo; // [esp+10h] [ebp-10h] BYREF

  if ( a2 && sub_41742E() )
  {
    GetWindowRect(hWnd, &Rect);
    sub_417328(&rcTo);
    DrawAnimatedRects(hWnd, 3, &Rect, &rcTo);
  }
  return ShowWindow(hWnd, 0);
}

//----- (004174AE) --------------------------------------------------------
BOOL __thiscall sub_4174AE(int this)
{
  return sub_41727A((int *)this, 1u, 1, *(_DWORD *)(this + 2068), 0, (LPCWSTR)(this + 16));
}

//----- (004174CA) --------------------------------------------------------
BOOL __thiscall sub_4174CA(int this)
{
  int v2; // eax
  HICON ImageW; // eax
  bool v4; // zf
  BOOL v5; // eax
  int SystemMetrics; // [esp-8h] [ebp-10h]

  SystemMetrics = GetSystemMetrics(12);
  v2 = GetSystemMetrics(11);
  ImageW = (HICON)LoadImageW(hInstance, (LPCWSTR)*(unsigned __int16 *)(this + 8), 1u, v2, SystemMetrics, 0);
  v4 = *(_DWORD *)(this + 2076) == 0;
  *(_DWORD *)(this + 2064) = ImageW;
  if ( !v4 )
    *(_DWORD *)(this + 2064) = sub_4175DC(ImageW);
  v5 = sub_41727A((int *)this, 1u, 1, *(_DWORD *)(this + 2068), 0, (LPCWSTR)(this + 16));
  return sub_41727A((int *)this, v5, 7, *(_DWORD *)(this + 2068), *(HICON *)(this + 2064), (LPCWSTR)(this + 16));
}

//----- (00417549) --------------------------------------------------------
int __thiscall sub_417549(int lpParameter, int a2, int a3, LPCWSTR lpString2, int a5, int a6)
{
  void *v7; // eax

  *(_DWORD *)(lpParameter + 2068) = a2;
  *(_DWORD *)(lpParameter + 8) = a3;
  lstrcpyW((LPWSTR)(lpParameter + 16), lpString2);
  sub_4174CA(lpParameter);
  if ( a5 )
    *(_DWORD *)(lpParameter + 2072) = a5;
  if ( a6 )
  {
    v7 = *(void **)(lpParameter + 12);
    if ( v7 )
      TerminateThread(v7, 0x444u);
    *(_DWORD *)(lpParameter + 12) = CreateThread(
                                      0,
                                      0,
                                      (LPTHREAD_START_ROUTINE)sub_4175B9,
                                      (LPVOID)lpParameter,
                                      0,
                                      (LPDWORD)(lpParameter + 4));
  }
  return 1;
}

//----- (004175B9) --------------------------------------------------------
void __stdcall __noreturn sub_4175B9(LPVOID lpThreadParameter)
{
  while ( 1 )
  {
    do
      Sleep(0x1388u);
    while ( sub_4174AE((int)lpThreadParameter) );
    sub_4174CA((int)lpThreadParameter);
  }
}

//----- (004175DC) --------------------------------------------------------
HICON __cdecl sub_4175DC(HICON hIcon)
{
  HICON v1; // ebx
  HDC DC; // edi
  HDC CompatibleDC; // eax
  HGDIOBJ v4; // eax
  COLORREF Pixel; // ebx
  __int64 v6; // rax
  char pv[16]; // [esp+Ch] [ebp-64h] BYREF
  unsigned __int16 v9; // [esp+1Ch] [ebp-54h]
  unsigned __int16 v10; // [esp+1Eh] [ebp-52h]
  ICONINFO v11; // [esp+24h] [ebp-4Ch] BYREF
  ICONINFO piconinfo; // [esp+38h] [ebp-38h] BYREF
  HDC hDC; // [esp+4Ch] [ebp-24h]
  HGDIOBJ i; // [esp+50h] [ebp-20h]
  HGDIOBJ v15; // [esp+54h] [ebp-1Ch]
  int v16; // [esp+58h] [ebp-18h]
  DWORD v17; // [esp+5Ch] [ebp-14h]
  DWORD v18; // [esp+60h] [ebp-10h]
  HDC v19; // [esp+64h] [ebp-Ch]
  HDC hdc; // [esp+68h] [ebp-8h]
  int y; // [esp+6Ch] [ebp-4h]
  HICON hIcona; // [esp+78h] [ebp+8h]

  v1 = 0;
  if ( !GetIconInfo(hIcon, &piconinfo) )
    return 0;
  DC = GetDC(0);
  hDC = DC;
  hdc = CreateCompatibleDC(DC);
  CompatibleDC = CreateCompatibleDC(DC);
  v19 = CompatibleDC;
  if ( !DC || !hdc || !CompatibleDC )
    return 0;
  if ( GetObjectW(piconinfo.hbmColor, 24, pv) )
  {
    v18 = 2 * piconinfo.xHotspot;
    v17 = 2 * piconinfo.yHotspot;
    v11.hbmColor = CreateBitmap(2 * piconinfo.xHotspot, 2 * piconinfo.yHotspot, v9, v10, 0);
    if ( v11.hbmColor )
    {
      v15 = SelectObject(hdc, piconinfo.hbmColor);
      v4 = SelectObject(v19, v11.hbmColor);
      y = 0;
      for ( i = v4; y < v17; ++y )
      {
        for ( hIcona = 0; (unsigned int)hIcona < v18; hIcona = (HICON)((char *)hIcona + 1) )
        {
          Pixel = GetPixel(hdc, (int)hIcona, y);
          v16 = (unsigned __int8)Pixel;
          if ( Pixel )
          {
            v6 = (__int64)((double)BYTE1(Pixel) * 0.587
                         + (double)BYTE2(Pixel) * 0.114
                         + (double)(unsigned __int8)Pixel * 0.299);
            SetPixel(
              v19,
              (int)hIcona,
              y,
              (unsigned __int8)v6 | (((unsigned __int8)v6 | ((unsigned __int8)v6 << 8)) << 8));
          }
        }
      }
      SelectObject(hdc, v15);
      SelectObject(v19, i);
      v11.fIcon = 1;
      v11.hbmMask = piconinfo.hbmMask;
      v1 = CreateIconIndirect(&v11);
    }
    DeleteObject(v11.hbmColor);
  }
  DeleteObject(piconinfo.hbmColor);
  DeleteObject(piconinfo.hbmMask);
  DeleteDC(hdc);
  DeleteDC(v19);
  ReleaseDC(0, hDC);
  return v1;
}
// 4175DC: using guessed type char pv[16];

//----- (0041779B) --------------------------------------------------------
_DWORD *__thiscall sub_41779B(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  this[5] = -1;
  this[6] = -1;
  *this = &off_41F040;
  this[16] = 0;
  this[15] = 0;
  this[17] = 0;
  this[13] = 0;
  this[7] = 0;
  this[3] = 0;
  this[19] = 0;
  this[1] = 0;
  this[2] = 0;
  this[11] = 0;
  this[9] = 0;
  this[10] = 0;
  this[8] = 0;
  this[14] = 0;
  this[18] = 24;
  return result;
}
// 41F040: using guessed type int (__stdcall *off_41F040)(int, int, int, LPARAM, int);

//----- (004177DF) --------------------------------------------------------
_DWORD *__thiscall sub_4177DF(_DWORD *this, char a2)
{
  sub_4177FB(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (004177FB) --------------------------------------------------------
void __thiscall sub_4177FB(_DWORD *this)
{
  *this = &off_41F040;
}
// 41F040: using guessed type int (__stdcall *off_41F040)(int, int, int, LPARAM, int);

//----- (00417802) --------------------------------------------------------
LONG __thiscall sub_417802(int this, HWND hWndParent)
{
  HFONT v3; // eax
  HGDIOBJ StockObject; // edi
  unsigned __int16 v5; // ax
  LOGFONTW pv; // [esp+Ch] [ebp-6Ch] BYREF
  struct tagRECT Rect; // [esp+68h] [ebp-10h] BYREF

  *(_DWORD *)(this + 56) = hWndParent;
  *(_DWORD *)(this + 52) = CreateWindowExW(
                             0,
                             ClassName,
                             0,
                             0x5600994Cu,
                             0,
                             0,
                             180,
                             *(_DWORD *)(this + 72),
                             hWndParent,
                             0,
                             hInstance,
                             0);
  v3 = (HFONT)dword_448C4C;
  if ( !dword_448C4C )
  {
    StockObject = GetStockObject(17);
    memset(&pv, 0, sizeof(pv));
    GetObjectW(StockObject, 92, &pv);
    pv.lfItalic = 0;
    pv.lfCharSet = 1;
    pv.lfQuality = 2;
    v3 = CreateFontIndirectW(&pv);
    dword_448C4C = (WPARAM)v3;
  }
  SendMessageW(*(HWND *)(this + 52), 0x30u, (WPARAM)v3, 0);
  SendMessageW(*(HWND *)(this + 52), 0x41Eu, 0x14u, 0);
  SendMessageW(*(HWND *)(this + 52), 0x420u, 0, 1048577);
  v5 = SendMessageW(*(HWND *)(this + 52), 0x43Au, 0, 0);
  if ( *(_DWORD *)(this + 72) < (int)v5 )
    *(_DWORD *)(this + 72) = v5;
  memset(&Rect, 0, sizeof(Rect));
  GetClientRect(*(HWND *)(this + 56), &Rect);
  SetWindowPos(*(HWND *)(this + 52), 0, 0, *(_DWORD *)(this + 4), Rect.right - Rect.left, *(_DWORD *)(this + 72), 0x40u);
  dword_448C48 = this;
  dword_448C40 = (WNDPROC)GetWindowLongW(hWndParent, -4);
  SetWindowLongW(hWndParent, -4, (LONG)sub_417A59);
  lpPrevWndFunc = (WNDPROC)GetWindowLongW(*(HWND *)(this + 52), -4);
  return SetWindowLongW(*(HWND *)(this + 52), -4, (LONG)sub_417A1B);
}
// 448C48: using guessed type int dword_448C48;

//----- (00417944) --------------------------------------------------------
int __stdcall sub_417944(int a1, int a2, int a3, LPARAM a4, int a5)
{
  int result; // eax
  int v6; // [esp+0h] [ebp-4h] BYREF

  v6 = 0;
  if ( a3 != 288 )
    return 0;
  result = sub_417C29(a1, 288, a4, a5, &v6);
  if ( !result )
    return 0;
  return result;
}

//----- (00417973) --------------------------------------------------------
int __stdcall sub_417973(int a1, int a2, int a3, WPARAM wParam, LPARAM lParam)
{
  struct tagPOINT *v6; // eax
  int v7; // [esp+0h] [ebp-8h] BYREF

  switch ( a3 )
  {
    case 279:
      SendMessageW(*(HWND *)(a1 + 56), 0x117u, wParam, lParam);
      break;
    case 513:
      v6 = (struct tagPOINT *)sub_418011(&v7);
      sub_41802B(a1, wParam, *v6);
      return 1;
    case 529:
      SendMessageW(*(HWND *)(a1 + 56), 0x211u, wParam, lParam);
      break;
    case 530:
      SendMessageW(*(HWND *)(a1 + 56), 0x212u, wParam, lParam);
      break;
    case 1044:
    case 1088:
      if ( *(_DWORD *)(a1 + 16) != 1 )
        return 1;
      *(_DWORD *)(a1 + 16) = 0;
      break;
    case 2125:
      return sub_41823E((int *)a1, wParam, lParam);
    default:
      return 0;
  }
  return 0;
}

//----- (00417A1B) --------------------------------------------------------
int __stdcall sub_417A1B(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  int result; // eax

  if ( !dword_448C48 )
    return CallWindowProcW(lpPrevWndFunc, hWnd, Msg, wParam, lParam);
  result = (*(int (__stdcall **)(int, HWND, UINT, WPARAM, LPARAM))(*(_DWORD *)dword_448C48 + 4))(
             dword_448C48,
             hWnd,
             Msg,
             wParam,
             lParam);
  if ( !result )
    return CallWindowProcW(lpPrevWndFunc, hWnd, Msg, wParam, lParam);
  return result;
}
// 448C48: using guessed type int dword_448C48;

//----- (00417A59) --------------------------------------------------------
int __stdcall sub_417A59(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  int result; // eax

  if ( !dword_448C48 )
    return CallWindowProcW(dword_448C40, hWnd, Msg, wParam, lParam);
  result = (**(int (__stdcall ***)(int, HWND, UINT, WPARAM, LPARAM))dword_448C48)(
             dword_448C48,
             hWnd,
             Msg,
             wParam,
             lParam);
  if ( !result )
    return CallWindowProcW(dword_448C40, hWnd, Msg, wParam, lParam);
  return result;
}
// 448C48: using guessed type int dword_448C48;

//----- (00417A96) --------------------------------------------------------
int __thiscall sub_417A96(int this, UINT item)
{
  LRESULT v4; // eax
  int MenuItemCount; // eax
  HWND v6; // [esp-14h] [ebp-128h]
  HMENU v7; // [esp-8h] [ebp-11Ch]
  int v8[50]; // [esp+8h] [ebp-10Ch] BYREF
  struct tagMENUITEMINFOW mii; // [esp+D0h] [ebp-44h] BYREF
  char v10[20]; // [esp+100h] [ebp-14h] BYREF
  UINT itema; // [esp+11Ch] [ebp+8h]
  signed int itemb; // [esp+11Ch] [ebp+8h]

  if ( !*(_DWORD *)(this + 52) )
    return 0;
  if ( *(_DWORD *)(this + 64) )
    DestroyMenu(*(HMENU *)(this + 64));
  v6 = *(HWND *)(this + 52);
  *(_DWORD *)(this + 64) = item;
  SendMessageW(v6, 0xBu, 0, 0);
  v4 = SendMessageW(*(HWND *)(this + 52), 0x418u, 0, 0);
  if ( v4 > 0 )
  {
    itema = v4;
    do
    {
      SendMessageW(*(HWND *)(this + 52), 0x416u, 0, 0);
      --itema;
    }
    while ( itema );
  }
  memset(v10, 0, sizeof(v10));
  v10[8] = 4;
  v7 = *(HMENU *)(this + 64);
  v10[9] = 16;
  MenuItemCount = GetMenuItemCount(v7);
  *(_DWORD *)(this + 60) = MenuItemCount;
  for ( itemb = 0; itemb < *(_DWORD *)(this + 60); ++itemb )
  {
    memset(&mii, 0, sizeof(mii));
    mii.fType = 0;
    mii.cch = 100;
    mii.cbSize = 48;
    mii.fMask = 48;
    mii.dwTypeData = (LPWSTR)v8;
    GetMenuItemInfoW(*(HMENU *)(this + 64), itemb, 1, &mii);
    sub_417B9B((_DWORD *)this, *(HWND *)(this + 52), (int)v8, itemb + 40000, 0, 0);
  }
  SendMessageW(*(HWND *)(this + 52), 0xBu, 1u, 0);
  return 1;
}

//----- (00417B9B) --------------------------------------------------------
int __thiscall sub_417B9B(_DWORD *this, HWND hWnd, int a3, LPARAM wParam, int a5, int a6)
{
  LPARAM lParam[2]; // [esp+Ch] [ebp-5Ch] BYREF
  char v9; // [esp+14h] [ebp-54h]
  char v10; // [esp+15h] [ebp-53h]
  int v11; // [esp+18h] [ebp-50h]
  int v12; // [esp+1Ch] [ebp-4Ch]
  LPARAM v13[8]; // [esp+48h] [ebp-20h] BYREF

  v11 = 0;
  v12 = 0;
  lParam[0] = a5;
  lParam[1] = wParam;
  v9 = 4;
  memset(&v13[1], 0, 0x1Cu);
  v10 = a6;
  v13[0] = 32;
  v13[6] = a3;
  v13[1] = 10;
  BYTE1(v13[4]) = 16;
  if ( a6 )
    BYTE1(v13[4]) = a6;
  this[4] = 1;
  if ( SendMessageW(hWnd, 0x414u, 1u, (LPARAM)lParam) )
  {
    this[4] = 1;
    SendMessageW(hWnd, 0x440u, wParam, (LPARAM)v13);
  }
  return 1;
}

//----- (00417C29) --------------------------------------------------------
int __thiscall sub_417C29(int this, int a2, LPARAM a3, int a4, _DWORD *a5)
{
  HWND v6; // eax
  HWND v8; // [esp-10h] [ebp-58h]
  LPARAM v9; // [esp+Ch] [ebp-3Ch] BYREF
  int v10; // [esp+10h] [ebp-38h]
  int v11; // [esp+14h] [ebp-34h]
  int v12; // [esp+18h] [ebp-30h]
  int v13; // [esp+1Ch] [ebp-2Ch]
  struct tagRECT v14; // [esp+20h] [ebp-28h] BYREF
  struct tagRECT Rect; // [esp+30h] [ebp-18h] BYREF
  WPARAM wParam; // [esp+40h] [ebp-8h]
  LPARAM lParam; // [esp+44h] [ebp-4h] BYREF

  if ( !*(_DWORD *)(this + 68) )
  {
    lParam = 0;
    wParam = (unsigned __int16)a3;
    if ( SendMessageW(*(HWND *)(this + 52), 0x45Au, (unsigned __int16)a3, (LPARAM)&lParam) )
    {
      Rect.left = 0;
      *a5 = 1;
      memset(&Rect.top, 0, 12);
      GetClientRect(*(HWND *)(this + 52), &Rect);
      memset(&v14, 0, sizeof(v14));
      sub_417DA2((HWND *)this, lParam, (LPARAM)&v14);
      v9 = 0;
      v10 = 0;
      v11 = 0;
      v12 = 0;
      v13 = 0;
      sub_417DF3((HWND *)this, lParam, (LPARAM)&v9);
      v8 = *(HWND *)(this + 52);
      *(_DWORD *)(this + 44) = lParam - 40000;
      PostMessageW(v8, 0x84Du, 0, 0);
      PostMessageW(*(HWND *)(this + 52), 0x100u, 0x28u, 0);
      return 65537;
    }
    v6 = *(HWND *)(this + 76);
    if ( v6 )
    {
      a3 = 0;
      if ( SendMessageW(v6, 0x45Au, wParam, (LPARAM)&a3) )
      {
        v14.left = 0;
        *a5 = 1;
        memset(&v14.top, 0, 12);
        GetClientRect(*(HWND *)(this + 76), &v14);
        memset(&Rect, 0, sizeof(Rect));
        SendMessageW(*(HWND *)(this + 76), 0x130Au, a3, (LPARAM)&Rect);
        v9 = 0;
        v10 = 0;
        v11 = 0;
        v12 = 0;
        v13 = 0;
        SendMessageW(*(HWND *)(this + 76), 0x417u, a3, (LPARAM)&v9);
        PostMessageW(*(HWND *)(this + 56), 0x111u, (unsigned __int16)a3, 0);
        return 65537;
      }
    }
  }
  return 0;
}
// 417C4D: conditional instruction was optimized away because eax.4!=0

//----- (00417DA2) --------------------------------------------------------
LRESULT __thiscall sub_417DA2(HWND *this, WPARAM wParam, LPARAM lParam)
{
  return SendMessageW(this[13], 0x41Du, wParam, lParam);
}

//----- (00417DBB) --------------------------------------------------------
LRESULT __thiscall sub_417DBB(HWND *this, LPARAM lParam)
{
  return SendMessageW(this[13], 0x445u, 0, lParam);
}

//----- (00417DD2) --------------------------------------------------------
LRESULT __thiscall sub_417DD2(HWND *this, int a2, unsigned __int16 a3)
{
  return SendMessageW(this[13], 0x403u, a2 + 40000, a3);
}

//----- (00417DF3) --------------------------------------------------------
LRESULT __thiscall sub_417DF3(HWND *this, WPARAM wParam, LPARAM lParam)
{
  return SendMessageW(this[13], 0x417u, wParam, lParam);
}

//----- (00417E0C) --------------------------------------------------------
int __thiscall sub_417E0C(int this, _DWORD *a2)
{
  int v2; // eax
  int v4; // eax
  int v5; // eax
  LRESULT v6; // eax
  LONG y; // ecx
  LRESULT v9; // eax
  LRESULT v10; // ebx
  int v11; // eax
  int v12; // eax
  __int16 v13; // bx
  struct tagPOINT Point; // [esp+Ch] [ebp-Ch] BYREF
  int v15; // [esp+14h] [ebp-4h]

  v2 = a2[1] - 256;
  v15 = 0;
  if ( !v2 )
  {
    v13 = *((_WORD *)a2 + 4);
    if ( !*(_DWORD *)(this + 12) )
    {
      if ( v13 == 37 )
      {
        sub_417DD2((HWND *)this, *(_DWORD *)(this + 44), 0);
        --*(_DWORD *)(this + 44);
        PostMessageW(*(HWND *)(this + 52), 0x1Fu, 0, 0);
        PostMessageW(*(HWND *)(this + 52), 0x84Du, 0, 0);
        PostMessageW(*(HWND *)(this + 52), 0x100u, 0x28u, 0);
        return 1;
      }
      if ( v13 == 39 )
      {
        if ( (*(_BYTE *)(this + 48) & 0x10) == 0 )
        {
          sub_417DD2((HWND *)this, *(_DWORD *)(this + 44), 0);
          ++*(_DWORD *)(this + 44);
          PostMessageW(*(HWND *)(this + 52), 0x1Fu, 0, 0);
          PostMessageW(*(HWND *)(this + 52), 0x84Du, 0, 0);
          PostMessageW(*(HWND *)(this + 52), 0x100u, 0x28u, 0);
          v15 = 1;
        }
        *(_DWORD *)(this + 32) = 0;
        *(_DWORD *)(this + 48) = 0;
        return v15;
      }
    }
    if ( v13 != 27 )
      return v15;
    PostMessageW(*(HWND *)(this + 52), 0x1Fu, 0, 0);
    *(_DWORD *)(this + 28) = 0;
    return 1;
  }
  v4 = v2 - 31;
  if ( !v4 )
  {
    SendMessageW(*(HWND *)(this + 56), 0x11Fu, a2[2], a2[3]);
    v12 = *((unsigned __int16 *)a2 + 4);
    *(_DWORD *)(this + 32) = v12;
    *(_DWORD *)(this + 24) = v12;
    *(_DWORD *)(this + 48) = HIWORD(a2[2]);
    return 1;
  }
  v5 = v4 - 225;
  if ( v5 )
  {
    if ( v5 == 1 )
    {
      sub_418011(&Point);
      ScreenToClient(*(HWND *)(this + 52), &Point);
      v6 = sub_417DBB((HWND *)this, (LPARAM)&Point);
      if ( v6 < 0 )
      {
        *(_DWORD *)(this + 28) = 0;
        return v15;
      }
      if ( v6 != *(_DWORD *)(this + 44) )
        return v15;
      *(_DWORD *)(this + 28) = 0;
      PostMessageW(*(HWND *)(this + 52), 0x1Fu, 0, 0);
      return 1;
    }
  }
  else if ( !*(_DWORD *)(this + 12) )
  {
    sub_418011(&Point);
    ScreenToClient(*(HWND *)(this + 52), &Point);
    y = Point.y;
    if ( *(_DWORD *)(this + 36) == Point.x && *(_DWORD *)(this + 40) == Point.y )
      return 1;
    *(_DWORD *)(this + 36) = Point.x;
    *(_DWORD *)(this + 40) = y;
    v9 = sub_417DBB((HWND *)this, (LPARAM)&Point);
    v10 = v9;
    if ( v9 >= 0 && v9 < *(_DWORD *)(this + 60) )
    {
      v11 = *(_DWORD *)(this + 44);
      if ( v10 != v11 )
      {
        sub_417DD2((HWND *)this, v11, 0);
        SendMessageW(*(HWND *)(this + 52), 0x1Fu, 0, 0);
        *(_DWORD *)(this + 44) = v10;
        PostMessageW(*(HWND *)(this + 52), 0x84Du, 0, 0);
        return 1;
      }
    }
  }
  return v15;
}
// 417F97: conditional instruction was optimized away because eax.4==0

//----- (00418011) --------------------------------------------------------
_DWORD *__stdcall sub_418011(_DWORD *a1)
{
  DWORD MessagePos; // eax
  int v2; // ecx
  DWORD v3; // edx
  _DWORD *result; // eax

  MessagePos = GetMessagePos();
  v2 = (unsigned __int16)MessagePos;
  v3 = HIWORD(MessagePos);
  result = a1;
  *a1 = v2;
  a1[1] = v3;
  return result;
}

//----- (0041802B) --------------------------------------------------------
HMENU __thiscall sub_41802B(int this, int a2, struct tagPOINT Point)
{
  HMENU result; // eax

  GetCursorPos(&Point);
  ScreenToClient(*(HWND *)(this + 52), &Point);
  result = (HMENU)sub_417DBB((HWND *)this, (LPARAM)&Point);
  if ( (int)result >= 0 && (int)result < *(_DWORD *)(this + 60) )
  {
    *(_DWORD *)(this + 44) = result;
    return sub_4180D7(this);
  }
  return result;
}

//----- (0041806A) --------------------------------------------------------
BOOL __thiscall sub_41806A(int this, HMENU hMenu, int x, int y)
{
  DWORD CurrentThreadId; // eax
  BOOL result; // eax

  dword_448C38 = this;
  *(_DWORD *)(this + 24) = -1;
  CurrentThreadId = GetCurrentThreadId();
  hhk = SetWindowsHookExW(-1, (HOOKPROC)fn, 0, CurrentThreadId);
  TrackPopupMenuEx(hMenu, 8u, x, y, *(HWND *)(this + 52), 0);
  sub_417DD2((HWND *)this, *(_DWORD *)(this + 44), 0);
  result = UnhookWindowsHookEx(hhk);
  hhk = 0;
  dword_448C38 = 0;
  *(_DWORD *)(this + 32) = 0;
  return result;
}
// 448C38: using guessed type int dword_448C38;

//----- (004180D7) --------------------------------------------------------
HMENU __thiscall sub_4180D7(int this)
{
  HMENU result; // eax
  DWORD CurrentThreadId; // eax
  BOOL v4; // eax
  WPARAM v5; // [esp-Ch] [ebp-44h]
  TPMPARAMS tpm; // [esp+8h] [ebp-30h] BYREF
  struct tagPOINT v7; // [esp+1Ch] [ebp-1Ch] BYREF
  LONG v8; // [esp+24h] [ebp-14h]
  LONG v9; // [esp+28h] [ebp-10h]
  struct tagPOINT Points; // [esp+2Ch] [ebp-Ch] BYREF
  HMENU hMenu; // [esp+34h] [ebp-4h]

  result = GetSubMenu(*(HMENU *)(this + 64), *(_DWORD *)(this + 44));
  hMenu = result;
  if ( result )
  {
    *(_DWORD *)(this + 28) = 1;
    sub_417DD2((HWND *)this, *(_DWORD *)(this + 44), 1u);
    v7.x = 0;
    v5 = *(_DWORD *)(this + 44);
    v7.y = 0;
    v8 = 0;
    v9 = 0;
    sub_417DA2((HWND *)this, v5, (LPARAM)&v7);
    Points.x = v7.x;
    Points.y = v9;
    MapWindowPoints(*(HWND *)(this + 52), 0, &Points, 1u);
    MapWindowPoints(*(HWND *)(this + 52), 0, &v7, 2u);
    tpm.cbSize = 20;
    dword_448C38 = this;
    tpm.rcExclude.left = v7.x;
    tpm.rcExclude.top = v7.y;
    tpm.rcExclude.right = v8;
    tpm.rcExclude.bottom = v9;
    CurrentThreadId = GetCurrentThreadId();
    hhk = SetWindowsHookExW(-1, (HOOKPROC)fn, 0, CurrentThreadId);
    *(_DWORD *)(this + 20) = *(_DWORD *)(this + 44);
    *(_DWORD *)(this + 24) = -1;
    v4 = TrackPopupMenuEx(hMenu, 0x140u, Points.x, Points.y, *(HWND *)(this + 52), &tpm);
    if ( v4 )
      SendMessageW(*(HWND *)(this + 52), 0x111u, v4, -1342308352);
    *(_DWORD *)(this + 20) = -1;
    sub_417DD2((HWND *)this, *(_DWORD *)(this + 44), 0);
    result = (HMENU)UnhookWindowsHookEx(hhk);
    hhk = 0;
    dword_448C38 = 0;
    *(_DWORD *)(this + 32) = 0;
  }
  return result;
}
// 448C38: using guessed type int dword_448C38;

//----- (004181F7) --------------------------------------------------------
LRESULT __stdcall fn(int code, WPARAM wParam, _DWORD *lParam)
{
  if ( !dword_448C38 || code != 2 )
    return CallNextHookEx(hhk, code, wParam, (LPARAM)lParam);
  if ( sub_417E0C(dword_448C38, lParam) )
    return 1;
  return CallNextHookEx(hhk, 2, wParam, (LPARAM)lParam);
}
// 448C38: using guessed type int dword_448C38;

//----- (0041823E) --------------------------------------------------------
int __thiscall sub_41823E(int *this, int a2, int a3)
{
  _DWORD *v3; // eax

  v3 = this + 11;
  if ( this[11] < 0 )
    *v3 = this[15] - 1;
  if ( *v3 >= this[15] )
    *v3 = 0;
  sub_4180D7((int)this);
  return 1;
}

//----- (00418262) --------------------------------------------------------
BOOL __thiscall sub_418262(int this, int a2, LPARAM wParam)
{
  LRESULT v4; // eax
  int v5; // ecx
  int v7; // [esp-8h] [ebp-34h]
  LPARAM lParam[2]; // [esp+Ch] [ebp-20h] BYREF
  int v9; // [esp+14h] [ebp-18h]
  struct tagRECT Rect; // [esp+1Ch] [ebp-10h] BYREF

  if ( !*(_DWORD *)(this + 76) )
    *(_DWORD *)(this + 76) = sub_415BCD(0, 0x5600994Cu, *(HWND *)(this + 56), 0);
  memset(&Rect, 0, sizeof(Rect));
  GetClientRect(*(HWND *)(this + 52), &Rect);
  if ( wParam )
    sub_417B9B((_DWORD *)this, *(HWND *)(this + 76), a2, wParam, 0, 0);
  v4 = SendMessageW(*(HWND *)(this + 76), 0x418u, 0, 0);
  SendMessageW(*(HWND *)(this + 76), 0x41Du, v4 - 1, (LPARAM)lParam);
  v5 = Rect.top + *(_DWORD *)(this + 4);
  v7 = *(_DWORD *)(this + 72);
  Rect.left = Rect.right - v9;
  return SetWindowPos(*(HWND *)(this + 76), 0, Rect.right - v9 + *(_DWORD *)(this + 8), v5, v9, v7, 0x40u);
}
// 418262: using guessed type LPARAM lParam[2];

//----- (00418309) --------------------------------------------------------
HWND __thiscall sub_418309(HWND *this)
{
  int v2; // esi
  HWND result; // eax
  HWND v4; // ebx

  v2 = 0;
  result = this[19];
  if ( result )
  {
    result = (HWND)SendMessageW(result, 0x418u, 0, 0);
    v4 = result;
    if ( (int)result > 0 )
    {
      do
        result = (HWND)SendMessageW(this[19], 0x416u, (WPARAM)v4 - v2++ - 1, 0);
      while ( v2 < (int)v4 );
    }
  }
  return result;
}

//----- (0041834A) --------------------------------------------------------
_DWORD *__thiscall sub_41834A(_DWORD *this)
{
  this[51] = 0;
  this[50] = &off_41EFE4;
  `eh vector constructor iterator'(
    this + 52,
    4u,
    16,
    (void (__thiscall *)(void *))CString::CString,
    (void (__thiscall *)(void *))CString::~CString);
  CString::CString((CString *)(this + 68));
  *this = &off_41F04C;
  this[1] = 0xFFFFFF;
  this[17] = 4210752;
  this[33] = -5;
  CString::operator=(this + 52, aBase);
  this[2] = 0;
  this[18] = 4210752;
  CString::operator=(this + 53, a64);
  this[34] = 5;
  this[3] = 13132800;
  this[19] = 4210752;
  CString::operator=(this + 54, aImage);
  this[35] = -5;
  this[4] = 0xFFFFFF;
  this[20] = 4210752;
  CString::operator=(this + 55, aOk_0);
  this[36] = 0;
  this[49] = 4;
  CString::operator=(this + 68, aDesktopApp);
  return this;
}
// 41A0F8: using guessed type int __thiscall CString::operator=(_DWORD, _DWORD);
// 41EFE4: using guessed type struct CRuntimeClass *(__thiscall *off_41EFE4)(CBrush *__hidden this);
// 41F04C: using guessed type int (__thiscall *off_41F04C)(void *, char);

//----- (0041845C) --------------------------------------------------------
_DWORD *__thiscall sub_41845C(_DWORD *this, char a2)
{
  sub_418478(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00418478) --------------------------------------------------------
int __thiscall sub_418478(_DWORD *this)
{
  int result; // eax

  *this = &off_41F04C;
  CString::~CString((CString *)(this + 68));
  `eh vector destructor iterator'(this + 52, 4u, 16, (void (__thiscall *)(void *))CString::~CString);
  this[50] = &off_41F00C;
  result = CGdiObject::DeleteObject((CGdiObject *)(this + 50));
  this[50] = &off_41EFF8;
  return result;
}
// 41EFF8: using guessed type struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this);
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);
// 41F04C: using guessed type int (__thiscall *off_41F04C)(void *, char);

//----- (004184EA) --------------------------------------------------------
int __thiscall sub_4184EA(char *this, __int16 a2)
{
  CGdiObject *v2; // esi
  HBRUSH SolidBrush; // eax
  HBRUSH PatternBrush; // eax
  int v5; // esi
  struct CRuntimeClass *(__thiscall **v7)(CGdiObject *__hidden); // [esp+4h] [ebp-14h] BYREF
  HBITMAP v8; // [esp+8h] [ebp-10h]
  int v9; // [esp+14h] [ebp-4h]

  v2 = (CGdiObject *)(this + 200);
  SolidBrush = CreateSolidBrush(0xFFu);
  CGdiObject::Attach(v2, SolidBrush);
  v8 = 0;
  v7 = &off_41F050;
  v9 = 0;
  sub_418EA9((CGdiObject *)&v7, a2);
  PatternBrush = CreatePatternBrush(&v7 != 0 ? v8 : 0);
  v5 = CGdiObject::Attach(v2, PatternBrush);
  v7 = &off_41F00C;
  v9 = 1;
  CGdiObject::DeleteObject((CGdiObject *)&v7);
  return v5;
}
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);
// 41F050: using guessed type struct CRuntimeClass *(__thiscall *off_41F050)(CBitmap *__hidden this);

//----- (0041856C) --------------------------------------------------------
void __stdcall sub_41856C(HDC hdc, LPCWSTR lpchText, HGDIOBJ *a3, LPRECT lprc)
{
  LPRECT v4; // ebx
  LONG *p_right; // esi
  HGDIOBJ *v6; // esi
  double v7; // st7
  double v8; // st7
  HFONT v9; // eax
  LOGFONTW pv; // [esp+Ch] [ebp-7Ch] BYREF
  LONG left; // [esp+68h] [ebp-20h]
  LONG top; // [esp+6Ch] [ebp-1Ch]
  LONG v13; // [esp+70h] [ebp-18h]
  LONG v14; // [esp+74h] [ebp-14h]
  int v15; // [esp+78h] [ebp-10h]
  int v16; // [esp+84h] [ebp-4h]

  v4 = lprc;
  v16 = 0;
  left = lprc->left;
  top = lprc->top;
  p_right = &lprc->right;
  lprc = 0;
  v13 = *p_right;
  v14 = p_right[1];
  while ( 1 )
  {
    v6 = a3;
    SelectObject(hdc, a3[1]);
    DrawTextW(hdc, lpchText, -1, v4, 0xC21u);
    if ( (int)lprc >= 100
      || (v15 = v4->right - v4->left, v7 = (double)v15, v15 = v13 - left, (double)(v13 - left) * 0.9 >= v7) )
    {
      v15 = v4->bottom - v4->top;
      v8 = (double)v15;
      v15 = v14 - top;
      if ( (double)(v14 - top) * 0.9 >= v8 )
        break;
    }
    lprc = (LPRECT)((char *)lprc + 1);
    GetObjectW(v6[1], 92, &pv);
    v4->left = left;
    v4->top = top;
    ++pv.lfHeight;
    v4->right = v13;
    v4->bottom = v14;
    v9 = CreateFontIndirectW(&pv);
    CGdiObject::Attach((CGdiObject *)a3, v9);
  }
  v16 = -1;
  CString::~CString((CString *)&lpchText);
}

//----- (00418655) --------------------------------------------------------
int __thiscall sub_418655(int this, HWND hWnd, char a3)
{
  CGdiObject *v4; // eax
  HBITMAP Bitmap; // eax
  CGdiObject *v6; // edi
  HDC CompatibleDC; // eax
  HDC v8; // esi
  HGDIOBJ v9; // eax
  HGDIOBJ StockObject; // eax
  struct CGdiObject *v11; // eax
  LPCWSTR *v12; // eax
  LPCWSTR *v13; // eax
  HFONT v14; // eax
  const WCHAR *v15; // ecx
  bool v16; // cc
  int v17; // esi
  int v18; // eax
  int v19; // eax
  const WCHAR *Buffer; // eax
  HFONT v21; // eax
  const WCHAR *v22; // eax
  CGdiObject *v23; // esi
  void *v24; // eax
  struct tagRECT v26; // [esp-1Ch] [ebp-118h]
  struct tagRECT v27; // [esp-1Ch] [ebp-118h]
  int v28; // [esp-Ch] [ebp-108h]
  UINT v29; // [esp-8h] [ebp-104h] BYREF
  COLORREF v30; // [esp-4h] [ebp-100h]
  float v31; // [esp+0h] [ebp-FCh]
  LOGFONTW pv; // [esp+10h] [ebp-ECh] BYREF
  struct tagRECT Rect; // [esp+6Ch] [ebp-90h] BYREF
  double v34; // [esp+7Ch] [ebp-80h]
  HGDIOBJ v35; // [esp+84h] [ebp-78h]
  HDC hDC; // [esp+88h] [ebp-74h]
  RECT v37; // [esp+8Ch] [ebp-70h]
  struct tagRECT v38; // [esp+9Ch] [ebp-60h] BYREF
  char v39[4]; // [esp+ACh] [ebp-50h] BYREF
  int v40; // [esp+B0h] [ebp-4Ch]
  RECT v41; // [esp+B4h] [ebp-48h]
  int v42; // [esp+C4h] [ebp-38h]
  RECT rc; // [esp+C8h] [ebp-34h] BYREF
  _DWORD *v44; // [esp+D8h] [ebp-24h]
  CGdiObject *v45; // [esp+DCh] [ebp-20h]
  struct CRuntimeClass *(__thiscall **v46)(CGdiObject *__hidden); // [esp+E0h] [ebp-1Ch] BYREF
  HGDIOBJ h; // [esp+E4h] [ebp-18h]
  HDC hdc; // [esp+E8h] [ebp-14h]
  LPCWSTR lpchText; // [esp+ECh] [ebp-10h] BYREF
  int v50; // [esp+F8h] [ebp-4h]

  v50 = 0;
  GetClientRect(hWnd, &Rect);
  *(_QWORD *)&v37.left = 0i64;
  v37.right = Rect.right - Rect.left;
  v37.bottom = Rect.bottom - Rect.top;
  v40 = 0;
  if ( Rect.right - Rect.left < Rect.bottom - Rect.top )
  {
    *(_QWORD *)&v41.left = 0i64;
    v41.right = Rect.bottom - Rect.top;
    v41.bottom = Rect.right - Rect.left;
    *(_QWORD *)&v37.left = 0i64;
    v37.right = Rect.bottom - Rect.top;
    v40 = 1;
    v37.bottom = Rect.right - Rect.left;
  }
  rc = v37;
  v4 = (CGdiObject *)operator new(8u);
  if ( v4 )
  {
    *((_DWORD *)v4 + 1) = 0;
    *(_DWORD *)v4 = &off_41F050;
    v45 = v4;
  }
  else
  {
    v45 = 0;
  }
  Bitmap = CreateBitmap(rc.right - rc.left, rc.bottom - rc.top, 1u, 0x20u, 0);
  v6 = v45;
  CGdiObject::Attach(v45, Bitmap);
  hDC = GetDC(0);
  CompatibleDC = CreateCompatibleDC(hDC);
  v31 = *((float *)v6 + 1);
  v8 = CompatibleDC;
  hdc = CompatibleDC;
  v9 = SelectObject(CompatibleDC, (HGDIOBJ)LODWORD(v31));
  v31 = *(float *)(this + 204);
  v35 = v9;
  FillRect(v8, &rc, (HBRUSH)LODWORD(v31));
  SetTextColor(v8, 0xFFFFFFu);
  SetBkMode(v8, 1);
  StockObject = GetStockObject(17);
  if ( !StockObject )
    StockObject = GetStockObject(12);
  v11 = CGdiObject::FromHandle(StockObject);
  h = 0;
  v46 = &off_41F090;
  LOBYTE(v50) = 1;
  GetObjectW(*((HANDLE *)v11 + 1), 92, &pv);
  lpchText = (LPCWSTR)(v37.bottom - v37.top);
  v34 = (double)(v37.bottom - v37.top);
  pv.lfHeight = (__int64)-(v34 * 0.7);
  pv.lfWeight = 800;
  v12 = (LPCWSTR *)CString::CString((CString *)&lpchText, aAharoni);
  lstrcpyW(pv.lfFaceName, *v12);
  CString::~CString((CString *)&lpchText);
  v13 = (LPCWSTR *)CString::CString((CString *)&lpchText, aTahoma);
  lstrcpyW(pv.lfFaceName, *v13);
  CString::~CString((CString *)&lpchText);
  pv.lfOutPrecision = 0;
  pv.lfClipPrecision = 0;
  pv.lfPitchAndFamily = 0;
  pv.lfItalic = 1;
  pv.lfCharSet = 1;
  pv.lfQuality = 4;
  v14 = CreateFontIndirectW(&pv);
  CGdiObject::Attach((CGdiObject *)&v46, v14);
  SelectObject(hdc, h);
  v38 = rc;
  LODWORD(v31) = &v38;
  v30 = (COLORREF)&v46;
  v29 = (UINT)v15;
  lpchText = (LPCWSTR)&v29;
  CString::CString((CString *)&v29, (const struct CString *)&a3);
  sub_41856C(hdc, (LPCWSTR)v29, (HGDIOBJ *)v30, (LPRECT)LODWORD(v31));
  GetObjectW(h, 92, &pv);
  lpchText = (LPCWSTR)(v38.left + rc.right - v38.right - rc.left);
  v42 = 0;
  v16 = *(_DWORD *)(this + 196) <= 0;
  rc.top = (__int64)((double)(rc.bottom - rc.top) * 0.5 - (double)(v38.bottom - v38.top) * 0.5) - 1;
  rc.left = (__int64)((double)(int)lpchText * 0.5) - 1;
  if ( !v16 )
  {
    v44 = (_DWORD *)(this + 132);
    do
    {
      CString::CString((CString *)&lpchText, (const struct CString *)(v44 + 19));
      LOBYTE(v50) = 2;
      DrawTextW(hdc, lpchText, -1, &v38, 0xC20u);
      v41 = rc;
      v17 = v42;
      v18 = sub_418B6B(v42);
      v41.left += v18;
      v19 = sub_418B6B(v17);
      v41.right += v19;
      v31 = *(float *)(4 * v17 + this + 68);
      v30 = *(_DWORD *)(4 * v17 + this + 4);
      v29 = 2080;
      v28 = (__int64)((double)pv.lfHeight * 0.1);
      v26 = v41;
      Buffer = CString::GetBuffer((CString *)&lpchText, 0);
      sub_418AF9(hdc, Buffer, v26, v28, v29, v30, LODWORD(v31));
      LOBYTE(v50) = 1;
      rc.top += *v44;
      rc.left += v38.right - v38.left;
      CString::~CString((CString *)&lpchText);
      ++v42;
      ++v44;
    }
    while ( v42 < *(_DWORD *)(this + 196) );
  }
  pv.lfHeight = (__int64)-(v34 * 0.2);
  v21 = CreateFontIndirectW(&pv);
  CGdiObject::Attach((CGdiObject *)&v46, v21);
  SelectObject(hdc, h);
  CString::CString((CString *)v39, (const struct CString *)(this + 272));
  *(_QWORD *)&v41.left = *(_QWORD *)&v37.left;
  LODWORD(v31) = 4210752;
  v30 = 0xFFFFFF;
  v29 = 2090;
  v41.bottom = rc.bottom + pv.lfHeight + 2;
  v41.right = rc.right;
  *(_QWORD *)&v27.left = *(_QWORD *)&v37.left;
  *(_QWORD *)&v27.right = __PAIR64__(v41.bottom, rc.right);
  LOBYTE(v50) = 3;
  v22 = CString::GetBuffer((CString *)v39, 0);
  sub_418AF9(hdc, v22, v27, -3, v29, v30, LODWORD(v31));
  SelectObject(hdc, v35);
  DeleteDC(hdc);
  ReleaseDC(0, hDC);
  v23 = v45;
  if ( v40 )
  {
    if ( v45 )
      v24 = (void *)*((_DWORD *)v45 + 1);
    else
      v24 = 0;
    *((_DWORD *)v23 + 1) = sub_418B70(v24, 90.0);
  }
  SendMessageW(hWnd, 0x172u, 0, *((_DWORD *)v23 + 1));
  LOBYTE(v50) = 1;
  CString::~CString((CString *)v39);
  v46 = &off_41F00C;
  LOBYTE(v50) = 4;
  CGdiObject::DeleteObject((CGdiObject *)&v46);
  v50 = -1;
  v46 = &off_41EFF8;
  CString::~CString((CString *)&a3);
  return 1;
}
// 418863: variable 'v15' is possibly undefined
// 41EFF8: using guessed type struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this);
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);
// 41F050: using guessed type struct CRuntimeClass *(__thiscall *off_41F050)(CBitmap *__hidden this);
// 41F090: using guessed type struct CRuntimeClass *(__thiscall *off_41F090)(CFont *__hidden this);
// 418655: using guessed type char var_50[4];

//----- (00418AF9) --------------------------------------------------------
int __stdcall sub_418AF9(
        HDC hdc,
        LPCWSTR lpString,
        struct tagRECT rc,
        int a4,
        UINT format,
        COLORREF a6,
        COLORREF color)
{
  int v7; // eax
  int v8; // eax
  UINT v10; // [esp-10h] [ebp-10h]
  UINT v11; // [esp-10h] [ebp-10h]

  if ( dword_444FD0 == 20 )
    format |= 0x20002u;
  SetTextColor(hdc, color);
  v10 = format;
  v7 = lstrlenW(lpString);
  DrawTextW(hdc, lpString, v7, &rc, v10);
  rc.top += a4;
  rc.left += a4;
  SetTextColor(hdc, a6);
  v11 = format;
  v8 = lstrlenW(lpString);
  return DrawTextW(hdc, lpString, v8, &rc, v11);
}

//----- (00418B6B) --------------------------------------------------------
int __stdcall sub_418B6B(int a1)
{
  return 0;
}

//----- (00418B70) --------------------------------------------------------
HBITMAP __stdcall sub_418B70(HANDLE h, float a2)
{
  HBRUSH SolidBrush; // eax
  double v3; // st7
  double v4; // st6
  __int64 v5; // rax
  double v6; // st6
  double v7; // st5
  double v8; // st4
  int v9; // edi
  HDC v10; // ecx
  HDC v11; // edx
  HDC v12; // ecx
  HDC v13; // ecx
  LONG v14; // edi
  LONG bottom; // ecx
  LONG v16; // edi
  LONG v17; // edi
  HDC v18; // edi
  HDC v19; // edi
  XFORM xf; // [esp+14h] [ebp-78h] BYREF
  char pv[4]; // [esp+2Ch] [ebp-60h] BYREF
  int cy; // [esp+30h] [ebp-5Ch]
  int hDest; // [esp+34h] [ebp-58h]
  struct CRuntimeClass *(__thiscall **v25)(CGdiObject *__hidden); // [esp+44h] [ebp-48h] BYREF
  HBRUSH v26; // [esp+48h] [ebp-44h]
  HBITMAP CompatibleBitmap; // [esp+4Ch] [ebp-40h]
  HGDIOBJ v28; // [esp+50h] [ebp-3Ch]
  HGDIOBJ v29; // [esp+54h] [ebp-38h]
  RECT rc; // [esp+58h] [ebp-34h] BYREF
  LONG v31; // [esp+68h] [ebp-24h]
  HDC v32; // [esp+6Ch] [ebp-20h]
  HDC v33; // [esp+70h] [ebp-1Ch]
  HDC hdc; // [esp+74h] [ebp-18h]
  HDC hdcSrc; // [esp+78h] [ebp-14h]
  HDC hDC; // [esp+7Ch] [ebp-10h]
  int v37; // [esp+88h] [ebp-4h]
  float hb; // [esp+94h] [ebp+8h]
  HANDLE ha; // [esp+94h] [ebp+8h]
  float v40; // [esp+98h] [ebp+Ch]

  GetObjectW(h, 24, pv);
  *(float *)&hdc = COERCE_FLOAT(GetDC(0));
  hdcSrc = CreateCompatibleDC(hdc);
  v29 = SelectObject(hdcSrc, h);
  hDC = CreateCompatibleDC(hdc);
  CompatibleBitmap = CreateCompatibleBitmap(hdc, hDest, cy);
  v28 = SelectObject(hDC, CompatibleBitmap);
  v26 = 0;
  v25 = &off_41EFE4;
  v37 = 0;
  SolidBrush = CreateSolidBrush(0);
  CGdiObject::Attach((CGdiObject *)&v25, SolidBrush);
  rc.right = cy;
  rc.left = 0;
  rc.top = 0;
  rc.bottom = hDest;
  FillRect(hDC, &rc, &v25 != 0 ? v26 : 0);
  rc.right = hDest;
  rc.left = 0;
  rc.top = 0;
  rc.bottom = cy;
  FillRect(hDC, &rc, &v25 != 0 ? v26 : 0);
  *(double *)&rc.right = a2 * 0.017452938;
  v40 = cos(*(double *)&rc.right);
  v3 = sin(*(double *)&rc.right);
  v4 = (double)hDest;
  hb = v4 * v3;
  v5 = (__int64)(v4 * v3);
  v6 = v4 * v40;
  v32 = (HDC)v5;
  v7 = (double)cy;
  rc.bottom = (__int64)v6;
  v8 = v7 * v40;
  *(float *)&hdc = v8;
  v9 = (__int64)(v8 + hb);
  v33 = (HDC)v9;
  v31 = (__int64)(v6 - v7 * v3);
  hdc = (HDC)(__int64)*(float *)&hdc;
  ha = (HANDLE)(__int64)((double)-cy * v3);
  v10 = (HDC)v9;
  if ( v9 >= (int)hdc )
    v10 = hdc;
  v11 = v32;
  if ( (int)v32 >= (int)v10 )
  {
    v12 = (HDC)v9;
    if ( v9 >= (int)hdc )
      v12 = hdc;
  }
  else
  {
    v12 = v32;
  }
  if ( (int)v12 <= 0 )
  {
    v13 = (HDC)v9;
    if ( v9 >= (int)hdc )
      v13 = hdc;
    if ( (int)v32 >= (int)v13 )
    {
      v11 = (HDC)v9;
      if ( v9 >= (int)hdc )
        v11 = hdc;
    }
  }
  else
  {
    v11 = 0;
  }
  v14 = (__int64)((double)-cy * v3);
  if ( v31 < (int)ha )
    v14 = v31;
  bottom = rc.bottom;
  if ( rc.bottom >= v14 )
  {
    v16 = (__int64)((double)-cy * v3);
    if ( v31 < (int)ha )
      v16 = v31;
  }
  else
  {
    v16 = rc.bottom;
  }
  if ( v16 <= 0 )
  {
    v17 = (__int64)((double)-cy * v3);
    if ( v31 < (int)ha )
      v17 = v31;
    if ( rc.bottom >= v17 )
    {
      bottom = (__int64)((double)-cy * v3);
      if ( v31 < (int)ha )
        bottom = v31;
    }
  }
  else
  {
    bottom = 0;
  }
  v18 = hdc;
  if ( (int)v33 > (int)hdc )
    v18 = v33;
  rc.bottom = (LONG)v18;
  xf.eM12 = -v3;
  xf.eM21 = v3;
  v19 = hDC;
  xf.eDx = (float)-(int)v11;
  xf.eM11 = v40;
  xf.eM22 = v40;
  xf.eDy = (float)-bottom;
  SetGraphicsMode(hDC, 2);
  SetWorldTransform(v19, &xf);
  StretchBlt(v19, 0, 0, cy, hDest, hdcSrc, 0, 0, cy, hDest, 0xCC0020u);
  SelectObject(hdcSrc, v29);
  SelectObject(v19, v28);
  DeleteDC(hdcSrc);
  DeleteDC(v19);
  v25 = &off_41F00C;
  v37 = 1;
  CGdiObject::DeleteObject((CGdiObject *)&v25);
  return CompatibleBitmap;
}
// 41EFE4: using guessed type struct CRuntimeClass *(__thiscall *off_41EFE4)(CBrush *__hidden this);
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);
// 418B70: using guessed type char pv[4];

//----- (00418E0B) --------------------------------------------------------
CGdiObject *__thiscall sub_418E0B(CGdiObject *this, char a2)
{
  sub_418E27(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00418E27) --------------------------------------------------------
int __thiscall sub_418E27(CGdiObject *this)
{
  int result; // eax

  *(_DWORD *)this = &off_41F00C;
  result = CGdiObject::DeleteObject(this);
  *(_DWORD *)this = &off_41EFF8;
  return result;
}
// 41EFF8: using guessed type struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this);
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);

//----- (00418E5A) --------------------------------------------------------
CGdiObject *__thiscall sub_418E5A(CGdiObject *this, char a2)
{
  sub_418E76(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00418E76) --------------------------------------------------------
int __thiscall sub_418E76(CGdiObject *this)
{
  int result; // eax

  *(_DWORD *)this = &off_41F00C;
  result = CGdiObject::DeleteObject(this);
  *(_DWORD *)this = &off_41EFF8;
  return result;
}
// 41EFF8: using guessed type struct CRuntimeClass *(__thiscall *off_41EFF8)(CObject *__hidden this);
// 41F00C: using guessed type struct CRuntimeClass *(__thiscall *off_41F00C)(CGdiObject *__hidden this);

//----- (00418EA9) --------------------------------------------------------
int __thiscall sub_418EA9(CGdiObject *this, unsigned __int16 a2)
{
  HINSTANCE ResourceHandle; // eax
  HBITMAP BitmapW; // eax

  ResourceHandle = AfxFindResourceHandle((const unsigned __int16 *)a2, (const unsigned __int16 *)2);
  BitmapW = LoadBitmapW(ResourceHandle, (LPCWSTR)a2);
  return CGdiObject::Attach(this, BitmapW);
}

//----- (00418ECD) --------------------------------------------------------
BOOL __cdecl sub_418ECD(HMODULE hModule, LPCWSTR lpValueName, HKEY phkResult)
{
  wchar_t Source[260]; // [esp+8h] [ebp-410h] BYREF
  _BYTE Destination[520]; // [esp+210h] [ebp-208h] BYREF

  sub_418FFB(hModule, Source, 0x208u);
  *(_DWORD *)Destination = dword_43151C;
  memset(&Destination[4], 0, 0x204u);
  wcscat((wchar_t *)Destination, L"\"");
  wcscat((wchar_t *)Destination, Source);
  wcscat((wchar_t *)Destination, L"\" -bg");
  return sub_418F51(lpValueName, (LPCWSTR)Destination, phkResult);
}
// 43151C: using guessed type int dword_43151C;

//----- (00418F51) --------------------------------------------------------
BOOL __cdecl sub_418F51(LPCWSTR lpValueName, LPCWSTR lpString, HKEY phkResult)
{
  BOOL v3; // eax
  LSTATUS v4; // esi
  int v5; // eax

  v3 = phkResult != 0;
  phkResult = 0;
  v4 = RegOpenKeyW((HKEY)(v3 - 0x7FFFFFFF), L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", &phkResult);
  if ( !v4 )
  {
    v5 = lstrlenW(lpString);
    v4 = RegSetValueExW(phkResult, lpValueName, 0, 1u, (const BYTE *)lpString, 2 * v5);
    RegCloseKey(phkResult);
  }
  return v4 == 0;
}

//----- (00418FAF) --------------------------------------------------------
BOOL __cdecl sub_418FAF(LPCWSTR lpValueName, HKEY phkResult)
{
  BOOL v2; // eax
  LSTATUS v3; // esi

  v2 = phkResult != 0;
  phkResult = 0;
  v3 = RegOpenKeyW((HKEY)(v2 - 0x7FFFFFFF), L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", &phkResult);
  if ( !v3 )
  {
    v3 = RegDeleteValueW(phkResult, lpValueName);
    RegCloseKey(phkResult);
  }
  return v3 == 0;
}

//----- (00418FFB) --------------------------------------------------------
LPWSTR __cdecl sub_418FFB(HMODULE hModule, LPWSTR lpFilename, DWORD nSize)
{
  GetModuleFileNameW(hModule, lpFilename, nSize);
  return lpFilename;
}

//----- (00419012) --------------------------------------------------------
int __cdecl sub_419012(LPCWSTR lpValueName, int a2)
{
  HMODULE ModuleHandleW; // eax
  int v3; // eax
  BYTE Data[4]; // [esp+Ch] [ebp-C1Ch] BYREF
  char v6[2044]; // [esp+10h] [ebp-C18h] BYREF
  wchar_t Source[260]; // [esp+80Ch] [ebp-41Ch] BYREF
  _BYTE Destination[520]; // [esp+A14h] [ebp-214h] BYREF
  DWORD cbData; // [esp+C1Ch] [ebp-Ch] BYREF
  DWORD Type; // [esp+C20h] [ebp-8h] BYREF
  HKEY phkResult; // [esp+C24h] [ebp-4h] BYREF

  ModuleHandleW = GetModuleHandleW(0);
  sub_418FFB(ModuleHandleW, Source, 0x208u);
  *(_DWORD *)Destination = dword_43151C;
  memset(&Destination[4], 0, 0x204u);
  wcscat((wchar_t *)Destination, L"\"");
  wcscat((wchar_t *)Destination, Source);
  wcscat((wchar_t *)Destination, L"\" -bg");
  *(_DWORD *)Data = dword_43151C;
  phkResult = 0;
  memset(v6, 0, sizeof(v6));
  RegOpenKeyW((HKEY)((a2 != 0) - 0x7FFFFFFF), L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", &phkResult);
  cbData = 1024;
  Type = 1;
  if ( RegQueryValueExW(phkResult, lpValueName, 0, &Type, Data, &cbData) )
    return 0;
  if ( wcscmp((const wchar_t *)Destination, (const wchar_t *)Data) )
  {
    v3 = lstrlenW((LPCWSTR)Destination);
    RegSetValueExW(phkResult, lpValueName, 0, 1u, Destination, 2 * v3);
  }
  return 1;
}
// 43151C: using guessed type int dword_43151C;

//----- (00419137) --------------------------------------------------------
int __thiscall sub_419137(void *this)
{
  sub_419141((int)this);
  return atexit(unknown_libname_12);
}

//----- (00419141) --------------------------------------------------------
int __fastcall sub_419141(int a1)
{
  __int16 v2; // [esp+0h] [ebp-2h] BYREF

  v2 = HIWORD(a1);
  return sub_4191EE((int)&unk_448C58, (char *)&v2, (_BYTE *)&v2 + 1);
}

//----- (00419185) --------------------------------------------------------
LRESULT __thiscall sub_419185(_DWORD *this, HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  LRESULT (__stdcall *v5)(HWND, UINT, WPARAM, LPARAM); // esi

  v5 = (LRESULT (__stdcall *)(HWND, UINT, WPARAM, LPARAM))this[2];
  if ( (*(int (__thiscall **)(_DWORD *, HWND, UINT, WPARAM, LPARAM))(*this + 8))(this, hWnd, Msg, wParam, lParam) )
    return 0;
  else
    return CallWindowProcW(v5, hWnd, Msg, wParam, lParam);
}

//----- (004191BD) --------------------------------------------------------
void __thiscall sub_4191BD(_DWORD *this)
{
  *this = &off_41EF5C;
}
// 41EF5C: using guessed type void *off_41EF5C;

//----- (004191C4) --------------------------------------------------------
BOOL __thiscall sub_4191C4(HWND *this, HWND hWndInsertAfter, int X, int Y, int a5, int a6, UINT uFlags)
{
  return SetWindowPos(this[1], hWndInsertAfter, X, Y, a5 - X, a6 - Y, uFlags);
}

//----- (004191EE) --------------------------------------------------------
int __thiscall sub_4191EE(int this, char *a2, _BYTE *a3)
{
  char v4; // al

  *(_BYTE *)this = *a3;
  v4 = *a2;
  *(_BYTE *)(this + 8) = 0;
  *(_BYTE *)(this + 1) = v4;
  sub_4195D6((_DWORD *)this);
  return this;
}

//----- (00419211) --------------------------------------------------------
void __thiscall sub_419211(int this)
{
  void *v2; // esi
  int v3; // [esp+4h] [ebp-4h] BYREF

  sub_419272((_DWORD *)this, &v3, **(_DWORD ***)(this + 4), *(_DWORD **)(this + 4));
  operator delete(*(void **)(this + 4));
  *(_DWORD *)(this + 4) = 0;
  *(_DWORD *)(this + 12) = 0;
  v2 = 0;
  std::_Lockit::_Lockit((std::_Lockit *)&v3);
  if ( !--dword_448C6C )
  {
    v2 = (void *)dword_448C68;
    dword_448C68 = 0;
  }
  std::_Lockit::~_Lockit((std::_Lockit *)&v3);
  if ( v2 )
    operator delete(v2);
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 448C68: using guessed type int dword_448C68;
// 448C6C: using guessed type int dword_448C6C;

//----- (00419272) --------------------------------------------------------
_DWORD *__thiscall sub_419272(_DWORD *this, _DWORD *a2, _DWORD *a3, _DWORD *a4)
{
  _DWORD *v5; // ecx
  _DWORD *v6; // eax
  void ***v7; // ebx
  int v8; // eax
  void ***i; // edi
  _DWORD *v10; // eax
  _DWORD *result; // eax
  _DWORD *v12; // edi
  int v13; // [esp+8h] [ebp-4h] BYREF

  v5 = a3;
  if ( this[3] && (v6 = (_DWORD *)this[1], a3 == (_DWORD *)*v6) && a4 == v6 )
  {
    v7 = (void ***)v6[1];
    v8 = dword_448C68;
    for ( i = v7; i != (void ***)dword_448C68; v7 = i )
    {
      sub_4195A0(i[2]);
      i = (void ***)*i;
      operator delete(v7);
      v8 = dword_448C68;
    }
    *(_DWORD *)(this[1] + 4) = v8;
    v10 = (_DWORD *)this[1];
    this[3] = 0;
    *v10 = v10;
    *(_DWORD *)(this[1] + 8) = this[1];
    result = a2;
    *a2 = *(_DWORD *)this[1];
  }
  else
  {
    while ( v5 != a4 )
    {
      v12 = v5;
      sub_4196EB(&a3);
      sub_419309(this, &v13, v12);
      v5 = a3;
    }
    result = a2;
    *a2 = v5;
  }
  return result;
}
// 448C68: using guessed type int dword_448C68;

//----- (00419309) --------------------------------------------------------
_DWORD *__thiscall sub_419309(_DWORD *this, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // edi
  _DWORD *v4; // esi
  _DWORD *v5; // ebx
  bool v6; // zf
  _DWORD *v7; // ecx
  _DWORD *v8; // eax
  _DWORD *v9; // edx
  _DWORD *v10; // ebx
  int v11; // ecx
  _DWORD *v12; // ecx
  int v13; // ecx
  int v14; // ecx
  int v15; // edx
  int v16; // ecx
  _DWORD *v17; // ecx
  _DWORD *v18; // edx
  _DWORD *v19; // edx
  _DWORD *v20; // ebx
  int v21; // edx
  _DWORD *v22; // ebx
  _DWORD *v23; // edi
  int v24; // eax
  _DWORD *v25; // eax
  _DWORD *result; // eax
  char v27[4]; // [esp+Ch] [ebp-1Ch] BYREF
  _DWORD *v28; // [esp+10h] [ebp-18h]
  void *v29; // [esp+14h] [ebp-14h]
  _DWORD *v30; // [esp+18h] [ebp-10h]
  int v31; // [esp+24h] [ebp-4h]

  v30 = this;
  v3 = a3;
  sub_4196EB(&a3);
  v4 = (_DWORD *)*v3;
  v5 = v3 + 2;
  v6 = *v3 == dword_448C68;
  v29 = v3;
  v28 = v3 + 2;
  if ( v6 )
  {
    v4 = (_DWORD *)*v5;
  }
  else
  {
    v7 = (_DWORD *)*v5;
    if ( *v5 != dword_448C68 )
    {
      while ( *v7 != dword_448C68 )
        v7 = (_DWORD *)*v7;
      v4 = (_DWORD *)v7[2];
      v29 = v7;
      v28 = v7 + 2;
    }
  }
  std::_Lockit::_Lockit((std::_Lockit *)v27);
  v8 = v29;
  v31 = 0;
  if ( v29 == v3 )
  {
    v15 = (int)v30;
    v4[1] = *((_DWORD *)v29 + 1);
    v16 = *(_DWORD *)(v15 + 4);
    if ( *(_DWORD **)(v16 + 4) == v3 )
    {
      *(_DWORD *)(v16 + 4) = v4;
    }
    else
    {
      v17 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v17 == v3 )
        *v17 = v4;
      else
        v17[2] = v4;
    }
    v18 = *(_DWORD **)(v15 + 4);
    v28 = v18;
    if ( (_DWORD *)*v18 == v3 )
    {
      if ( *v5 == dword_448C68 )
      {
        *v18 = v3[1];
      }
      else
      {
        v19 = (_DWORD *)*v4;
        v20 = v4;
        while ( v19 != (_DWORD *)dword_448C68 )
        {
          v20 = v19;
          v19 = (_DWORD *)*v19;
        }
        *v28 = v20;
      }
    }
    v21 = v30[1];
    if ( *(_DWORD **)(v21 + 8) == v3 )
    {
      if ( *v3 == dword_448C68 )
      {
        *(_DWORD *)(v21 + 8) = v3[1];
      }
      else
      {
        v22 = (_DWORD *)v4[2];
        v23 = v4;
        while ( v22 != (_DWORD *)dword_448C68 )
        {
          v23 = v22;
          v22 = (_DWORD *)v22[2];
        }
        *(_DWORD *)(v21 + 8) = v23;
      }
    }
    v10 = v30;
  }
  else
  {
    *(_DWORD *)(*v3 + 4) = v29;
    *v8 = *v3;
    if ( v8 == (_DWORD *)*v5 )
    {
      v4[1] = v8;
    }
    else
    {
      v9 = v28;
      v4[1] = v8[1];
      *(_DWORD *)v8[1] = v4;
      *v9 = *v5;
      *(_DWORD *)(*v5 + 4) = v8;
    }
    v10 = v30;
    v11 = v30[1];
    if ( *(_DWORD **)(v11 + 4) == v3 )
    {
      *(_DWORD *)(v11 + 4) = v8;
    }
    else
    {
      v12 = (_DWORD *)v3[1];
      if ( (_DWORD *)*v12 == v3 )
        *v12 = v8;
      else
        v12[2] = v8;
    }
    v13 = v3[1];
    v29 = v3;
    v8[1] = v13;
    v14 = v8[5];
    v8[5] = v3[5];
    v3[5] = v14;
    v8 = v3;
  }
  if ( v8[5] == 1 )
  {
    while ( v4 != *(_DWORD **)(v10[1] + 4) && v4[5] == 1 )
    {
      v24 = v4[1];
      if ( v4 == *(_DWORD **)v24 )
      {
        v25 = *(_DWORD **)(v24 + 8);
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_419661(v10, v4[1]);
          v25 = *(_DWORD **)(v4[1] + 8);
        }
        if ( *(_DWORD *)(*v25 + 20) != 1 || *(_DWORD *)(v25[2] + 20) != 1 )
        {
          if ( *(_DWORD *)(v25[2] + 20) == 1 )
          {
            *(_DWORD *)(*v25 + 20) = 1;
            v25[5] = 0;
            sub_4196A5(v10, v25);
            v25 = *(_DWORD **)(v4[1] + 8);
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(v25[2] + 20) = 1;
          sub_419661(v10, v4[1]);
          break;
        }
      }
      else
      {
        v25 = *(_DWORD **)v24;
        if ( !v25[5] )
        {
          v25[5] = 1;
          *(_DWORD *)(v4[1] + 20) = 0;
          sub_4196A5(v10, (_DWORD *)v4[1]);
          v25 = *(_DWORD **)v4[1];
        }
        if ( *(_DWORD *)(v25[2] + 20) != 1 || *(_DWORD *)(*v25 + 20) != 1 )
        {
          if ( *(_DWORD *)(*v25 + 20) == 1 )
          {
            *(_DWORD *)(v25[2] + 20) = 1;
            v25[5] = 0;
            sub_419661(v10, (int)v25);
            v25 = *(_DWORD **)v4[1];
          }
          v25[5] = *(_DWORD *)(v4[1] + 20);
          *(_DWORD *)(v4[1] + 20) = 1;
          *(_DWORD *)(*v25 + 20) = 1;
          sub_4196A5(v10, (_DWORD *)v4[1]);
          break;
        }
      }
      v25[5] = 0;
      v4 = (_DWORD *)v4[1];
    }
    v4[5] = 1;
  }
  v31 = -1;
  std::_Lockit::~_Lockit((std::_Lockit *)v27);
  operator delete(v29);
  result = a2;
  --v10[3];
  *a2 = a3;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 448C68: using guessed type int dword_448C68;
// 419309: using guessed type char var_1C[4];

//----- (004195A0) --------------------------------------------------------
void __stdcall sub_4195A0(void **a1)
{
  void **v1; // edi
  void **i; // esi

  v1 = a1;
  for ( i = a1; i != (void **)dword_448C68; v1 = i )
  {
    sub_4195A0(i[2]);
    i = (void **)*i;
    operator delete(v1);
  }
}
// 448C68: using guessed type int dword_448C68;

//----- (004195D6) --------------------------------------------------------
int __thiscall sub_4195D6(_DWORD *this)
{
  _DWORD *v2; // esi
  int v3; // esi
  _DWORD *v4; // eax
  int result; // eax
  char v6[4]; // [esp+Ch] [ebp-8h] BYREF
  void *v7; // [esp+10h] [ebp-4h]

  v2 = operator new(0x18u);
  v2[1] = 0;
  v2[5] = 1;
  v7 = v2;
  std::_Lockit::_Lockit((std::_Lockit *)v6);
  if ( !dword_448C68 )
  {
    dword_448C68 = (int)v2;
    *v2 = 0;
    v7 = 0;
    *(_DWORD *)(dword_448C68 + 8) = 0;
  }
  ++dword_448C6C;
  std::_Lockit::~_Lockit((std::_Lockit *)v6);
  if ( v7 )
    operator delete(v7);
  v3 = dword_448C68;
  v4 = operator new(0x18u);
  v4[1] = v3;
  v4[5] = 0;
  this[1] = v4;
  this[3] = 0;
  *v4 = v4;
  result = this[1];
  *(_DWORD *)(result + 8) = result;
  return result;
}
// 41D458: using guessed type _DWORD __thiscall std::_Lockit::_Lockit(std::_Lockit *__hidden this);
// 41D494: using guessed type void __thiscall std::_Lockit::~_Lockit(std::_Lockit *__hidden this);
// 448C68: using guessed type int dword_448C68;
// 448C6C: using guessed type int dword_448C6C;
// 4195D6: using guessed type char var_8[4];

//----- (00419661) --------------------------------------------------------
_DWORD *__thiscall sub_419661(_DWORD *this, int a2)
{
  _DWORD *result; // eax
  int v3; // ecx
  _DWORD *v4; // ecx

  result = *(_DWORD **)(a2 + 8);
  *(_DWORD *)(a2 + 8) = *result;
  if ( *result != dword_448C68 )
    *(_DWORD *)(*result + 4) = a2;
  result[1] = *(_DWORD *)(a2 + 4);
  v3 = this[1];
  if ( a2 == *(_DWORD *)(v3 + 4) )
  {
    *(_DWORD *)(v3 + 4) = result;
  }
  else
  {
    v4 = *(_DWORD **)(a2 + 4);
    if ( a2 == *v4 )
      *v4 = result;
    else
      v4[2] = result;
  }
  *result = a2;
  *(_DWORD *)(a2 + 4) = result;
  return result;
}
// 448C68: using guessed type int dword_448C68;

//----- (004196A5) --------------------------------------------------------
int __thiscall sub_4196A5(_DWORD *this, _DWORD *a2)
{
  int result; // eax
  int v3; // esi
  int v4; // ecx
  _DWORD *v5; // ecx

  result = *a2;
  *a2 = *(_DWORD *)(*a2 + 8);
  v3 = *(_DWORD *)(result + 8);
  if ( v3 != dword_448C68 )
    *(_DWORD *)(v3 + 4) = a2;
  *(_DWORD *)(result + 4) = a2[1];
  v4 = this[1];
  if ( a2 == *(_DWORD **)(v4 + 4) )
  {
    *(_DWORD *)(v4 + 4) = result;
  }
  else
  {
    v5 = (_DWORD *)a2[1];
    if ( a2 == (_DWORD *)v5[2] )
      v5[2] = result;
    else
      *v5 = result;
  }
  *(_DWORD *)(result + 8) = a2;
  a2[1] = result;
  return result;
}
// 448C68: using guessed type int dword_448C68;

//----- (004196EB) --------------------------------------------------------
_DWORD *__thiscall sub_4196EB(void *this)
{
  _DWORD *result; // eax

  result = *(_DWORD **)(*(_DWORD *)this + 8);
  if ( result != (_DWORD *)dword_448C68 )
  {
    while ( *result != dword_448C68 )
      result = (_DWORD *)*result;
LABEL_8:
    *(_DWORD *)this = result;
    return result;
  }
  for ( result = *(_DWORD **)(*(_DWORD *)this + 4); *(_DWORD *)this == result[2]; result = (_DWORD *)result[1] )
    *(_DWORD *)this = result;
  if ( *(_DWORD **)(*(_DWORD *)this + 8) != result )
    goto LABEL_8;
  return result;
}
// 448C68: using guessed type int dword_448C68;

//----- (00419721) --------------------------------------------------------
_DWORD *__thiscall sub_419721(_DWORD *this)
{
  _DWORD *result; // eax

  result = this;
  *this = &off_41F104;
  this[131] = 0;
  this[132] = 0;
  this[133] = 0;
  this[134] = 0;
  this[135] = 0;
  this[10128] = 0;
  this[10129] = 0x20000;
  this[10130] = 0;
  *((_WORD *)this + 20262) = 0;
  *((_WORD *)this + 4) = 0;
  *((_WORD *)this + 5) = 0;
  *((_WORD *)this + 2) = 0;
  *((_WORD *)this + 3) = 128;
  return result;
}
// 41F104: using guessed type int (__thiscall *off_41F104)(void *, char);

//----- (00419779) --------------------------------------------------------
_DWORD *__thiscall sub_419779(_DWORD *this, char a2)
{
  sub_419795(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (00419795) --------------------------------------------------------
void __thiscall sub_419795(_DWORD *this)
{
  *this = &off_41F104;
}
// 41F104: using guessed type int (__thiscall *off_41F104)(void *, char);

//----- (0041979C) --------------------------------------------------------
void __noreturn sub_41979C()
{
  exit(1);
}
// 41979C: using guessed type void __noreturn sub_41979C();

//----- (004197A4) --------------------------------------------------------
__int16 __thiscall sub_4197A4(int this)
{
  *(_WORD *)(this + 10) >>= 1;
  if ( !*(_WORD *)(this + 10) )
  {
    if ( dword_448C70 )
    {
      if ( dword_448C74 + 1 >= dword_448C78 )
        return -1;
      *(_WORD *)(this + 8) = *(unsigned __int8 *)(dword_448C74 + dword_448C70);
      ++dword_448C74;
    }
    else
    {
      *(_WORD *)(this + 8) = getc(*(FILE **)(this + 524));
    }
    *(_WORD *)(this + 10) = 128;
  }
  return (*(_WORD *)(this + 10) & *(_WORD *)(this + 8)) != 0;
}
// 448C70: using guessed type int dword_448C70;
// 448C74: using guessed type int dword_448C74;
// 448C78: using guessed type int dword_448C78;

//----- (0041980D) --------------------------------------------------------
__int16 __thiscall sub_41980D(_WORD *this)
{
  int v1; // edx
  _WORD *v2; // eax
  int v3; // esi
  _WORD *v4; // ecx
  int v5; // edi
  __int16 result; // ax

  this[16157] = 0;
  v1 = 314;
  v2 = this + 15842;
  do
  {
    this[(__int16)(v1 - 1) + 14899] = v1;
    *(v2 - 315) = v1 - 1;
    *v2 = 1;
    v2[314] = v2[315] + 1;
    --v1;
    --v2;
  }
  while ( (__int16)v1 >= 1 );
  this[15528] = 0;
  this[20254] = 0;
  v3 = 4296;
  v4 = this + 20253;
  v5 = 4096;
  do
  {
    result = v4[1] + 10000 / v3;
    *v4-- = result;
    --v3;
    --v5;
  }
  while ( v5 );
  return result;
}

//----- (0041988F) --------------------------------------------------------
int __thiscall sub_41988F(unsigned __int16 *this, signed __int16 a2)
{
  unsigned __int16 v2; // si
  unsigned __int16 *v3; // edx
  int v4; // edi
  int v5; // eax
  signed __int16 v6; // si
  signed __int16 v7; // di
  unsigned __int16 *v8; // edx
  signed __int16 v9; // bx
  int v10; // eax
  __int16 v11; // si
  int result; // eax
  unsigned __int16 *v13; // ecx

  if ( this[15843] >= 0x7FFFu )
  {
    v2 = 0;
    v3 = this + 15842;
    v4 = 314;
    do
    {
      v3[315] = v2;
      v5 = (*v3 + 1) >> 1;
      *v3 = v5;
      v2 += v5;
      --v3;
      --v4;
    }
    while ( v4 );
    this[15843] = v2;
  }
  v6 = a2;
  if ( this[a2 + 15528] == this[a2 + 15527] )
  {
    do
      --v6;
    while ( this[v6 + 15528] == this[v6 + 15527] );
    if ( v6 < a2 )
    {
      v7 = this[v6 + 15213];
      v8 = &this[a2 + 15213];
      v9 = *v8;
      this[v6 + 15213] = *v8;
      *v8 = v7;
      this[v7 + 14899] = a2;
      this[v9 + 14899] = v6;
    }
  }
  v10 = v6;
  ++this[v6 + 15528];
  v11 = v6 - 1;
  result = (int)&this[v10 + 15528];
  if ( v11 >= 0 )
  {
    v13 = &this[v11 + 15843];
    result = v11 + 1;
    do
    {
      ++*v13--;
      --result;
    }
    while ( result );
  }
  return result;
}

//----- (0041996C) --------------------------------------------------------
__int16 __thiscall sub_41996C(_WORD *this, unsigned __int16 a2)
{
  int v2; // edi
  __int16 v3; // si
  int v4; // kr00_4

  LOWORD(v2) = 314;
  v3 = 1;
  do
  {
    v4 = v3 + (__int16)v2;
    if ( this[(__int16)(v4 / 2) + 15843] <= a2 )
      v2 = v4 / 2;
    else
      v3 = v4 / 2 + 1;
  }
  while ( v3 < (__int16)v2 );
  return v3;
}

//----- (004199A9) --------------------------------------------------------
int __thiscall sub_4199A9(_WORD *this, unsigned __int16 a2)
{
  int v2; // edi
  int v3; // esi
  int v4; // kr00_4

  LOWORD(v2) = 4096;
  v3 = 1;
  do
  {
    v4 = (__int16)v3 + (__int16)v2;
    if ( this[(__int16)(v4 / 2) + 16158] <= a2 )
      v2 = v4 / 2;
    else
      v3 = v4 / 2 + 1;
  }
  while ( (__int16)v3 < (__int16)v2 );
  return v3 - 1;
}

//----- (004199E6) --------------------------------------------------------
int __thiscall sub_4199E6(int *this)
{
  int *v2; // esi
  int v3; // ebx
  int result; // eax

  v2 = this + 10130;
  v3 = 17;
  do
  {
    --v3;
    result = sub_4197A4((int)this) + 2 * *v2;
    *v2 = result;
  }
  while ( v3 );
  return result;
}

//----- (00419A0C) --------------------------------------------------------
__int16 __thiscall sub_419A0C(int this)
{
  int v2; // ecx
  unsigned int v3; // edi
  __int16 v4; // ax
  int v5; // ebx
  int v6; // ecx
  unsigned int v7; // eax
  unsigned int v8; // ecx
  __int16 v9; // bx
  signed __int16 v11; // [esp+Ch] [ebp-4h]

  v2 = *(_DWORD *)(this + 40512);
  v3 = *(_DWORD *)(this + 40516) - v2;
  v4 = sub_41996C(
         (_WORD *)this,
         ((unsigned int)*(unsigned __int16 *)(this + 31686) * (*(_DWORD *)(this + 40520) - v2 + 1) - 1) / v3);
  v5 = v4;
  v11 = v4;
  v6 = *(_DWORD *)(this + 40512);
  *(_DWORD *)(this + 40516) = v6
                            + v3 * *(unsigned __int16 *)(this + 2 * v4 + 31684) / *(unsigned __int16 *)(this + 31686);
  *(_DWORD *)(this + 40512) = v6
                            + v3 * *(unsigned __int16 *)(this + 2 * v4 + 31686) / *(unsigned __int16 *)(this + 31686);
  while ( 1 )
  {
    v7 = *(_DWORD *)(this + 40512);
    if ( v7 >= 0x10000 )
    {
      *(_DWORD *)(this + 40520) -= 0x10000;
      *(_DWORD *)(this + 40516) -= 0x10000;
      *(_DWORD *)(this + 40512) = v7 - 0x10000;
      goto LABEL_8;
    }
    if ( v7 >= 0x8000 )
    {
      v8 = *(_DWORD *)(this + 40516);
      if ( v8 <= 0x18000 )
      {
        *(_DWORD *)(this + 40520) -= 0x8000;
        *(_DWORD *)(this + 40512) = v7 - 0x8000;
        *(_DWORD *)(this + 40516) = v8 - 0x8000;
        goto LABEL_8;
      }
    }
    if ( *(_DWORD *)(this + 40516) > 0x10000u )
      break;
LABEL_8:
    *(_DWORD *)(this + 40512) *= 2;
    *(_DWORD *)(this + 40516) *= 2;
    *(_DWORD *)(this + 40520) = sub_4197A4(this) + 2 * *(_DWORD *)(this + 40520);
  }
  v9 = *(_WORD *)(this + 2 * v5 + 30426);
  sub_41988F((unsigned __int16 *)this, v11);
  return v9;
}

//----- (00419B4C) --------------------------------------------------------
__int16 __thiscall sub_419B4C(int this)
{
  int v2; // ecx
  unsigned int v3; // edi
  int v4; // ebx
  unsigned int v5; // eax
  unsigned int v6; // ecx
  __int16 v8; // [esp+Ch] [ebp-4h]

  v2 = *(_DWORD *)(this + 40512);
  v3 = *(_DWORD *)(this + 40516) - v2;
  v8 = sub_4199A9(
         (_WORD *)this,
         ((unsigned int)*(unsigned __int16 *)(this + 32316) * (*(_DWORD *)(this + 40520) - v2 + 1) - 1) / v3);
  v4 = *(_DWORD *)(this + 40512);
  *(_DWORD *)(this + 40516) = v4
                            + v3 * *(unsigned __int16 *)(this + 2 * v8 + 32316) / *(unsigned __int16 *)(this + 32316);
  *(_DWORD *)(this + 40512) = v4
                            + v3 * *(unsigned __int16 *)(this + 2 * v8 + 32318) / *(unsigned __int16 *)(this + 32316);
  while ( 1 )
  {
    v5 = *(_DWORD *)(this + 40512);
    if ( v5 >= 0x10000 )
    {
      *(_DWORD *)(this + 40520) -= 0x10000;
      *(_DWORD *)(this + 40516) -= 0x10000;
      *(_DWORD *)(this + 40512) = v5 - 0x10000;
      goto LABEL_8;
    }
    if ( v5 >= 0x8000 )
    {
      v6 = *(_DWORD *)(this + 40516);
      if ( v6 <= 0x18000 )
      {
        *(_DWORD *)(this + 40520) -= 0x8000;
        *(_DWORD *)(this + 40512) = v5 - 0x8000;
        *(_DWORD *)(this + 40516) = v6 - 0x8000;
        goto LABEL_8;
      }
    }
    if ( *(_DWORD *)(this + 40516) > 0x10000u )
      return v8;
LABEL_8:
    *(_DWORD *)(this + 40512) *= 2;
    *(_DWORD *)(this + 40516) *= 2;
    *(_DWORD *)(this + 40520) = sub_4197A4(this) + 2 * *(_DWORD *)(this + 40520);
  }
}

//----- (00419C7B) --------------------------------------------------------
size_t __thiscall sub_419C7B(int this)
{
  size_t result; // eax
  bool v3; // zf
  _DWORD *v4; // edi
  int v5; // edi
  __int16 v6; // ax
  __int16 v7; // bx
  int v8; // eax
  __int16 v9; // ax
  __int16 v10; // cx
  __int16 v11; // ax
  char v12; // bl
  int v13; // eax
  size_t v14; // [esp+Ch] [ebp-Ch]
  __int16 v15; // [esp+10h] [ebp-8h]
  int v16; // [esp+14h] [ebp-4h]

  if ( dword_448C70 )
  {
    result = this + 532;
    *(_DWORD *)(this + 532) = *(_DWORD *)dword_448C70;
    dword_448C74 += 4;
    v3 = *(_DWORD *)(this + 532) == 0;
  }
  else
  {
    v4 = (_DWORD *)(this + 532);
    result = fread((void *)(this + 532), 4u, 1u, *(FILE **)(this + 524));
    if ( !result )
      sub_41979C(this, aReadError);
    v3 = *v4 == 0;
  }
  if ( !v3 )
  {
    sub_4199E6((int *)this);
    sub_41980D((_WORD *)this);
    result = 538976288;
    v14 = 0;
    memset((void *)(this + 544), 0x20u, 0xFC4u);
    v5 = 4036;
    if ( *(_DWORD *)(this + 532) )
    {
      do
      {
        v6 = sub_419A0C(this);
        v7 = v6;
        if ( v6 >= 256 )
        {
          v9 = sub_419B4C(this);
          v10 = v7 - 253;
          v11 = (v5 - v9 - 1) & 0xFFF;
          if ( (__int16)(v7 - 253) > 0 )
          {
            v15 = v11;
            v14 += v10;
            v16 = v10;
            do
            {
              v12 = *(_BYTE *)((v15 & 0xFFF) + this + 544);
              if ( dword_448C80 )
              {
                if ( dword_448C84 + 1 < dword_448C7C )
                {
                  *(_BYTE *)(dword_448C84 + dword_448C80) = v12;
                  ++dword_448C84;
                }
              }
              else
              {
                putc(*(unsigned __int8 *)((v15 & 0xFFF) + this + 544), *(FILE **)(this + 528));
              }
              v13 = (__int16)v5;
              v5 = (v5 + 1) & 0xFFF;
              ++v15;
              v3 = v16-- == 1;
              *(_BYTE *)(v13 + this + 544) = v12;
            }
            while ( !v3 );
          }
        }
        else
        {
          if ( dword_448C80 )
          {
            if ( dword_448C84 + 1 < dword_448C7C )
            {
              *(_BYTE *)(dword_448C84 + dword_448C80) = v6;
              ++dword_448C84;
            }
          }
          else
          {
            putc(v6, *(FILE **)(this + 528));
          }
          v8 = (__int16)v5;
          v5 = (v5 + 1) & 0xFFF;
          ++v14;
          *(_BYTE *)(v8 + this + 544) = v7;
        }
        result = v14;
      }
      while ( v14 < *(_DWORD *)(this + 532) );
    }
  }
  return result;
}
// 41979C: using guessed type void __thiscall __noreturn sub_41979C(_DWORD, _DWORD);
// 448C70: using guessed type int dword_448C70;
// 448C74: using guessed type int dword_448C74;
// 448C7C: using guessed type int dword_448C7C;
// 448C80: using guessed type int dword_448C80;
// 448C84: using guessed type int dword_448C84;

//----- (00419E12) --------------------------------------------------------
__int16 __thiscall sub_419E12(int this, int a2, int a3)
{
  dword_448C70 = a2;
  dword_448C80 = a3;
  dword_448C74 = 0;
  dword_448C84 = 0;
  *(_DWORD *)(this + 524) = 0;
  *(_DWORD *)(this + 528) = 0;
  *(_DWORD *)(this + 532) = 0;
  *(_DWORD *)(this + 536) = 0;
  *(_DWORD *)(this + 540) = 0;
  *(_DWORD *)(this + 40512) = 0;
  *(_DWORD *)(this + 40516) = 0x20000;
  *(_DWORD *)(this + 40520) = 0;
  *(_WORD *)(this + 40524) = 0;
  *(_WORD *)(this + 4700) = 0;
  *(_WORD *)(this + 4702) = 0;
  sub_419C7B(this);
  dword_448C70 = 0;
  dword_448C74 = 0;
  dword_448C80 = 0;
  dword_448C84 = 0;
  return 0;
}
// 448C70: using guessed type int dword_448C70;
// 448C74: using guessed type int dword_448C74;
// 448C80: using guessed type int dword_448C80;
// 448C84: using guessed type int dword_448C84;

//----- (0041A788) --------------------------------------------------------
int __cdecl UserMathErrorFunction()
{
  return 0;
}

//----- (0041A7B0) --------------------------------------------------------
void __stdcall __noreturn sub_41A7B0(int a1)
{
  sub_41A7BE(a1, 0);
}

//----- (0041A7BE) --------------------------------------------------------
void __cdecl __noreturn sub_41A7BE(int a1, int a2)
{
  _DWORD pExceptionObject[4]; // [esp+0h] [ebp-10h] BYREF

  sub_41A7E2(pExceptionObject, a1, a2, 0);
  CxxThrowException(pExceptionObject, (_ThrowInfo *)&_TI1_AV_com_error__);
}
// 41A7BE: using guessed type _DWORD pExceptionObject[4];

//----- (0041A7E2) --------------------------------------------------------
_DWORD *__thiscall sub_41A7E2(_DWORD *this, int a2, int a3, char a4)
{
  this[3] = 0;
  this[1] = a2;
  *this = &_com_error::`vftable';
  this[2] = a3;
  if ( a3 && a4 )
    (*(void (__stdcall **)(int))(*(_DWORD *)a3 + 4))(a3);
  return this;
}
// 41F150: using guessed type void *_com_error::`vftable';

//----- (0041A814) --------------------------------------------------------
_DWORD *__thiscall sub_41A814(_DWORD *this, char a2)
{
  sub_41A85D(this);
  if ( (a2 & 1) != 0 )
    operator delete(this);
  return this;
}

//----- (0041A830) --------------------------------------------------------
_DWORD *__thiscall sub_41A830(_DWORD *this, int a2)
{
  int v3; // eax

  this[1] = *(_DWORD *)(a2 + 4);
  v3 = *(_DWORD *)(a2 + 8);
  this[3] = 0;
  this[2] = v3;
  *this = &_com_error::`vftable';
  if ( v3 )
    (*(void (__stdcall **)(int))(*(_DWORD *)v3 + 4))(v3);
  return this;
}
// 41F150: using guessed type void *_com_error::`vftable';

//----- (0041A85D) --------------------------------------------------------
HLOCAL __thiscall sub_41A85D(_DWORD *this)
{
  HLOCAL result; // eax
  void *v3; // esi

  result = (HLOCAL)this[2];
  *this = &_com_error::`vftable';
  if ( result )
    result = (HLOCAL)(*(int (__stdcall **)(HLOCAL))(*(_DWORD *)result + 8))(result);
  v3 = (void *)this[3];
  if ( v3 )
    return LocalFree(v3);
  return result;
}
// 41F150: using guessed type void *_com_error::`vftable';

//----- (0041A8BC) --------------------------------------------------------
int sub_41A8BC()
{
  int result; // eax

  result = AfxInitialize(0, 0x600u);
  byte_448CA0 = result;
  return result;
}
// 448CA0: using guessed type char byte_448CA0;

// nfuncs=989 queued=703 decompiled=703 lumina nreq=0 worse=0 better=0
// ALL OK, 703 function(s) have been successfully decompiled
